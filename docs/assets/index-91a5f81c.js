function vc(S,r){for(var o=0;o<r.length;o++){const t=r[o];if(typeof t!="string"&&!Array.isArray(t)){for(const x in t)if(x!=="default"&&!(x in S)){const b=Object.getOwnPropertyDescriptor(t,x);b&&Object.defineProperty(S,x,b.get?b:{enumerable:!0,get:()=>t[x]})}}}return Object.freeze(Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))t(x);new MutationObserver(x=>{for(const b of x)if(b.type==="childList")for(const h of b.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&t(h)}).observe(document,{childList:!0,subtree:!0});function o(x){const b={};return x.integrity&&(b.integrity=x.integrity),x.referrerPolicy&&(b.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?b.credentials="include":x.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function t(x){if(x.ep)return;x.ep=!0;const b=o(x);fetch(x.href,b)}})();/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ho="153",bc=0,Yo=1,_c=2,pl=1,xc=2,Zr=3,gn=0,dr=1,Kr=2,pn=0,oi=1,$o=2,Zo=3,Ko=4,wc=5,ii=100,Sc=101,Mc=102,Jo=103,Qo=104,Ec=200,Tc=201,Ac=202,jc=203,ml=204,gl=205,Cc=206,Rc=207,Lc=208,Pc=209,Oc=210,Dc=0,Ic=1,kc=2,Qs=3,Uc=4,Fc=5,Nc=6,Bc=7,yl=0,Gc=1,zc=2,en=0,Vc=1,Hc=2,Wc=3,Xc=4,qc=5,vl=300,li=301,ci=302,eo=303,to=304,ds=306,ro=1e3,Pr=1001,no=1002,ur=1003,ea=1004,xs=1005,pr=1006,Yc=1007,Ai=1008,mn=1009,$c=1010,Zc=1011,fo=1012,bl=1013,hn=1014,fn=1015,ji=1016,_l=1017,xl=1018,Cn=1020,Kc=1021,Or=1023,Jc=1024,Qc=1025,Rn=1026,ui=1027,wl=1028,Sl=1029,eu=1030,Ml=1031,El=1033,ws=33776,Ss=33777,Ms=33778,Es=33779,ta=35840,ra=35841,na=35842,ia=35843,tu=36196,sa=37492,oa=37496,aa=37808,la=37809,ca=37810,ua=37811,da=37812,ha=37813,fa=37814,pa=37815,ma=37816,ga=37817,ya=37818,va=37819,ba=37820,_a=37821,Ts=36492,ru=36283,xa=36284,wa=36285,Sa=36286,Tl=3e3,Ln=3001,nu=3200,iu=3201,su=0,ou=1,Pn="",bt="srgb",Gr="srgb-linear",Al="display-p3",As=7680,au=519,lu=512,cu=513,uu=514,du=515,hu=516,fu=517,pu=518,mu=519,Ma=35044,io="300 es",so=1035,Jr=2e3,cs=2001;class hi{addEventListener(r,o){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[r]===void 0&&(t[r]=[]),t[r].indexOf(o)===-1&&t[r].push(o)}hasEventListener(r,o){if(this._listeners===void 0)return!1;const t=this._listeners;return t[r]!==void 0&&t[r].indexOf(o)!==-1}removeEventListener(r,o){if(this._listeners===void 0)return;const x=this._listeners[r];if(x!==void 0){const b=x.indexOf(o);b!==-1&&x.splice(b,1)}}dispatchEvent(r){if(this._listeners===void 0)return;const t=this._listeners[r.type];if(t!==void 0){r.target=this;const x=t.slice(0);for(let b=0,h=x.length;b<h;b++)x[b].call(this,r);r.target=null}}}const or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],js=Math.PI/180,oo=180/Math.PI;function Ri(){const S=Math.random()*4294967295|0,r=Math.random()*4294967295|0,o=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(or[S&255]+or[S>>8&255]+or[S>>16&255]+or[S>>24&255]+"-"+or[r&255]+or[r>>8&255]+"-"+or[r>>16&15|64]+or[r>>24&255]+"-"+or[o&63|128]+or[o>>8&255]+"-"+or[o>>16&255]+or[o>>24&255]+or[t&255]+or[t>>8&255]+or[t>>16&255]+or[t>>24&255]).toLowerCase()}function mr(S,r,o){return Math.max(r,Math.min(o,S))}function gu(S,r){return(S%r+r)%r}function Cs(S,r,o){return(1-o)*S+o*r}function Ea(S){return(S&S-1)===0&&S!==0}function ao(S){return Math.pow(2,Math.floor(Math.log(S)/Math.LN2))}function Fi(S,r){switch(r.constructor){case Float32Array:return S;case Uint32Array:return S/4294967295;case Uint16Array:return S/65535;case Uint8Array:return S/255;case Int32Array:return Math.max(S/2147483647,-1);case Int16Array:return Math.max(S/32767,-1);case Int8Array:return Math.max(S/127,-1);default:throw new Error("Invalid component type.")}}function gr(S,r){switch(r.constructor){case Float32Array:return S;case Uint32Array:return Math.round(S*4294967295);case Uint16Array:return Math.round(S*65535);case Uint8Array:return Math.round(S*255);case Int32Array:return Math.round(S*2147483647);case Int16Array:return Math.round(S*32767);case Int8Array:return Math.round(S*127);default:throw new Error("Invalid component type.")}}class It{constructor(r=0,o=0){It.prototype.isVector2=!0,this.x=r,this.y=o}get width(){return this.x}set width(r){this.x=r}get height(){return this.y}set height(r){this.y=r}set(r,o){return this.x=r,this.y=o,this}setScalar(r){return this.x=r,this.y=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setComponent(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y)}copy(r){return this.x=r.x,this.y=r.y,this}add(r){return this.x+=r.x,this.y+=r.y,this}addScalar(r){return this.x+=r,this.y+=r,this}addVectors(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this}addScaledVector(r,o){return this.x+=r.x*o,this.y+=r.y*o,this}sub(r){return this.x-=r.x,this.y-=r.y,this}subScalar(r){return this.x-=r,this.y-=r,this}subVectors(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this}multiply(r){return this.x*=r.x,this.y*=r.y,this}multiplyScalar(r){return this.x*=r,this.y*=r,this}divide(r){return this.x/=r.x,this.y/=r.y,this}divideScalar(r){return this.multiplyScalar(1/r)}applyMatrix3(r){const o=this.x,t=this.y,x=r.elements;return this.x=x[0]*o+x[3]*t+x[6],this.y=x[1]*o+x[4]*t+x[7],this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}clamp(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this}clampScalar(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this}clampLength(r,o){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(r,Math.min(o,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(r){return this.x*r.x+this.y*r.y}cross(r){return this.x*r.y-this.y*r.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(r){const o=Math.sqrt(this.lengthSq()*r.lengthSq());if(o===0)return Math.PI/2;const t=this.dot(r)/o;return Math.acos(mr(t,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const o=this.x-r.x,t=this.y-r.y;return o*o+t*t}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this}lerpVectors(r,o,t){return this.x=r.x+(o.x-r.x)*t,this.y=r.y+(o.y-r.y)*t,this}equals(r){return r.x===this.x&&r.y===this.y}fromArray(r,o=0){return this.x=r[o],this.y=r[o+1],this}toArray(r=[],o=0){return r[o]=this.x,r[o+1]=this.y,r}fromBufferAttribute(r,o){return this.x=r.getX(o),this.y=r.getY(o),this}rotateAround(r,o){const t=Math.cos(o),x=Math.sin(o),b=this.x-r.x,h=this.y-r.y;return this.x=b*t-h*x+r.x,this.y=b*x+h*t+r.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(r,o,t,x,b,h,d,i,f){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],r!==void 0&&this.set(r,o,t,x,b,h,d,i,f)}set(r,o,t,x,b,h,d,i,f){const g=this.elements;return g[0]=r,g[1]=x,g[2]=d,g[3]=o,g[4]=b,g[5]=i,g[6]=t,g[7]=h,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(r){const o=this.elements,t=r.elements;return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],this}extractBasis(r,o,t){return r.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(r){const o=r.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,o){const t=r.elements,x=o.elements,b=this.elements,h=t[0],d=t[3],i=t[6],f=t[1],g=t[4],m=t[7],n=t[2],s=t[5],l=t[8],c=x[0],a=x[3],u=x[6],y=x[1],p=x[4],v=x[7],w=x[2],C=x[5],T=x[8];return b[0]=h*c+d*y+i*w,b[3]=h*a+d*p+i*C,b[6]=h*u+d*v+i*T,b[1]=f*c+g*y+m*w,b[4]=f*a+g*p+m*C,b[7]=f*u+g*v+m*T,b[2]=n*c+s*y+l*w,b[5]=n*a+s*p+l*C,b[8]=n*u+s*v+l*T,this}multiplyScalar(r){const o=this.elements;return o[0]*=r,o[3]*=r,o[6]*=r,o[1]*=r,o[4]*=r,o[7]*=r,o[2]*=r,o[5]*=r,o[8]*=r,this}determinant(){const r=this.elements,o=r[0],t=r[1],x=r[2],b=r[3],h=r[4],d=r[5],i=r[6],f=r[7],g=r[8];return o*h*g-o*d*f-t*b*g+t*d*i+x*b*f-x*h*i}invert(){const r=this.elements,o=r[0],t=r[1],x=r[2],b=r[3],h=r[4],d=r[5],i=r[6],f=r[7],g=r[8],m=g*h-d*f,n=d*i-g*b,s=f*b-h*i,l=o*m+t*n+x*s;if(l===0)return this.set(0,0,0,0,0,0,0,0,0);const c=1/l;return r[0]=m*c,r[1]=(x*f-g*t)*c,r[2]=(d*t-x*h)*c,r[3]=n*c,r[4]=(g*o-x*i)*c,r[5]=(x*b-d*o)*c,r[6]=s*c,r[7]=(t*i-f*o)*c,r[8]=(h*o-t*b)*c,this}transpose(){let r;const o=this.elements;return r=o[1],o[1]=o[3],o[3]=r,r=o[2],o[2]=o[6],o[6]=r,r=o[5],o[5]=o[7],o[7]=r,this}getNormalMatrix(r){return this.setFromMatrix4(r).invert().transpose()}transposeIntoArray(r){const o=this.elements;return r[0]=o[0],r[1]=o[3],r[2]=o[6],r[3]=o[1],r[4]=o[4],r[5]=o[7],r[6]=o[2],r[7]=o[5],r[8]=o[8],this}setUvTransform(r,o,t,x,b,h,d){const i=Math.cos(b),f=Math.sin(b);return this.set(t*i,t*f,-t*(i*h+f*d)+h+r,-x*f,x*i,-x*(-f*h+i*d)+d+o,0,0,1),this}scale(r,o){return this.premultiply(Rs.makeScale(r,o)),this}rotate(r){return this.premultiply(Rs.makeRotation(-r)),this}translate(r,o){return this.premultiply(Rs.makeTranslation(r,o)),this}makeTranslation(r,o){return r.isVector2?this.set(1,0,r.x,0,1,r.y,0,0,1):this.set(1,0,r,0,1,o,0,0,1),this}makeRotation(r){const o=Math.cos(r),t=Math.sin(r);return this.set(o,-t,0,t,o,0,0,0,1),this}makeScale(r,o){return this.set(r,0,0,0,o,0,0,0,1),this}equals(r){const o=this.elements,t=r.elements;for(let x=0;x<9;x++)if(o[x]!==t[x])return!1;return!0}fromArray(r,o=0){for(let t=0;t<9;t++)this.elements[t]=r[t+o];return this}toArray(r=[],o=0){const t=this.elements;return r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3],r[o+4]=t[4],r[o+5]=t[5],r[o+6]=t[6],r[o+7]=t[7],r[o+8]=t[8],r}clone(){return new this.constructor().fromArray(this.elements)}}const Rs=new wt;function jl(S){for(let r=S.length-1;r>=0;--r)if(S[r]>=65535)return!0;return!1}function us(S){return document.createElementNS("http://www.w3.org/1999/xhtml",S)}const Ta={};function Ei(S){S in Ta||(Ta[S]=!0,console.warn(S))}function ai(S){return S<.04045?S*.0773993808:Math.pow(S*.9478672986+.0521327014,2.4)}function Ls(S){return S<.0031308?S*12.92:1.055*Math.pow(S,.41666)-.055}const yu=new wt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),vu=new wt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function bu(S){return S.convertSRGBToLinear().applyMatrix3(vu)}function _u(S){return S.applyMatrix3(yu).convertLinearToSRGB()}const xu={[Gr]:S=>S,[bt]:S=>S.convertSRGBToLinear(),[Al]:bu},wu={[Gr]:S=>S,[bt]:S=>S.convertLinearToSRGB(),[Al]:_u},Tr={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(S){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!S},get workingColorSpace(){return Gr},set workingColorSpace(S){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(S,r,o){if(this.enabled===!1||r===o||!r||!o)return S;const t=xu[r],x=wu[o];if(t===void 0||x===void 0)throw new Error(`Unsupported color space conversion, "${r}" to "${o}".`);return x(t(S))},fromWorkingColorSpace:function(S,r){return this.convert(S,this.workingColorSpace,r)},toWorkingColorSpace:function(S,r){return this.convert(S,r,this.workingColorSpace)}};let zn;class Cl{static getDataURL(r){if(/^data:/i.test(r.src)||typeof HTMLCanvasElement>"u")return r.src;let o;if(r instanceof HTMLCanvasElement)o=r;else{zn===void 0&&(zn=us("canvas")),zn.width=r.width,zn.height=r.height;const t=zn.getContext("2d");r instanceof ImageData?t.putImageData(r,0,0):t.drawImage(r,0,0,r.width,r.height),o=zn}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",r),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(r){if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap){const o=us("canvas");o.width=r.width,o.height=r.height;const t=o.getContext("2d");t.drawImage(r,0,0,r.width,r.height);const x=t.getImageData(0,0,r.width,r.height),b=x.data;for(let h=0;h<b.length;h++)b[h]=ai(b[h]/255)*255;return t.putImageData(x,0,0),o}else if(r.data){const o=r.data.slice(0);for(let t=0;t<o.length;t++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[t]=Math.floor(ai(o[t]/255)*255):o[t]=ai(o[t]);return{data:o,width:r.width,height:r.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),r}}let Su=0;class Rl{constructor(r=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Su++}),this.uuid=Ri(),this.data=r,this.version=0}set needsUpdate(r){r===!0&&this.version++}toJSON(r){const o=r===void 0||typeof r=="string";if(!o&&r.images[this.uuid]!==void 0)return r.images[this.uuid];const t={uuid:this.uuid,url:""},x=this.data;if(x!==null){let b;if(Array.isArray(x)){b=[];for(let h=0,d=x.length;h<d;h++)x[h].isDataTexture?b.push(Ps(x[h].image)):b.push(Ps(x[h]))}else b=Ps(x);t.url=b}return o||(r.images[this.uuid]=t),t}}function Ps(S){return typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&S instanceof ImageBitmap?Cl.getDataURL(S):S.data?{data:Array.from(S.data),width:S.width,height:S.height,type:S.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Mu=0;class br extends hi{constructor(r=br.DEFAULT_IMAGE,o=br.DEFAULT_MAPPING,t=Pr,x=Pr,b=pr,h=Ai,d=Or,i=mn,f=br.DEFAULT_ANISOTROPY,g=Pn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mu++}),this.uuid=Ri(),this.name="",this.source=new Rl(r),this.mipmaps=[],this.mapping=o,this.channel=0,this.wrapS=t,this.wrapT=x,this.magFilter=b,this.minFilter=h,this.anisotropy=f,this.format=d,this.internalFormat=null,this.type=i,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof g=="string"?this.colorSpace=g:(Ei("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=g===Ln?bt:Pn),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(r=null){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.channel=r.channel,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.colorSpace=r.colorSpace,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const o=r===void 0||typeof r=="string";if(!o&&r.textures[this.uuid]!==void 0)return r.textures[this.uuid];const t={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(t.userData=this.userData),o||(r.textures[this.uuid]=t),t}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(this.mapping!==vl)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case ro:r.x=r.x-Math.floor(r.x);break;case Pr:r.x=r.x<0?0:1;break;case no:Math.abs(Math.floor(r.x)%2)===1?r.x=Math.ceil(r.x)-r.x:r.x=r.x-Math.floor(r.x);break}if(r.y<0||r.y>1)switch(this.wrapT){case ro:r.y=r.y-Math.floor(r.y);break;case Pr:r.y=r.y<0?0:1;break;case no:Math.abs(Math.floor(r.y)%2)===1?r.y=Math.ceil(r.y)-r.y:r.y=r.y-Math.floor(r.y);break}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){r===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Ei("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===bt?Ln:Tl}set encoding(r){Ei("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=r===Ln?bt:Pn}}br.DEFAULT_IMAGE=null;br.DEFAULT_MAPPING=vl;br.DEFAULT_ANISOTROPY=1;class tr{constructor(r=0,o=0,t=0,x=1){tr.prototype.isVector4=!0,this.x=r,this.y=o,this.z=t,this.w=x}get width(){return this.z}set width(r){this.z=r}get height(){return this.w}set height(r){this.w=r}set(r,o,t,x){return this.x=r,this.y=o,this.z=t,this.w=x,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setW(r){return this.w=r,this}setComponent(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==void 0?r.w:1,this}add(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}addVectors(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this.w=r.w+o.w,this}addScaledVector(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this.w+=r.w*o,this}sub(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}subVectors(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this.w=r.w-o.w,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}applyMatrix4(r){const o=this.x,t=this.y,x=this.z,b=this.w,h=r.elements;return this.x=h[0]*o+h[4]*t+h[8]*x+h[12]*b,this.y=h[1]*o+h[5]*t+h[9]*x+h[13]*b,this.z=h[2]*o+h[6]*t+h[10]*x+h[14]*b,this.w=h[3]*o+h[7]*t+h[11]*x+h[15]*b,this}divideScalar(r){return this.multiplyScalar(1/r)}setAxisAngleFromQuaternion(r){this.w=2*Math.acos(r.w);const o=Math.sqrt(1-r.w*r.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/o,this.y=r.y/o,this.z=r.z/o),this}setAxisAngleFromRotationMatrix(r){let o,t,x,b;const i=r.elements,f=i[0],g=i[4],m=i[8],n=i[1],s=i[5],l=i[9],c=i[2],a=i[6],u=i[10];if(Math.abs(g-n)<.01&&Math.abs(m-c)<.01&&Math.abs(l-a)<.01){if(Math.abs(g+n)<.1&&Math.abs(m+c)<.1&&Math.abs(l+a)<.1&&Math.abs(f+s+u-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const p=(f+1)/2,v=(s+1)/2,w=(u+1)/2,C=(g+n)/4,T=(m+c)/4,j=(l+a)/4;return p>v&&p>w?p<.01?(t=0,x=.707106781,b=.707106781):(t=Math.sqrt(p),x=C/t,b=T/t):v>w?v<.01?(t=.707106781,x=0,b=.707106781):(x=Math.sqrt(v),t=C/x,b=j/x):w<.01?(t=.707106781,x=.707106781,b=0):(b=Math.sqrt(w),t=T/b,x=j/b),this.set(t,x,b,o),this}let y=Math.sqrt((a-l)*(a-l)+(m-c)*(m-c)+(n-g)*(n-g));return Math.abs(y)<.001&&(y=1),this.x=(a-l)/y,this.y=(m-c)/y,this.z=(n-g)/y,this.w=Math.acos((f+s+u-1)/2),this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}clamp(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this.w=Math.max(r.w,Math.min(o.w,this.w)),this}clampScalar(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this.w=Math.max(r,Math.min(o,this.w)),this}clampLength(r,o){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(r,Math.min(o,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this.w+=(r.w-this.w)*o,this}lerpVectors(r,o,t){return this.x=r.x+(o.x-r.x)*t,this.y=r.y+(o.y-r.y)*t,this.z=r.z+(o.z-r.z)*t,this.w=r.w+(o.w-r.w)*t,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}fromArray(r,o=0){return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this.w=r[o+3],this}toArray(r=[],o=0){return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r[o+3]=this.w,r}fromBufferAttribute(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this.w=r.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Dn extends hi{constructor(r=1,o=1,t={}){super(),this.isWebGLRenderTarget=!0,this.width=r,this.height=o,this.depth=1,this.scissor=new tr(0,0,r,o),this.scissorTest=!1,this.viewport=new tr(0,0,r,o);const x={width:r,height:o,depth:1};t.encoding!==void 0&&(Ei("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ln?bt:Pn),this.texture=new br(x,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.internalFormat=t.internalFormat!==void 0?t.internalFormat:null,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pr,this.depthBuffer=t.depthBuffer!==void 0?t.depthBuffer:!0,this.stencilBuffer=t.stencilBuffer!==void 0?t.stencilBuffer:!1,this.depthTexture=t.depthTexture!==void 0?t.depthTexture:null,this.samples=t.samples!==void 0?t.samples:0}setSize(r,o,t=1){(this.width!==r||this.height!==o||this.depth!==t)&&(this.width=r,this.height=o,this.depth=t,this.texture.image.width=r,this.texture.image.height=o,this.texture.image.depth=t,this.dispose()),this.viewport.set(0,0,r,o),this.scissor.set(0,0,r,o)}clone(){return new this.constructor().copy(this)}copy(r){this.width=r.width,this.height=r.height,this.depth=r.depth,this.scissor.copy(r.scissor),this.scissorTest=r.scissorTest,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},r.texture.image);return this.texture.source=new Rl(o),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,r.depthTexture!==null&&(this.depthTexture=r.depthTexture.clone()),this.samples=r.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ll extends br{constructor(r=null,o=1,t=1,x=1){super(null),this.isDataArrayTexture=!0,this.image={data:r,width:o,height:t,depth:x},this.magFilter=ur,this.minFilter=ur,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pl extends br{constructor(r=null,o=1,t=1,x=1){super(null),this.isData3DTexture=!0,this.image={data:r,width:o,height:t,depth:x},this.magFilter=ur,this.minFilter=ur,this.wrapR=Pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Li{constructor(r=0,o=0,t=0,x=1){this.isQuaternion=!0,this._x=r,this._y=o,this._z=t,this._w=x}static slerpFlat(r,o,t,x,b,h,d){let i=t[x+0],f=t[x+1],g=t[x+2],m=t[x+3];const n=b[h+0],s=b[h+1],l=b[h+2],c=b[h+3];if(d===0){r[o+0]=i,r[o+1]=f,r[o+2]=g,r[o+3]=m;return}if(d===1){r[o+0]=n,r[o+1]=s,r[o+2]=l,r[o+3]=c;return}if(m!==c||i!==n||f!==s||g!==l){let a=1-d;const u=i*n+f*s+g*l+m*c,y=u>=0?1:-1,p=1-u*u;if(p>Number.EPSILON){const w=Math.sqrt(p),C=Math.atan2(w,u*y);a=Math.sin(a*C)/w,d=Math.sin(d*C)/w}const v=d*y;if(i=i*a+n*v,f=f*a+s*v,g=g*a+l*v,m=m*a+c*v,a===1-d){const w=1/Math.sqrt(i*i+f*f+g*g+m*m);i*=w,f*=w,g*=w,m*=w}}r[o]=i,r[o+1]=f,r[o+2]=g,r[o+3]=m}static multiplyQuaternionsFlat(r,o,t,x,b,h){const d=t[x],i=t[x+1],f=t[x+2],g=t[x+3],m=b[h],n=b[h+1],s=b[h+2],l=b[h+3];return r[o]=d*l+g*m+i*s-f*n,r[o+1]=i*l+g*n+f*m-d*s,r[o+2]=f*l+g*s+d*n-i*m,r[o+3]=g*l-d*m-i*n-f*s,r}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get w(){return this._w}set w(r){this._w=r,this._onChangeCallback()}set(r,o,t,x){return this._x=r,this._y=o,this._z=t,this._w=x,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}setFromEuler(r,o){const t=r._x,x=r._y,b=r._z,h=r._order,d=Math.cos,i=Math.sin,f=d(t/2),g=d(x/2),m=d(b/2),n=i(t/2),s=i(x/2),l=i(b/2);switch(h){case"XYZ":this._x=n*g*m+f*s*l,this._y=f*s*m-n*g*l,this._z=f*g*l+n*s*m,this._w=f*g*m-n*s*l;break;case"YXZ":this._x=n*g*m+f*s*l,this._y=f*s*m-n*g*l,this._z=f*g*l-n*s*m,this._w=f*g*m+n*s*l;break;case"ZXY":this._x=n*g*m-f*s*l,this._y=f*s*m+n*g*l,this._z=f*g*l+n*s*m,this._w=f*g*m-n*s*l;break;case"ZYX":this._x=n*g*m-f*s*l,this._y=f*s*m+n*g*l,this._z=f*g*l-n*s*m,this._w=f*g*m+n*s*l;break;case"YZX":this._x=n*g*m+f*s*l,this._y=f*s*m+n*g*l,this._z=f*g*l-n*s*m,this._w=f*g*m-n*s*l;break;case"XZY":this._x=n*g*m-f*s*l,this._y=f*s*m-n*g*l,this._z=f*g*l+n*s*m,this._w=f*g*m+n*s*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return o!==!1&&this._onChangeCallback(),this}setFromAxisAngle(r,o){const t=o/2,x=Math.sin(t);return this._x=r.x*x,this._y=r.y*x,this._z=r.z*x,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(r){const o=r.elements,t=o[0],x=o[4],b=o[8],h=o[1],d=o[5],i=o[9],f=o[2],g=o[6],m=o[10],n=t+d+m;if(n>0){const s=.5/Math.sqrt(n+1);this._w=.25/s,this._x=(g-i)*s,this._y=(b-f)*s,this._z=(h-x)*s}else if(t>d&&t>m){const s=2*Math.sqrt(1+t-d-m);this._w=(g-i)/s,this._x=.25*s,this._y=(x+h)/s,this._z=(b+f)/s}else if(d>m){const s=2*Math.sqrt(1+d-t-m);this._w=(b-f)/s,this._x=(x+h)/s,this._y=.25*s,this._z=(i+g)/s}else{const s=2*Math.sqrt(1+m-t-d);this._w=(h-x)/s,this._x=(b+f)/s,this._y=(i+g)/s,this._z=.25*s}return this._onChangeCallback(),this}setFromUnitVectors(r,o){let t=r.dot(o)+1;return t<Number.EPSILON?(t=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=t):(this._x=0,this._y=-r.z,this._z=r.y,this._w=t)):(this._x=r.y*o.z-r.z*o.y,this._y=r.z*o.x-r.x*o.z,this._z=r.x*o.y-r.y*o.x,this._w=t),this.normalize()}angleTo(r){return 2*Math.acos(Math.abs(mr(this.dot(r),-1,1)))}rotateTowards(r,o){const t=this.angleTo(r);if(t===0)return this;const x=Math.min(1,o/t);return this.slerp(r,x),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let r=this.length();return r===0?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}multiply(r){return this.multiplyQuaternions(this,r)}premultiply(r){return this.multiplyQuaternions(r,this)}multiplyQuaternions(r,o){const t=r._x,x=r._y,b=r._z,h=r._w,d=o._x,i=o._y,f=o._z,g=o._w;return this._x=t*g+h*d+x*f-b*i,this._y=x*g+h*i+b*d-t*f,this._z=b*g+h*f+t*i-x*d,this._w=h*g-t*d-x*i-b*f,this._onChangeCallback(),this}slerp(r,o){if(o===0)return this;if(o===1)return this.copy(r);const t=this._x,x=this._y,b=this._z,h=this._w;let d=h*r._w+t*r._x+x*r._y+b*r._z;if(d<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,d=-d):this.copy(r),d>=1)return this._w=h,this._x=t,this._y=x,this._z=b,this;const i=1-d*d;if(i<=Number.EPSILON){const s=1-o;return this._w=s*h+o*this._w,this._x=s*t+o*this._x,this._y=s*x+o*this._y,this._z=s*b+o*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(i),g=Math.atan2(f,d),m=Math.sin((1-o)*g)/f,n=Math.sin(o*g)/f;return this._w=h*m+this._w*n,this._x=t*m+this._x*n,this._y=x*m+this._y*n,this._z=b*m+this._z*n,this._onChangeCallback(),this}slerpQuaternions(r,o,t){return this.copy(r).slerp(o,t)}random(){const r=Math.random(),o=Math.sqrt(1-r),t=Math.sqrt(r),x=2*Math.PI*Math.random(),b=2*Math.PI*Math.random();return this.set(o*Math.cos(x),t*Math.sin(b),t*Math.cos(b),o*Math.sin(x))}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}fromArray(r,o=0){return this._x=r[o],this._y=r[o+1],this._z=r[o+2],this._w=r[o+3],this._onChangeCallback(),this}toArray(r=[],o=0){return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._w,r}fromBufferAttribute(r,o){return this._x=r.getX(o),this._y=r.getY(o),this._z=r.getZ(o),this._w=r.getW(o),this}toJSON(){return this.toArray()}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qe{constructor(r=0,o=0,t=0){qe.prototype.isVector3=!0,this.x=r,this.y=o,this.z=t}set(r,o,t){return t===void 0&&(t=this.z),this.x=r,this.y=o,this.z=t,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setComponent(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}add(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this}addVectors(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this}addScaledVector(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this}sub(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this}subVectors(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this}multiplyVectors(r,o){return this.x=r.x*o.x,this.y=r.y*o.y,this.z=r.z*o.z,this}applyEuler(r){return this.applyQuaternion(Aa.setFromEuler(r))}applyAxisAngle(r,o){return this.applyQuaternion(Aa.setFromAxisAngle(r,o))}applyMatrix3(r){const o=this.x,t=this.y,x=this.z,b=r.elements;return this.x=b[0]*o+b[3]*t+b[6]*x,this.y=b[1]*o+b[4]*t+b[7]*x,this.z=b[2]*o+b[5]*t+b[8]*x,this}applyNormalMatrix(r){return this.applyMatrix3(r).normalize()}applyMatrix4(r){const o=this.x,t=this.y,x=this.z,b=r.elements,h=1/(b[3]*o+b[7]*t+b[11]*x+b[15]);return this.x=(b[0]*o+b[4]*t+b[8]*x+b[12])*h,this.y=(b[1]*o+b[5]*t+b[9]*x+b[13])*h,this.z=(b[2]*o+b[6]*t+b[10]*x+b[14])*h,this}applyQuaternion(r){const o=this.x,t=this.y,x=this.z,b=r.x,h=r.y,d=r.z,i=r.w,f=i*o+h*x-d*t,g=i*t+d*o-b*x,m=i*x+b*t-h*o,n=-b*o-h*t-d*x;return this.x=f*i+n*-b+g*-d-m*-h,this.y=g*i+n*-h+m*-b-f*-d,this.z=m*i+n*-d+f*-h-g*-b,this}project(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}unproject(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}transformDirection(r){const o=this.x,t=this.y,x=this.z,b=r.elements;return this.x=b[0]*o+b[4]*t+b[8]*x,this.y=b[1]*o+b[5]*t+b[9]*x,this.z=b[2]*o+b[6]*t+b[10]*x,this.normalize()}divide(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}divideScalar(r){return this.multiplyScalar(1/r)}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}clamp(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this}clampScalar(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this}clampLength(r,o){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(r,Math.min(o,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this}lerpVectors(r,o,t){return this.x=r.x+(o.x-r.x)*t,this.y=r.y+(o.y-r.y)*t,this.z=r.z+(o.z-r.z)*t,this}cross(r){return this.crossVectors(this,r)}crossVectors(r,o){const t=r.x,x=r.y,b=r.z,h=o.x,d=o.y,i=o.z;return this.x=x*i-b*d,this.y=b*h-t*i,this.z=t*d-x*h,this}projectOnVector(r){const o=r.lengthSq();if(o===0)return this.set(0,0,0);const t=r.dot(this)/o;return this.copy(r).multiplyScalar(t)}projectOnPlane(r){return Os.copy(this).projectOnVector(r),this.sub(Os)}reflect(r){return this.sub(Os.copy(r).multiplyScalar(2*this.dot(r)))}angleTo(r){const o=Math.sqrt(this.lengthSq()*r.lengthSq());if(o===0)return Math.PI/2;const t=this.dot(r)/o;return Math.acos(mr(t,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const o=this.x-r.x,t=this.y-r.y,x=this.z-r.z;return o*o+t*t+x*x}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}setFromSpherical(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}setFromSphericalCoords(r,o,t){const x=Math.sin(o)*r;return this.x=x*Math.sin(t),this.y=Math.cos(o)*r,this.z=x*Math.cos(t),this}setFromCylindrical(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}setFromCylindricalCoords(r,o,t){return this.x=r*Math.sin(o),this.y=t,this.z=r*Math.cos(o),this}setFromMatrixPosition(r){const o=r.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(r){const o=this.setFromMatrixColumn(r,0).length(),t=this.setFromMatrixColumn(r,1).length(),x=this.setFromMatrixColumn(r,2).length();return this.x=o,this.y=t,this.z=x,this}setFromMatrixColumn(r,o){return this.fromArray(r.elements,o*4)}setFromMatrix3Column(r,o){return this.fromArray(r.elements,o*3)}setFromEuler(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}setFromColor(r){return this.x=r.r,this.y=r.g,this.z=r.b,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}fromArray(r,o=0){return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this}toArray(r=[],o=0){return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r}fromBufferAttribute(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const r=(Math.random()-.5)*2,o=Math.random()*Math.PI*2,t=Math.sqrt(1-r**2);return this.x=t*Math.cos(o),this.y=t*Math.sin(o),this.z=r,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Os=new qe,Aa=new Li;class Pi{constructor(r=new qe(1/0,1/0,1/0),o=new qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=r,this.max=o}set(r,o){return this.min.copy(r),this.max.copy(o),this}setFromArray(r){this.makeEmpty();for(let o=0,t=r.length;o<t;o+=3)this.expandByPoint(Wr.fromArray(r,o));return this}setFromBufferAttribute(r){this.makeEmpty();for(let o=0,t=r.count;o<t;o++)this.expandByPoint(Wr.fromBufferAttribute(r,o));return this}setFromPoints(r){this.makeEmpty();for(let o=0,t=r.length;o<t;o++)this.expandByPoint(r[o]);return this}setFromCenterAndSize(r,o){const t=Wr.copy(o).multiplyScalar(.5);return this.min.copy(r).sub(t),this.max.copy(r).add(t),this}setFromObject(r,o=!1){return this.makeEmpty(),this.expandByObject(r,o)}clone(){return new this.constructor().copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}expandByObject(r,o=!1){if(r.updateWorldMatrix(!1,!1),r.boundingBox!==void 0)r.boundingBox===null&&r.computeBoundingBox(),Vn.copy(r.boundingBox),Vn.applyMatrix4(r.matrixWorld),this.union(Vn);else{const x=r.geometry;if(x!==void 0)if(o&&x.attributes!==void 0&&x.attributes.position!==void 0){const b=x.attributes.position;for(let h=0,d=b.count;h<d;h++)Wr.fromBufferAttribute(b,h).applyMatrix4(r.matrixWorld),this.expandByPoint(Wr)}else x.boundingBox===null&&x.computeBoundingBox(),Vn.copy(x.boundingBox),Vn.applyMatrix4(r.matrixWorld),this.union(Vn)}const t=r.children;for(let x=0,b=t.length;x<b;x++)this.expandByObject(t[x],o);return this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z}getParameter(r,o){return o.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)}intersectsSphere(r){return this.clampPoint(r.center,Wr),Wr.distanceToSquared(r.center)<=r.radius*r.radius}intersectsPlane(r){let o,t;return r.normal.x>0?(o=r.normal.x*this.min.x,t=r.normal.x*this.max.x):(o=r.normal.x*this.max.x,t=r.normal.x*this.min.x),r.normal.y>0?(o+=r.normal.y*this.min.y,t+=r.normal.y*this.max.y):(o+=r.normal.y*this.max.y,t+=r.normal.y*this.min.y),r.normal.z>0?(o+=r.normal.z*this.min.z,t+=r.normal.z*this.max.z):(o+=r.normal.z*this.max.z,t+=r.normal.z*this.min.z),o<=-r.constant&&t>=-r.constant}intersectsTriangle(r){if(this.isEmpty())return!1;this.getCenter(_i),Ni.subVectors(this.max,_i),Hn.subVectors(r.a,_i),Wn.subVectors(r.b,_i),Xn.subVectors(r.c,_i),an.subVectors(Wn,Hn),ln.subVectors(Xn,Wn),_n.subVectors(Hn,Xn);let o=[0,-an.z,an.y,0,-ln.z,ln.y,0,-_n.z,_n.y,an.z,0,-an.x,ln.z,0,-ln.x,_n.z,0,-_n.x,-an.y,an.x,0,-ln.y,ln.x,0,-_n.y,_n.x,0];return!Ds(o,Hn,Wn,Xn,Ni)||(o=[1,0,0,0,1,0,0,0,1],!Ds(o,Hn,Wn,Xn,Ni))?!1:(Bi.crossVectors(an,ln),o=[Bi.x,Bi.y,Bi.z],Ds(o,Hn,Wn,Xn,Ni))}clampPoint(r,o){return o.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return this.clampPoint(r,Wr).distanceTo(r)}getBoundingSphere(r){return this.isEmpty()?r.makeEmpty():(this.getCenter(r.center),r.radius=this.getSize(Wr).length()*.5),r}intersect(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}applyMatrix4(r){return this.isEmpty()?this:(Hr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),Hr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),Hr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),Hr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),Hr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),Hr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),Hr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),Hr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(Hr),this)}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}const Hr=[new qe,new qe,new qe,new qe,new qe,new qe,new qe,new qe],Wr=new qe,Vn=new Pi,Hn=new qe,Wn=new qe,Xn=new qe,an=new qe,ln=new qe,_n=new qe,_i=new qe,Ni=new qe,Bi=new qe,xn=new qe;function Ds(S,r,o,t,x){for(let b=0,h=S.length-3;b<=h;b+=3){xn.fromArray(S,b);const d=x.x*Math.abs(xn.x)+x.y*Math.abs(xn.y)+x.z*Math.abs(xn.z),i=r.dot(xn),f=o.dot(xn),g=t.dot(xn);if(Math.max(-Math.max(i,f,g),Math.min(i,f,g))>d)return!1}return!0}const Eu=new Pi,xi=new qe,Is=new qe;class po{constructor(r=new qe,o=-1){this.center=r,this.radius=o}set(r,o){return this.center.copy(r),this.radius=o,this}setFromPoints(r,o){const t=this.center;o!==void 0?t.copy(o):Eu.setFromPoints(r).getCenter(t);let x=0;for(let b=0,h=r.length;b<h;b++)x=Math.max(x,t.distanceToSquared(r[b]));return this.radius=Math.sqrt(x),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const o=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=o*o}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,o){const t=this.center.distanceToSquared(r);return o.copy(r),t>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){if(this.isEmpty())return this.center.copy(r),this.radius=0,this;xi.subVectors(r,this.center);const o=xi.lengthSq();if(o>this.radius*this.radius){const t=Math.sqrt(o),x=(t-this.radius)*.5;this.center.addScaledVector(xi,x/t),this.radius+=x}return this}union(r){return r.isEmpty()?this:this.isEmpty()?(this.copy(r),this):(this.center.equals(r.center)===!0?this.radius=Math.max(this.radius,r.radius):(Is.subVectors(r.center,this.center).setLength(r.radius),this.expandByPoint(xi.copy(r.center).add(Is)),this.expandByPoint(xi.copy(r.center).sub(Is))),this)}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Xr=new qe,ks=new qe,Gi=new qe,cn=new qe,Us=new qe,zi=new qe,Fs=new qe;class Tu{constructor(r=new qe,o=new qe(0,0,-1)){this.origin=r,this.direction=o}set(r,o){return this.origin.copy(r),this.direction.copy(o),this}copy(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this}at(r,o){return o.copy(this.origin).addScaledVector(this.direction,r)}lookAt(r){return this.direction.copy(r).sub(this.origin).normalize(),this}recast(r){return this.origin.copy(this.at(r,Xr)),this}closestPointToPoint(r,o){o.subVectors(r,this.origin);const t=o.dot(this.direction);return t<0?o.copy(this.origin):o.copy(this.origin).addScaledVector(this.direction,t)}distanceToPoint(r){return Math.sqrt(this.distanceSqToPoint(r))}distanceSqToPoint(r){const o=Xr.subVectors(r,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(r):(Xr.copy(this.origin).addScaledVector(this.direction,o),Xr.distanceToSquared(r))}distanceSqToSegment(r,o,t,x){ks.copy(r).add(o).multiplyScalar(.5),Gi.copy(o).sub(r).normalize(),cn.copy(this.origin).sub(ks);const b=r.distanceTo(o)*.5,h=-this.direction.dot(Gi),d=cn.dot(this.direction),i=-cn.dot(Gi),f=cn.lengthSq(),g=Math.abs(1-h*h);let m,n,s,l;if(g>0)if(m=h*i-d,n=h*d-i,l=b*g,m>=0)if(n>=-l)if(n<=l){const c=1/g;m*=c,n*=c,s=m*(m+h*n+2*d)+n*(h*m+n+2*i)+f}else n=b,m=Math.max(0,-(h*n+d)),s=-m*m+n*(n+2*i)+f;else n=-b,m=Math.max(0,-(h*n+d)),s=-m*m+n*(n+2*i)+f;else n<=-l?(m=Math.max(0,-(-h*b+d)),n=m>0?-b:Math.min(Math.max(-b,-i),b),s=-m*m+n*(n+2*i)+f):n<=l?(m=0,n=Math.min(Math.max(-b,-i),b),s=n*(n+2*i)+f):(m=Math.max(0,-(h*b+d)),n=m>0?b:Math.min(Math.max(-b,-i),b),s=-m*m+n*(n+2*i)+f);else n=h>0?-b:b,m=Math.max(0,-(h*n+d)),s=-m*m+n*(n+2*i)+f;return t&&t.copy(this.origin).addScaledVector(this.direction,m),x&&x.copy(ks).addScaledVector(Gi,n),s}intersectSphere(r,o){Xr.subVectors(r.center,this.origin);const t=Xr.dot(this.direction),x=Xr.dot(Xr)-t*t,b=r.radius*r.radius;if(x>b)return null;const h=Math.sqrt(b-x),d=t-h,i=t+h;return i<0?null:d<0?this.at(i,o):this.at(d,o)}intersectsSphere(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius}distanceToPlane(r){const o=r.normal.dot(this.direction);if(o===0)return r.distanceToPoint(this.origin)===0?0:null;const t=-(this.origin.dot(r.normal)+r.constant)/o;return t>=0?t:null}intersectPlane(r,o){const t=this.distanceToPlane(r);return t===null?null:this.at(t,o)}intersectsPlane(r){const o=r.distanceToPoint(this.origin);return o===0||r.normal.dot(this.direction)*o<0}intersectBox(r,o){let t,x,b,h,d,i;const f=1/this.direction.x,g=1/this.direction.y,m=1/this.direction.z,n=this.origin;return f>=0?(t=(r.min.x-n.x)*f,x=(r.max.x-n.x)*f):(t=(r.max.x-n.x)*f,x=(r.min.x-n.x)*f),g>=0?(b=(r.min.y-n.y)*g,h=(r.max.y-n.y)*g):(b=(r.max.y-n.y)*g,h=(r.min.y-n.y)*g),t>h||b>x||((b>t||isNaN(t))&&(t=b),(h<x||isNaN(x))&&(x=h),m>=0?(d=(r.min.z-n.z)*m,i=(r.max.z-n.z)*m):(d=(r.max.z-n.z)*m,i=(r.min.z-n.z)*m),t>i||d>x)||((d>t||t!==t)&&(t=d),(i<x||x!==x)&&(x=i),x<0)?null:this.at(t>=0?t:x,o)}intersectsBox(r){return this.intersectBox(r,Xr)!==null}intersectTriangle(r,o,t,x,b){Us.subVectors(o,r),zi.subVectors(t,r),Fs.crossVectors(Us,zi);let h=this.direction.dot(Fs),d;if(h>0){if(x)return null;d=1}else if(h<0)d=-1,h=-h;else return null;cn.subVectors(this.origin,r);const i=d*this.direction.dot(zi.crossVectors(cn,zi));if(i<0)return null;const f=d*this.direction.dot(Us.cross(cn));if(f<0||i+f>h)return null;const g=-d*cn.dot(Fs);return g<0?null:this.at(g/h,b)}applyMatrix4(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this}equals(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rr{constructor(r,o,t,x,b,h,d,i,f,g,m,n,s,l,c,a){rr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r!==void 0&&this.set(r,o,t,x,b,h,d,i,f,g,m,n,s,l,c,a)}set(r,o,t,x,b,h,d,i,f,g,m,n,s,l,c,a){const u=this.elements;return u[0]=r,u[4]=o,u[8]=t,u[12]=x,u[1]=b,u[5]=h,u[9]=d,u[13]=i,u[2]=f,u[6]=g,u[10]=m,u[14]=n,u[3]=s,u[7]=l,u[11]=c,u[15]=a,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rr().fromArray(this.elements)}copy(r){const o=this.elements,t=r.elements;return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],this}copyPosition(r){const o=this.elements,t=r.elements;return o[12]=t[12],o[13]=t[13],o[14]=t[14],this}setFromMatrix3(r){const o=r.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(r,o,t){return r.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(r,o,t){return this.set(r.x,o.x,t.x,0,r.y,o.y,t.y,0,r.z,o.z,t.z,0,0,0,0,1),this}extractRotation(r){const o=this.elements,t=r.elements,x=1/qn.setFromMatrixColumn(r,0).length(),b=1/qn.setFromMatrixColumn(r,1).length(),h=1/qn.setFromMatrixColumn(r,2).length();return o[0]=t[0]*x,o[1]=t[1]*x,o[2]=t[2]*x,o[3]=0,o[4]=t[4]*b,o[5]=t[5]*b,o[6]=t[6]*b,o[7]=0,o[8]=t[8]*h,o[9]=t[9]*h,o[10]=t[10]*h,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(r){const o=this.elements,t=r.x,x=r.y,b=r.z,h=Math.cos(t),d=Math.sin(t),i=Math.cos(x),f=Math.sin(x),g=Math.cos(b),m=Math.sin(b);if(r.order==="XYZ"){const n=h*g,s=h*m,l=d*g,c=d*m;o[0]=i*g,o[4]=-i*m,o[8]=f,o[1]=s+l*f,o[5]=n-c*f,o[9]=-d*i,o[2]=c-n*f,o[6]=l+s*f,o[10]=h*i}else if(r.order==="YXZ"){const n=i*g,s=i*m,l=f*g,c=f*m;o[0]=n+c*d,o[4]=l*d-s,o[8]=h*f,o[1]=h*m,o[5]=h*g,o[9]=-d,o[2]=s*d-l,o[6]=c+n*d,o[10]=h*i}else if(r.order==="ZXY"){const n=i*g,s=i*m,l=f*g,c=f*m;o[0]=n-c*d,o[4]=-h*m,o[8]=l+s*d,o[1]=s+l*d,o[5]=h*g,o[9]=c-n*d,o[2]=-h*f,o[6]=d,o[10]=h*i}else if(r.order==="ZYX"){const n=h*g,s=h*m,l=d*g,c=d*m;o[0]=i*g,o[4]=l*f-s,o[8]=n*f+c,o[1]=i*m,o[5]=c*f+n,o[9]=s*f-l,o[2]=-f,o[6]=d*i,o[10]=h*i}else if(r.order==="YZX"){const n=h*i,s=h*f,l=d*i,c=d*f;o[0]=i*g,o[4]=c-n*m,o[8]=l*m+s,o[1]=m,o[5]=h*g,o[9]=-d*g,o[2]=-f*g,o[6]=s*m+l,o[10]=n-c*m}else if(r.order==="XZY"){const n=h*i,s=h*f,l=d*i,c=d*f;o[0]=i*g,o[4]=-m,o[8]=f*g,o[1]=n*m+c,o[5]=h*g,o[9]=s*m-l,o[2]=l*m-s,o[6]=d*g,o[10]=c*m+n}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(r){return this.compose(Au,r,ju)}lookAt(r,o,t){const x=this.elements;return yr.subVectors(r,o),yr.lengthSq()===0&&(yr.z=1),yr.normalize(),un.crossVectors(t,yr),un.lengthSq()===0&&(Math.abs(t.z)===1?yr.x+=1e-4:yr.z+=1e-4,yr.normalize(),un.crossVectors(t,yr)),un.normalize(),Vi.crossVectors(yr,un),x[0]=un.x,x[4]=Vi.x,x[8]=yr.x,x[1]=un.y,x[5]=Vi.y,x[9]=yr.y,x[2]=un.z,x[6]=Vi.z,x[10]=yr.z,this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,o){const t=r.elements,x=o.elements,b=this.elements,h=t[0],d=t[4],i=t[8],f=t[12],g=t[1],m=t[5],n=t[9],s=t[13],l=t[2],c=t[6],a=t[10],u=t[14],y=t[3],p=t[7],v=t[11],w=t[15],C=x[0],T=x[4],j=x[8],A=x[12],L=x[1],M=x[5],k=x[9],O=x[13],N=x[2],U=x[6],V=x[10],G=x[14],z=x[3],W=x[7],Z=x[11],I=x[15];return b[0]=h*C+d*L+i*N+f*z,b[4]=h*T+d*M+i*U+f*W,b[8]=h*j+d*k+i*V+f*Z,b[12]=h*A+d*O+i*G+f*I,b[1]=g*C+m*L+n*N+s*z,b[5]=g*T+m*M+n*U+s*W,b[9]=g*j+m*k+n*V+s*Z,b[13]=g*A+m*O+n*G+s*I,b[2]=l*C+c*L+a*N+u*z,b[6]=l*T+c*M+a*U+u*W,b[10]=l*j+c*k+a*V+u*Z,b[14]=l*A+c*O+a*G+u*I,b[3]=y*C+p*L+v*N+w*z,b[7]=y*T+p*M+v*U+w*W,b[11]=y*j+p*k+v*V+w*Z,b[15]=y*A+p*O+v*G+w*I,this}multiplyScalar(r){const o=this.elements;return o[0]*=r,o[4]*=r,o[8]*=r,o[12]*=r,o[1]*=r,o[5]*=r,o[9]*=r,o[13]*=r,o[2]*=r,o[6]*=r,o[10]*=r,o[14]*=r,o[3]*=r,o[7]*=r,o[11]*=r,o[15]*=r,this}determinant(){const r=this.elements,o=r[0],t=r[4],x=r[8],b=r[12],h=r[1],d=r[5],i=r[9],f=r[13],g=r[2],m=r[6],n=r[10],s=r[14],l=r[3],c=r[7],a=r[11],u=r[15];return l*(+b*i*m-x*f*m-b*d*n+t*f*n+x*d*s-t*i*s)+c*(+o*i*s-o*f*n+b*h*n-x*h*s+x*f*g-b*i*g)+a*(+o*f*m-o*d*s-b*h*m+t*h*s+b*d*g-t*f*g)+u*(-x*d*g-o*i*m+o*d*n+x*h*m-t*h*n+t*i*g)}transpose(){const r=this.elements;let o;return o=r[1],r[1]=r[4],r[4]=o,o=r[2],r[2]=r[8],r[8]=o,o=r[6],r[6]=r[9],r[9]=o,o=r[3],r[3]=r[12],r[12]=o,o=r[7],r[7]=r[13],r[13]=o,o=r[11],r[11]=r[14],r[14]=o,this}setPosition(r,o,t){const x=this.elements;return r.isVector3?(x[12]=r.x,x[13]=r.y,x[14]=r.z):(x[12]=r,x[13]=o,x[14]=t),this}invert(){const r=this.elements,o=r[0],t=r[1],x=r[2],b=r[3],h=r[4],d=r[5],i=r[6],f=r[7],g=r[8],m=r[9],n=r[10],s=r[11],l=r[12],c=r[13],a=r[14],u=r[15],y=m*a*f-c*n*f+c*i*s-d*a*s-m*i*u+d*n*u,p=l*n*f-g*a*f-l*i*s+h*a*s+g*i*u-h*n*u,v=g*c*f-l*m*f+l*d*s-h*c*s-g*d*u+h*m*u,w=l*m*i-g*c*i-l*d*n+h*c*n+g*d*a-h*m*a,C=o*y+t*p+x*v+b*w;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return r[0]=y*T,r[1]=(c*n*b-m*a*b-c*x*s+t*a*s+m*x*u-t*n*u)*T,r[2]=(d*a*b-c*i*b+c*x*f-t*a*f-d*x*u+t*i*u)*T,r[3]=(m*i*b-d*n*b-m*x*f+t*n*f+d*x*s-t*i*s)*T,r[4]=p*T,r[5]=(g*a*b-l*n*b+l*x*s-o*a*s-g*x*u+o*n*u)*T,r[6]=(l*i*b-h*a*b-l*x*f+o*a*f+h*x*u-o*i*u)*T,r[7]=(h*n*b-g*i*b+g*x*f-o*n*f-h*x*s+o*i*s)*T,r[8]=v*T,r[9]=(l*m*b-g*c*b-l*t*s+o*c*s+g*t*u-o*m*u)*T,r[10]=(h*c*b-l*d*b+l*t*f-o*c*f-h*t*u+o*d*u)*T,r[11]=(g*d*b-h*m*b-g*t*f+o*m*f+h*t*s-o*d*s)*T,r[12]=w*T,r[13]=(g*c*x-l*m*x+l*t*n-o*c*n-g*t*a+o*m*a)*T,r[14]=(l*d*x-h*c*x-l*t*i+o*c*i+h*t*a-o*d*a)*T,r[15]=(h*m*x-g*d*x+g*t*i-o*m*i-h*t*n+o*d*n)*T,this}scale(r){const o=this.elements,t=r.x,x=r.y,b=r.z;return o[0]*=t,o[4]*=x,o[8]*=b,o[1]*=t,o[5]*=x,o[9]*=b,o[2]*=t,o[6]*=x,o[10]*=b,o[3]*=t,o[7]*=x,o[11]*=b,this}getMaxScaleOnAxis(){const r=this.elements,o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],t=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],x=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return Math.sqrt(Math.max(o,t,x))}makeTranslation(r,o,t){return r.isVector3?this.set(1,0,0,r.x,0,1,0,r.y,0,0,1,r.z,0,0,0,1):this.set(1,0,0,r,0,1,0,o,0,0,1,t,0,0,0,1),this}makeRotationX(r){const o=Math.cos(r),t=Math.sin(r);return this.set(1,0,0,0,0,o,-t,0,0,t,o,0,0,0,0,1),this}makeRotationY(r){const o=Math.cos(r),t=Math.sin(r);return this.set(o,0,t,0,0,1,0,0,-t,0,o,0,0,0,0,1),this}makeRotationZ(r){const o=Math.cos(r),t=Math.sin(r);return this.set(o,-t,0,0,t,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(r,o){const t=Math.cos(o),x=Math.sin(o),b=1-t,h=r.x,d=r.y,i=r.z,f=b*h,g=b*d;return this.set(f*h+t,f*d-x*i,f*i+x*d,0,f*d+x*i,g*d+t,g*i-x*h,0,f*i-x*d,g*i+x*h,b*i*i+t,0,0,0,0,1),this}makeScale(r,o,t){return this.set(r,0,0,0,0,o,0,0,0,0,t,0,0,0,0,1),this}makeShear(r,o,t,x,b,h){return this.set(1,t,b,0,r,1,h,0,o,x,1,0,0,0,0,1),this}compose(r,o,t){const x=this.elements,b=o._x,h=o._y,d=o._z,i=o._w,f=b+b,g=h+h,m=d+d,n=b*f,s=b*g,l=b*m,c=h*g,a=h*m,u=d*m,y=i*f,p=i*g,v=i*m,w=t.x,C=t.y,T=t.z;return x[0]=(1-(c+u))*w,x[1]=(s+v)*w,x[2]=(l-p)*w,x[3]=0,x[4]=(s-v)*C,x[5]=(1-(n+u))*C,x[6]=(a+y)*C,x[7]=0,x[8]=(l+p)*T,x[9]=(a-y)*T,x[10]=(1-(n+c))*T,x[11]=0,x[12]=r.x,x[13]=r.y,x[14]=r.z,x[15]=1,this}decompose(r,o,t){const x=this.elements;let b=qn.set(x[0],x[1],x[2]).length();const h=qn.set(x[4],x[5],x[6]).length(),d=qn.set(x[8],x[9],x[10]).length();this.determinant()<0&&(b=-b),r.x=x[12],r.y=x[13],r.z=x[14],Ar.copy(this);const f=1/b,g=1/h,m=1/d;return Ar.elements[0]*=f,Ar.elements[1]*=f,Ar.elements[2]*=f,Ar.elements[4]*=g,Ar.elements[5]*=g,Ar.elements[6]*=g,Ar.elements[8]*=m,Ar.elements[9]*=m,Ar.elements[10]*=m,o.setFromRotationMatrix(Ar),t.x=b,t.y=h,t.z=d,this}makePerspective(r,o,t,x,b,h,d=Jr){const i=this.elements,f=2*b/(o-r),g=2*b/(t-x),m=(o+r)/(o-r),n=(t+x)/(t-x);let s,l;if(d===Jr)s=-(h+b)/(h-b),l=-2*h*b/(h-b);else if(d===cs)s=-h/(h-b),l=-h*b/(h-b);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);return i[0]=f,i[4]=0,i[8]=m,i[12]=0,i[1]=0,i[5]=g,i[9]=n,i[13]=0,i[2]=0,i[6]=0,i[10]=s,i[14]=l,i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}makeOrthographic(r,o,t,x,b,h,d=Jr){const i=this.elements,f=1/(o-r),g=1/(t-x),m=1/(h-b),n=(o+r)*f,s=(t+x)*g;let l,c;if(d===Jr)l=(h+b)*m,c=-2*m;else if(d===cs)l=b*m,c=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);return i[0]=2*f,i[4]=0,i[8]=0,i[12]=-n,i[1]=0,i[5]=2*g,i[9]=0,i[13]=-s,i[2]=0,i[6]=0,i[10]=c,i[14]=-l,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}equals(r){const o=this.elements,t=r.elements;for(let x=0;x<16;x++)if(o[x]!==t[x])return!1;return!0}fromArray(r,o=0){for(let t=0;t<16;t++)this.elements[t]=r[t+o];return this}toArray(r=[],o=0){const t=this.elements;return r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3],r[o+4]=t[4],r[o+5]=t[5],r[o+6]=t[6],r[o+7]=t[7],r[o+8]=t[8],r[o+9]=t[9],r[o+10]=t[10],r[o+11]=t[11],r[o+12]=t[12],r[o+13]=t[13],r[o+14]=t[14],r[o+15]=t[15],r}}const qn=new qe,Ar=new rr,Au=new qe(0,0,0),ju=new qe(1,1,1),un=new qe,Vi=new qe,yr=new qe,ja=new rr,Ca=new Li;class hs{constructor(r=0,o=0,t=0,x=hs.DEFAULT_ORDER){this.isEuler=!0,this._x=r,this._y=o,this._z=t,this._order=x}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,o,t,x=this._order){return this._x=r,this._y=o,this._z=t,this._order=x,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,o=this._order,t=!0){const x=r.elements,b=x[0],h=x[4],d=x[8],i=x[1],f=x[5],g=x[9],m=x[2],n=x[6],s=x[10];switch(o){case"XYZ":this._y=Math.asin(mr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,s),this._z=Math.atan2(-h,b)):(this._x=Math.atan2(n,f),this._z=0);break;case"YXZ":this._x=Math.asin(-mr(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(d,s),this._z=Math.atan2(i,f)):(this._y=Math.atan2(-m,b),this._z=0);break;case"ZXY":this._x=Math.asin(mr(n,-1,1)),Math.abs(n)<.9999999?(this._y=Math.atan2(-m,s),this._z=Math.atan2(-h,f)):(this._y=0,this._z=Math.atan2(i,b));break;case"ZYX":this._y=Math.asin(-mr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(n,s),this._z=Math.atan2(i,b)):(this._x=0,this._z=Math.atan2(-h,f));break;case"YZX":this._z=Math.asin(mr(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-m,b)):(this._x=0,this._y=Math.atan2(d,s));break;case"XZY":this._z=Math.asin(-mr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(n,f),this._y=Math.atan2(d,b)):(this._x=Math.atan2(-g,s),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,t===!0&&this._onChangeCallback(),this}setFromQuaternion(r,o,t){return ja.makeRotationFromQuaternion(r),this.setFromRotationMatrix(ja,o,t)}setFromVector3(r,o=this._order){return this.set(r.x,r.y,r.z,o)}reorder(r){return Ca.setFromEuler(this),this.setFromQuaternion(Ca,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==void 0&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],o=0){return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hs.DEFAULT_ORDER="XYZ";class Ol{constructor(){this.mask=1}set(r){this.mask=(1<<r|0)>>>0}enable(r){this.mask|=1<<r|0}enableAll(){this.mask=-1}toggle(r){this.mask^=1<<r|0}disable(r){this.mask&=~(1<<r|0)}disableAll(){this.mask=0}test(r){return(this.mask&r.mask)!==0}isEnabled(r){return(this.mask&(1<<r|0))!==0}}let Cu=0;const Ra=new qe,Yn=new Li,qr=new rr,Hi=new qe,wi=new qe,Ru=new qe,Lu=new Li,La=new qe(1,0,0),Pa=new qe(0,1,0),Oa=new qe(0,0,1),Pu={type:"added"},Da={type:"removed"};class _r extends hi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Cu++}),this.uuid=Ri(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_r.DEFAULT_UP.clone();const r=new qe,o=new hs,t=new Li,x=new qe(1,1,1);function b(){t.setFromEuler(o,!1)}function h(){o.setFromQuaternion(t,void 0,!1)}o._onChange(b),t._onChange(h),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:x},modelViewMatrix:{value:new rr},normalMatrix:{value:new wt}}),this.matrix=new rr,this.matrixWorld=new rr,this.matrixAutoUpdate=_r.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ol,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,o){this.quaternion.setFromAxisAngle(r,o)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,o){return Yn.setFromAxisAngle(r,o),this.quaternion.multiply(Yn),this}rotateOnWorldAxis(r,o){return Yn.setFromAxisAngle(r,o),this.quaternion.premultiply(Yn),this}rotateX(r){return this.rotateOnAxis(La,r)}rotateY(r){return this.rotateOnAxis(Pa,r)}rotateZ(r){return this.rotateOnAxis(Oa,r)}translateOnAxis(r,o){return Ra.copy(r).applyQuaternion(this.quaternion),this.position.add(Ra.multiplyScalar(o)),this}translateX(r){return this.translateOnAxis(La,r)}translateY(r){return this.translateOnAxis(Pa,r)}translateZ(r){return this.translateOnAxis(Oa,r)}localToWorld(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(qr.copy(this.matrixWorld).invert())}lookAt(r,o,t){r.isVector3?Hi.copy(r):Hi.set(r,o,t);const x=this.parent;this.updateWorldMatrix(!0,!1),wi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qr.lookAt(wi,Hi,this.up):qr.lookAt(Hi,wi,this.up),this.quaternion.setFromRotationMatrix(qr),x&&(qr.extractRotation(x.matrixWorld),Yn.setFromRotationMatrix(qr),this.quaternion.premultiply(Yn.invert()))}add(r){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.parent!==null&&r.parent.remove(r),r.parent=this,this.children.push(r),r.dispatchEvent(Pu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const o=this.children.indexOf(r);return o!==-1&&(r.parent=null,this.children.splice(o,1),r.dispatchEvent(Da)),this}removeFromParent(){const r=this.parent;return r!==null&&r.remove(this),this}clear(){for(let r=0;r<this.children.length;r++){const o=this.children[r];o.parent=null,o.dispatchEvent(Da)}return this.children.length=0,this}attach(r){return this.updateWorldMatrix(!0,!1),qr.copy(this.matrixWorld).invert(),r.parent!==null&&(r.parent.updateWorldMatrix(!0,!1),qr.multiply(r.parent.matrixWorld)),r.applyMatrix4(qr),this.add(r),r.updateWorldMatrix(!1,!0),this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,o){if(this[r]===o)return this;for(let t=0,x=this.children.length;t<x;t++){const h=this.children[t].getObjectByProperty(r,o);if(h!==void 0)return h}}getObjectsByProperty(r,o){let t=[];this[r]===o&&t.push(this);for(let x=0,b=this.children.length;x<b;x++){const h=this.children[x].getObjectsByProperty(r,o);h.length>0&&(t=t.concat(h))}return t}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wi,r,Ru),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wi,Lu,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return r.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(r){r(this);const o=this.children;for(let t=0,x=o.length;t<x;t++)o[t].traverse(r)}traverseVisible(r){if(this.visible===!1)return;r(this);const o=this.children;for(let t=0,x=o.length;t<x;t++)o[t].traverseVisible(r)}traverseAncestors(r){const o=this.parent;o!==null&&(r(o),o.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);const o=this.children;for(let t=0,x=o.length;t<x;t++){const b=o[t];(b.matrixWorldAutoUpdate===!0||r===!0)&&b.updateMatrixWorld(r)}}updateWorldMatrix(r,o){const t=this.parent;if(r===!0&&t!==null&&t.matrixWorldAutoUpdate===!0&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){const x=this.children;for(let b=0,h=x.length;b<h;b++){const d=x[b];d.matrixWorldAutoUpdate===!0&&d.updateWorldMatrix(!1,!0)}}}toJSON(r){const o=r===void 0||typeof r=="string",t={};o&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const x={};x.uuid=this.uuid,x.type=this.type,this.name!==""&&(x.name=this.name),this.castShadow===!0&&(x.castShadow=!0),this.receiveShadow===!0&&(x.receiveShadow=!0),this.visible===!1&&(x.visible=!1),this.frustumCulled===!1&&(x.frustumCulled=!1),this.renderOrder!==0&&(x.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(x.userData=this.userData),x.layers=this.layers.mask,x.matrix=this.matrix.toArray(),x.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(x.matrixAutoUpdate=!1),this.isInstancedMesh&&(x.type="InstancedMesh",x.count=this.count,x.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(x.instanceColor=this.instanceColor.toJSON()));function b(d,i){return d[i.uuid]===void 0&&(d[i.uuid]=i.toJSON(r)),i.uuid}if(this.isScene)this.background&&(this.background.isColor?x.background=this.background.toJSON():this.background.isTexture&&(x.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(x.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){x.geometry=b(r.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const i=d.shapes;if(Array.isArray(i))for(let f=0,g=i.length;f<g;f++){const m=i[f];b(r.shapes,m)}else b(r.shapes,i)}}if(this.isSkinnedMesh&&(x.bindMode=this.bindMode,x.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(b(r.skeletons,this.skeleton),x.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let i=0,f=this.material.length;i<f;i++)d.push(b(r.materials,this.material[i]));x.material=d}else x.material=b(r.materials,this.material);if(this.children.length>0){x.children=[];for(let d=0;d<this.children.length;d++)x.children.push(this.children[d].toJSON(r).object)}if(this.animations.length>0){x.animations=[];for(let d=0;d<this.animations.length;d++){const i=this.animations[d];x.animations.push(b(r.animations,i))}}if(o){const d=h(r.geometries),i=h(r.materials),f=h(r.textures),g=h(r.images),m=h(r.shapes),n=h(r.skeletons),s=h(r.animations),l=h(r.nodes);d.length>0&&(t.geometries=d),i.length>0&&(t.materials=i),f.length>0&&(t.textures=f),g.length>0&&(t.images=g),m.length>0&&(t.shapes=m),n.length>0&&(t.skeletons=n),s.length>0&&(t.animations=s),l.length>0&&(t.nodes=l)}return t.object=x,t;function h(d){const i=[];for(const f in d){const g=d[f];delete g.metadata,i.push(g)}return i}}clone(r){return new this.constructor().copy(this,r)}copy(r,o=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.animations=r.animations,this.userData=JSON.parse(JSON.stringify(r.userData)),o===!0)for(let t=0;t<r.children.length;t++){const x=r.children[t];this.add(x.clone())}return this}}_r.DEFAULT_UP=new qe(0,1,0);_r.DEFAULT_MATRIX_AUTO_UPDATE=!0;_r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const jr=new qe,Yr=new qe,Ns=new qe,$r=new qe,$n=new qe,Zn=new qe,Ia=new qe,Bs=new qe,Gs=new qe,zs=new qe;let Wi=!1;class Rr{constructor(r=new qe,o=new qe,t=new qe){this.a=r,this.b=o,this.c=t}static getNormal(r,o,t,x){x.subVectors(t,o),jr.subVectors(r,o),x.cross(jr);const b=x.lengthSq();return b>0?x.multiplyScalar(1/Math.sqrt(b)):x.set(0,0,0)}static getBarycoord(r,o,t,x,b){jr.subVectors(x,o),Yr.subVectors(t,o),Ns.subVectors(r,o);const h=jr.dot(jr),d=jr.dot(Yr),i=jr.dot(Ns),f=Yr.dot(Yr),g=Yr.dot(Ns),m=h*f-d*d;if(m===0)return b.set(-2,-1,-1);const n=1/m,s=(f*i-d*g)*n,l=(h*g-d*i)*n;return b.set(1-s-l,l,s)}static containsPoint(r,o,t,x){return this.getBarycoord(r,o,t,x,$r),$r.x>=0&&$r.y>=0&&$r.x+$r.y<=1}static getUV(r,o,t,x,b,h,d,i){return Wi===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Wi=!0),this.getInterpolation(r,o,t,x,b,h,d,i)}static getInterpolation(r,o,t,x,b,h,d,i){return this.getBarycoord(r,o,t,x,$r),i.setScalar(0),i.addScaledVector(b,$r.x),i.addScaledVector(h,$r.y),i.addScaledVector(d,$r.z),i}static isFrontFacing(r,o,t,x){return jr.subVectors(t,o),Yr.subVectors(r,o),jr.cross(Yr).dot(x)<0}set(r,o,t){return this.a.copy(r),this.b.copy(o),this.c.copy(t),this}setFromPointsAndIndices(r,o,t,x){return this.a.copy(r[o]),this.b.copy(r[t]),this.c.copy(r[x]),this}setFromAttributeAndIndices(r,o,t,x){return this.a.fromBufferAttribute(r,o),this.b.fromBufferAttribute(r,t),this.c.fromBufferAttribute(r,x),this}clone(){return new this.constructor().copy(this)}copy(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this}getArea(){return jr.subVectors(this.c,this.b),Yr.subVectors(this.a,this.b),jr.cross(Yr).length()*.5}getMidpoint(r){return r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(r){return Rr.getNormal(this.a,this.b,this.c,r)}getPlane(r){return r.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(r,o){return Rr.getBarycoord(r,this.a,this.b,this.c,o)}getUV(r,o,t,x,b){return Wi===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Wi=!0),Rr.getInterpolation(r,this.a,this.b,this.c,o,t,x,b)}getInterpolation(r,o,t,x,b){return Rr.getInterpolation(r,this.a,this.b,this.c,o,t,x,b)}containsPoint(r){return Rr.containsPoint(r,this.a,this.b,this.c)}isFrontFacing(r){return Rr.isFrontFacing(this.a,this.b,this.c,r)}intersectsBox(r){return r.intersectsTriangle(this)}closestPointToPoint(r,o){const t=this.a,x=this.b,b=this.c;let h,d;$n.subVectors(x,t),Zn.subVectors(b,t),Bs.subVectors(r,t);const i=$n.dot(Bs),f=Zn.dot(Bs);if(i<=0&&f<=0)return o.copy(t);Gs.subVectors(r,x);const g=$n.dot(Gs),m=Zn.dot(Gs);if(g>=0&&m<=g)return o.copy(x);const n=i*m-g*f;if(n<=0&&i>=0&&g<=0)return h=i/(i-g),o.copy(t).addScaledVector($n,h);zs.subVectors(r,b);const s=$n.dot(zs),l=Zn.dot(zs);if(l>=0&&s<=l)return o.copy(b);const c=s*f-i*l;if(c<=0&&f>=0&&l<=0)return d=f/(f-l),o.copy(t).addScaledVector(Zn,d);const a=g*l-s*m;if(a<=0&&m-g>=0&&s-l>=0)return Ia.subVectors(b,x),d=(m-g)/(m-g+(s-l)),o.copy(x).addScaledVector(Ia,d);const u=1/(a+c+n);return h=c*u,d=n*u,o.copy(t).addScaledVector($n,h).addScaledVector(Zn,d)}equals(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}let Ou=0;class fs extends hi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ou++}),this.uuid=Ri(),this.name="",this.type="Material",this.blending=oi,this.side=gn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ml,this.blendDst=gl,this.blendEquation=ii,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Qs,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=au,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=As,this.stencilZFail=As,this.stencilZPass=As,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(r){this._alphaTest>0!=r>0&&this.version++,this._alphaTest=r}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(r){if(r!==void 0)for(const o in r){const t=r[o];if(t===void 0){console.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}const x=this[o];if(x===void 0){console.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`);continue}x&&x.isColor?x.set(t):x&&x.isVector3&&t&&t.isVector3?x.copy(t):this[o]=t}}toJSON(r){const o=r===void 0||typeof r=="string";o&&(r={textures:{},images:{}});const t={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(r).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(r).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(r).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(r).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(r).uuid),this.anisotropy!==void 0&&(t.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(t.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(t.anisotropyMap=this.anisotropyMap.toJSON(r).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(r).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(r).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(r).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(r).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(r).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(r).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(r).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(r).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(r).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(r).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(r).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(r).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(r).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(r).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(r).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(r).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(r).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(r).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==oi&&(t.blending=this.blending),this.side!==gn&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.colorWrite=this.colorWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(t.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(t.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=this.flatShading),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),Object.keys(this.userData).length>0&&(t.userData=this.userData);function x(b){const h=[];for(const d in b){const i=b[d];delete i.metadata,h.push(i)}return h}if(o){const b=x(r.textures),h=x(r.images);b.length>0&&(t.textures=b),h.length>0&&(t.images=h)}return t}clone(){return new this.constructor().copy(this)}copy(r){this.name=r.name,this.blending=r.blending,this.side=r.side,this.vertexColors=r.vertexColors,this.opacity=r.opacity,this.transparent=r.transparent,this.blendSrc=r.blendSrc,this.blendDst=r.blendDst,this.blendEquation=r.blendEquation,this.blendSrcAlpha=r.blendSrcAlpha,this.blendDstAlpha=r.blendDstAlpha,this.blendEquationAlpha=r.blendEquationAlpha,this.depthFunc=r.depthFunc,this.depthTest=r.depthTest,this.depthWrite=r.depthWrite,this.stencilWriteMask=r.stencilWriteMask,this.stencilFunc=r.stencilFunc,this.stencilRef=r.stencilRef,this.stencilFuncMask=r.stencilFuncMask,this.stencilFail=r.stencilFail,this.stencilZFail=r.stencilZFail,this.stencilZPass=r.stencilZPass,this.stencilWrite=r.stencilWrite;const o=r.clippingPlanes;let t=null;if(o!==null){const x=o.length;t=new Array(x);for(let b=0;b!==x;++b)t[b]=o[b].clone()}return this.clippingPlanes=t,this.clipIntersection=r.clipIntersection,this.clipShadows=r.clipShadows,this.shadowSide=r.shadowSide,this.colorWrite=r.colorWrite,this.precision=r.precision,this.polygonOffset=r.polygonOffset,this.polygonOffsetFactor=r.polygonOffsetFactor,this.polygonOffsetUnits=r.polygonOffsetUnits,this.dithering=r.dithering,this.alphaTest=r.alphaTest,this.alphaToCoverage=r.alphaToCoverage,this.premultipliedAlpha=r.premultipliedAlpha,this.forceSinglePass=r.forceSinglePass,this.visible=r.visible,this.toneMapped=r.toneMapped,this.userData=JSON.parse(JSON.stringify(r.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(r){r===!0&&this.version++}}const Dl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cr={h:0,s:0,l:0},Xi={h:0,s:0,l:0};function Vs(S,r,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?S+(r-S)*6*o:o<1/2?r:o<2/3?S+(r-S)*6*(2/3-o):S}class Ut{constructor(r,o,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(r,o,t)}set(r,o,t){if(o===void 0&&t===void 0){const x=r;x&&x.isColor?this.copy(x):typeof x=="number"?this.setHex(x):typeof x=="string"&&this.setStyle(x)}else this.setRGB(r,o,t);return this}setScalar(r){return this.r=r,this.g=r,this.b=r,this}setHex(r,o=bt){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(r&255)/255,Tr.toWorkingColorSpace(this,o),this}setRGB(r,o,t,x=Tr.workingColorSpace){return this.r=r,this.g=o,this.b=t,Tr.toWorkingColorSpace(this,x),this}setHSL(r,o,t,x=Tr.workingColorSpace){if(r=gu(r,1),o=mr(o,0,1),t=mr(t,0,1),o===0)this.r=this.g=this.b=t;else{const b=t<=.5?t*(1+o):t+o-t*o,h=2*t-b;this.r=Vs(h,b,r+1/3),this.g=Vs(h,b,r),this.b=Vs(h,b,r-1/3)}return Tr.toWorkingColorSpace(this,x),this}setStyle(r,o=bt){function t(b){b!==void 0&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}let x;if(x=/^(\w+)\(([^\)]*)\)/.exec(r)){let b;const h=x[1],d=x[2];switch(h){case"rgb":case"rgba":if(b=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return t(b[4]),this.setRGB(Math.min(255,parseInt(b[1],10))/255,Math.min(255,parseInt(b[2],10))/255,Math.min(255,parseInt(b[3],10))/255,o);if(b=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return t(b[4]),this.setRGB(Math.min(100,parseInt(b[1],10))/100,Math.min(100,parseInt(b[2],10))/100,Math.min(100,parseInt(b[3],10))/100,o);break;case"hsl":case"hsla":if(b=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return t(b[4]),this.setHSL(parseFloat(b[1])/360,parseFloat(b[2])/100,parseFloat(b[3])/100,o);break;default:console.warn("THREE.Color: Unknown color model "+r)}}else if(x=/^\#([A-Fa-f\d]+)$/.exec(r)){const b=x[1],h=b.length;if(h===3)return this.setRGB(parseInt(b.charAt(0),16)/15,parseInt(b.charAt(1),16)/15,parseInt(b.charAt(2),16)/15,o);if(h===6)return this.setHex(parseInt(b,16),o);console.warn("THREE.Color: Invalid hex color "+r)}else if(r&&r.length>0)return this.setColorName(r,o);return this}setColorName(r,o=bt){const t=Dl[r.toLowerCase()];return t!==void 0?this.setHex(t,o):console.warn("THREE.Color: Unknown color "+r),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(r){return this.r=r.r,this.g=r.g,this.b=r.b,this}copySRGBToLinear(r){return this.r=ai(r.r),this.g=ai(r.g),this.b=ai(r.b),this}copyLinearToSRGB(r){return this.r=Ls(r.r),this.g=Ls(r.g),this.b=Ls(r.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(r=bt){return Tr.fromWorkingColorSpace(ar.copy(this),r),Math.round(mr(ar.r*255,0,255))*65536+Math.round(mr(ar.g*255,0,255))*256+Math.round(mr(ar.b*255,0,255))}getHexString(r=bt){return("000000"+this.getHex(r).toString(16)).slice(-6)}getHSL(r,o=Tr.workingColorSpace){Tr.fromWorkingColorSpace(ar.copy(this),o);const t=ar.r,x=ar.g,b=ar.b,h=Math.max(t,x,b),d=Math.min(t,x,b);let i,f;const g=(d+h)/2;if(d===h)i=0,f=0;else{const m=h-d;switch(f=g<=.5?m/(h+d):m/(2-h-d),h){case t:i=(x-b)/m+(x<b?6:0);break;case x:i=(b-t)/m+2;break;case b:i=(t-x)/m+4;break}i/=6}return r.h=i,r.s=f,r.l=g,r}getRGB(r,o=Tr.workingColorSpace){return Tr.fromWorkingColorSpace(ar.copy(this),o),r.r=ar.r,r.g=ar.g,r.b=ar.b,r}getStyle(r=bt){Tr.fromWorkingColorSpace(ar.copy(this),r);const o=ar.r,t=ar.g,x=ar.b;return r!==bt?`color(${r} ${o.toFixed(3)} ${t.toFixed(3)} ${x.toFixed(3)})`:`rgb(${Math.round(o*255)},${Math.round(t*255)},${Math.round(x*255)})`}offsetHSL(r,o,t){return this.getHSL(Cr),Cr.h+=r,Cr.s+=o,Cr.l+=t,this.setHSL(Cr.h,Cr.s,Cr.l),this}add(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this}addColors(r,o){return this.r=r.r+o.r,this.g=r.g+o.g,this.b=r.b+o.b,this}addScalar(r){return this.r+=r,this.g+=r,this.b+=r,this}sub(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this}multiply(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this}multiplyScalar(r){return this.r*=r,this.g*=r,this.b*=r,this}lerp(r,o){return this.r+=(r.r-this.r)*o,this.g+=(r.g-this.g)*o,this.b+=(r.b-this.b)*o,this}lerpColors(r,o,t){return this.r=r.r+(o.r-r.r)*t,this.g=r.g+(o.g-r.g)*t,this.b=r.b+(o.b-r.b)*t,this}lerpHSL(r,o){this.getHSL(Cr),r.getHSL(Xi);const t=Cs(Cr.h,Xi.h,o),x=Cs(Cr.s,Xi.s,o),b=Cs(Cr.l,Xi.l,o);return this.setHSL(t,x,b),this}setFromVector3(r){return this.r=r.x,this.g=r.y,this.b=r.z,this}applyMatrix3(r){const o=this.r,t=this.g,x=this.b,b=r.elements;return this.r=b[0]*o+b[3]*t+b[6]*x,this.g=b[1]*o+b[4]*t+b[7]*x,this.b=b[2]*o+b[5]*t+b[8]*x,this}equals(r){return r.r===this.r&&r.g===this.g&&r.b===this.b}fromArray(r,o=0){return this.r=r[o],this.g=r[o+1],this.b=r[o+2],this}toArray(r=[],o=0){return r[o]=this.r,r[o+1]=this.g,r[o+2]=this.b,r}fromBufferAttribute(r,o){return this.r=r.getX(o),this.g=r.getY(o),this.b=r.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ar=new Ut;Ut.NAMES=Dl;class Il extends fs{constructor(r){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.fog=r.fog,this}}const Xt=new qe,qi=new It;class Nr{constructor(r,o,t=!1){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=r,this.itemSize=o,this.count=r!==void 0?r.length/o:0,this.normalized=t,this.usage=Ma,this.updateRange={offset:0,count:-1},this.gpuType=fn,this.version=0}onUploadCallback(){}set needsUpdate(r){r===!0&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this.gpuType=r.gpuType,this}copyAt(r,o,t){r*=this.itemSize,t*=o.itemSize;for(let x=0,b=this.itemSize;x<b;x++)this.array[r+x]=o.array[t+x];return this}copyArray(r){return this.array.set(r),this}applyMatrix3(r){if(this.itemSize===2)for(let o=0,t=this.count;o<t;o++)qi.fromBufferAttribute(this,o),qi.applyMatrix3(r),this.setXY(o,qi.x,qi.y);else if(this.itemSize===3)for(let o=0,t=this.count;o<t;o++)Xt.fromBufferAttribute(this,o),Xt.applyMatrix3(r),this.setXYZ(o,Xt.x,Xt.y,Xt.z);return this}applyMatrix4(r){for(let o=0,t=this.count;o<t;o++)Xt.fromBufferAttribute(this,o),Xt.applyMatrix4(r),this.setXYZ(o,Xt.x,Xt.y,Xt.z);return this}applyNormalMatrix(r){for(let o=0,t=this.count;o<t;o++)Xt.fromBufferAttribute(this,o),Xt.applyNormalMatrix(r),this.setXYZ(o,Xt.x,Xt.y,Xt.z);return this}transformDirection(r){for(let o=0,t=this.count;o<t;o++)Xt.fromBufferAttribute(this,o),Xt.transformDirection(r),this.setXYZ(o,Xt.x,Xt.y,Xt.z);return this}set(r,o=0){return this.array.set(r,o),this}getX(r){let o=this.array[r*this.itemSize];return this.normalized&&(o=Fi(o,this.array)),o}setX(r,o){return this.normalized&&(o=gr(o,this.array)),this.array[r*this.itemSize]=o,this}getY(r){let o=this.array[r*this.itemSize+1];return this.normalized&&(o=Fi(o,this.array)),o}setY(r,o){return this.normalized&&(o=gr(o,this.array)),this.array[r*this.itemSize+1]=o,this}getZ(r){let o=this.array[r*this.itemSize+2];return this.normalized&&(o=Fi(o,this.array)),o}setZ(r,o){return this.normalized&&(o=gr(o,this.array)),this.array[r*this.itemSize+2]=o,this}getW(r){let o=this.array[r*this.itemSize+3];return this.normalized&&(o=Fi(o,this.array)),o}setW(r,o){return this.normalized&&(o=gr(o,this.array)),this.array[r*this.itemSize+3]=o,this}setXY(r,o,t){return r*=this.itemSize,this.normalized&&(o=gr(o,this.array),t=gr(t,this.array)),this.array[r+0]=o,this.array[r+1]=t,this}setXYZ(r,o,t,x){return r*=this.itemSize,this.normalized&&(o=gr(o,this.array),t=gr(t,this.array),x=gr(x,this.array)),this.array[r+0]=o,this.array[r+1]=t,this.array[r+2]=x,this}setXYZW(r,o,t,x,b){return r*=this.itemSize,this.normalized&&(o=gr(o,this.array),t=gr(t,this.array),x=gr(x,this.array),b=gr(b,this.array)),this.array[r+0]=o,this.array[r+1]=t,this.array[r+2]=x,this.array[r+3]=b,this}onUpload(r){return this.onUploadCallback=r,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const r={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(r.name=this.name),this.usage!==Ma&&(r.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(r.updateRange=this.updateRange),r}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class kl extends Nr{constructor(r,o,t){super(new Uint16Array(r),o,t)}}class Ul extends Nr{constructor(r,o,t){super(new Uint32Array(r),o,t)}}class On extends Nr{constructor(r,o,t){super(new Float32Array(r),o,t)}}let Du=0;const wr=new rr,Hs=new _r,Kn=new qe,vr=new Pi,Si=new Pi,Jt=new qe;class In extends hi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Du++}),this.uuid=Ri(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(r){return Array.isArray(r)?this.index=new(jl(r)?Ul:kl)(r,1):this.index=r,this}getAttribute(r){return this.attributes[r]}setAttribute(r,o){return this.attributes[r]=o,this}deleteAttribute(r){return delete this.attributes[r],this}hasAttribute(r){return this.attributes[r]!==void 0}addGroup(r,o,t=0){this.groups.push({start:r,count:o,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(r,o){this.drawRange.start=r,this.drawRange.count=o}applyMatrix4(r){const o=this.attributes.position;o!==void 0&&(o.applyMatrix4(r),o.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const b=new wt().getNormalMatrix(r);t.applyNormalMatrix(b),t.needsUpdate=!0}const x=this.attributes.tangent;return x!==void 0&&(x.transformDirection(r),x.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(r){return wr.makeRotationFromQuaternion(r),this.applyMatrix4(wr),this}rotateX(r){return wr.makeRotationX(r),this.applyMatrix4(wr),this}rotateY(r){return wr.makeRotationY(r),this.applyMatrix4(wr),this}rotateZ(r){return wr.makeRotationZ(r),this.applyMatrix4(wr),this}translate(r,o,t){return wr.makeTranslation(r,o,t),this.applyMatrix4(wr),this}scale(r,o,t){return wr.makeScale(r,o,t),this.applyMatrix4(wr),this}lookAt(r){return Hs.lookAt(r),Hs.updateMatrix(),this.applyMatrix4(Hs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kn).negate(),this.translate(Kn.x,Kn.y,Kn.z),this}setFromPoints(r){const o=[];for(let t=0,x=r.length;t<x;t++){const b=r[t];o.push(b.x,b.y,b.z||0)}return this.setAttribute("position",new On(o,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const r=this.attributes.position,o=this.morphAttributes.position;if(r&&r.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new qe(-1/0,-1/0,-1/0),new qe(1/0,1/0,1/0));return}if(r!==void 0){if(this.boundingBox.setFromBufferAttribute(r),o)for(let t=0,x=o.length;t<x;t++){const b=o[t];vr.setFromBufferAttribute(b),this.morphTargetsRelative?(Jt.addVectors(this.boundingBox.min,vr.min),this.boundingBox.expandByPoint(Jt),Jt.addVectors(this.boundingBox.max,vr.max),this.boundingBox.expandByPoint(Jt)):(this.boundingBox.expandByPoint(vr.min),this.boundingBox.expandByPoint(vr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new po);const r=this.attributes.position,o=this.morphAttributes.position;if(r&&r.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new qe,1/0);return}if(r){const t=this.boundingSphere.center;if(vr.setFromBufferAttribute(r),o)for(let b=0,h=o.length;b<h;b++){const d=o[b];Si.setFromBufferAttribute(d),this.morphTargetsRelative?(Jt.addVectors(vr.min,Si.min),vr.expandByPoint(Jt),Jt.addVectors(vr.max,Si.max),vr.expandByPoint(Jt)):(vr.expandByPoint(Si.min),vr.expandByPoint(Si.max))}vr.getCenter(t);let x=0;for(let b=0,h=r.count;b<h;b++)Jt.fromBufferAttribute(r,b),x=Math.max(x,t.distanceToSquared(Jt));if(o)for(let b=0,h=o.length;b<h;b++){const d=o[b],i=this.morphTargetsRelative;for(let f=0,g=d.count;f<g;f++)Jt.fromBufferAttribute(d,f),i&&(Kn.fromBufferAttribute(r,f),Jt.add(Kn)),x=Math.max(x,t.distanceToSquared(Jt))}this.boundingSphere.radius=Math.sqrt(x),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const r=this.index,o=this.attributes;if(r===null||o.position===void 0||o.normal===void 0||o.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=r.array,x=o.position.array,b=o.normal.array,h=o.uv.array,d=x.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Nr(new Float32Array(4*d),4));const i=this.getAttribute("tangent").array,f=[],g=[];for(let L=0;L<d;L++)f[L]=new qe,g[L]=new qe;const m=new qe,n=new qe,s=new qe,l=new It,c=new It,a=new It,u=new qe,y=new qe;function p(L,M,k){m.fromArray(x,L*3),n.fromArray(x,M*3),s.fromArray(x,k*3),l.fromArray(h,L*2),c.fromArray(h,M*2),a.fromArray(h,k*2),n.sub(m),s.sub(m),c.sub(l),a.sub(l);const O=1/(c.x*a.y-a.x*c.y);isFinite(O)&&(u.copy(n).multiplyScalar(a.y).addScaledVector(s,-c.y).multiplyScalar(O),y.copy(s).multiplyScalar(c.x).addScaledVector(n,-a.x).multiplyScalar(O),f[L].add(u),f[M].add(u),f[k].add(u),g[L].add(y),g[M].add(y),g[k].add(y))}let v=this.groups;v.length===0&&(v=[{start:0,count:t.length}]);for(let L=0,M=v.length;L<M;++L){const k=v[L],O=k.start,N=k.count;for(let U=O,V=O+N;U<V;U+=3)p(t[U+0],t[U+1],t[U+2])}const w=new qe,C=new qe,T=new qe,j=new qe;function A(L){T.fromArray(b,L*3),j.copy(T);const M=f[L];w.copy(M),w.sub(T.multiplyScalar(T.dot(M))).normalize(),C.crossVectors(j,M);const O=C.dot(g[L])<0?-1:1;i[L*4]=w.x,i[L*4+1]=w.y,i[L*4+2]=w.z,i[L*4+3]=O}for(let L=0,M=v.length;L<M;++L){const k=v[L],O=k.start,N=k.count;for(let U=O,V=O+N;U<V;U+=3)A(t[U+0]),A(t[U+1]),A(t[U+2])}}computeVertexNormals(){const r=this.index,o=this.getAttribute("position");if(o!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new Nr(new Float32Array(o.count*3),3),this.setAttribute("normal",t);else for(let n=0,s=t.count;n<s;n++)t.setXYZ(n,0,0,0);const x=new qe,b=new qe,h=new qe,d=new qe,i=new qe,f=new qe,g=new qe,m=new qe;if(r)for(let n=0,s=r.count;n<s;n+=3){const l=r.getX(n+0),c=r.getX(n+1),a=r.getX(n+2);x.fromBufferAttribute(o,l),b.fromBufferAttribute(o,c),h.fromBufferAttribute(o,a),g.subVectors(h,b),m.subVectors(x,b),g.cross(m),d.fromBufferAttribute(t,l),i.fromBufferAttribute(t,c),f.fromBufferAttribute(t,a),d.add(g),i.add(g),f.add(g),t.setXYZ(l,d.x,d.y,d.z),t.setXYZ(c,i.x,i.y,i.z),t.setXYZ(a,f.x,f.y,f.z)}else for(let n=0,s=o.count;n<s;n+=3)x.fromBufferAttribute(o,n+0),b.fromBufferAttribute(o,n+1),h.fromBufferAttribute(o,n+2),g.subVectors(h,b),m.subVectors(x,b),g.cross(m),t.setXYZ(n+0,g.x,g.y,g.z),t.setXYZ(n+1,g.x,g.y,g.z),t.setXYZ(n+2,g.x,g.y,g.z);this.normalizeNormals(),t.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const r=this.attributes.normal;for(let o=0,t=r.count;o<t;o++)Jt.fromBufferAttribute(r,o),Jt.normalize(),r.setXYZ(o,Jt.x,Jt.y,Jt.z)}toNonIndexed(){function r(d,i){const f=d.array,g=d.itemSize,m=d.normalized,n=new f.constructor(i.length*g);let s=0,l=0;for(let c=0,a=i.length;c<a;c++){d.isInterleavedBufferAttribute?s=i[c]*d.data.stride+d.offset:s=i[c]*g;for(let u=0;u<g;u++)n[l++]=f[s++]}return new Nr(n,g,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new In,t=this.index.array,x=this.attributes;for(const d in x){const i=x[d],f=r(i,t);o.setAttribute(d,f)}const b=this.morphAttributes;for(const d in b){const i=[],f=b[d];for(let g=0,m=f.length;g<m;g++){const n=f[g],s=r(n,t);i.push(s)}o.morphAttributes[d]=i}o.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let d=0,i=h.length;d<i;d++){const f=h[d];o.addGroup(f.start,f.count,f.materialIndex)}return o}toJSON(){const r={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),Object.keys(this.userData).length>0&&(r.userData=this.userData),this.parameters!==void 0){const i=this.parameters;for(const f in i)i[f]!==void 0&&(r[f]=i[f]);return r}r.data={attributes:{}};const o=this.index;o!==null&&(r.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const t=this.attributes;for(const i in t){const f=t[i];r.data.attributes[i]=f.toJSON(r.data)}const x={};let b=!1;for(const i in this.morphAttributes){const f=this.morphAttributes[i],g=[];for(let m=0,n=f.length;m<n;m++){const s=f[m];g.push(s.toJSON(r.data))}g.length>0&&(x[i]=g,b=!0)}b&&(r.data.morphAttributes=x,r.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(r.data.groups=JSON.parse(JSON.stringify(h)));const d=this.boundingSphere;return d!==null&&(r.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),r}clone(){return new this.constructor().copy(this)}copy(r){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=r.name;const t=r.index;t!==null&&this.setIndex(t.clone(o));const x=r.attributes;for(const f in x){const g=x[f];this.setAttribute(f,g.clone(o))}const b=r.morphAttributes;for(const f in b){const g=[],m=b[f];for(let n=0,s=m.length;n<s;n++)g.push(m[n].clone(o));this.morphAttributes[f]=g}this.morphTargetsRelative=r.morphTargetsRelative;const h=r.groups;for(let f=0,g=h.length;f<g;f++){const m=h[f];this.addGroup(m.start,m.count,m.materialIndex)}const d=r.boundingBox;d!==null&&(this.boundingBox=d.clone());const i=r.boundingSphere;return i!==null&&(this.boundingSphere=i.clone()),this.drawRange.start=r.drawRange.start,this.drawRange.count=r.drawRange.count,this.userData=r.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ka=new rr,wn=new Tu,Yi=new po,Ua=new qe,Jn=new qe,Qn=new qe,ei=new qe,Ws=new qe,$i=new qe,Zi=new It,Ki=new It,Ji=new It,Fa=new qe,Na=new qe,Ba=new qe,Qi=new qe,es=new qe;class Qr extends _r{constructor(r=new In,o=new Il){super(),this.isMesh=!0,this.type="Mesh",this.geometry=r,this.material=o,this.updateMorphTargets()}copy(r,o){return super.copy(r,o),r.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),r.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},r.morphTargetDictionary)),this.material=r.material,this.geometry=r.geometry,this}updateMorphTargets(){const o=this.geometry.morphAttributes,t=Object.keys(o);if(t.length>0){const x=o[t[0]];if(x!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,h=x.length;b<h;b++){const d=x[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=b}}}}getVertexPosition(r,o){const t=this.geometry,x=t.attributes.position,b=t.morphAttributes.position,h=t.morphTargetsRelative;o.fromBufferAttribute(x,r);const d=this.morphTargetInfluences;if(b&&d){$i.set(0,0,0);for(let i=0,f=b.length;i<f;i++){const g=d[i],m=b[i];g!==0&&(Ws.fromBufferAttribute(m,r),h?$i.addScaledVector(Ws,g):$i.addScaledVector(Ws.sub(o),g))}o.add($i)}return o}raycast(r,o){const t=this.geometry,x=this.material,b=this.matrixWorld;x!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),Yi.copy(t.boundingSphere),Yi.applyMatrix4(b),wn.copy(r.ray).recast(r.near),!(Yi.containsPoint(wn.origin)===!1&&(wn.intersectSphere(Yi,Ua)===null||wn.origin.distanceToSquared(Ua)>(r.far-r.near)**2))&&(ka.copy(b).invert(),wn.copy(r.ray).applyMatrix4(ka),!(t.boundingBox!==null&&wn.intersectsBox(t.boundingBox)===!1)&&this._computeIntersections(r,o,wn)))}_computeIntersections(r,o,t){let x;const b=this.geometry,h=this.material,d=b.index,i=b.attributes.position,f=b.attributes.uv,g=b.attributes.uv1,m=b.attributes.normal,n=b.groups,s=b.drawRange;if(d!==null)if(Array.isArray(h))for(let l=0,c=n.length;l<c;l++){const a=n[l],u=h[a.materialIndex],y=Math.max(a.start,s.start),p=Math.min(d.count,Math.min(a.start+a.count,s.start+s.count));for(let v=y,w=p;v<w;v+=3){const C=d.getX(v),T=d.getX(v+1),j=d.getX(v+2);x=ts(this,u,r,t,f,g,m,C,T,j),x&&(x.faceIndex=Math.floor(v/3),x.face.materialIndex=a.materialIndex,o.push(x))}}else{const l=Math.max(0,s.start),c=Math.min(d.count,s.start+s.count);for(let a=l,u=c;a<u;a+=3){const y=d.getX(a),p=d.getX(a+1),v=d.getX(a+2);x=ts(this,h,r,t,f,g,m,y,p,v),x&&(x.faceIndex=Math.floor(a/3),o.push(x))}}else if(i!==void 0)if(Array.isArray(h))for(let l=0,c=n.length;l<c;l++){const a=n[l],u=h[a.materialIndex],y=Math.max(a.start,s.start),p=Math.min(i.count,Math.min(a.start+a.count,s.start+s.count));for(let v=y,w=p;v<w;v+=3){const C=v,T=v+1,j=v+2;x=ts(this,u,r,t,f,g,m,C,T,j),x&&(x.faceIndex=Math.floor(v/3),x.face.materialIndex=a.materialIndex,o.push(x))}}else{const l=Math.max(0,s.start),c=Math.min(i.count,s.start+s.count);for(let a=l,u=c;a<u;a+=3){const y=a,p=a+1,v=a+2;x=ts(this,h,r,t,f,g,m,y,p,v),x&&(x.faceIndex=Math.floor(a/3),o.push(x))}}}}function Iu(S,r,o,t,x,b,h,d){let i;if(r.side===dr?i=t.intersectTriangle(h,b,x,!0,d):i=t.intersectTriangle(x,b,h,r.side===gn,d),i===null)return null;es.copy(d),es.applyMatrix4(S.matrixWorld);const f=o.ray.origin.distanceTo(es);return f<o.near||f>o.far?null:{distance:f,point:es.clone(),object:S}}function ts(S,r,o,t,x,b,h,d,i,f){S.getVertexPosition(d,Jn),S.getVertexPosition(i,Qn),S.getVertexPosition(f,ei);const g=Iu(S,r,o,t,Jn,Qn,ei,Qi);if(g){x&&(Zi.fromBufferAttribute(x,d),Ki.fromBufferAttribute(x,i),Ji.fromBufferAttribute(x,f),g.uv=Rr.getInterpolation(Qi,Jn,Qn,ei,Zi,Ki,Ji,new It)),b&&(Zi.fromBufferAttribute(b,d),Ki.fromBufferAttribute(b,i),Ji.fromBufferAttribute(b,f),g.uv1=Rr.getInterpolation(Qi,Jn,Qn,ei,Zi,Ki,Ji,new It),g.uv2=g.uv1),h&&(Fa.fromBufferAttribute(h,d),Na.fromBufferAttribute(h,i),Ba.fromBufferAttribute(h,f),g.normal=Rr.getInterpolation(Qi,Jn,Qn,ei,Fa,Na,Ba,new qe),g.normal.dot(t.direction)>0&&g.normal.multiplyScalar(-1));const m={a:d,b:i,c:f,normal:new qe,materialIndex:0};Rr.getNormal(Jn,Qn,ei,m.normal),g.face=m}return g}class fi extends In{constructor(r=1,o=1,t=1,x=1,b=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:r,height:o,depth:t,widthSegments:x,heightSegments:b,depthSegments:h};const d=this;x=Math.floor(x),b=Math.floor(b),h=Math.floor(h);const i=[],f=[],g=[],m=[];let n=0,s=0;l("z","y","x",-1,-1,t,o,r,h,b,0),l("z","y","x",1,-1,t,o,-r,h,b,1),l("x","z","y",1,1,r,t,o,x,h,2),l("x","z","y",1,-1,r,t,-o,x,h,3),l("x","y","z",1,-1,r,o,t,x,b,4),l("x","y","z",-1,-1,r,o,-t,x,b,5),this.setIndex(i),this.setAttribute("position",new On(f,3)),this.setAttribute("normal",new On(g,3)),this.setAttribute("uv",new On(m,2));function l(c,a,u,y,p,v,w,C,T,j,A){const L=v/T,M=w/j,k=v/2,O=w/2,N=C/2,U=T+1,V=j+1;let G=0,z=0;const W=new qe;for(let Z=0;Z<V;Z++){const I=Z*M-O;for(let q=0;q<U;q++){const D=q*L-k;W[c]=D*y,W[a]=I*p,W[u]=N,f.push(W.x,W.y,W.z),W[c]=0,W[a]=0,W[u]=C>0?1:-1,g.push(W.x,W.y,W.z),m.push(q/T),m.push(1-Z/j),G+=1}}for(let Z=0;Z<j;Z++)for(let I=0;I<T;I++){const q=n+I+U*Z,D=n+I+U*(Z+1),F=n+(I+1)+U*(Z+1),H=n+(I+1)+U*Z;i.push(q,D,H),i.push(D,F,H),z+=6}d.addGroup(s,z,A),s+=z,n+=G}}copy(r){return super.copy(r),this.parameters=Object.assign({},r.parameters),this}static fromJSON(r){return new fi(r.width,r.height,r.depth,r.widthSegments,r.heightSegments,r.depthSegments)}}function di(S){const r={};for(const o in S){r[o]={};for(const t in S[o]){const x=S[o][t];x&&(x.isColor||x.isMatrix3||x.isMatrix4||x.isVector2||x.isVector3||x.isVector4||x.isTexture||x.isQuaternion)?x.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),r[o][t]=null):r[o][t]=x.clone():Array.isArray(x)?r[o][t]=x.slice():r[o][t]=x}}return r}function cr(S){const r={};for(let o=0;o<S.length;o++){const t=di(S[o]);for(const x in t)r[x]=t[x]}return r}function ku(S){const r=[];for(let o=0;o<S.length;o++)r.push(S[o].clone());return r}function Fl(S){return S.getRenderTarget()===null?S.outputColorSpace:Gr}const Uu={clone:di,merge:cr};var Fu=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Nu=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yn extends fs{constructor(r){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Fu,this.fragmentShader=Nu,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,r!==void 0&&this.setValues(r)}copy(r){return super.copy(r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=di(r.uniforms),this.uniformsGroups=ku(r.uniformsGroups),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.fog=r.fog,this.lights=r.lights,this.clipping=r.clipping,this.extensions=Object.assign({},r.extensions),this.glslVersion=r.glslVersion,this}toJSON(r){const o=super.toJSON(r);o.glslVersion=this.glslVersion,o.uniforms={};for(const x in this.uniforms){const h=this.uniforms[x].value;h&&h.isTexture?o.uniforms[x]={type:"t",value:h.toJSON(r).uuid}:h&&h.isColor?o.uniforms[x]={type:"c",value:h.getHex()}:h&&h.isVector2?o.uniforms[x]={type:"v2",value:h.toArray()}:h&&h.isVector3?o.uniforms[x]={type:"v3",value:h.toArray()}:h&&h.isVector4?o.uniforms[x]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?o.uniforms[x]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?o.uniforms[x]={type:"m4",value:h.toArray()}:o.uniforms[x]={value:h}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader,o.lights=this.lights,o.clipping=this.clipping;const t={};for(const x in this.extensions)this.extensions[x]===!0&&(t[x]=!0);return Object.keys(t).length>0&&(o.extensions=t),o}}class Nl extends _r{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rr,this.projectionMatrix=new rr,this.projectionMatrixInverse=new rr,this.coordinateSystem=Jr}copy(r,o){return super.copy(r,o),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this.projectionMatrixInverse.copy(r.projectionMatrixInverse),this.coordinateSystem=r.coordinateSystem,this}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return r.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(r){super.updateMatrixWorld(r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(r,o){super.updateWorldMatrix(r,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Sr extends Nl{constructor(r=50,o=1,t=.1,x=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=r,this.zoom=1,this.near=t,this.far=x,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(r,o){return super.copy(r,o),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=r.view===null?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this}setFocalLength(r){const o=.5*this.getFilmHeight()/r;this.fov=oo*2*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const r=Math.tan(js*.5*this.fov);return .5*this.getFilmHeight()/r}getEffectiveFOV(){return oo*2*Math.atan(Math.tan(js*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(r,o,t,x,b,h){this.aspect=r/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=o,this.view.offsetX=t,this.view.offsetY=x,this.view.width=b,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=this.near;let o=r*Math.tan(js*.5*this.fov)/this.zoom,t=2*o,x=this.aspect*t,b=-.5*x;const h=this.view;if(this.view!==null&&this.view.enabled){const i=h.fullWidth,f=h.fullHeight;b+=h.offsetX*x/i,o-=h.offsetY*t/f,x*=h.width/i,t*=h.height/f}const d=this.filmOffset;d!==0&&(b+=r*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(b,b+x,o,o-t,r,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const o=super.toJSON(r);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,this.view!==null&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}const ti=-90,ri=1;class Bu extends _r{constructor(r,o,t){super(),this.type="CubeCamera",this.renderTarget=t,this.coordinateSystem=null;const x=new Sr(ti,ri,r,o);x.layers=this.layers,this.add(x);const b=new Sr(ti,ri,r,o);b.layers=this.layers,this.add(b);const h=new Sr(ti,ri,r,o);h.layers=this.layers,this.add(h);const d=new Sr(ti,ri,r,o);d.layers=this.layers,this.add(d);const i=new Sr(ti,ri,r,o);i.layers=this.layers,this.add(i);const f=new Sr(ti,ri,r,o);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const r=this.coordinateSystem,o=this.children.concat(),[t,x,b,h,d,i]=o;for(const f of o)this.remove(f);if(r===Jr)t.up.set(0,1,0),t.lookAt(1,0,0),x.up.set(0,1,0),x.lookAt(-1,0,0),b.up.set(0,0,-1),b.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),d.up.set(0,1,0),d.lookAt(0,0,1),i.up.set(0,1,0),i.lookAt(0,0,-1);else if(r===cs)t.up.set(0,-1,0),t.lookAt(-1,0,0),x.up.set(0,-1,0),x.lookAt(1,0,0),b.up.set(0,0,1),b.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),d.up.set(0,-1,0),d.lookAt(0,0,1),i.up.set(0,-1,0),i.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+r);for(const f of o)this.add(f),f.updateMatrixWorld()}update(r,o){this.parent===null&&this.updateMatrixWorld();const t=this.renderTarget;this.coordinateSystem!==r.coordinateSystem&&(this.coordinateSystem=r.coordinateSystem,this.updateCoordinateSystem());const[x,b,h,d,i,f]=this.children,g=r.getRenderTarget(),m=r.toneMapping,n=r.xr.enabled;r.toneMapping=en,r.xr.enabled=!1;const s=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,r.setRenderTarget(t,0),r.render(o,x),r.setRenderTarget(t,1),r.render(o,b),r.setRenderTarget(t,2),r.render(o,h),r.setRenderTarget(t,3),r.render(o,d),r.setRenderTarget(t,4),r.render(o,i),t.texture.generateMipmaps=s,r.setRenderTarget(t,5),r.render(o,f),r.setRenderTarget(g),r.toneMapping=m,r.xr.enabled=n,t.texture.needsPMREMUpdate=!0}}class Bl extends br{constructor(r,o,t,x,b,h,d,i,f,g){r=r!==void 0?r:[],o=o!==void 0?o:li,super(r,o,t,x,b,h,d,i,f,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(r){this.image=r}}class Gu extends Dn{constructor(r=1,o={}){super(r,r,o),this.isWebGLCubeRenderTarget=!0;const t={width:r,height:r,depth:1},x=[t,t,t,t,t,t];o.encoding!==void 0&&(Ei("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=o.encoding===Ln?bt:Pn),this.texture=new Bl(x,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:pr}fromEquirectangularTexture(r,o){this.texture.type=o.type,this.texture.colorSpace=o.colorSpace,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},x=new fi(5,5,5),b=new yn({name:"CubemapFromEquirect",uniforms:di(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:dr,blending:pn});b.uniforms.tEquirect.value=o;const h=new Qr(x,b),d=o.minFilter;return o.minFilter===Ai&&(o.minFilter=pr),new Bu(1,10,this).update(r,h),o.minFilter=d,h.geometry.dispose(),h.material.dispose(),this}clear(r,o,t,x){const b=r.getRenderTarget();for(let h=0;h<6;h++)r.setRenderTarget(this,h),r.clear(o,t,x);r.setRenderTarget(b)}}const Xs=new qe,zu=new qe,Vu=new wt;class En{constructor(r=new qe(1,0,0),o=0){this.isPlane=!0,this.normal=r,this.constant=o}set(r,o){return this.normal.copy(r),this.constant=o,this}setComponents(r,o,t,x){return this.normal.set(r,o,t),this.constant=x,this}setFromNormalAndCoplanarPoint(r,o){return this.normal.copy(r),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(r,o,t){const x=Xs.subVectors(t,o).cross(zu.subVectors(r,o)).normalize();return this.setFromNormalAndCoplanarPoint(x,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,o){return o.copy(r).addScaledVector(this.normal,-this.distanceToPoint(r))}intersectLine(r,o){const t=r.delta(Xs),x=this.normal.dot(t);if(x===0)return this.distanceToPoint(r.start)===0?o.copy(r.start):null;const b=-(r.start.dot(this.normal)+this.constant)/x;return b<0||b>1?null:o.copy(r.start).addScaledVector(t,b)}intersectsLine(r){const o=this.distanceToPoint(r.start),t=this.distanceToPoint(r.end);return o<0&&t>0||t<0&&o>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,o){const t=o||Vu.getNormalMatrix(r),x=this.coplanarPoint(Xs).applyMatrix4(r),b=this.normal.applyMatrix3(t).normalize();return this.constant=-x.dot(b),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Sn=new po,rs=new qe;class Gl{constructor(r=new En,o=new En,t=new En,x=new En,b=new En,h=new En){this.planes=[r,o,t,x,b,h]}set(r,o,t,x,b,h){const d=this.planes;return d[0].copy(r),d[1].copy(o),d[2].copy(t),d[3].copy(x),d[4].copy(b),d[5].copy(h),this}copy(r){const o=this.planes;for(let t=0;t<6;t++)o[t].copy(r.planes[t]);return this}setFromProjectionMatrix(r,o=Jr){const t=this.planes,x=r.elements,b=x[0],h=x[1],d=x[2],i=x[3],f=x[4],g=x[5],m=x[6],n=x[7],s=x[8],l=x[9],c=x[10],a=x[11],u=x[12],y=x[13],p=x[14],v=x[15];if(t[0].setComponents(i-b,n-f,a-s,v-u).normalize(),t[1].setComponents(i+b,n+f,a+s,v+u).normalize(),t[2].setComponents(i+h,n+g,a+l,v+y).normalize(),t[3].setComponents(i-h,n-g,a-l,v-y).normalize(),t[4].setComponents(i-d,n-m,a-c,v-p).normalize(),o===Jr)t[5].setComponents(i+d,n+m,a+c,v+p).normalize();else if(o===cs)t[5].setComponents(d,m,c,p).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+o);return this}intersectsObject(r){if(r.boundingSphere!==void 0)r.boundingSphere===null&&r.computeBoundingSphere(),Sn.copy(r.boundingSphere).applyMatrix4(r.matrixWorld);else{const o=r.geometry;o.boundingSphere===null&&o.computeBoundingSphere(),Sn.copy(o.boundingSphere).applyMatrix4(r.matrixWorld)}return this.intersectsSphere(Sn)}intersectsSprite(r){return Sn.center.set(0,0,0),Sn.radius=.7071067811865476,Sn.applyMatrix4(r.matrixWorld),this.intersectsSphere(Sn)}intersectsSphere(r){const o=this.planes,t=r.center,x=-r.radius;for(let b=0;b<6;b++)if(o[b].distanceToPoint(t)<x)return!1;return!0}intersectsBox(r){const o=this.planes;for(let t=0;t<6;t++){const x=o[t];if(rs.x=x.normal.x>0?r.max.x:r.min.x,rs.y=x.normal.y>0?r.max.y:r.min.y,rs.z=x.normal.z>0?r.max.z:r.min.z,x.distanceToPoint(rs)<0)return!1}return!0}containsPoint(r){const o=this.planes;for(let t=0;t<6;t++)if(o[t].distanceToPoint(r)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function zl(){let S=null,r=!1,o=null,t=null;function x(b,h){o(b,h),t=S.requestAnimationFrame(x)}return{start:function(){r!==!0&&o!==null&&(t=S.requestAnimationFrame(x),r=!0)},stop:function(){S.cancelAnimationFrame(t),r=!1},setAnimationLoop:function(b){o=b},setContext:function(b){S=b}}}function Hu(S,r){const o=r.isWebGL2,t=new WeakMap;function x(f,g){const m=f.array,n=f.usage,s=S.createBuffer();S.bindBuffer(g,s),S.bufferData(g,m,n),f.onUploadCallback();let l;if(m instanceof Float32Array)l=S.FLOAT;else if(m instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(o)l=S.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else l=S.UNSIGNED_SHORT;else if(m instanceof Int16Array)l=S.SHORT;else if(m instanceof Uint32Array)l=S.UNSIGNED_INT;else if(m instanceof Int32Array)l=S.INT;else if(m instanceof Int8Array)l=S.BYTE;else if(m instanceof Uint8Array)l=S.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)l=S.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:s,type:l,bytesPerElement:m.BYTES_PER_ELEMENT,version:f.version}}function b(f,g,m){const n=g.array,s=g.updateRange;S.bindBuffer(m,f),s.count===-1?S.bufferSubData(m,0,n):(o?S.bufferSubData(m,s.offset*n.BYTES_PER_ELEMENT,n,s.offset,s.count):S.bufferSubData(m,s.offset*n.BYTES_PER_ELEMENT,n.subarray(s.offset,s.offset+s.count)),s.count=-1),g.onUploadCallback()}function h(f){return f.isInterleavedBufferAttribute&&(f=f.data),t.get(f)}function d(f){f.isInterleavedBufferAttribute&&(f=f.data);const g=t.get(f);g&&(S.deleteBuffer(g.buffer),t.delete(f))}function i(f,g){if(f.isGLBufferAttribute){const n=t.get(f);(!n||n.version<f.version)&&t.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const m=t.get(f);m===void 0?t.set(f,x(f,g)):m.version<f.version&&(b(m.buffer,f,g),m.version=f.version)}return{get:h,remove:d,update:i}}class mo extends In{constructor(r=1,o=1,t=1,x=1){super(),this.type="PlaneGeometry",this.parameters={width:r,height:o,widthSegments:t,heightSegments:x};const b=r/2,h=o/2,d=Math.floor(t),i=Math.floor(x),f=d+1,g=i+1,m=r/d,n=o/i,s=[],l=[],c=[],a=[];for(let u=0;u<g;u++){const y=u*n-h;for(let p=0;p<f;p++){const v=p*m-b;l.push(v,-y,0),c.push(0,0,1),a.push(p/d),a.push(1-u/i)}}for(let u=0;u<i;u++)for(let y=0;y<d;y++){const p=y+f*u,v=y+f*(u+1),w=y+1+f*(u+1),C=y+1+f*u;s.push(p,v,C),s.push(v,w,C)}this.setIndex(s),this.setAttribute("position",new On(l,3)),this.setAttribute("normal",new On(c,3)),this.setAttribute("uv",new On(a,2))}copy(r){return super.copy(r),this.parameters=Object.assign({},r.parameters),this}static fromJSON(r){return new mo(r.width,r.height,r.widthSegments,r.heightSegments)}}var Wu=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Xu=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qu=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Yu=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$u=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Zu=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ku="vec3 transformed = vec3( position );",Ju=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qu=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ed=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,td=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,rd=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,nd=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,id=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,sd=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,od=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ad=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ld=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,cd=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ud=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,dd=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hd=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fd=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pd=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,md=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gd=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yd="gl_FragColor = linearToOutputTexel( gl_FragColor );",vd=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,bd=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,_d=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xd=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,wd=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Sd=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Md=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Ed=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Td=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ad=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jd=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Cd=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Rd=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ld=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pd=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Od=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Dd=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Id=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kd=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ud=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Fd=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Nd=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Bd=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Gd=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zd=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Vd=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Hd=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Wd=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Xd=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,qd=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Yd=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,$d=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Zd=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Kd=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jd=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Qd=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,eh=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,th=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rh=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,nh=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,ih=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,sh=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,oh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ah=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lh=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ch=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,uh=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dh=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hh=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fh=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ph=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mh=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,gh=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yh=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,vh=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,bh=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,_h=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xh=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wh=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Sh=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Mh=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Eh=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Th=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ah=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,jh=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ch=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Rh=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Lh=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ph=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Oh=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dh=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Ih=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,kh=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Uh=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Fh=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Nh=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Bh=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Gh=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vh=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Hh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Wh=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Xh=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qh=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Yh=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$h=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Zh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Kh=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Jh=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qh=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ef=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tf=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rf=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nf=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sf=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,of=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,af=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lf=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cf=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uf=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,df=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hf=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ff=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pf=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mf=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gf=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yf=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vf=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bf=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_f=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xt={alphamap_fragment:Wu,alphamap_pars_fragment:Xu,alphatest_fragment:qu,alphatest_pars_fragment:Yu,aomap_fragment:$u,aomap_pars_fragment:Zu,begin_vertex:Ku,beginnormal_vertex:Ju,bsdfs:Qu,iridescence_fragment:ed,bumpmap_pars_fragment:td,clipping_planes_fragment:rd,clipping_planes_pars_fragment:nd,clipping_planes_pars_vertex:id,clipping_planes_vertex:sd,color_fragment:od,color_pars_fragment:ad,color_pars_vertex:ld,color_vertex:cd,common:ud,cube_uv_reflection_fragment:dd,defaultnormal_vertex:hd,displacementmap_pars_vertex:fd,displacementmap_vertex:pd,emissivemap_fragment:md,emissivemap_pars_fragment:gd,encodings_fragment:yd,encodings_pars_fragment:vd,envmap_fragment:bd,envmap_common_pars_fragment:_d,envmap_pars_fragment:xd,envmap_pars_vertex:wd,envmap_physical_pars_fragment:Dd,envmap_vertex:Sd,fog_vertex:Md,fog_pars_vertex:Ed,fog_fragment:Td,fog_pars_fragment:Ad,gradientmap_pars_fragment:jd,lightmap_fragment:Cd,lightmap_pars_fragment:Rd,lights_lambert_fragment:Ld,lights_lambert_pars_fragment:Pd,lights_pars_begin:Od,lights_toon_fragment:Id,lights_toon_pars_fragment:kd,lights_phong_fragment:Ud,lights_phong_pars_fragment:Fd,lights_physical_fragment:Nd,lights_physical_pars_fragment:Bd,lights_fragment_begin:Gd,lights_fragment_maps:zd,lights_fragment_end:Vd,logdepthbuf_fragment:Hd,logdepthbuf_pars_fragment:Wd,logdepthbuf_pars_vertex:Xd,logdepthbuf_vertex:qd,map_fragment:Yd,map_pars_fragment:$d,map_particle_fragment:Zd,map_particle_pars_fragment:Kd,metalnessmap_fragment:Jd,metalnessmap_pars_fragment:Qd,morphcolor_vertex:eh,morphnormal_vertex:th,morphtarget_pars_vertex:rh,morphtarget_vertex:nh,normal_fragment_begin:ih,normal_fragment_maps:sh,normal_pars_fragment:oh,normal_pars_vertex:ah,normal_vertex:lh,normalmap_pars_fragment:ch,clearcoat_normal_fragment_begin:uh,clearcoat_normal_fragment_maps:dh,clearcoat_pars_fragment:hh,iridescence_pars_fragment:fh,output_fragment:ph,packing:mh,premultiplied_alpha_fragment:gh,project_vertex:yh,dithering_fragment:vh,dithering_pars_fragment:bh,roughnessmap_fragment:_h,roughnessmap_pars_fragment:xh,shadowmap_pars_fragment:wh,shadowmap_pars_vertex:Sh,shadowmap_vertex:Mh,shadowmask_pars_fragment:Eh,skinbase_vertex:Th,skinning_pars_vertex:Ah,skinning_vertex:jh,skinnormal_vertex:Ch,specularmap_fragment:Rh,specularmap_pars_fragment:Lh,tonemapping_fragment:Ph,tonemapping_pars_fragment:Oh,transmission_fragment:Dh,transmission_pars_fragment:Ih,uv_pars_fragment:kh,uv_pars_vertex:Uh,uv_vertex:Fh,worldpos_vertex:Nh,background_vert:Bh,background_frag:Gh,backgroundCube_vert:zh,backgroundCube_frag:Vh,cube_vert:Hh,cube_frag:Wh,depth_vert:Xh,depth_frag:qh,distanceRGBA_vert:Yh,distanceRGBA_frag:$h,equirect_vert:Zh,equirect_frag:Kh,linedashed_vert:Jh,linedashed_frag:Qh,meshbasic_vert:ef,meshbasic_frag:tf,meshlambert_vert:rf,meshlambert_frag:nf,meshmatcap_vert:sf,meshmatcap_frag:of,meshnormal_vert:af,meshnormal_frag:lf,meshphong_vert:cf,meshphong_frag:uf,meshphysical_vert:df,meshphysical_frag:hf,meshtoon_vert:ff,meshtoon_frag:pf,points_vert:mf,points_frag:gf,shadow_vert:yf,shadow_frag:vf,sprite_vert:bf,sprite_frag:_f},ot={common:{diffuse:{value:new Ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Ut(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},Fr={basic:{uniforms:cr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:cr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Ut(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:cr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Ut(0)},specular:{value:new Ut(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:cr([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:cr([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Ut(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:cr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:cr([ot.points,ot.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:cr([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:cr([ot.common,ot.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:cr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:cr([ot.sprite,ot.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:cr([ot.common,ot.displacementmap,{referencePosition:{value:new qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:cr([ot.lights,ot.fog,{color:{value:new Ut(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};Fr.physical={uniforms:cr([Fr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Ut(0)},specularColor:{value:new Ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new It},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const ns={r:0,b:0,g:0};function xf(S,r,o,t,x,b,h){const d=new Ut(0);let i=b===!0?0:1,f,g,m=null,n=0,s=null;function l(a,u){let y=!1,p=u.isScene===!0?u.background:null;switch(p&&p.isTexture&&(p=(u.backgroundBlurriness>0?o:r).get(p)),p===null?c(d,i):p&&p.isColor&&(c(p,1),y=!0),S.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":t.buffers.color.setClear(0,0,0,1,h),y=!0;break;case"alpha-blend":t.buffers.color.setClear(0,0,0,0,h),y=!0;break}(S.autoClear||y)&&S.clear(S.autoClearColor,S.autoClearDepth,S.autoClearStencil),p&&(p.isCubeTexture||p.mapping===ds)?(g===void 0&&(g=new Qr(new fi(1,1,1),new yn({name:"BackgroundCubeMaterial",uniforms:di(Fr.backgroundCube.uniforms),vertexShader:Fr.backgroundCube.vertexShader,fragmentShader:Fr.backgroundCube.fragmentShader,side:dr,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(C,T,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),x.update(g)),g.material.uniforms.envMap.value=p,g.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=u.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,g.material.toneMapped=p.colorSpace!==bt,(m!==p||n!==p.version||s!==S.toneMapping)&&(g.material.needsUpdate=!0,m=p,n=p.version,s=S.toneMapping),g.layers.enableAll(),a.unshift(g,g.geometry,g.material,0,0,null)):p&&p.isTexture&&(f===void 0&&(f=new Qr(new mo(2,2),new yn({name:"BackgroundMaterial",uniforms:di(Fr.background.uniforms),vertexShader:Fr.background.vertexShader,fragmentShader:Fr.background.fragmentShader,side:gn,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),x.update(f)),f.material.uniforms.t2D.value=p,f.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,f.material.toneMapped=p.colorSpace!==bt,p.matrixAutoUpdate===!0&&p.updateMatrix(),f.material.uniforms.uvTransform.value.copy(p.matrix),(m!==p||n!==p.version||s!==S.toneMapping)&&(f.material.needsUpdate=!0,m=p,n=p.version,s=S.toneMapping),f.layers.enableAll(),a.unshift(f,f.geometry,f.material,0,0,null))}function c(a,u){a.getRGB(ns,Fl(S)),t.buffers.color.setClear(ns.r,ns.g,ns.b,u,h)}return{getClearColor:function(){return d},setClearColor:function(a,u=1){d.set(a),i=u,c(d,i)},getClearAlpha:function(){return i},setClearAlpha:function(a){i=a,c(d,i)},render:l}}function wf(S,r,o,t){const x=S.getParameter(S.MAX_VERTEX_ATTRIBS),b=t.isWebGL2?null:r.get("OES_vertex_array_object"),h=t.isWebGL2||b!==null,d={},i=a(null);let f=i,g=!1;function m(N,U,V,G,z){let W=!1;if(h){const Z=c(G,V,U);f!==Z&&(f=Z,s(f.object)),W=u(N,G,V,z),W&&y(N,G,V,z)}else{const Z=U.wireframe===!0;(f.geometry!==G.id||f.program!==V.id||f.wireframe!==Z)&&(f.geometry=G.id,f.program=V.id,f.wireframe=Z,W=!0)}z!==null&&o.update(z,S.ELEMENT_ARRAY_BUFFER),(W||g)&&(g=!1,j(N,U,V,G),z!==null&&S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,o.get(z).buffer))}function n(){return t.isWebGL2?S.createVertexArray():b.createVertexArrayOES()}function s(N){return t.isWebGL2?S.bindVertexArray(N):b.bindVertexArrayOES(N)}function l(N){return t.isWebGL2?S.deleteVertexArray(N):b.deleteVertexArrayOES(N)}function c(N,U,V){const G=V.wireframe===!0;let z=d[N.id];z===void 0&&(z={},d[N.id]=z);let W=z[U.id];W===void 0&&(W={},z[U.id]=W);let Z=W[G];return Z===void 0&&(Z=a(n()),W[G]=Z),Z}function a(N){const U=[],V=[],G=[];for(let z=0;z<x;z++)U[z]=0,V[z]=0,G[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:V,attributeDivisors:G,object:N,attributes:{},index:null}}function u(N,U,V,G){const z=f.attributes,W=U.attributes;let Z=0;const I=V.getAttributes();for(const q in I)if(I[q].location>=0){const F=z[q];let H=W[q];if(H===void 0&&(q==="instanceMatrix"&&N.instanceMatrix&&(H=N.instanceMatrix),q==="instanceColor"&&N.instanceColor&&(H=N.instanceColor)),F===void 0||F.attribute!==H||H&&F.data!==H.data)return!0;Z++}return f.attributesNum!==Z||f.index!==G}function y(N,U,V,G){const z={},W=U.attributes;let Z=0;const I=V.getAttributes();for(const q in I)if(I[q].location>=0){let F=W[q];F===void 0&&(q==="instanceMatrix"&&N.instanceMatrix&&(F=N.instanceMatrix),q==="instanceColor"&&N.instanceColor&&(F=N.instanceColor));const H={};H.attribute=F,F&&F.data&&(H.data=F.data),z[q]=H,Z++}f.attributes=z,f.attributesNum=Z,f.index=G}function p(){const N=f.newAttributes;for(let U=0,V=N.length;U<V;U++)N[U]=0}function v(N){w(N,0)}function w(N,U){const V=f.newAttributes,G=f.enabledAttributes,z=f.attributeDivisors;V[N]=1,G[N]===0&&(S.enableVertexAttribArray(N),G[N]=1),z[N]!==U&&((t.isWebGL2?S:r.get("ANGLE_instanced_arrays"))[t.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,U),z[N]=U)}function C(){const N=f.newAttributes,U=f.enabledAttributes;for(let V=0,G=U.length;V<G;V++)U[V]!==N[V]&&(S.disableVertexAttribArray(V),U[V]=0)}function T(N,U,V,G,z,W,Z){Z===!0?S.vertexAttribIPointer(N,U,V,z,W):S.vertexAttribPointer(N,U,V,G,z,W)}function j(N,U,V,G){if(t.isWebGL2===!1&&(N.isInstancedMesh||G.isInstancedBufferGeometry)&&r.get("ANGLE_instanced_arrays")===null)return;p();const z=G.attributes,W=V.getAttributes(),Z=U.defaultAttributeValues;for(const I in W){const q=W[I];if(q.location>=0){let D=z[I];if(D===void 0&&(I==="instanceMatrix"&&N.instanceMatrix&&(D=N.instanceMatrix),I==="instanceColor"&&N.instanceColor&&(D=N.instanceColor)),D!==void 0){const F=D.normalized,H=D.itemSize,Y=o.get(D);if(Y===void 0)continue;const te=Y.buffer,ie=Y.type,de=Y.bytesPerElement,_e=t.isWebGL2===!0&&(ie===S.INT||ie===S.UNSIGNED_INT||D.gpuType===bl);if(D.isInterleavedBufferAttribute){const le=D.data,re=le.stride,pe=D.offset;if(le.isInstancedInterleavedBuffer){for(let Q=0;Q<q.locationSize;Q++)w(q.location+Q,le.meshPerAttribute);N.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Q=0;Q<q.locationSize;Q++)v(q.location+Q);S.bindBuffer(S.ARRAY_BUFFER,te);for(let Q=0;Q<q.locationSize;Q++)T(q.location+Q,H/q.locationSize,ie,F,re*de,(pe+H/q.locationSize*Q)*de,_e)}else{if(D.isInstancedBufferAttribute){for(let le=0;le<q.locationSize;le++)w(q.location+le,D.meshPerAttribute);N.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=D.meshPerAttribute*D.count)}else for(let le=0;le<q.locationSize;le++)v(q.location+le);S.bindBuffer(S.ARRAY_BUFFER,te);for(let le=0;le<q.locationSize;le++)T(q.location+le,H/q.locationSize,ie,F,H*de,H/q.locationSize*le*de,_e)}}else if(Z!==void 0){const F=Z[I];if(F!==void 0)switch(F.length){case 2:S.vertexAttrib2fv(q.location,F);break;case 3:S.vertexAttrib3fv(q.location,F);break;case 4:S.vertexAttrib4fv(q.location,F);break;default:S.vertexAttrib1fv(q.location,F)}}}}C()}function A(){k();for(const N in d){const U=d[N];for(const V in U){const G=U[V];for(const z in G)l(G[z].object),delete G[z];delete U[V]}delete d[N]}}function L(N){if(d[N.id]===void 0)return;const U=d[N.id];for(const V in U){const G=U[V];for(const z in G)l(G[z].object),delete G[z];delete U[V]}delete d[N.id]}function M(N){for(const U in d){const V=d[U];if(V[N.id]===void 0)continue;const G=V[N.id];for(const z in G)l(G[z].object),delete G[z];delete V[N.id]}}function k(){O(),g=!0,f!==i&&(f=i,s(f.object))}function O(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:m,reset:k,resetDefaultState:O,dispose:A,releaseStatesOfGeometry:L,releaseStatesOfProgram:M,initAttributes:p,enableAttribute:v,disableUnusedAttributes:C}}function Sf(S,r,o,t){const x=t.isWebGL2;let b;function h(f){b=f}function d(f,g){S.drawArrays(b,f,g),o.update(g,b,1)}function i(f,g,m){if(m===0)return;let n,s;if(x)n=S,s="drawArraysInstanced";else if(n=r.get("ANGLE_instanced_arrays"),s="drawArraysInstancedANGLE",n===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}n[s](b,f,g,m),o.update(g,b,m)}this.setMode=h,this.render=d,this.renderInstances=i}function Mf(S,r,o){let t;function x(){if(t!==void 0)return t;if(r.has("EXT_texture_filter_anisotropic")===!0){const T=r.get("EXT_texture_filter_anisotropic");t=S.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else t=0;return t}function b(T){if(T==="highp"){if(S.getShaderPrecisionFormat(S.VERTEX_SHADER,S.HIGH_FLOAT).precision>0&&S.getShaderPrecisionFormat(S.FRAGMENT_SHADER,S.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&S.getShaderPrecisionFormat(S.VERTEX_SHADER,S.MEDIUM_FLOAT).precision>0&&S.getShaderPrecisionFormat(S.FRAGMENT_SHADER,S.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const h=typeof WebGL2RenderingContext<"u"&&S.constructor.name==="WebGL2RenderingContext";let d=o.precision!==void 0?o.precision:"highp";const i=b(d);i!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",i,"instead."),d=i);const f=h||r.has("WEBGL_draw_buffers"),g=o.logarithmicDepthBuffer===!0,m=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS),n=S.getParameter(S.MAX_VERTEX_TEXTURE_IMAGE_UNITS),s=S.getParameter(S.MAX_TEXTURE_SIZE),l=S.getParameter(S.MAX_CUBE_MAP_TEXTURE_SIZE),c=S.getParameter(S.MAX_VERTEX_ATTRIBS),a=S.getParameter(S.MAX_VERTEX_UNIFORM_VECTORS),u=S.getParameter(S.MAX_VARYING_VECTORS),y=S.getParameter(S.MAX_FRAGMENT_UNIFORM_VECTORS),p=n>0,v=h||r.has("OES_texture_float"),w=p&&v,C=h?S.getParameter(S.MAX_SAMPLES):0;return{isWebGL2:h,drawBuffers:f,getMaxAnisotropy:x,getMaxPrecision:b,precision:d,logarithmicDepthBuffer:g,maxTextures:m,maxVertexTextures:n,maxTextureSize:s,maxCubemapSize:l,maxAttributes:c,maxVertexUniforms:a,maxVaryings:u,maxFragmentUniforms:y,vertexTextures:p,floatFragmentTextures:v,floatVertexTextures:w,maxSamples:C}}function Ef(S){const r=this;let o=null,t=0,x=!1,b=!1;const h=new En,d=new wt,i={value:null,needsUpdate:!1};this.uniform=i,this.numPlanes=0,this.numIntersection=0,this.init=function(m,n){const s=m.length!==0||n||t!==0||x;return x=n,t=m.length,s},this.beginShadows=function(){b=!0,g(null)},this.endShadows=function(){b=!1},this.setGlobalState=function(m,n){o=g(m,n,0)},this.setState=function(m,n,s){const l=m.clippingPlanes,c=m.clipIntersection,a=m.clipShadows,u=S.get(m);if(!x||l===null||l.length===0||b&&!a)b?g(null):f();else{const y=b?0:t,p=y*4;let v=u.clippingState||null;i.value=v,v=g(l,n,p,s);for(let w=0;w!==p;++w)v[w]=o[w];u.clippingState=v,this.numIntersection=c?this.numPlanes:0,this.numPlanes+=y}};function f(){i.value!==o&&(i.value=o,i.needsUpdate=t>0),r.numPlanes=t,r.numIntersection=0}function g(m,n,s,l){const c=m!==null?m.length:0;let a=null;if(c!==0){if(a=i.value,l!==!0||a===null){const u=s+c*4,y=n.matrixWorldInverse;d.getNormalMatrix(y),(a===null||a.length<u)&&(a=new Float32Array(u));for(let p=0,v=s;p!==c;++p,v+=4)h.copy(m[p]).applyMatrix4(y,d),h.normal.toArray(a,v),a[v+3]=h.constant}i.value=a,i.needsUpdate=!0}return r.numPlanes=c,r.numIntersection=0,a}}function Tf(S){let r=new WeakMap;function o(h,d){return d===eo?h.mapping=li:d===to&&(h.mapping=ci),h}function t(h){if(h&&h.isTexture&&h.isRenderTargetTexture===!1){const d=h.mapping;if(d===eo||d===to)if(r.has(h)){const i=r.get(h).texture;return o(i,h.mapping)}else{const i=h.image;if(i&&i.height>0){const f=new Gu(i.height/2);return f.fromEquirectangularTexture(S,h),r.set(h,f),h.addEventListener("dispose",x),o(f.texture,h.mapping)}else return null}}return h}function x(h){const d=h.target;d.removeEventListener("dispose",x);const i=r.get(d);i!==void 0&&(r.delete(d),i.dispose())}function b(){r=new WeakMap}return{get:t,dispose:b}}class Af extends Nl{constructor(r=-1,o=1,t=1,x=-1,b=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r,this.right=o,this.top=t,this.bottom=x,this.near=b,this.far=h,this.updateProjectionMatrix()}copy(r,o){return super.copy(r,o),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=r.view===null?null:Object.assign({},r.view),this}setViewOffset(r,o,t,x,b,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=o,this.view.offsetX=t,this.view.offsetY=x,this.view.width=b,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,x=(this.top+this.bottom)/2;let b=t-r,h=t+r,d=x+o,i=x-o;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=f*this.view.offsetX,h=b+f*this.view.width,d-=g*this.view.offsetY,i=d-g*this.view.height}this.projectionMatrix.makeOrthographic(b,h,d,i,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const o=super.toJSON(r);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,this.view!==null&&(o.object.view=Object.assign({},this.view)),o}}const si=4,Ga=[.125,.215,.35,.446,.526,.582],An=20,qs=new Af,za=new Ut;let Ys=null;const Tn=(1+Math.sqrt(5))/2,ni=1/Tn,Va=[new qe(1,1,1),new qe(-1,1,1),new qe(1,1,-1),new qe(-1,1,-1),new qe(0,Tn,ni),new qe(0,Tn,-ni),new qe(ni,0,Tn),new qe(-ni,0,Tn),new qe(Tn,ni,0),new qe(-Tn,ni,0)];class Ha{constructor(r){this._renderer=r,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(r,o=0,t=.1,x=100){Ys=this._renderer.getRenderTarget(),this._setSize(256);const b=this._allocateTargets();return b.depthBuffer=!0,this._sceneToCubeUV(r,t,x,b),o>0&&this._blur(b,0,0,o),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(r,o=null){return this._fromTexture(r,o)}fromCubemap(r,o=null){return this._fromTexture(r,o)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=qa(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Xa(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(r){this._lodMax=Math.floor(Math.log2(r)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let r=0;r<this._lodPlanes.length;r++)this._lodPlanes[r].dispose()}_cleanup(r){this._renderer.setRenderTarget(Ys),r.scissorTest=!1,is(r,0,0,r.width,r.height)}_fromTexture(r,o){r.mapping===li||r.mapping===ci?this._setSize(r.image.length===0?16:r.image[0].width||r.image[0].image.width):this._setSize(r.image.width/4),Ys=this._renderer.getRenderTarget();const t=o||this._allocateTargets();return this._textureToCubeUV(r,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){const r=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,t={magFilter:pr,minFilter:pr,generateMipmaps:!1,type:ji,format:Or,colorSpace:Gr,depthBuffer:!1},x=Wa(r,o,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==r||this._pingPongRenderTarget.height!==o){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Wa(r,o,t);const{_lodMax:b}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=jf(b)),this._blurMaterial=Cf(b,r,o)}return x}_compileMaterial(r){const o=new Qr(this._lodPlanes[0],r);this._renderer.compile(o,qs)}_sceneToCubeUV(r,o,t,x){const d=new Sr(90,1,o,t),i=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],g=this._renderer,m=g.autoClear,n=g.toneMapping;g.getClearColor(za),g.toneMapping=en,g.autoClear=!1;const s=new Il({name:"PMREM.Background",side:dr,depthWrite:!1,depthTest:!1}),l=new Qr(new fi,s);let c=!1;const a=r.background;a?a.isColor&&(s.color.copy(a),r.background=null,c=!0):(s.color.copy(za),c=!0);for(let u=0;u<6;u++){const y=u%3;y===0?(d.up.set(0,i[u],0),d.lookAt(f[u],0,0)):y===1?(d.up.set(0,0,i[u]),d.lookAt(0,f[u],0)):(d.up.set(0,i[u],0),d.lookAt(0,0,f[u]));const p=this._cubeSize;is(x,y*p,u>2?p:0,p,p),g.setRenderTarget(x),c&&g.render(l,d),g.render(r,d)}l.geometry.dispose(),l.material.dispose(),g.toneMapping=n,g.autoClear=m,r.background=a}_textureToCubeUV(r,o){const t=this._renderer,x=r.mapping===li||r.mapping===ci;x?(this._cubemapMaterial===null&&(this._cubemapMaterial=qa()),this._cubemapMaterial.uniforms.flipEnvMap.value=r.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Xa());const b=x?this._cubemapMaterial:this._equirectMaterial,h=new Qr(this._lodPlanes[0],b),d=b.uniforms;d.envMap.value=r;const i=this._cubeSize;is(o,0,0,3*i,2*i),t.setRenderTarget(o),t.render(h,qs)}_applyPMREM(r){const o=this._renderer,t=o.autoClear;o.autoClear=!1;for(let x=1;x<this._lodPlanes.length;x++){const b=Math.sqrt(this._sigmas[x]*this._sigmas[x]-this._sigmas[x-1]*this._sigmas[x-1]),h=Va[(x-1)%Va.length];this._blur(r,x-1,x,b,h)}o.autoClear=t}_blur(r,o,t,x,b){const h=this._pingPongRenderTarget;this._halfBlur(r,h,o,t,x,"latitudinal",b),this._halfBlur(h,r,t,t,x,"longitudinal",b)}_halfBlur(r,o,t,x,b,h,d){const i=this._renderer,f=this._blurMaterial;h!=="latitudinal"&&h!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,m=new Qr(this._lodPlanes[x],f),n=f.uniforms,s=this._sizeLods[t]-1,l=isFinite(b)?Math.PI/(2*s):2*Math.PI/(2*An-1),c=b/l,a=isFinite(b)?1+Math.floor(g*c):An;a>An&&console.warn(`sigmaRadians, ${b}, is too large and will clip, as it requested ${a} samples when the maximum is set to ${An}`);const u=[];let y=0;for(let T=0;T<An;++T){const j=T/c,A=Math.exp(-j*j/2);u.push(A),T===0?y+=A:T<a&&(y+=2*A)}for(let T=0;T<u.length;T++)u[T]=u[T]/y;n.envMap.value=r.texture,n.samples.value=a,n.weights.value=u,n.latitudinal.value=h==="latitudinal",d&&(n.poleAxis.value=d);const{_lodMax:p}=this;n.dTheta.value=l,n.mipInt.value=p-t;const v=this._sizeLods[x],w=3*v*(x>p-si?x-p+si:0),C=4*(this._cubeSize-v);is(o,w,C,3*v,2*v),i.setRenderTarget(o),i.render(m,qs)}}function jf(S){const r=[],o=[],t=[];let x=S;const b=S-si+1+Ga.length;for(let h=0;h<b;h++){const d=Math.pow(2,x);o.push(d);let i=1/d;h>S-si?i=Ga[h-S+si-1]:h===0&&(i=0),t.push(i);const f=1/(d-2),g=-f,m=1+f,n=[g,g,m,g,m,m,g,g,m,m,g,m],s=6,l=6,c=3,a=2,u=1,y=new Float32Array(c*l*s),p=new Float32Array(a*l*s),v=new Float32Array(u*l*s);for(let C=0;C<s;C++){const T=C%3*2/3-1,j=C>2?0:-1,A=[T,j,0,T+2/3,j,0,T+2/3,j+1,0,T,j,0,T+2/3,j+1,0,T,j+1,0];y.set(A,c*l*C),p.set(n,a*l*C);const L=[C,C,C,C,C,C];v.set(L,u*l*C)}const w=new In;w.setAttribute("position",new Nr(y,c)),w.setAttribute("uv",new Nr(p,a)),w.setAttribute("faceIndex",new Nr(v,u)),r.push(w),x>si&&x--}return{lodPlanes:r,sizeLods:o,sigmas:t}}function Wa(S,r,o){const t=new Dn(S,r,o);return t.texture.mapping=ds,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function is(S,r,o,t,x){S.viewport.set(r,o,t,x),S.scissor.set(r,o,t,x)}function Cf(S,r,o){const t=new Float32Array(An),x=new qe(0,1,0);return new yn({name:"SphericalGaussianBlur",defines:{n:An,CUBEUV_TEXEL_WIDTH:1/r,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${S}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:x}},vertexShader:go(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:pn,depthTest:!1,depthWrite:!1})}function Xa(){return new yn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:go(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:pn,depthTest:!1,depthWrite:!1})}function qa(){return new yn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:go(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:pn,depthTest:!1,depthWrite:!1})}function go(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Rf(S){let r=new WeakMap,o=null;function t(d){if(d&&d.isTexture){const i=d.mapping,f=i===eo||i===to,g=i===li||i===ci;if(f||g)if(d.isRenderTargetTexture&&d.needsPMREMUpdate===!0){d.needsPMREMUpdate=!1;let m=r.get(d);return o===null&&(o=new Ha(S)),m=f?o.fromEquirectangular(d,m):o.fromCubemap(d,m),r.set(d,m),m.texture}else{if(r.has(d))return r.get(d).texture;{const m=d.image;if(f&&m&&m.height>0||g&&m&&x(m)){o===null&&(o=new Ha(S));const n=f?o.fromEquirectangular(d):o.fromCubemap(d);return r.set(d,n),d.addEventListener("dispose",b),n.texture}else return null}}}return d}function x(d){let i=0;const f=6;for(let g=0;g<f;g++)d[g]!==void 0&&i++;return i===f}function b(d){const i=d.target;i.removeEventListener("dispose",b);const f=r.get(i);f!==void 0&&(r.delete(i),f.dispose())}function h(){r=new WeakMap,o!==null&&(o.dispose(),o=null)}return{get:t,dispose:h}}function Lf(S){const r={};function o(t){if(r[t]!==void 0)return r[t];let x;switch(t){case"WEBGL_depth_texture":x=S.getExtension("WEBGL_depth_texture")||S.getExtension("MOZ_WEBGL_depth_texture")||S.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":x=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||S.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":x=S.getExtension("WEBGL_compressed_texture_s3tc")||S.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":x=S.getExtension("WEBGL_compressed_texture_pvrtc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:x=S.getExtension(t)}return r[t]=x,x}return{has:function(t){return o(t)!==null},init:function(t){t.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(t){const x=o(t);return x===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),x}}}function Pf(S,r,o,t){const x={},b=new WeakMap;function h(m){const n=m.target;n.index!==null&&r.remove(n.index);for(const l in n.attributes)r.remove(n.attributes[l]);for(const l in n.morphAttributes){const c=n.morphAttributes[l];for(let a=0,u=c.length;a<u;a++)r.remove(c[a])}n.removeEventListener("dispose",h),delete x[n.id];const s=b.get(n);s&&(r.remove(s),b.delete(n)),t.releaseStatesOfGeometry(n),n.isInstancedBufferGeometry===!0&&delete n._maxInstanceCount,o.memory.geometries--}function d(m,n){return x[n.id]===!0||(n.addEventListener("dispose",h),x[n.id]=!0,o.memory.geometries++),n}function i(m){const n=m.attributes;for(const l in n)r.update(n[l],S.ARRAY_BUFFER);const s=m.morphAttributes;for(const l in s){const c=s[l];for(let a=0,u=c.length;a<u;a++)r.update(c[a],S.ARRAY_BUFFER)}}function f(m){const n=[],s=m.index,l=m.attributes.position;let c=0;if(s!==null){const y=s.array;c=s.version;for(let p=0,v=y.length;p<v;p+=3){const w=y[p+0],C=y[p+1],T=y[p+2];n.push(w,C,C,T,T,w)}}else{const y=l.array;c=l.version;for(let p=0,v=y.length/3-1;p<v;p+=3){const w=p+0,C=p+1,T=p+2;n.push(w,C,C,T,T,w)}}const a=new(jl(n)?Ul:kl)(n,1);a.version=c;const u=b.get(m);u&&r.remove(u),b.set(m,a)}function g(m){const n=b.get(m);if(n){const s=m.index;s!==null&&n.version<s.version&&f(m)}else f(m);return b.get(m)}return{get:d,update:i,getWireframeAttribute:g}}function Of(S,r,o,t){const x=t.isWebGL2;let b;function h(n){b=n}let d,i;function f(n){d=n.type,i=n.bytesPerElement}function g(n,s){S.drawElements(b,s,d,n*i),o.update(s,b,1)}function m(n,s,l){if(l===0)return;let c,a;if(x)c=S,a="drawElementsInstanced";else if(c=r.get("ANGLE_instanced_arrays"),a="drawElementsInstancedANGLE",c===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[a](b,s,d,n*i,l),o.update(s,b,l)}this.setMode=h,this.setIndex=f,this.render=g,this.renderInstances=m}function Df(S){const r={geometries:0,textures:0},o={frame:0,calls:0,triangles:0,points:0,lines:0};function t(b,h,d){switch(o.calls++,h){case S.TRIANGLES:o.triangles+=d*(b/3);break;case S.LINES:o.lines+=d*(b/2);break;case S.LINE_STRIP:o.lines+=d*(b-1);break;case S.LINE_LOOP:o.lines+=d*b;break;case S.POINTS:o.points+=d*b;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h);break}}function x(){o.calls=0,o.triangles=0,o.points=0,o.lines=0}return{memory:r,render:o,programs:null,autoReset:!0,reset:x,update:t}}function If(S,r){return S[0]-r[0]}function kf(S,r){return Math.abs(r[1])-Math.abs(S[1])}function Uf(S,r,o){const t={},x=new Float32Array(8),b=new WeakMap,h=new tr,d=[];for(let f=0;f<8;f++)d[f]=[f,0];function i(f,g,m){const n=f.morphTargetInfluences;if(r.isWebGL2===!0){const l=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,c=l!==void 0?l.length:0;let a=b.get(g);if(a===void 0||a.count!==c){let U=function(){O.dispose(),b.delete(g),g.removeEventListener("dispose",U)};var s=U;a!==void 0&&a.texture.dispose();const p=g.morphAttributes.position!==void 0,v=g.morphAttributes.normal!==void 0,w=g.morphAttributes.color!==void 0,C=g.morphAttributes.position||[],T=g.morphAttributes.normal||[],j=g.morphAttributes.color||[];let A=0;p===!0&&(A=1),v===!0&&(A=2),w===!0&&(A=3);let L=g.attributes.position.count*A,M=1;L>r.maxTextureSize&&(M=Math.ceil(L/r.maxTextureSize),L=r.maxTextureSize);const k=new Float32Array(L*M*4*c),O=new Ll(k,L,M,c);O.type=fn,O.needsUpdate=!0;const N=A*4;for(let V=0;V<c;V++){const G=C[V],z=T[V],W=j[V],Z=L*M*4*V;for(let I=0;I<G.count;I++){const q=I*N;p===!0&&(h.fromBufferAttribute(G,I),k[Z+q+0]=h.x,k[Z+q+1]=h.y,k[Z+q+2]=h.z,k[Z+q+3]=0),v===!0&&(h.fromBufferAttribute(z,I),k[Z+q+4]=h.x,k[Z+q+5]=h.y,k[Z+q+6]=h.z,k[Z+q+7]=0),w===!0&&(h.fromBufferAttribute(W,I),k[Z+q+8]=h.x,k[Z+q+9]=h.y,k[Z+q+10]=h.z,k[Z+q+11]=W.itemSize===4?h.w:1)}}a={count:c,texture:O,size:new It(L,M)},b.set(g,a),g.addEventListener("dispose",U)}let u=0;for(let p=0;p<n.length;p++)u+=n[p];const y=g.morphTargetsRelative?1:1-u;m.getUniforms().setValue(S,"morphTargetBaseInfluence",y),m.getUniforms().setValue(S,"morphTargetInfluences",n),m.getUniforms().setValue(S,"morphTargetsTexture",a.texture,o),m.getUniforms().setValue(S,"morphTargetsTextureSize",a.size)}else{const l=n===void 0?0:n.length;let c=t[g.id];if(c===void 0||c.length!==l){c=[];for(let v=0;v<l;v++)c[v]=[v,0];t[g.id]=c}for(let v=0;v<l;v++){const w=c[v];w[0]=v,w[1]=n[v]}c.sort(kf);for(let v=0;v<8;v++)v<l&&c[v][1]?(d[v][0]=c[v][0],d[v][1]=c[v][1]):(d[v][0]=Number.MAX_SAFE_INTEGER,d[v][1]=0);d.sort(If);const a=g.morphAttributes.position,u=g.morphAttributes.normal;let y=0;for(let v=0;v<8;v++){const w=d[v],C=w[0],T=w[1];C!==Number.MAX_SAFE_INTEGER&&T?(a&&g.getAttribute("morphTarget"+v)!==a[C]&&g.setAttribute("morphTarget"+v,a[C]),u&&g.getAttribute("morphNormal"+v)!==u[C]&&g.setAttribute("morphNormal"+v,u[C]),x[v]=T,y+=T):(a&&g.hasAttribute("morphTarget"+v)===!0&&g.deleteAttribute("morphTarget"+v),u&&g.hasAttribute("morphNormal"+v)===!0&&g.deleteAttribute("morphNormal"+v),x[v]=0)}const p=g.morphTargetsRelative?1:1-y;m.getUniforms().setValue(S,"morphTargetBaseInfluence",p),m.getUniforms().setValue(S,"morphTargetInfluences",x)}}return{update:i}}function Ff(S,r,o,t){let x=new WeakMap;function b(i){const f=t.render.frame,g=i.geometry,m=r.get(i,g);return x.get(m)!==f&&(r.update(m),x.set(m,f)),i.isInstancedMesh&&(i.hasEventListener("dispose",d)===!1&&i.addEventListener("dispose",d),o.update(i.instanceMatrix,S.ARRAY_BUFFER),i.instanceColor!==null&&o.update(i.instanceColor,S.ARRAY_BUFFER)),m}function h(){x=new WeakMap}function d(i){const f=i.target;f.removeEventListener("dispose",d),o.remove(f.instanceMatrix),f.instanceColor!==null&&o.remove(f.instanceColor)}return{update:b,dispose:h}}const Vl=new br,Hl=new Ll,Wl=new Pl,Xl=new Bl,Ya=[],$a=[],Za=new Float32Array(16),Ka=new Float32Array(9),Ja=new Float32Array(4);function pi(S,r,o){const t=S[0];if(t<=0||t>0)return S;const x=r*o;let b=Ya[x];if(b===void 0&&(b=new Float32Array(x),Ya[x]=b),r!==0){t.toArray(b,0);for(let h=1,d=0;h!==r;++h)d+=o,S[h].toArray(b,d)}return b}function Yt(S,r){if(S.length!==r.length)return!1;for(let o=0,t=S.length;o<t;o++)if(S[o]!==r[o])return!1;return!0}function $t(S,r){for(let o=0,t=r.length;o<t;o++)S[o]=r[o]}function ps(S,r){let o=$a[r];o===void 0&&(o=new Int32Array(r),$a[r]=o);for(let t=0;t!==r;++t)o[t]=S.allocateTextureUnit();return o}function Nf(S,r){const o=this.cache;o[0]!==r&&(S.uniform1f(this.addr,r),o[0]=r)}function Bf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y)&&(S.uniform2f(this.addr,r.x,r.y),o[0]=r.x,o[1]=r.y);else{if(Yt(o,r))return;S.uniform2fv(this.addr,r),$t(o,r)}}function Gf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z)&&(S.uniform3f(this.addr,r.x,r.y,r.z),o[0]=r.x,o[1]=r.y,o[2]=r.z);else if(r.r!==void 0)(o[0]!==r.r||o[1]!==r.g||o[2]!==r.b)&&(S.uniform3f(this.addr,r.r,r.g,r.b),o[0]=r.r,o[1]=r.g,o[2]=r.b);else{if(Yt(o,r))return;S.uniform3fv(this.addr,r),$t(o,r)}}function zf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z||o[3]!==r.w)&&(S.uniform4f(this.addr,r.x,r.y,r.z,r.w),o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=r.w);else{if(Yt(o,r))return;S.uniform4fv(this.addr,r),$t(o,r)}}function Vf(S,r){const o=this.cache,t=r.elements;if(t===void 0){if(Yt(o,r))return;S.uniformMatrix2fv(this.addr,!1,r),$t(o,r)}else{if(Yt(o,t))return;Ja.set(t),S.uniformMatrix2fv(this.addr,!1,Ja),$t(o,t)}}function Hf(S,r){const o=this.cache,t=r.elements;if(t===void 0){if(Yt(o,r))return;S.uniformMatrix3fv(this.addr,!1,r),$t(o,r)}else{if(Yt(o,t))return;Ka.set(t),S.uniformMatrix3fv(this.addr,!1,Ka),$t(o,t)}}function Wf(S,r){const o=this.cache,t=r.elements;if(t===void 0){if(Yt(o,r))return;S.uniformMatrix4fv(this.addr,!1,r),$t(o,r)}else{if(Yt(o,t))return;Za.set(t),S.uniformMatrix4fv(this.addr,!1,Za),$t(o,t)}}function Xf(S,r){const o=this.cache;o[0]!==r&&(S.uniform1i(this.addr,r),o[0]=r)}function qf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y)&&(S.uniform2i(this.addr,r.x,r.y),o[0]=r.x,o[1]=r.y);else{if(Yt(o,r))return;S.uniform2iv(this.addr,r),$t(o,r)}}function Yf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z)&&(S.uniform3i(this.addr,r.x,r.y,r.z),o[0]=r.x,o[1]=r.y,o[2]=r.z);else{if(Yt(o,r))return;S.uniform3iv(this.addr,r),$t(o,r)}}function $f(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z||o[3]!==r.w)&&(S.uniform4i(this.addr,r.x,r.y,r.z,r.w),o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=r.w);else{if(Yt(o,r))return;S.uniform4iv(this.addr,r),$t(o,r)}}function Zf(S,r){const o=this.cache;o[0]!==r&&(S.uniform1ui(this.addr,r),o[0]=r)}function Kf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y)&&(S.uniform2ui(this.addr,r.x,r.y),o[0]=r.x,o[1]=r.y);else{if(Yt(o,r))return;S.uniform2uiv(this.addr,r),$t(o,r)}}function Jf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z)&&(S.uniform3ui(this.addr,r.x,r.y,r.z),o[0]=r.x,o[1]=r.y,o[2]=r.z);else{if(Yt(o,r))return;S.uniform3uiv(this.addr,r),$t(o,r)}}function Qf(S,r){const o=this.cache;if(r.x!==void 0)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z||o[3]!==r.w)&&(S.uniform4ui(this.addr,r.x,r.y,r.z,r.w),o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=r.w);else{if(Yt(o,r))return;S.uniform4uiv(this.addr,r),$t(o,r)}}function ep(S,r,o){const t=this.cache,x=o.allocateTextureUnit();t[0]!==x&&(S.uniform1i(this.addr,x),t[0]=x),o.setTexture2D(r||Vl,x)}function tp(S,r,o){const t=this.cache,x=o.allocateTextureUnit();t[0]!==x&&(S.uniform1i(this.addr,x),t[0]=x),o.setTexture3D(r||Wl,x)}function rp(S,r,o){const t=this.cache,x=o.allocateTextureUnit();t[0]!==x&&(S.uniform1i(this.addr,x),t[0]=x),o.setTextureCube(r||Xl,x)}function np(S,r,o){const t=this.cache,x=o.allocateTextureUnit();t[0]!==x&&(S.uniform1i(this.addr,x),t[0]=x),o.setTexture2DArray(r||Hl,x)}function ip(S){switch(S){case 5126:return Nf;case 35664:return Bf;case 35665:return Gf;case 35666:return zf;case 35674:return Vf;case 35675:return Hf;case 35676:return Wf;case 5124:case 35670:return Xf;case 35667:case 35671:return qf;case 35668:case 35672:return Yf;case 35669:case 35673:return $f;case 5125:return Zf;case 36294:return Kf;case 36295:return Jf;case 36296:return Qf;case 35678:case 36198:case 36298:case 36306:case 35682:return ep;case 35679:case 36299:case 36307:return tp;case 35680:case 36300:case 36308:case 36293:return rp;case 36289:case 36303:case 36311:case 36292:return np}}function sp(S,r){S.uniform1fv(this.addr,r)}function op(S,r){const o=pi(r,this.size,2);S.uniform2fv(this.addr,o)}function ap(S,r){const o=pi(r,this.size,3);S.uniform3fv(this.addr,o)}function lp(S,r){const o=pi(r,this.size,4);S.uniform4fv(this.addr,o)}function cp(S,r){const o=pi(r,this.size,4);S.uniformMatrix2fv(this.addr,!1,o)}function up(S,r){const o=pi(r,this.size,9);S.uniformMatrix3fv(this.addr,!1,o)}function dp(S,r){const o=pi(r,this.size,16);S.uniformMatrix4fv(this.addr,!1,o)}function hp(S,r){S.uniform1iv(this.addr,r)}function fp(S,r){S.uniform2iv(this.addr,r)}function pp(S,r){S.uniform3iv(this.addr,r)}function mp(S,r){S.uniform4iv(this.addr,r)}function gp(S,r){S.uniform1uiv(this.addr,r)}function yp(S,r){S.uniform2uiv(this.addr,r)}function vp(S,r){S.uniform3uiv(this.addr,r)}function bp(S,r){S.uniform4uiv(this.addr,r)}function _p(S,r,o){const t=this.cache,x=r.length,b=ps(o,x);Yt(t,b)||(S.uniform1iv(this.addr,b),$t(t,b));for(let h=0;h!==x;++h)o.setTexture2D(r[h]||Vl,b[h])}function xp(S,r,o){const t=this.cache,x=r.length,b=ps(o,x);Yt(t,b)||(S.uniform1iv(this.addr,b),$t(t,b));for(let h=0;h!==x;++h)o.setTexture3D(r[h]||Wl,b[h])}function wp(S,r,o){const t=this.cache,x=r.length,b=ps(o,x);Yt(t,b)||(S.uniform1iv(this.addr,b),$t(t,b));for(let h=0;h!==x;++h)o.setTextureCube(r[h]||Xl,b[h])}function Sp(S,r,o){const t=this.cache,x=r.length,b=ps(o,x);Yt(t,b)||(S.uniform1iv(this.addr,b),$t(t,b));for(let h=0;h!==x;++h)o.setTexture2DArray(r[h]||Hl,b[h])}function Mp(S){switch(S){case 5126:return sp;case 35664:return op;case 35665:return ap;case 35666:return lp;case 35674:return cp;case 35675:return up;case 35676:return dp;case 5124:case 35670:return hp;case 35667:case 35671:return fp;case 35668:case 35672:return pp;case 35669:case 35673:return mp;case 5125:return gp;case 36294:return yp;case 36295:return vp;case 36296:return bp;case 35678:case 36198:case 36298:case 36306:case 35682:return _p;case 35679:case 36299:case 36307:return xp;case 35680:case 36300:case 36308:case 36293:return wp;case 36289:case 36303:case 36311:case 36292:return Sp}}class Ep{constructor(r,o,t){this.id=r,this.addr=t,this.cache=[],this.setValue=ip(o.type)}}class Tp{constructor(r,o,t){this.id=r,this.addr=t,this.cache=[],this.size=o.size,this.setValue=Mp(o.type)}}class Ap{constructor(r){this.id=r,this.seq=[],this.map={}}setValue(r,o,t){const x=this.seq;for(let b=0,h=x.length;b!==h;++b){const d=x[b];d.setValue(r,o[d.id],t)}}}const $s=/(\w+)(\])?(\[|\.)?/g;function Qa(S,r){S.seq.push(r),S.map[r.id]=r}function jp(S,r,o){const t=S.name,x=t.length;for($s.lastIndex=0;;){const b=$s.exec(t),h=$s.lastIndex;let d=b[1];const i=b[2]==="]",f=b[3];if(i&&(d=d|0),f===void 0||f==="["&&h+2===x){Qa(o,f===void 0?new Ep(d,S,r):new Tp(d,S,r));break}else{let m=o.map[d];m===void 0&&(m=new Ap(d),Qa(o,m)),o=m}}}class ls{constructor(r,o){this.seq=[],this.map={};const t=r.getProgramParameter(o,r.ACTIVE_UNIFORMS);for(let x=0;x<t;++x){const b=r.getActiveUniform(o,x),h=r.getUniformLocation(o,b.name);jp(b,h,this)}}setValue(r,o,t,x){const b=this.map[o];b!==void 0&&b.setValue(r,t,x)}setOptional(r,o,t){const x=o[t];x!==void 0&&this.setValue(r,t,x)}static upload(r,o,t,x){for(let b=0,h=o.length;b!==h;++b){const d=o[b],i=t[d.id];i.needsUpdate!==!1&&d.setValue(r,i.value,x)}}static seqWithValue(r,o){const t=[];for(let x=0,b=r.length;x!==b;++x){const h=r[x];h.id in o&&t.push(h)}return t}}function el(S,r,o){const t=S.createShader(r);return S.shaderSource(t,o),S.compileShader(t),t}let Cp=0;function Rp(S,r){const o=S.split(`
`),t=[],x=Math.max(r-6,0),b=Math.min(r+6,o.length);for(let h=x;h<b;h++){const d=h+1;t.push(`${d===r?">":" "} ${d}: ${o[h]}`)}return t.join(`
`)}function Lp(S){switch(S){case Gr:return["Linear","( value )"];case bt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",S),["Linear","( value )"]}}function tl(S,r,o){const t=S.getShaderParameter(r,S.COMPILE_STATUS),x=S.getShaderInfoLog(r).trim();if(t&&x==="")return"";const b=/ERROR: 0:(\d+)/.exec(x);if(b){const h=parseInt(b[1]);return o.toUpperCase()+`

`+x+`

`+Rp(S.getShaderSource(r),h)}else return x}function Pp(S,r){const o=Lp(r);return"vec4 "+S+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function Op(S,r){let o;switch(r){case Vc:o="Linear";break;case Hc:o="Reinhard";break;case Wc:o="OptimizedCineon";break;case Xc:o="ACESFilmic";break;case qc:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),o="Linear"}return"vec3 "+S+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function Dp(S){return[S.extensionDerivatives||S.envMapCubeUVHeight||S.bumpMap||S.normalMapTangentSpace||S.clearcoatNormalMap||S.flatShading||S.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(S.extensionFragDepth||S.logarithmicDepthBuffer)&&S.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",S.extensionDrawBuffers&&S.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(S.extensionShaderTextureLOD||S.envMap||S.transmission)&&S.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mi).join(`
`)}function Ip(S){const r=[];for(const o in S){const t=S[o];t!==!1&&r.push("#define "+o+" "+t)}return r.join(`
`)}function kp(S,r){const o={},t=S.getProgramParameter(r,S.ACTIVE_ATTRIBUTES);for(let x=0;x<t;x++){const b=S.getActiveAttrib(r,x),h=b.name;let d=1;b.type===S.FLOAT_MAT2&&(d=2),b.type===S.FLOAT_MAT3&&(d=3),b.type===S.FLOAT_MAT4&&(d=4),o[h]={type:b.type,location:S.getAttribLocation(r,h),locationSize:d}}return o}function Mi(S){return S!==""}function rl(S,r){const o=r.numSpotLightShadows+r.numSpotLightMaps-r.numSpotLightShadowsWithMaps;return S.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,r.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,o).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,r.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function nl(S,r){return S.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}const Up=/^[ \t]*#include +<([\w\d./]+)>/gm;function lo(S){return S.replace(Up,Fp)}function Fp(S,r){const o=xt[r];if(o===void 0)throw new Error("Can not resolve #include <"+r+">");return lo(o)}const Np=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function il(S){return S.replace(Np,Bp)}function Bp(S,r,o,t){let x="";for(let b=parseInt(r);b<parseInt(o);b++)x+=t.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return x}function sl(S){let r="precision "+S.precision+` float;
precision `+S.precision+" int;";return S.precision==="highp"?r+=`
#define HIGH_PRECISION`:S.precision==="mediump"?r+=`
#define MEDIUM_PRECISION`:S.precision==="lowp"&&(r+=`
#define LOW_PRECISION`),r}function Gp(S){let r="SHADOWMAP_TYPE_BASIC";return S.shadowMapType===pl?r="SHADOWMAP_TYPE_PCF":S.shadowMapType===xc?r="SHADOWMAP_TYPE_PCF_SOFT":S.shadowMapType===Zr&&(r="SHADOWMAP_TYPE_VSM"),r}function zp(S){let r="ENVMAP_TYPE_CUBE";if(S.envMap)switch(S.envMapMode){case li:case ci:r="ENVMAP_TYPE_CUBE";break;case ds:r="ENVMAP_TYPE_CUBE_UV";break}return r}function Vp(S){let r="ENVMAP_MODE_REFLECTION";if(S.envMap)switch(S.envMapMode){case ci:r="ENVMAP_MODE_REFRACTION";break}return r}function Hp(S){let r="ENVMAP_BLENDING_NONE";if(S.envMap)switch(S.combine){case yl:r="ENVMAP_BLENDING_MULTIPLY";break;case Gc:r="ENVMAP_BLENDING_MIX";break;case zc:r="ENVMAP_BLENDING_ADD";break}return r}function Wp(S){const r=S.envMapCubeUVHeight;if(r===null)return null;const o=Math.log2(r)-2,t=1/r;return{texelWidth:1/(3*Math.max(Math.pow(2,o),7*16)),texelHeight:t,maxMip:o}}function Xp(S,r,o,t){const x=S.getContext(),b=o.defines;let h=o.vertexShader,d=o.fragmentShader;const i=Gp(o),f=zp(o),g=Vp(o),m=Hp(o),n=Wp(o),s=o.isWebGL2?"":Dp(o),l=Ip(b),c=x.createProgram();let a,u,y=o.glslVersion?"#version "+o.glslVersion+`
`:"";o.isRawShaderMaterial?(a=["#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,l].filter(Mi).join(`
`),a.length>0&&(a+=`
`),u=[s,"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,l].filter(Mi).join(`
`),u.length>0&&(u+=`
`)):(a=[sl(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,l,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+g:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.displacementMap?"#define USE_DISPLACEMENTMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.mapUv?"#define MAP_UV "+o.mapUv:"",o.alphaMapUv?"#define ALPHAMAP_UV "+o.alphaMapUv:"",o.lightMapUv?"#define LIGHTMAP_UV "+o.lightMapUv:"",o.aoMapUv?"#define AOMAP_UV "+o.aoMapUv:"",o.emissiveMapUv?"#define EMISSIVEMAP_UV "+o.emissiveMapUv:"",o.bumpMapUv?"#define BUMPMAP_UV "+o.bumpMapUv:"",o.normalMapUv?"#define NORMALMAP_UV "+o.normalMapUv:"",o.displacementMapUv?"#define DISPLACEMENTMAP_UV "+o.displacementMapUv:"",o.metalnessMapUv?"#define METALNESSMAP_UV "+o.metalnessMapUv:"",o.roughnessMapUv?"#define ROUGHNESSMAP_UV "+o.roughnessMapUv:"",o.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+o.anisotropyMapUv:"",o.clearcoatMapUv?"#define CLEARCOATMAP_UV "+o.clearcoatMapUv:"",o.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+o.clearcoatNormalMapUv:"",o.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+o.clearcoatRoughnessMapUv:"",o.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+o.iridescenceMapUv:"",o.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+o.iridescenceThicknessMapUv:"",o.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+o.sheenColorMapUv:"",o.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+o.sheenRoughnessMapUv:"",o.specularMapUv?"#define SPECULARMAP_UV "+o.specularMapUv:"",o.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+o.specularColorMapUv:"",o.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+o.specularIntensityMapUv:"",o.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+o.transmissionMapUv:"",o.thicknessMapUv?"#define THICKNESSMAP_UV "+o.thicknessMapUv:"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+i:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Mi).join(`
`),u=[s,sl(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,l,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+g:"",o.envMap?"#define "+m:"",n?"#define CUBEUV_TEXEL_WIDTH "+n.texelWidth:"",n?"#define CUBEUV_TEXEL_HEIGHT "+n.texelHeight:"",n?"#define CUBEUV_MAX_MIP "+n.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropy?"#define USE_ANISOTROPY":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescence?"#define USE_IRIDESCENCE":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+i:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==en?"#define TONE_MAPPING":"",o.toneMapping!==en?xt.tonemapping_pars_fragment:"",o.toneMapping!==en?Op("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",xt.encodings_pars_fragment,Pp("linearToOutputTexel",o.outputColorSpace),o.useDepthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(Mi).join(`
`)),h=lo(h),h=rl(h,o),h=nl(h,o),d=lo(d),d=rl(d,o),d=nl(d,o),h=il(h),d=il(d),o.isWebGL2&&o.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+a,u=["#define varying in",o.glslVersion===io?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===io?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+u);const p=y+a+h,v=y+u+d,w=el(x,x.VERTEX_SHADER,p),C=el(x,x.FRAGMENT_SHADER,v);if(x.attachShader(c,w),x.attachShader(c,C),o.index0AttributeName!==void 0?x.bindAttribLocation(c,0,o.index0AttributeName):o.morphTargets===!0&&x.bindAttribLocation(c,0,"position"),x.linkProgram(c),S.debug.checkShaderErrors){const A=x.getProgramInfoLog(c).trim(),L=x.getShaderInfoLog(w).trim(),M=x.getShaderInfoLog(C).trim();let k=!0,O=!0;if(x.getProgramParameter(c,x.LINK_STATUS)===!1)if(k=!1,typeof S.debug.onShaderError=="function")S.debug.onShaderError(x,c,w,C);else{const N=tl(x,w,"vertex"),U=tl(x,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+x.getError()+" - VALIDATE_STATUS "+x.getProgramParameter(c,x.VALIDATE_STATUS)+`

Program Info Log: `+A+`
`+N+`
`+U)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(L===""||M==="")&&(O=!1);O&&(this.diagnostics={runnable:k,programLog:A,vertexShader:{log:L,prefix:a},fragmentShader:{log:M,prefix:u}})}x.deleteShader(w),x.deleteShader(C);let T;this.getUniforms=function(){return T===void 0&&(T=new ls(x,c)),T};let j;return this.getAttributes=function(){return j===void 0&&(j=kp(x,c)),j},this.destroy=function(){t.releaseStatesOfProgram(this),x.deleteProgram(c),this.program=void 0},this.type=o.shaderType,this.name=o.shaderName,this.id=Cp++,this.cacheKey=r,this.usedTimes=1,this.program=c,this.vertexShader=w,this.fragmentShader=C,this}let qp=0;class Yp{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(r){const o=r.vertexShader,t=r.fragmentShader,x=this._getShaderStage(o),b=this._getShaderStage(t),h=this._getShaderCacheForMaterial(r);return h.has(x)===!1&&(h.add(x),x.usedTimes++),h.has(b)===!1&&(h.add(b),b.usedTimes++),this}remove(r){const o=this.materialCache.get(r);for(const t of o)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(r),this}getVertexShaderID(r){return this._getShaderStage(r.vertexShader).id}getFragmentShaderID(r){return this._getShaderStage(r.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(r){const o=this.materialCache;let t=o.get(r);return t===void 0&&(t=new Set,o.set(r,t)),t}_getShaderStage(r){const o=this.shaderCache;let t=o.get(r);return t===void 0&&(t=new $p(r),o.set(r,t)),t}}class $p{constructor(r){this.id=qp++,this.code=r,this.usedTimes=0}}function Zp(S,r,o,t,x,b,h){const d=new Ol,i=new Yp,f=[],g=x.isWebGL2,m=x.logarithmicDepthBuffer,n=x.vertexTextures;let s=x.precision;const l={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function c(A){return A===0?"uv":`uv${A}`}function a(A,L,M,k,O){const N=k.fog,U=O.geometry,V=A.isMeshStandardMaterial?k.environment:null,G=(A.isMeshStandardMaterial?o:r).get(A.envMap||V),z=G&&G.mapping===ds?G.image.height:null,W=l[A.type];A.precision!==null&&(s=x.getMaxPrecision(A.precision),s!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",s,"instead."));const Z=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,I=Z!==void 0?Z.length:0;let q=0;U.morphAttributes.position!==void 0&&(q=1),U.morphAttributes.normal!==void 0&&(q=2),U.morphAttributes.color!==void 0&&(q=3);let D,F,H,Y;if(W){const at=Fr[W];D=at.vertexShader,F=at.fragmentShader}else D=A.vertexShader,F=A.fragmentShader,i.update(A),H=i.getVertexShaderID(A),Y=i.getFragmentShaderID(A);const te=S.getRenderTarget(),ie=O.isInstancedMesh===!0,de=!!A.map,_e=!!A.matcap,le=!!G,re=!!A.aoMap,pe=!!A.lightMap,Q=!!A.bumpMap,ce=!!A.normalMap,be=!!A.displacementMap,Re=!!A.emissiveMap,xe=!!A.metalnessMap,Te=!!A.roughnessMap,Le=A.anisotropy>0,Je=A.clearcoat>0,ke=A.iridescence>0,ue=A.sheen>0,oe=A.transmission>0,Ce=Le&&!!A.anisotropyMap,He=Je&&!!A.clearcoatMap,Ge=Je&&!!A.clearcoatNormalMap,ve=Je&&!!A.clearcoatRoughnessMap,Ie=ke&&!!A.iridescenceMap,Me=ke&&!!A.iridescenceThicknessMap,J=ue&&!!A.sheenColorMap,ee=ue&&!!A.sheenRoughnessMap,K=!!A.specularMap,ne=!!A.specularColorMap,me=!!A.specularIntensityMap,Ee=oe&&!!A.transmissionMap,De=oe&&!!A.thicknessMap,$e=!!A.gradientMap,ge=!!A.alphaMap,ze=A.alphaTest>0,je=!!A.extensions,Ze=!!U.attributes.uv1,Ke=!!U.attributes.uv2,rt=!!U.attributes.uv3;return{isWebGL2:g,shaderID:W,shaderType:A.type,shaderName:A.name,vertexShader:D,fragmentShader:F,defines:A.defines,customVertexShaderID:H,customFragmentShaderID:Y,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:s,instancing:ie,instancingColor:ie&&O.instanceColor!==null,supportsVertexTextures:n,outputColorSpace:te===null?S.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:Gr,map:de,matcap:_e,envMap:le,envMapMode:le&&G.mapping,envMapCubeUVHeight:z,aoMap:re,lightMap:pe,bumpMap:Q,normalMap:ce,displacementMap:n&&be,emissiveMap:Re,normalMapObjectSpace:ce&&A.normalMapType===ou,normalMapTangentSpace:ce&&A.normalMapType===su,metalnessMap:xe,roughnessMap:Te,anisotropy:Le,anisotropyMap:Ce,clearcoat:Je,clearcoatMap:He,clearcoatNormalMap:Ge,clearcoatRoughnessMap:ve,iridescence:ke,iridescenceMap:Ie,iridescenceThicknessMap:Me,sheen:ue,sheenColorMap:J,sheenRoughnessMap:ee,specularMap:K,specularColorMap:ne,specularIntensityMap:me,transmission:oe,transmissionMap:Ee,thicknessMap:De,gradientMap:$e,opaque:A.transparent===!1&&A.blending===oi,alphaMap:ge,alphaTest:ze,combine:A.combine,mapUv:de&&c(A.map.channel),aoMapUv:re&&c(A.aoMap.channel),lightMapUv:pe&&c(A.lightMap.channel),bumpMapUv:Q&&c(A.bumpMap.channel),normalMapUv:ce&&c(A.normalMap.channel),displacementMapUv:be&&c(A.displacementMap.channel),emissiveMapUv:Re&&c(A.emissiveMap.channel),metalnessMapUv:xe&&c(A.metalnessMap.channel),roughnessMapUv:Te&&c(A.roughnessMap.channel),anisotropyMapUv:Ce&&c(A.anisotropyMap.channel),clearcoatMapUv:He&&c(A.clearcoatMap.channel),clearcoatNormalMapUv:Ge&&c(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ve&&c(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&c(A.iridescenceMap.channel),iridescenceThicknessMapUv:Me&&c(A.iridescenceThicknessMap.channel),sheenColorMapUv:J&&c(A.sheenColorMap.channel),sheenRoughnessMapUv:ee&&c(A.sheenRoughnessMap.channel),specularMapUv:K&&c(A.specularMap.channel),specularColorMapUv:ne&&c(A.specularColorMap.channel),specularIntensityMapUv:me&&c(A.specularIntensityMap.channel),transmissionMapUv:Ee&&c(A.transmissionMap.channel),thicknessMapUv:De&&c(A.thicknessMap.channel),alphaMapUv:ge&&c(A.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(ce||Le),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUv1s:Ze,vertexUv2s:Ke,vertexUv3s:rt,pointsUvs:O.isPoints===!0&&!!U.attributes.uv&&(de||ge),fog:!!N,useFog:A.fog===!0,fogExp2:N&&N.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:O.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:I,morphTextureStride:q,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:A.dithering,shadowMapEnabled:S.shadowMap.enabled&&M.length>0,shadowMapType:S.shadowMap.type,toneMapping:A.toneMapped?S.toneMapping:en,useLegacyLights:S.useLegacyLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===Kr,flipSided:A.side===dr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:je&&A.extensions.derivatives===!0,extensionFragDepth:je&&A.extensions.fragDepth===!0,extensionDrawBuffers:je&&A.extensions.drawBuffers===!0,extensionShaderTextureLOD:je&&A.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:g||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||t.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function u(A){const L=[];if(A.shaderID?L.push(A.shaderID):(L.push(A.customVertexShaderID),L.push(A.customFragmentShaderID)),A.defines!==void 0)for(const M in A.defines)L.push(M),L.push(A.defines[M]);return A.isRawShaderMaterial===!1&&(y(L,A),p(L,A),L.push(S.outputColorSpace)),L.push(A.customProgramCacheKey),L.join()}function y(A,L){A.push(L.precision),A.push(L.outputColorSpace),A.push(L.envMapMode),A.push(L.envMapCubeUVHeight),A.push(L.mapUv),A.push(L.alphaMapUv),A.push(L.lightMapUv),A.push(L.aoMapUv),A.push(L.bumpMapUv),A.push(L.normalMapUv),A.push(L.displacementMapUv),A.push(L.emissiveMapUv),A.push(L.metalnessMapUv),A.push(L.roughnessMapUv),A.push(L.anisotropyMapUv),A.push(L.clearcoatMapUv),A.push(L.clearcoatNormalMapUv),A.push(L.clearcoatRoughnessMapUv),A.push(L.iridescenceMapUv),A.push(L.iridescenceThicknessMapUv),A.push(L.sheenColorMapUv),A.push(L.sheenRoughnessMapUv),A.push(L.specularMapUv),A.push(L.specularColorMapUv),A.push(L.specularIntensityMapUv),A.push(L.transmissionMapUv),A.push(L.thicknessMapUv),A.push(L.combine),A.push(L.fogExp2),A.push(L.sizeAttenuation),A.push(L.morphTargetsCount),A.push(L.morphAttributeCount),A.push(L.numDirLights),A.push(L.numPointLights),A.push(L.numSpotLights),A.push(L.numSpotLightMaps),A.push(L.numHemiLights),A.push(L.numRectAreaLights),A.push(L.numDirLightShadows),A.push(L.numPointLightShadows),A.push(L.numSpotLightShadows),A.push(L.numSpotLightShadowsWithMaps),A.push(L.shadowMapType),A.push(L.toneMapping),A.push(L.numClippingPlanes),A.push(L.numClipIntersection),A.push(L.depthPacking)}function p(A,L){d.disableAll(),L.isWebGL2&&d.enable(0),L.supportsVertexTextures&&d.enable(1),L.instancing&&d.enable(2),L.instancingColor&&d.enable(3),L.matcap&&d.enable(4),L.envMap&&d.enable(5),L.normalMapObjectSpace&&d.enable(6),L.normalMapTangentSpace&&d.enable(7),L.clearcoat&&d.enable(8),L.iridescence&&d.enable(9),L.alphaTest&&d.enable(10),L.vertexColors&&d.enable(11),L.vertexAlphas&&d.enable(12),L.vertexUv1s&&d.enable(13),L.vertexUv2s&&d.enable(14),L.vertexUv3s&&d.enable(15),L.vertexTangents&&d.enable(16),L.anisotropy&&d.enable(17),A.push(d.mask),d.disableAll(),L.fog&&d.enable(0),L.useFog&&d.enable(1),L.flatShading&&d.enable(2),L.logarithmicDepthBuffer&&d.enable(3),L.skinning&&d.enable(4),L.morphTargets&&d.enable(5),L.morphNormals&&d.enable(6),L.morphColors&&d.enable(7),L.premultipliedAlpha&&d.enable(8),L.shadowMapEnabled&&d.enable(9),L.useLegacyLights&&d.enable(10),L.doubleSided&&d.enable(11),L.flipSided&&d.enable(12),L.useDepthPacking&&d.enable(13),L.dithering&&d.enable(14),L.transmission&&d.enable(15),L.sheen&&d.enable(16),L.opaque&&d.enable(17),L.pointsUvs&&d.enable(18),A.push(d.mask)}function v(A){const L=l[A.type];let M;if(L){const k=Fr[L];M=Uu.clone(k.uniforms)}else M=A.uniforms;return M}function w(A,L){let M;for(let k=0,O=f.length;k<O;k++){const N=f[k];if(N.cacheKey===L){M=N,++M.usedTimes;break}}return M===void 0&&(M=new Xp(S,L,A,b),f.push(M)),M}function C(A){if(--A.usedTimes===0){const L=f.indexOf(A);f[L]=f[f.length-1],f.pop(),A.destroy()}}function T(A){i.remove(A)}function j(){i.dispose()}return{getParameters:a,getProgramCacheKey:u,getUniforms:v,acquireProgram:w,releaseProgram:C,releaseShaderCache:T,programs:f,dispose:j}}function Kp(){let S=new WeakMap;function r(b){let h=S.get(b);return h===void 0&&(h={},S.set(b,h)),h}function o(b){S.delete(b)}function t(b,h,d){S.get(b)[h]=d}function x(){S=new WeakMap}return{get:r,remove:o,update:t,dispose:x}}function Jp(S,r){return S.groupOrder!==r.groupOrder?S.groupOrder-r.groupOrder:S.renderOrder!==r.renderOrder?S.renderOrder-r.renderOrder:S.material.id!==r.material.id?S.material.id-r.material.id:S.z!==r.z?S.z-r.z:S.id-r.id}function ol(S,r){return S.groupOrder!==r.groupOrder?S.groupOrder-r.groupOrder:S.renderOrder!==r.renderOrder?S.renderOrder-r.renderOrder:S.z!==r.z?r.z-S.z:S.id-r.id}function al(){const S=[];let r=0;const o=[],t=[],x=[];function b(){r=0,o.length=0,t.length=0,x.length=0}function h(m,n,s,l,c,a){let u=S[r];return u===void 0?(u={id:m.id,object:m,geometry:n,material:s,groupOrder:l,renderOrder:m.renderOrder,z:c,group:a},S[r]=u):(u.id=m.id,u.object=m,u.geometry=n,u.material=s,u.groupOrder=l,u.renderOrder=m.renderOrder,u.z=c,u.group=a),r++,u}function d(m,n,s,l,c,a){const u=h(m,n,s,l,c,a);s.transmission>0?t.push(u):s.transparent===!0?x.push(u):o.push(u)}function i(m,n,s,l,c,a){const u=h(m,n,s,l,c,a);s.transmission>0?t.unshift(u):s.transparent===!0?x.unshift(u):o.unshift(u)}function f(m,n){o.length>1&&o.sort(m||Jp),t.length>1&&t.sort(n||ol),x.length>1&&x.sort(n||ol)}function g(){for(let m=r,n=S.length;m<n;m++){const s=S[m];if(s.id===null)break;s.id=null,s.object=null,s.geometry=null,s.material=null,s.group=null}}return{opaque:o,transmissive:t,transparent:x,init:b,push:d,unshift:i,finish:g,sort:f}}function Qp(){let S=new WeakMap;function r(t,x){const b=S.get(t);let h;return b===void 0?(h=new al,S.set(t,[h])):x>=b.length?(h=new al,b.push(h)):h=b[x],h}function o(){S=new WeakMap}return{get:r,dispose:o}}function em(){const S={};return{get:function(r){if(S[r.id]!==void 0)return S[r.id];let o;switch(r.type){case"DirectionalLight":o={direction:new qe,color:new Ut};break;case"SpotLight":o={position:new qe,direction:new qe,color:new Ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new qe,color:new Ut,distance:0,decay:0};break;case"HemisphereLight":o={direction:new qe,skyColor:new Ut,groundColor:new Ut};break;case"RectAreaLight":o={color:new Ut,position:new qe,halfWidth:new qe,halfHeight:new qe};break}return S[r.id]=o,o}}}function tm(){const S={};return{get:function(r){if(S[r.id]!==void 0)return S[r.id];let o;switch(r.type){case"DirectionalLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return S[r.id]=o,o}}}let rm=0;function nm(S,r){return(r.castShadow?2:0)-(S.castShadow?2:0)+(r.map?1:0)-(S.map?1:0)}function im(S,r){const o=new em,t=tm(),x={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let g=0;g<9;g++)x.probe.push(new qe);const b=new qe,h=new rr,d=new rr;function i(g,m){let n=0,s=0,l=0;for(let M=0;M<9;M++)x.probe[M].set(0,0,0);let c=0,a=0,u=0,y=0,p=0,v=0,w=0,C=0,T=0,j=0;g.sort(nm);const A=m===!0?Math.PI:1;for(let M=0,k=g.length;M<k;M++){const O=g[M],N=O.color,U=O.intensity,V=O.distance,G=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)n+=N.r*U*A,s+=N.g*U*A,l+=N.b*U*A;else if(O.isLightProbe)for(let z=0;z<9;z++)x.probe[z].addScaledVector(O.sh.coefficients[z],U);else if(O.isDirectionalLight){const z=o.get(O);if(z.color.copy(O.color).multiplyScalar(O.intensity*A),O.castShadow){const W=O.shadow,Z=t.get(O);Z.shadowBias=W.bias,Z.shadowNormalBias=W.normalBias,Z.shadowRadius=W.radius,Z.shadowMapSize=W.mapSize,x.directionalShadow[c]=Z,x.directionalShadowMap[c]=G,x.directionalShadowMatrix[c]=O.shadow.matrix,v++}x.directional[c]=z,c++}else if(O.isSpotLight){const z=o.get(O);z.position.setFromMatrixPosition(O.matrixWorld),z.color.copy(N).multiplyScalar(U*A),z.distance=V,z.coneCos=Math.cos(O.angle),z.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),z.decay=O.decay,x.spot[u]=z;const W=O.shadow;if(O.map&&(x.spotLightMap[T]=O.map,T++,W.updateMatrices(O),O.castShadow&&j++),x.spotLightMatrix[u]=W.matrix,O.castShadow){const Z=t.get(O);Z.shadowBias=W.bias,Z.shadowNormalBias=W.normalBias,Z.shadowRadius=W.radius,Z.shadowMapSize=W.mapSize,x.spotShadow[u]=Z,x.spotShadowMap[u]=G,C++}u++}else if(O.isRectAreaLight){const z=o.get(O);z.color.copy(N).multiplyScalar(U),z.halfWidth.set(O.width*.5,0,0),z.halfHeight.set(0,O.height*.5,0),x.rectArea[y]=z,y++}else if(O.isPointLight){const z=o.get(O);if(z.color.copy(O.color).multiplyScalar(O.intensity*A),z.distance=O.distance,z.decay=O.decay,O.castShadow){const W=O.shadow,Z=t.get(O);Z.shadowBias=W.bias,Z.shadowNormalBias=W.normalBias,Z.shadowRadius=W.radius,Z.shadowMapSize=W.mapSize,Z.shadowCameraNear=W.camera.near,Z.shadowCameraFar=W.camera.far,x.pointShadow[a]=Z,x.pointShadowMap[a]=G,x.pointShadowMatrix[a]=O.shadow.matrix,w++}x.point[a]=z,a++}else if(O.isHemisphereLight){const z=o.get(O);z.skyColor.copy(O.color).multiplyScalar(U*A),z.groundColor.copy(O.groundColor).multiplyScalar(U*A),x.hemi[p]=z,p++}}y>0&&(r.isWebGL2||S.has("OES_texture_float_linear")===!0?(x.rectAreaLTC1=ot.LTC_FLOAT_1,x.rectAreaLTC2=ot.LTC_FLOAT_2):S.has("OES_texture_half_float_linear")===!0?(x.rectAreaLTC1=ot.LTC_HALF_1,x.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),x.ambient[0]=n,x.ambient[1]=s,x.ambient[2]=l;const L=x.hash;(L.directionalLength!==c||L.pointLength!==a||L.spotLength!==u||L.rectAreaLength!==y||L.hemiLength!==p||L.numDirectionalShadows!==v||L.numPointShadows!==w||L.numSpotShadows!==C||L.numSpotMaps!==T)&&(x.directional.length=c,x.spot.length=u,x.rectArea.length=y,x.point.length=a,x.hemi.length=p,x.directionalShadow.length=v,x.directionalShadowMap.length=v,x.pointShadow.length=w,x.pointShadowMap.length=w,x.spotShadow.length=C,x.spotShadowMap.length=C,x.directionalShadowMatrix.length=v,x.pointShadowMatrix.length=w,x.spotLightMatrix.length=C+T-j,x.spotLightMap.length=T,x.numSpotLightShadowsWithMaps=j,L.directionalLength=c,L.pointLength=a,L.spotLength=u,L.rectAreaLength=y,L.hemiLength=p,L.numDirectionalShadows=v,L.numPointShadows=w,L.numSpotShadows=C,L.numSpotMaps=T,x.version=rm++)}function f(g,m){let n=0,s=0,l=0,c=0,a=0;const u=m.matrixWorldInverse;for(let y=0,p=g.length;y<p;y++){const v=g[y];if(v.isDirectionalLight){const w=x.directional[n];w.direction.setFromMatrixPosition(v.matrixWorld),b.setFromMatrixPosition(v.target.matrixWorld),w.direction.sub(b),w.direction.transformDirection(u),n++}else if(v.isSpotLight){const w=x.spot[l];w.position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(u),w.direction.setFromMatrixPosition(v.matrixWorld),b.setFromMatrixPosition(v.target.matrixWorld),w.direction.sub(b),w.direction.transformDirection(u),l++}else if(v.isRectAreaLight){const w=x.rectArea[c];w.position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(u),d.identity(),h.copy(v.matrixWorld),h.premultiply(u),d.extractRotation(h),w.halfWidth.set(v.width*.5,0,0),w.halfHeight.set(0,v.height*.5,0),w.halfWidth.applyMatrix4(d),w.halfHeight.applyMatrix4(d),c++}else if(v.isPointLight){const w=x.point[s];w.position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(u),s++}else if(v.isHemisphereLight){const w=x.hemi[a];w.direction.setFromMatrixPosition(v.matrixWorld),w.direction.transformDirection(u),a++}}}return{setup:i,setupView:f,state:x}}function ll(S,r){const o=new im(S,r),t=[],x=[];function b(){t.length=0,x.length=0}function h(m){t.push(m)}function d(m){x.push(m)}function i(m){o.setup(t,m)}function f(m){o.setupView(t,m)}return{init:b,state:{lightsArray:t,shadowsArray:x,lights:o},setupLights:i,setupLightsView:f,pushLight:h,pushShadow:d}}function sm(S,r){let o=new WeakMap;function t(b,h=0){const d=o.get(b);let i;return d===void 0?(i=new ll(S,r),o.set(b,[i])):h>=d.length?(i=new ll(S,r),d.push(i)):i=d[h],i}function x(){o=new WeakMap}return{get:t,dispose:x}}class om extends fs{constructor(r){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nu,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(r)}copy(r){return super.copy(r),this.depthPacking=r.depthPacking,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this}}class am extends fs{constructor(r){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(r)}copy(r){return super.copy(r),this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this}}const lm=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,cm=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function um(S,r,o){let t=new Gl;const x=new It,b=new It,h=new tr,d=new om({depthPacking:iu}),i=new am,f={},g=o.maxTextureSize,m={[gn]:dr,[dr]:gn,[Kr]:Kr},n=new yn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:lm,fragmentShader:cm}),s=n.clone();s.defines.HORIZONTAL_PASS=1;const l=new In;l.setAttribute("position",new Nr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const c=new Qr(l,n),a=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pl;let u=this.type;this.render=function(w,C,T){if(a.enabled===!1||a.autoUpdate===!1&&a.needsUpdate===!1||w.length===0)return;const j=S.getRenderTarget(),A=S.getActiveCubeFace(),L=S.getActiveMipmapLevel(),M=S.state;M.setBlending(pn),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);const k=u!==Zr&&this.type===Zr,O=u===Zr&&this.type!==Zr;for(let N=0,U=w.length;N<U;N++){const V=w[N],G=V.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;x.copy(G.mapSize);const z=G.getFrameExtents();if(x.multiply(z),b.copy(G.mapSize),(x.x>g||x.y>g)&&(x.x>g&&(b.x=Math.floor(g/z.x),x.x=b.x*z.x,G.mapSize.x=b.x),x.y>g&&(b.y=Math.floor(g/z.y),x.y=b.y*z.y,G.mapSize.y=b.y)),G.map===null||k===!0||O===!0){const Z=this.type!==Zr?{minFilter:ur,magFilter:ur}:{};G.map!==null&&G.map.dispose(),G.map=new Dn(x.x,x.y,Z),G.map.texture.name=V.name+".shadowMap",G.camera.updateProjectionMatrix()}S.setRenderTarget(G.map),S.clear();const W=G.getViewportCount();for(let Z=0;Z<W;Z++){const I=G.getViewport(Z);h.set(b.x*I.x,b.y*I.y,b.x*I.z,b.y*I.w),M.viewport(h),G.updateMatrices(V,Z),t=G.getFrustum(),v(C,T,G.camera,V,this.type)}G.isPointLightShadow!==!0&&this.type===Zr&&y(G,T),G.needsUpdate=!1}u=this.type,a.needsUpdate=!1,S.setRenderTarget(j,A,L)};function y(w,C){const T=r.update(c);n.defines.VSM_SAMPLES!==w.blurSamples&&(n.defines.VSM_SAMPLES=w.blurSamples,s.defines.VSM_SAMPLES=w.blurSamples,n.needsUpdate=!0,s.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Dn(x.x,x.y)),n.uniforms.shadow_pass.value=w.map.texture,n.uniforms.resolution.value=w.mapSize,n.uniforms.radius.value=w.radius,S.setRenderTarget(w.mapPass),S.clear(),S.renderBufferDirect(C,null,T,n,c,null),s.uniforms.shadow_pass.value=w.mapPass.texture,s.uniforms.resolution.value=w.mapSize,s.uniforms.radius.value=w.radius,S.setRenderTarget(w.map),S.clear(),S.renderBufferDirect(C,null,T,s,c,null)}function p(w,C,T,j){let A=null;const L=T.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(L!==void 0)A=L;else if(A=T.isPointLight===!0?i:d,S.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const M=A.uuid,k=C.uuid;let O=f[M];O===void 0&&(O={},f[M]=O);let N=O[k];N===void 0&&(N=A.clone(),O[k]=N),A=N}if(A.visible=C.visible,A.wireframe=C.wireframe,j===Zr?A.side=C.shadowSide!==null?C.shadowSide:C.side:A.side=C.shadowSide!==null?C.shadowSide:m[C.side],A.alphaMap=C.alphaMap,A.alphaTest=C.alphaTest,A.map=C.map,A.clipShadows=C.clipShadows,A.clippingPlanes=C.clippingPlanes,A.clipIntersection=C.clipIntersection,A.displacementMap=C.displacementMap,A.displacementScale=C.displacementScale,A.displacementBias=C.displacementBias,A.wireframeLinewidth=C.wireframeLinewidth,A.linewidth=C.linewidth,T.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const M=S.properties.get(A);M.light=T}return A}function v(w,C,T,j,A){if(w.visible===!1)return;if(w.layers.test(C.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&A===Zr)&&(!w.frustumCulled||t.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld);const k=r.update(w),O=w.material;if(Array.isArray(O)){const N=k.groups;for(let U=0,V=N.length;U<V;U++){const G=N[U],z=O[G.materialIndex];if(z&&z.visible){const W=p(w,z,j,A);S.renderBufferDirect(T,null,k,W,w,G)}}}else if(O.visible){const N=p(w,O,j,A);S.renderBufferDirect(T,null,k,N,w,null)}}const M=w.children;for(let k=0,O=M.length;k<O;k++)v(M[k],C,T,j,A)}}function dm(S,r,o){const t=o.isWebGL2;function x(){let ge=!1;const ze=new tr;let je=null;const Ze=new tr(0,0,0,0);return{setMask:function(Ke){je!==Ke&&!ge&&(S.colorMask(Ke,Ke,Ke,Ke),je=Ke)},setLocked:function(Ke){ge=Ke},setClear:function(Ke,rt,lt,at,Et){Et===!0&&(Ke*=at,rt*=at,lt*=at),ze.set(Ke,rt,lt,at),Ze.equals(ze)===!1&&(S.clearColor(Ke,rt,lt,at),Ze.copy(ze))},reset:function(){ge=!1,je=null,Ze.set(-1,0,0,0)}}}function b(){let ge=!1,ze=null,je=null,Ze=null;return{setTest:function(Ke){Ke?te(S.DEPTH_TEST):ie(S.DEPTH_TEST)},setMask:function(Ke){ze!==Ke&&!ge&&(S.depthMask(Ke),ze=Ke)},setFunc:function(Ke){if(je!==Ke){switch(Ke){case Dc:S.depthFunc(S.NEVER);break;case Ic:S.depthFunc(S.ALWAYS);break;case kc:S.depthFunc(S.LESS);break;case Qs:S.depthFunc(S.LEQUAL);break;case Uc:S.depthFunc(S.EQUAL);break;case Fc:S.depthFunc(S.GEQUAL);break;case Nc:S.depthFunc(S.GREATER);break;case Bc:S.depthFunc(S.NOTEQUAL);break;default:S.depthFunc(S.LEQUAL)}je=Ke}},setLocked:function(Ke){ge=Ke},setClear:function(Ke){Ze!==Ke&&(S.clearDepth(Ke),Ze=Ke)},reset:function(){ge=!1,ze=null,je=null,Ze=null}}}function h(){let ge=!1,ze=null,je=null,Ze=null,Ke=null,rt=null,lt=null,at=null,Et=null;return{setTest:function(_t){ge||(_t?te(S.STENCIL_TEST):ie(S.STENCIL_TEST))},setMask:function(_t){ze!==_t&&!ge&&(S.stencilMask(_t),ze=_t)},setFunc:function(_t,At,mt){(je!==_t||Ze!==At||Ke!==mt)&&(S.stencilFunc(_t,At,mt),je=_t,Ze=At,Ke=mt)},setOp:function(_t,At,mt){(rt!==_t||lt!==At||at!==mt)&&(S.stencilOp(_t,At,mt),rt=_t,lt=At,at=mt)},setLocked:function(_t){ge=_t},setClear:function(_t){Et!==_t&&(S.clearStencil(_t),Et=_t)},reset:function(){ge=!1,ze=null,je=null,Ze=null,Ke=null,rt=null,lt=null,at=null,Et=null}}}const d=new x,i=new b,f=new h,g=new WeakMap,m=new WeakMap;let n={},s={},l=new WeakMap,c=[],a=null,u=!1,y=null,p=null,v=null,w=null,C=null,T=null,j=null,A=!1,L=null,M=null,k=null,O=null,N=null;const U=S.getParameter(S.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,G=0;const z=S.getParameter(S.VERSION);z.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(z)[1]),V=G>=1):z.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),V=G>=2);let W=null,Z={};const I=S.getParameter(S.SCISSOR_BOX),q=S.getParameter(S.VIEWPORT),D=new tr().fromArray(I),F=new tr().fromArray(q);function H(ge,ze,je,Ze){const Ke=new Uint8Array(4),rt=S.createTexture();S.bindTexture(ge,rt),S.texParameteri(ge,S.TEXTURE_MIN_FILTER,S.NEAREST),S.texParameteri(ge,S.TEXTURE_MAG_FILTER,S.NEAREST);for(let lt=0;lt<je;lt++)t&&(ge===S.TEXTURE_3D||ge===S.TEXTURE_2D_ARRAY)?S.texImage3D(ze,0,S.RGBA,1,1,Ze,0,S.RGBA,S.UNSIGNED_BYTE,Ke):S.texImage2D(ze+lt,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,Ke);return rt}const Y={};Y[S.TEXTURE_2D]=H(S.TEXTURE_2D,S.TEXTURE_2D,1),Y[S.TEXTURE_CUBE_MAP]=H(S.TEXTURE_CUBE_MAP,S.TEXTURE_CUBE_MAP_POSITIVE_X,6),t&&(Y[S.TEXTURE_2D_ARRAY]=H(S.TEXTURE_2D_ARRAY,S.TEXTURE_2D_ARRAY,1,1),Y[S.TEXTURE_3D]=H(S.TEXTURE_3D,S.TEXTURE_3D,1,1)),d.setClear(0,0,0,1),i.setClear(1),f.setClear(0),te(S.DEPTH_TEST),i.setFunc(Qs),be(!1),Re(Yo),te(S.CULL_FACE),Q(pn);function te(ge){n[ge]!==!0&&(S.enable(ge),n[ge]=!0)}function ie(ge){n[ge]!==!1&&(S.disable(ge),n[ge]=!1)}function de(ge,ze){return s[ge]!==ze?(S.bindFramebuffer(ge,ze),s[ge]=ze,t&&(ge===S.DRAW_FRAMEBUFFER&&(s[S.FRAMEBUFFER]=ze),ge===S.FRAMEBUFFER&&(s[S.DRAW_FRAMEBUFFER]=ze)),!0):!1}function _e(ge,ze){let je=c,Ze=!1;if(ge)if(je=l.get(ze),je===void 0&&(je=[],l.set(ze,je)),ge.isWebGLMultipleRenderTargets){const Ke=ge.texture;if(je.length!==Ke.length||je[0]!==S.COLOR_ATTACHMENT0){for(let rt=0,lt=Ke.length;rt<lt;rt++)je[rt]=S.COLOR_ATTACHMENT0+rt;je.length=Ke.length,Ze=!0}}else je[0]!==S.COLOR_ATTACHMENT0&&(je[0]=S.COLOR_ATTACHMENT0,Ze=!0);else je[0]!==S.BACK&&(je[0]=S.BACK,Ze=!0);Ze&&(o.isWebGL2?S.drawBuffers(je):r.get("WEBGL_draw_buffers").drawBuffersWEBGL(je))}function le(ge){return a!==ge?(S.useProgram(ge),a=ge,!0):!1}const re={[ii]:S.FUNC_ADD,[Sc]:S.FUNC_SUBTRACT,[Mc]:S.FUNC_REVERSE_SUBTRACT};if(t)re[Jo]=S.MIN,re[Qo]=S.MAX;else{const ge=r.get("EXT_blend_minmax");ge!==null&&(re[Jo]=ge.MIN_EXT,re[Qo]=ge.MAX_EXT)}const pe={[Ec]:S.ZERO,[Tc]:S.ONE,[Ac]:S.SRC_COLOR,[ml]:S.SRC_ALPHA,[Oc]:S.SRC_ALPHA_SATURATE,[Lc]:S.DST_COLOR,[Cc]:S.DST_ALPHA,[jc]:S.ONE_MINUS_SRC_COLOR,[gl]:S.ONE_MINUS_SRC_ALPHA,[Pc]:S.ONE_MINUS_DST_COLOR,[Rc]:S.ONE_MINUS_DST_ALPHA};function Q(ge,ze,je,Ze,Ke,rt,lt,at){if(ge===pn){u===!0&&(ie(S.BLEND),u=!1);return}if(u===!1&&(te(S.BLEND),u=!0),ge!==wc){if(ge!==y||at!==A){if((p!==ii||C!==ii)&&(S.blendEquation(S.FUNC_ADD),p=ii,C=ii),at)switch(ge){case oi:S.blendFuncSeparate(S.ONE,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA);break;case $o:S.blendFunc(S.ONE,S.ONE);break;case Zo:S.blendFuncSeparate(S.ZERO,S.ONE_MINUS_SRC_COLOR,S.ZERO,S.ONE);break;case Ko:S.blendFuncSeparate(S.ZERO,S.SRC_COLOR,S.ZERO,S.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case oi:S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA);break;case $o:S.blendFunc(S.SRC_ALPHA,S.ONE);break;case Zo:S.blendFuncSeparate(S.ZERO,S.ONE_MINUS_SRC_COLOR,S.ZERO,S.ONE);break;case Ko:S.blendFunc(S.ZERO,S.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}v=null,w=null,T=null,j=null,y=ge,A=at}return}Ke=Ke||ze,rt=rt||je,lt=lt||Ze,(ze!==p||Ke!==C)&&(S.blendEquationSeparate(re[ze],re[Ke]),p=ze,C=Ke),(je!==v||Ze!==w||rt!==T||lt!==j)&&(S.blendFuncSeparate(pe[je],pe[Ze],pe[rt],pe[lt]),v=je,w=Ze,T=rt,j=lt),y=ge,A=!1}function ce(ge,ze){ge.side===Kr?ie(S.CULL_FACE):te(S.CULL_FACE);let je=ge.side===dr;ze&&(je=!je),be(je),ge.blending===oi&&ge.transparent===!1?Q(pn):Q(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.premultipliedAlpha),i.setFunc(ge.depthFunc),i.setTest(ge.depthTest),i.setMask(ge.depthWrite),d.setMask(ge.colorWrite);const Ze=ge.stencilWrite;f.setTest(Ze),Ze&&(f.setMask(ge.stencilWriteMask),f.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),f.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),Te(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?te(S.SAMPLE_ALPHA_TO_COVERAGE):ie(S.SAMPLE_ALPHA_TO_COVERAGE)}function be(ge){L!==ge&&(ge?S.frontFace(S.CW):S.frontFace(S.CCW),L=ge)}function Re(ge){ge!==bc?(te(S.CULL_FACE),ge!==M&&(ge===Yo?S.cullFace(S.BACK):ge===_c?S.cullFace(S.FRONT):S.cullFace(S.FRONT_AND_BACK))):ie(S.CULL_FACE),M=ge}function xe(ge){ge!==k&&(V&&S.lineWidth(ge),k=ge)}function Te(ge,ze,je){ge?(te(S.POLYGON_OFFSET_FILL),(O!==ze||N!==je)&&(S.polygonOffset(ze,je),O=ze,N=je)):ie(S.POLYGON_OFFSET_FILL)}function Le(ge){ge?te(S.SCISSOR_TEST):ie(S.SCISSOR_TEST)}function Je(ge){ge===void 0&&(ge=S.TEXTURE0+U-1),W!==ge&&(S.activeTexture(ge),W=ge)}function ke(ge,ze,je){je===void 0&&(W===null?je=S.TEXTURE0+U-1:je=W);let Ze=Z[je];Ze===void 0&&(Ze={type:void 0,texture:void 0},Z[je]=Ze),(Ze.type!==ge||Ze.texture!==ze)&&(W!==je&&(S.activeTexture(je),W=je),S.bindTexture(ge,ze||Y[ge]),Ze.type=ge,Ze.texture=ze)}function ue(){const ge=Z[W];ge!==void 0&&ge.type!==void 0&&(S.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function oe(){try{S.compressedTexImage2D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ce(){try{S.compressedTexImage3D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function He(){try{S.texSubImage2D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ge(){try{S.texSubImage3D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ve(){try{S.compressedTexSubImage2D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ie(){try{S.compressedTexSubImage3D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Me(){try{S.texStorage2D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function J(){try{S.texStorage3D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ee(){try{S.texImage2D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function K(){try{S.texImage3D.apply(S,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ne(ge){D.equals(ge)===!1&&(S.scissor(ge.x,ge.y,ge.z,ge.w),D.copy(ge))}function me(ge){F.equals(ge)===!1&&(S.viewport(ge.x,ge.y,ge.z,ge.w),F.copy(ge))}function Ee(ge,ze){let je=m.get(ze);je===void 0&&(je=new WeakMap,m.set(ze,je));let Ze=je.get(ge);Ze===void 0&&(Ze=S.getUniformBlockIndex(ze,ge.name),je.set(ge,Ze))}function De(ge,ze){const Ze=m.get(ze).get(ge);g.get(ze)!==Ze&&(S.uniformBlockBinding(ze,Ze,ge.__bindingPointIndex),g.set(ze,Ze))}function $e(){S.disable(S.BLEND),S.disable(S.CULL_FACE),S.disable(S.DEPTH_TEST),S.disable(S.POLYGON_OFFSET_FILL),S.disable(S.SCISSOR_TEST),S.disable(S.STENCIL_TEST),S.disable(S.SAMPLE_ALPHA_TO_COVERAGE),S.blendEquation(S.FUNC_ADD),S.blendFunc(S.ONE,S.ZERO),S.blendFuncSeparate(S.ONE,S.ZERO,S.ONE,S.ZERO),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.depthMask(!0),S.depthFunc(S.LESS),S.clearDepth(1),S.stencilMask(4294967295),S.stencilFunc(S.ALWAYS,0,4294967295),S.stencilOp(S.KEEP,S.KEEP,S.KEEP),S.clearStencil(0),S.cullFace(S.BACK),S.frontFace(S.CCW),S.polygonOffset(0,0),S.activeTexture(S.TEXTURE0),S.bindFramebuffer(S.FRAMEBUFFER,null),t===!0&&(S.bindFramebuffer(S.DRAW_FRAMEBUFFER,null),S.bindFramebuffer(S.READ_FRAMEBUFFER,null)),S.useProgram(null),S.lineWidth(1),S.scissor(0,0,S.canvas.width,S.canvas.height),S.viewport(0,0,S.canvas.width,S.canvas.height),n={},W=null,Z={},s={},l=new WeakMap,c=[],a=null,u=!1,y=null,p=null,v=null,w=null,C=null,T=null,j=null,A=!1,L=null,M=null,k=null,O=null,N=null,D.set(0,0,S.canvas.width,S.canvas.height),F.set(0,0,S.canvas.width,S.canvas.height),d.reset(),i.reset(),f.reset()}return{buffers:{color:d,depth:i,stencil:f},enable:te,disable:ie,bindFramebuffer:de,drawBuffers:_e,useProgram:le,setBlending:Q,setMaterial:ce,setFlipSided:be,setCullFace:Re,setLineWidth:xe,setPolygonOffset:Te,setScissorTest:Le,activeTexture:Je,bindTexture:ke,unbindTexture:ue,compressedTexImage2D:oe,compressedTexImage3D:Ce,texImage2D:ee,texImage3D:K,updateUBOMapping:Ee,uniformBlockBinding:De,texStorage2D:Me,texStorage3D:J,texSubImage2D:He,texSubImage3D:Ge,compressedTexSubImage2D:ve,compressedTexSubImage3D:Ie,scissor:ne,viewport:me,reset:$e}}function hm(S,r,o,t,x,b,h){const d=x.isWebGL2,i=x.maxTextures,f=x.maxCubemapSize,g=x.maxTextureSize,m=x.maxSamples,n=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):null,s=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new WeakMap;let c;const a=new WeakMap;let u=!1;try{u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(ue,oe){return u?new OffscreenCanvas(ue,oe):us("canvas")}function p(ue,oe,Ce,He){let Ge=1;if((ue.width>He||ue.height>He)&&(Ge=He/Math.max(ue.width,ue.height)),Ge<1||oe===!0)if(typeof HTMLImageElement<"u"&&ue instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ue instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ue instanceof ImageBitmap){const ve=oe?ao:Math.floor,Ie=ve(Ge*ue.width),Me=ve(Ge*ue.height);c===void 0&&(c=y(Ie,Me));const J=Ce?y(Ie,Me):c;return J.width=Ie,J.height=Me,J.getContext("2d").drawImage(ue,0,0,Ie,Me),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ue.width+"x"+ue.height+") to ("+Ie+"x"+Me+")."),J}else return"data"in ue&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ue.width+"x"+ue.height+")."),ue;return ue}function v(ue){return Ea(ue.width)&&Ea(ue.height)}function w(ue){return d?!1:ue.wrapS!==Pr||ue.wrapT!==Pr||ue.minFilter!==ur&&ue.minFilter!==pr}function C(ue,oe){return ue.generateMipmaps&&oe&&ue.minFilter!==ur&&ue.minFilter!==pr}function T(ue){S.generateMipmap(ue)}function j(ue,oe,Ce,He,Ge=!1){if(d===!1)return oe;if(ue!==null){if(S[ue]!==void 0)return S[ue];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ue+"'")}let ve=oe;return oe===S.RED&&(Ce===S.FLOAT&&(ve=S.R32F),Ce===S.HALF_FLOAT&&(ve=S.R16F),Ce===S.UNSIGNED_BYTE&&(ve=S.R8)),oe===S.RG&&(Ce===S.FLOAT&&(ve=S.RG32F),Ce===S.HALF_FLOAT&&(ve=S.RG16F),Ce===S.UNSIGNED_BYTE&&(ve=S.RG8)),oe===S.RGBA&&(Ce===S.FLOAT&&(ve=S.RGBA32F),Ce===S.HALF_FLOAT&&(ve=S.RGBA16F),Ce===S.UNSIGNED_BYTE&&(ve=He===bt&&Ge===!1?S.SRGB8_ALPHA8:S.RGBA8),Ce===S.UNSIGNED_SHORT_4_4_4_4&&(ve=S.RGBA4),Ce===S.UNSIGNED_SHORT_5_5_5_1&&(ve=S.RGB5_A1)),(ve===S.R16F||ve===S.R32F||ve===S.RG16F||ve===S.RG32F||ve===S.RGBA16F||ve===S.RGBA32F)&&r.get("EXT_color_buffer_float"),ve}function A(ue,oe,Ce){return C(ue,Ce)===!0||ue.isFramebufferTexture&&ue.minFilter!==ur&&ue.minFilter!==pr?Math.log2(Math.max(oe.width,oe.height))+1:ue.mipmaps!==void 0&&ue.mipmaps.length>0?ue.mipmaps.length:ue.isCompressedTexture&&Array.isArray(ue.image)?oe.mipmaps.length:1}function L(ue){return ue===ur||ue===ea||ue===xs?S.NEAREST:S.LINEAR}function M(ue){const oe=ue.target;oe.removeEventListener("dispose",M),O(oe),oe.isVideoTexture&&l.delete(oe)}function k(ue){const oe=ue.target;oe.removeEventListener("dispose",k),U(oe)}function O(ue){const oe=t.get(ue);if(oe.__webglInit===void 0)return;const Ce=ue.source,He=a.get(Ce);if(He){const Ge=He[oe.__cacheKey];Ge.usedTimes--,Ge.usedTimes===0&&N(ue),Object.keys(He).length===0&&a.delete(Ce)}t.remove(ue)}function N(ue){const oe=t.get(ue);S.deleteTexture(oe.__webglTexture);const Ce=ue.source,He=a.get(Ce);delete He[oe.__cacheKey],h.memory.textures--}function U(ue){const oe=ue.texture,Ce=t.get(ue),He=t.get(oe);if(He.__webglTexture!==void 0&&(S.deleteTexture(He.__webglTexture),h.memory.textures--),ue.depthTexture&&ue.depthTexture.dispose(),ue.isWebGLCubeRenderTarget)for(let Ge=0;Ge<6;Ge++)S.deleteFramebuffer(Ce.__webglFramebuffer[Ge]),Ce.__webglDepthbuffer&&S.deleteRenderbuffer(Ce.__webglDepthbuffer[Ge]);else{if(S.deleteFramebuffer(Ce.__webglFramebuffer),Ce.__webglDepthbuffer&&S.deleteRenderbuffer(Ce.__webglDepthbuffer),Ce.__webglMultisampledFramebuffer&&S.deleteFramebuffer(Ce.__webglMultisampledFramebuffer),Ce.__webglColorRenderbuffer)for(let Ge=0;Ge<Ce.__webglColorRenderbuffer.length;Ge++)Ce.__webglColorRenderbuffer[Ge]&&S.deleteRenderbuffer(Ce.__webglColorRenderbuffer[Ge]);Ce.__webglDepthRenderbuffer&&S.deleteRenderbuffer(Ce.__webglDepthRenderbuffer)}if(ue.isWebGLMultipleRenderTargets)for(let Ge=0,ve=oe.length;Ge<ve;Ge++){const Ie=t.get(oe[Ge]);Ie.__webglTexture&&(S.deleteTexture(Ie.__webglTexture),h.memory.textures--),t.remove(oe[Ge])}t.remove(oe),t.remove(ue)}let V=0;function G(){V=0}function z(){const ue=V;return ue>=i&&console.warn("THREE.WebGLTextures: Trying to use "+ue+" texture units while this GPU supports only "+i),V+=1,ue}function W(ue){const oe=[];return oe.push(ue.wrapS),oe.push(ue.wrapT),oe.push(ue.wrapR||0),oe.push(ue.magFilter),oe.push(ue.minFilter),oe.push(ue.anisotropy),oe.push(ue.internalFormat),oe.push(ue.format),oe.push(ue.type),oe.push(ue.generateMipmaps),oe.push(ue.premultiplyAlpha),oe.push(ue.flipY),oe.push(ue.unpackAlignment),oe.push(ue.colorSpace),oe.join()}function Z(ue,oe){const Ce=t.get(ue);if(ue.isVideoTexture&&Je(ue),ue.isRenderTargetTexture===!1&&ue.version>0&&Ce.__version!==ue.version){const He=ue.image;if(He===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(He.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(Ce,ue,oe);return}}o.bindTexture(S.TEXTURE_2D,Ce.__webglTexture,S.TEXTURE0+oe)}function I(ue,oe){const Ce=t.get(ue);if(ue.version>0&&Ce.__version!==ue.version){de(Ce,ue,oe);return}o.bindTexture(S.TEXTURE_2D_ARRAY,Ce.__webglTexture,S.TEXTURE0+oe)}function q(ue,oe){const Ce=t.get(ue);if(ue.version>0&&Ce.__version!==ue.version){de(Ce,ue,oe);return}o.bindTexture(S.TEXTURE_3D,Ce.__webglTexture,S.TEXTURE0+oe)}function D(ue,oe){const Ce=t.get(ue);if(ue.version>0&&Ce.__version!==ue.version){_e(Ce,ue,oe);return}o.bindTexture(S.TEXTURE_CUBE_MAP,Ce.__webglTexture,S.TEXTURE0+oe)}const F={[ro]:S.REPEAT,[Pr]:S.CLAMP_TO_EDGE,[no]:S.MIRRORED_REPEAT},H={[ur]:S.NEAREST,[ea]:S.NEAREST_MIPMAP_NEAREST,[xs]:S.NEAREST_MIPMAP_LINEAR,[pr]:S.LINEAR,[Yc]:S.LINEAR_MIPMAP_NEAREST,[Ai]:S.LINEAR_MIPMAP_LINEAR},Y={[lu]:S.NEVER,[mu]:S.ALWAYS,[cu]:S.LESS,[du]:S.LEQUAL,[uu]:S.EQUAL,[pu]:S.GEQUAL,[hu]:S.GREATER,[fu]:S.NOTEQUAL};function te(ue,oe,Ce){if(Ce?(S.texParameteri(ue,S.TEXTURE_WRAP_S,F[oe.wrapS]),S.texParameteri(ue,S.TEXTURE_WRAP_T,F[oe.wrapT]),(ue===S.TEXTURE_3D||ue===S.TEXTURE_2D_ARRAY)&&S.texParameteri(ue,S.TEXTURE_WRAP_R,F[oe.wrapR]),S.texParameteri(ue,S.TEXTURE_MAG_FILTER,H[oe.magFilter]),S.texParameteri(ue,S.TEXTURE_MIN_FILTER,H[oe.minFilter])):(S.texParameteri(ue,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(ue,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),(ue===S.TEXTURE_3D||ue===S.TEXTURE_2D_ARRAY)&&S.texParameteri(ue,S.TEXTURE_WRAP_R,S.CLAMP_TO_EDGE),(oe.wrapS!==Pr||oe.wrapT!==Pr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),S.texParameteri(ue,S.TEXTURE_MAG_FILTER,L(oe.magFilter)),S.texParameteri(ue,S.TEXTURE_MIN_FILTER,L(oe.minFilter)),oe.minFilter!==ur&&oe.minFilter!==pr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),oe.compareFunction&&(S.texParameteri(ue,S.TEXTURE_COMPARE_MODE,S.COMPARE_REF_TO_TEXTURE),S.texParameteri(ue,S.TEXTURE_COMPARE_FUNC,Y[oe.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){const He=r.get("EXT_texture_filter_anisotropic");if(oe.magFilter===ur||oe.minFilter!==xs&&oe.minFilter!==Ai||oe.type===fn&&r.has("OES_texture_float_linear")===!1||d===!1&&oe.type===ji&&r.has("OES_texture_half_float_linear")===!1)return;(oe.anisotropy>1||t.get(oe).__currentAnisotropy)&&(S.texParameterf(ue,He.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,x.getMaxAnisotropy())),t.get(oe).__currentAnisotropy=oe.anisotropy)}}function ie(ue,oe){let Ce=!1;ue.__webglInit===void 0&&(ue.__webglInit=!0,oe.addEventListener("dispose",M));const He=oe.source;let Ge=a.get(He);Ge===void 0&&(Ge={},a.set(He,Ge));const ve=W(oe);if(ve!==ue.__cacheKey){Ge[ve]===void 0&&(Ge[ve]={texture:S.createTexture(),usedTimes:0},h.memory.textures++,Ce=!0),Ge[ve].usedTimes++;const Ie=Ge[ue.__cacheKey];Ie!==void 0&&(Ge[ue.__cacheKey].usedTimes--,Ie.usedTimes===0&&N(oe)),ue.__cacheKey=ve,ue.__webglTexture=Ge[ve].texture}return Ce}function de(ue,oe,Ce){let He=S.TEXTURE_2D;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(He=S.TEXTURE_2D_ARRAY),oe.isData3DTexture&&(He=S.TEXTURE_3D);const Ge=ie(ue,oe),ve=oe.source;o.bindTexture(He,ue.__webglTexture,S.TEXTURE0+Ce);const Ie=t.get(ve);if(ve.version!==Ie.__version||Ge===!0){o.activeTexture(S.TEXTURE0+Ce),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,oe.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,oe.unpackAlignment),S.pixelStorei(S.UNPACK_COLORSPACE_CONVERSION_WEBGL,S.NONE);const Me=w(oe)&&v(oe.image)===!1;let J=p(oe.image,Me,!1,g);J=ke(oe,J);const ee=v(J)||d,K=b.convert(oe.format,oe.colorSpace);let ne=b.convert(oe.type),me=j(oe.internalFormat,K,ne,oe.colorSpace);te(He,oe,ee);let Ee;const De=oe.mipmaps,$e=d&&oe.isVideoTexture!==!0,ge=Ie.__version===void 0||Ge===!0,ze=A(oe,J,ee);if(oe.isDepthTexture)me=S.DEPTH_COMPONENT,d?oe.type===fn?me=S.DEPTH_COMPONENT32F:oe.type===hn?me=S.DEPTH_COMPONENT24:oe.type===Cn?me=S.DEPTH24_STENCIL8:me=S.DEPTH_COMPONENT16:oe.type===fn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===Rn&&me===S.DEPTH_COMPONENT&&oe.type!==fo&&oe.type!==hn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=hn,ne=b.convert(oe.type)),oe.format===ui&&me===S.DEPTH_COMPONENT&&(me=S.DEPTH_STENCIL,oe.type!==Cn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=Cn,ne=b.convert(oe.type))),ge&&($e?o.texStorage2D(S.TEXTURE_2D,1,me,J.width,J.height):o.texImage2D(S.TEXTURE_2D,0,me,J.width,J.height,0,K,ne,null));else if(oe.isDataTexture)if(De.length>0&&ee){$e&&ge&&o.texStorage2D(S.TEXTURE_2D,ze,me,De[0].width,De[0].height);for(let je=0,Ze=De.length;je<Ze;je++)Ee=De[je],$e?o.texSubImage2D(S.TEXTURE_2D,je,0,0,Ee.width,Ee.height,K,ne,Ee.data):o.texImage2D(S.TEXTURE_2D,je,me,Ee.width,Ee.height,0,K,ne,Ee.data);oe.generateMipmaps=!1}else $e?(ge&&o.texStorage2D(S.TEXTURE_2D,ze,me,J.width,J.height),o.texSubImage2D(S.TEXTURE_2D,0,0,0,J.width,J.height,K,ne,J.data)):o.texImage2D(S.TEXTURE_2D,0,me,J.width,J.height,0,K,ne,J.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){$e&&ge&&o.texStorage3D(S.TEXTURE_2D_ARRAY,ze,me,De[0].width,De[0].height,J.depth);for(let je=0,Ze=De.length;je<Ze;je++)Ee=De[je],oe.format!==Or?K!==null?$e?o.compressedTexSubImage3D(S.TEXTURE_2D_ARRAY,je,0,0,0,Ee.width,Ee.height,J.depth,K,Ee.data,0,0):o.compressedTexImage3D(S.TEXTURE_2D_ARRAY,je,me,Ee.width,Ee.height,J.depth,0,Ee.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?o.texSubImage3D(S.TEXTURE_2D_ARRAY,je,0,0,0,Ee.width,Ee.height,J.depth,K,ne,Ee.data):o.texImage3D(S.TEXTURE_2D_ARRAY,je,me,Ee.width,Ee.height,J.depth,0,K,ne,Ee.data)}else{$e&&ge&&o.texStorage2D(S.TEXTURE_2D,ze,me,De[0].width,De[0].height);for(let je=0,Ze=De.length;je<Ze;je++)Ee=De[je],oe.format!==Or?K!==null?$e?o.compressedTexSubImage2D(S.TEXTURE_2D,je,0,0,Ee.width,Ee.height,K,Ee.data):o.compressedTexImage2D(S.TEXTURE_2D,je,me,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?o.texSubImage2D(S.TEXTURE_2D,je,0,0,Ee.width,Ee.height,K,ne,Ee.data):o.texImage2D(S.TEXTURE_2D,je,me,Ee.width,Ee.height,0,K,ne,Ee.data)}else if(oe.isDataArrayTexture)$e?(ge&&o.texStorage3D(S.TEXTURE_2D_ARRAY,ze,me,J.width,J.height,J.depth),o.texSubImage3D(S.TEXTURE_2D_ARRAY,0,0,0,0,J.width,J.height,J.depth,K,ne,J.data)):o.texImage3D(S.TEXTURE_2D_ARRAY,0,me,J.width,J.height,J.depth,0,K,ne,J.data);else if(oe.isData3DTexture)$e?(ge&&o.texStorage3D(S.TEXTURE_3D,ze,me,J.width,J.height,J.depth),o.texSubImage3D(S.TEXTURE_3D,0,0,0,0,J.width,J.height,J.depth,K,ne,J.data)):o.texImage3D(S.TEXTURE_3D,0,me,J.width,J.height,J.depth,0,K,ne,J.data);else if(oe.isFramebufferTexture){if(ge)if($e)o.texStorage2D(S.TEXTURE_2D,ze,me,J.width,J.height);else{let je=J.width,Ze=J.height;for(let Ke=0;Ke<ze;Ke++)o.texImage2D(S.TEXTURE_2D,Ke,me,je,Ze,0,K,ne,null),je>>=1,Ze>>=1}}else if(De.length>0&&ee){$e&&ge&&o.texStorage2D(S.TEXTURE_2D,ze,me,De[0].width,De[0].height);for(let je=0,Ze=De.length;je<Ze;je++)Ee=De[je],$e?o.texSubImage2D(S.TEXTURE_2D,je,0,0,K,ne,Ee):o.texImage2D(S.TEXTURE_2D,je,me,K,ne,Ee);oe.generateMipmaps=!1}else $e?(ge&&o.texStorage2D(S.TEXTURE_2D,ze,me,J.width,J.height),o.texSubImage2D(S.TEXTURE_2D,0,0,0,K,ne,J)):o.texImage2D(S.TEXTURE_2D,0,me,K,ne,J);C(oe,ee)&&T(He),Ie.__version=ve.version,oe.onUpdate&&oe.onUpdate(oe)}ue.__version=oe.version}function _e(ue,oe,Ce){if(oe.image.length!==6)return;const He=ie(ue,oe),Ge=oe.source;o.bindTexture(S.TEXTURE_CUBE_MAP,ue.__webglTexture,S.TEXTURE0+Ce);const ve=t.get(Ge);if(Ge.version!==ve.__version||He===!0){o.activeTexture(S.TEXTURE0+Ce),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,oe.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,oe.unpackAlignment),S.pixelStorei(S.UNPACK_COLORSPACE_CONVERSION_WEBGL,S.NONE);const Ie=oe.isCompressedTexture||oe.image[0].isCompressedTexture,Me=oe.image[0]&&oe.image[0].isDataTexture,J=[];for(let je=0;je<6;je++)!Ie&&!Me?J[je]=p(oe.image[je],!1,!0,f):J[je]=Me?oe.image[je].image:oe.image[je],J[je]=ke(oe,J[je]);const ee=J[0],K=v(ee)||d,ne=b.convert(oe.format,oe.colorSpace),me=b.convert(oe.type),Ee=j(oe.internalFormat,ne,me,oe.colorSpace),De=d&&oe.isVideoTexture!==!0,$e=ve.__version===void 0||He===!0;let ge=A(oe,ee,K);te(S.TEXTURE_CUBE_MAP,oe,K);let ze;if(Ie){De&&$e&&o.texStorage2D(S.TEXTURE_CUBE_MAP,ge,Ee,ee.width,ee.height);for(let je=0;je<6;je++){ze=J[je].mipmaps;for(let Ze=0;Ze<ze.length;Ze++){const Ke=ze[Ze];oe.format!==Or?ne!==null?De?o.compressedTexSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze,0,0,Ke.width,Ke.height,ne,Ke.data):o.compressedTexImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze,Ee,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):De?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze,0,0,Ke.width,Ke.height,ne,me,Ke.data):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze,Ee,Ke.width,Ke.height,0,ne,me,Ke.data)}}}else{ze=oe.mipmaps,De&&$e&&(ze.length>0&&ge++,o.texStorage2D(S.TEXTURE_CUBE_MAP,ge,Ee,J[0].width,J[0].height));for(let je=0;je<6;je++)if(Me){De?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,0,0,J[je].width,J[je].height,ne,me,J[je].data):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,Ee,J[je].width,J[je].height,0,ne,me,J[je].data);for(let Ze=0;Ze<ze.length;Ze++){const rt=ze[Ze].image[je].image;De?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze+1,0,0,rt.width,rt.height,ne,me,rt.data):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze+1,Ee,rt.width,rt.height,0,ne,me,rt.data)}}else{De?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,0,0,ne,me,J[je]):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,Ee,ne,me,J[je]);for(let Ze=0;Ze<ze.length;Ze++){const Ke=ze[Ze];De?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze+1,0,0,ne,me,Ke.image[je]):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ze+1,Ee,ne,me,Ke.image[je])}}}C(oe,K)&&T(S.TEXTURE_CUBE_MAP),ve.__version=Ge.version,oe.onUpdate&&oe.onUpdate(oe)}ue.__version=oe.version}function le(ue,oe,Ce,He,Ge){const ve=b.convert(Ce.format,Ce.colorSpace),Ie=b.convert(Ce.type),Me=j(Ce.internalFormat,ve,Ie,Ce.colorSpace);t.get(oe).__hasExternalTextures||(Ge===S.TEXTURE_3D||Ge===S.TEXTURE_2D_ARRAY?o.texImage3D(Ge,0,Me,oe.width,oe.height,oe.depth,0,ve,Ie,null):o.texImage2D(Ge,0,Me,oe.width,oe.height,0,ve,Ie,null)),o.bindFramebuffer(S.FRAMEBUFFER,ue),Le(oe)?n.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,He,Ge,t.get(Ce).__webglTexture,0,Te(oe)):(Ge===S.TEXTURE_2D||Ge>=S.TEXTURE_CUBE_MAP_POSITIVE_X&&Ge<=S.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&S.framebufferTexture2D(S.FRAMEBUFFER,He,Ge,t.get(Ce).__webglTexture,0),o.bindFramebuffer(S.FRAMEBUFFER,null)}function re(ue,oe,Ce){if(S.bindRenderbuffer(S.RENDERBUFFER,ue),oe.depthBuffer&&!oe.stencilBuffer){let He=S.DEPTH_COMPONENT16;if(Ce||Le(oe)){const Ge=oe.depthTexture;Ge&&Ge.isDepthTexture&&(Ge.type===fn?He=S.DEPTH_COMPONENT32F:Ge.type===hn&&(He=S.DEPTH_COMPONENT24));const ve=Te(oe);Le(oe)?n.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,ve,He,oe.width,oe.height):S.renderbufferStorageMultisample(S.RENDERBUFFER,ve,He,oe.width,oe.height)}else S.renderbufferStorage(S.RENDERBUFFER,He,oe.width,oe.height);S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.RENDERBUFFER,ue)}else if(oe.depthBuffer&&oe.stencilBuffer){const He=Te(oe);Ce&&Le(oe)===!1?S.renderbufferStorageMultisample(S.RENDERBUFFER,He,S.DEPTH24_STENCIL8,oe.width,oe.height):Le(oe)?n.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,He,S.DEPTH24_STENCIL8,oe.width,oe.height):S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,oe.width,oe.height),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.RENDERBUFFER,ue)}else{const He=oe.isWebGLMultipleRenderTargets===!0?oe.texture:[oe.texture];for(let Ge=0;Ge<He.length;Ge++){const ve=He[Ge],Ie=b.convert(ve.format,ve.colorSpace),Me=b.convert(ve.type),J=j(ve.internalFormat,Ie,Me,ve.colorSpace),ee=Te(oe);Ce&&Le(oe)===!1?S.renderbufferStorageMultisample(S.RENDERBUFFER,ee,J,oe.width,oe.height):Le(oe)?n.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,ee,J,oe.width,oe.height):S.renderbufferStorage(S.RENDERBUFFER,J,oe.width,oe.height)}}S.bindRenderbuffer(S.RENDERBUFFER,null)}function pe(ue,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(S.FRAMEBUFFER,ue),!(oe.depthTexture&&oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),Z(oe.depthTexture,0);const He=t.get(oe.depthTexture).__webglTexture,Ge=Te(oe);if(oe.depthTexture.format===Rn)Le(oe)?n.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.TEXTURE_2D,He,0,Ge):S.framebufferTexture2D(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.TEXTURE_2D,He,0);else if(oe.depthTexture.format===ui)Le(oe)?n.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.TEXTURE_2D,He,0,Ge):S.framebufferTexture2D(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.TEXTURE_2D,He,0);else throw new Error("Unknown depthTexture format")}function Q(ue){const oe=t.get(ue),Ce=ue.isWebGLCubeRenderTarget===!0;if(ue.depthTexture&&!oe.__autoAllocateDepthBuffer){if(Ce)throw new Error("target.depthTexture not supported in Cube render targets");pe(oe.__webglFramebuffer,ue)}else if(Ce){oe.__webglDepthbuffer=[];for(let He=0;He<6;He++)o.bindFramebuffer(S.FRAMEBUFFER,oe.__webglFramebuffer[He]),oe.__webglDepthbuffer[He]=S.createRenderbuffer(),re(oe.__webglDepthbuffer[He],ue,!1)}else o.bindFramebuffer(S.FRAMEBUFFER,oe.__webglFramebuffer),oe.__webglDepthbuffer=S.createRenderbuffer(),re(oe.__webglDepthbuffer,ue,!1);o.bindFramebuffer(S.FRAMEBUFFER,null)}function ce(ue,oe,Ce){const He=t.get(ue);oe!==void 0&&le(He.__webglFramebuffer,ue,ue.texture,S.COLOR_ATTACHMENT0,S.TEXTURE_2D),Ce!==void 0&&Q(ue)}function be(ue){const oe=ue.texture,Ce=t.get(ue),He=t.get(oe);ue.addEventListener("dispose",k),ue.isWebGLMultipleRenderTargets!==!0&&(He.__webglTexture===void 0&&(He.__webglTexture=S.createTexture()),He.__version=oe.version,h.memory.textures++);const Ge=ue.isWebGLCubeRenderTarget===!0,ve=ue.isWebGLMultipleRenderTargets===!0,Ie=v(ue)||d;if(Ge){Ce.__webglFramebuffer=[];for(let Me=0;Me<6;Me++)Ce.__webglFramebuffer[Me]=S.createFramebuffer()}else{if(Ce.__webglFramebuffer=S.createFramebuffer(),ve)if(x.drawBuffers){const Me=ue.texture;for(let J=0,ee=Me.length;J<ee;J++){const K=t.get(Me[J]);K.__webglTexture===void 0&&(K.__webglTexture=S.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(d&&ue.samples>0&&Le(ue)===!1){const Me=ve?oe:[oe];Ce.__webglMultisampledFramebuffer=S.createFramebuffer(),Ce.__webglColorRenderbuffer=[],o.bindFramebuffer(S.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer);for(let J=0;J<Me.length;J++){const ee=Me[J];Ce.__webglColorRenderbuffer[J]=S.createRenderbuffer(),S.bindRenderbuffer(S.RENDERBUFFER,Ce.__webglColorRenderbuffer[J]);const K=b.convert(ee.format,ee.colorSpace),ne=b.convert(ee.type),me=j(ee.internalFormat,K,ne,ee.colorSpace,ue.isXRRenderTarget===!0),Ee=Te(ue);S.renderbufferStorageMultisample(S.RENDERBUFFER,Ee,me,ue.width,ue.height),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+J,S.RENDERBUFFER,Ce.__webglColorRenderbuffer[J])}S.bindRenderbuffer(S.RENDERBUFFER,null),ue.depthBuffer&&(Ce.__webglDepthRenderbuffer=S.createRenderbuffer(),re(Ce.__webglDepthRenderbuffer,ue,!0)),o.bindFramebuffer(S.FRAMEBUFFER,null)}}if(Ge){o.bindTexture(S.TEXTURE_CUBE_MAP,He.__webglTexture),te(S.TEXTURE_CUBE_MAP,oe,Ie);for(let Me=0;Me<6;Me++)le(Ce.__webglFramebuffer[Me],ue,oe,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+Me);C(oe,Ie)&&T(S.TEXTURE_CUBE_MAP),o.unbindTexture()}else if(ve){const Me=ue.texture;for(let J=0,ee=Me.length;J<ee;J++){const K=Me[J],ne=t.get(K);o.bindTexture(S.TEXTURE_2D,ne.__webglTexture),te(S.TEXTURE_2D,K,Ie),le(Ce.__webglFramebuffer,ue,K,S.COLOR_ATTACHMENT0+J,S.TEXTURE_2D),C(K,Ie)&&T(S.TEXTURE_2D)}o.unbindTexture()}else{let Me=S.TEXTURE_2D;(ue.isWebGL3DRenderTarget||ue.isWebGLArrayRenderTarget)&&(d?Me=ue.isWebGL3DRenderTarget?S.TEXTURE_3D:S.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(Me,He.__webglTexture),te(Me,oe,Ie),le(Ce.__webglFramebuffer,ue,oe,S.COLOR_ATTACHMENT0,Me),C(oe,Ie)&&T(Me),o.unbindTexture()}ue.depthBuffer&&Q(ue)}function Re(ue){const oe=v(ue)||d,Ce=ue.isWebGLMultipleRenderTargets===!0?ue.texture:[ue.texture];for(let He=0,Ge=Ce.length;He<Ge;He++){const ve=Ce[He];if(C(ve,oe)){const Ie=ue.isWebGLCubeRenderTarget?S.TEXTURE_CUBE_MAP:S.TEXTURE_2D,Me=t.get(ve).__webglTexture;o.bindTexture(Ie,Me),T(Ie),o.unbindTexture()}}}function xe(ue){if(d&&ue.samples>0&&Le(ue)===!1){const oe=ue.isWebGLMultipleRenderTargets?ue.texture:[ue.texture],Ce=ue.width,He=ue.height;let Ge=S.COLOR_BUFFER_BIT;const ve=[],Ie=ue.stencilBuffer?S.DEPTH_STENCIL_ATTACHMENT:S.DEPTH_ATTACHMENT,Me=t.get(ue),J=ue.isWebGLMultipleRenderTargets===!0;if(J)for(let ee=0;ee<oe.length;ee++)o.bindFramebuffer(S.FRAMEBUFFER,Me.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+ee,S.RENDERBUFFER,null),o.bindFramebuffer(S.FRAMEBUFFER,Me.__webglFramebuffer),S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0+ee,S.TEXTURE_2D,null,0);o.bindFramebuffer(S.READ_FRAMEBUFFER,Me.__webglMultisampledFramebuffer),o.bindFramebuffer(S.DRAW_FRAMEBUFFER,Me.__webglFramebuffer);for(let ee=0;ee<oe.length;ee++){ve.push(S.COLOR_ATTACHMENT0+ee),ue.depthBuffer&&ve.push(Ie);const K=Me.__ignoreDepthValues!==void 0?Me.__ignoreDepthValues:!1;if(K===!1&&(ue.depthBuffer&&(Ge|=S.DEPTH_BUFFER_BIT),ue.stencilBuffer&&(Ge|=S.STENCIL_BUFFER_BIT)),J&&S.framebufferRenderbuffer(S.READ_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.RENDERBUFFER,Me.__webglColorRenderbuffer[ee]),K===!0&&(S.invalidateFramebuffer(S.READ_FRAMEBUFFER,[Ie]),S.invalidateFramebuffer(S.DRAW_FRAMEBUFFER,[Ie])),J){const ne=t.get(oe[ee]).__webglTexture;S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,ne,0)}S.blitFramebuffer(0,0,Ce,He,0,0,Ce,He,Ge,S.NEAREST),s&&S.invalidateFramebuffer(S.READ_FRAMEBUFFER,ve)}if(o.bindFramebuffer(S.READ_FRAMEBUFFER,null),o.bindFramebuffer(S.DRAW_FRAMEBUFFER,null),J)for(let ee=0;ee<oe.length;ee++){o.bindFramebuffer(S.FRAMEBUFFER,Me.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+ee,S.RENDERBUFFER,Me.__webglColorRenderbuffer[ee]);const K=t.get(oe[ee]).__webglTexture;o.bindFramebuffer(S.FRAMEBUFFER,Me.__webglFramebuffer),S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0+ee,S.TEXTURE_2D,K,0)}o.bindFramebuffer(S.DRAW_FRAMEBUFFER,Me.__webglMultisampledFramebuffer)}}function Te(ue){return Math.min(m,ue.samples)}function Le(ue){const oe=t.get(ue);return d&&ue.samples>0&&r.has("WEBGL_multisampled_render_to_texture")===!0&&oe.__useRenderToTexture!==!1}function Je(ue){const oe=h.render.frame;l.get(ue)!==oe&&(l.set(ue,oe),ue.update())}function ke(ue,oe){const Ce=ue.colorSpace,He=ue.format,Ge=ue.type;return ue.isCompressedTexture===!0||ue.format===so||Ce!==Gr&&Ce!==Pn&&(Ce===bt?d===!1?r.has("EXT_sRGB")===!0&&He===Or?(ue.format=so,ue.minFilter=pr,ue.generateMipmaps=!1):oe=Cl.sRGBToLinear(oe):(He!==Or||Ge!==mn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ce)),oe}this.allocateTextureUnit=z,this.resetTextureUnits=G,this.setTexture2D=Z,this.setTexture2DArray=I,this.setTexture3D=q,this.setTextureCube=D,this.rebindTextures=ce,this.setupRenderTarget=be,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=le,this.useMultisampledRTT=Le}function fm(S,r,o){const t=o.isWebGL2;function x(b,h=Pn){let d;if(b===mn)return S.UNSIGNED_BYTE;if(b===_l)return S.UNSIGNED_SHORT_4_4_4_4;if(b===xl)return S.UNSIGNED_SHORT_5_5_5_1;if(b===$c)return S.BYTE;if(b===Zc)return S.SHORT;if(b===fo)return S.UNSIGNED_SHORT;if(b===bl)return S.INT;if(b===hn)return S.UNSIGNED_INT;if(b===fn)return S.FLOAT;if(b===ji)return t?S.HALF_FLOAT:(d=r.get("OES_texture_half_float"),d!==null?d.HALF_FLOAT_OES:null);if(b===Kc)return S.ALPHA;if(b===Or)return S.RGBA;if(b===Jc)return S.LUMINANCE;if(b===Qc)return S.LUMINANCE_ALPHA;if(b===Rn)return S.DEPTH_COMPONENT;if(b===ui)return S.DEPTH_STENCIL;if(b===so)return d=r.get("EXT_sRGB"),d!==null?d.SRGB_ALPHA_EXT:null;if(b===wl)return S.RED;if(b===Sl)return S.RED_INTEGER;if(b===eu)return S.RG;if(b===Ml)return S.RG_INTEGER;if(b===El)return S.RGBA_INTEGER;if(b===ws||b===Ss||b===Ms||b===Es)if(h===bt)if(d=r.get("WEBGL_compressed_texture_s3tc_srgb"),d!==null){if(b===ws)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(b===Ss)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(b===Ms)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(b===Es)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(d=r.get("WEBGL_compressed_texture_s3tc"),d!==null){if(b===ws)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===Ss)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===Ms)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(b===Es)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(b===ta||b===ra||b===na||b===ia)if(d=r.get("WEBGL_compressed_texture_pvrtc"),d!==null){if(b===ta)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===ra)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===na)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===ia)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(b===tu)return d=r.get("WEBGL_compressed_texture_etc1"),d!==null?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(b===sa||b===oa)if(d=r.get("WEBGL_compressed_texture_etc"),d!==null){if(b===sa)return h===bt?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(b===oa)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(b===aa||b===la||b===ca||b===ua||b===da||b===ha||b===fa||b===pa||b===ma||b===ga||b===ya||b===va||b===ba||b===_a)if(d=r.get("WEBGL_compressed_texture_astc"),d!==null){if(b===aa)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(b===la)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(b===ca)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(b===ua)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(b===da)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(b===ha)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(b===fa)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(b===pa)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(b===ma)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(b===ga)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(b===ya)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(b===va)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(b===ba)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(b===_a)return h===bt?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(b===Ts)if(d=r.get("EXT_texture_compression_bptc"),d!==null){if(b===Ts)return h===bt?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(b===ru||b===xa||b===wa||b===Sa)if(d=r.get("EXT_texture_compression_rgtc"),d!==null){if(b===Ts)return d.COMPRESSED_RED_RGTC1_EXT;if(b===xa)return d.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(b===wa)return d.COMPRESSED_RED_GREEN_RGTC2_EXT;if(b===Sa)return d.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return b===Cn?t?S.UNSIGNED_INT_24_8:(d=r.get("WEBGL_depth_texture"),d!==null?d.UNSIGNED_INT_24_8_WEBGL:null):S[b]!==void 0?S[b]:null}return{convert:x}}class pm extends Sr{constructor(r=[]){super(),this.isArrayCamera=!0,this.cameras=r}}class ss extends _r{constructor(){super(),this.isGroup=!0,this.type="Group"}}const mm={type:"move"};class Zs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ss,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ss,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ss,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qe),this._grip}dispatchEvent(r){return this._targetRay!==null&&this._targetRay.dispatchEvent(r),this._grip!==null&&this._grip.dispatchEvent(r),this._hand!==null&&this._hand.dispatchEvent(r),this}connect(r){if(r&&r.hand){const o=this._hand;if(o)for(const t of r.hand.values())this._getHandJoint(o,t)}return this.dispatchEvent({type:"connected",data:r}),this}disconnect(r){return this.dispatchEvent({type:"disconnected",data:r}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(r,o,t){let x=null,b=null,h=null;const d=this._targetRay,i=this._grip,f=this._hand;if(r&&o.session.visibilityState!=="visible-blurred"){if(f&&r.hand){h=!0;for(const c of r.hand.values()){const a=o.getJointPose(c,t),u=this._getHandJoint(f,c);a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,u.jointRadius=a.radius),u.visible=a!==null}const g=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],n=g.position.distanceTo(m.position),s=.02,l=.005;f.inputState.pinching&&n>s+l?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:r.handedness,target:this})):!f.inputState.pinching&&n<=s-l&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:r.handedness,target:this}))}else i!==null&&r.gripSpace&&(b=o.getPose(r.gripSpace,t),b!==null&&(i.matrix.fromArray(b.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,b.linearVelocity?(i.hasLinearVelocity=!0,i.linearVelocity.copy(b.linearVelocity)):i.hasLinearVelocity=!1,b.angularVelocity?(i.hasAngularVelocity=!0,i.angularVelocity.copy(b.angularVelocity)):i.hasAngularVelocity=!1));d!==null&&(x=o.getPose(r.targetRaySpace,t),x===null&&b!==null&&(x=b),x!==null&&(d.matrix.fromArray(x.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,x.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(x.linearVelocity)):d.hasLinearVelocity=!1,x.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(x.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(mm)))}return d!==null&&(d.visible=x!==null),i!==null&&(i.visible=b!==null),f!==null&&(f.visible=h!==null),this}_getHandJoint(r,o){if(r.joints[o.jointName]===void 0){const t=new ss;t.matrixAutoUpdate=!1,t.visible=!1,r.joints[o.jointName]=t,r.add(t)}return r.joints[o.jointName]}}class gm extends br{constructor(r,o,t,x,b,h,d,i,f,g){if(g=g!==void 0?g:Rn,g!==Rn&&g!==ui)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&g===Rn&&(t=hn),t===void 0&&g===ui&&(t=Cn),super(null,x,b,h,d,i,g,t,f),this.isDepthTexture=!0,this.image={width:r,height:o},this.magFilter=d!==void 0?d:ur,this.minFilter=i!==void 0?i:ur,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(r){return super.copy(r),this.compareFunction=r.compareFunction,this}toJSON(r){const o=super.toJSON(r);return this.compareFunction!==null&&(o.compareFunction=this.compareFunction),o}}class ym extends hi{constructor(r,o){super();const t=this;let x=null,b=1,h=null,d="local-floor",i=1,f=null,g=null,m=null,n=null,s=null,l=null;const c=o.getContextAttributes();let a=null,u=null;const y=[],p=[];let v=null;const w=new Sr;w.layers.enable(1),w.viewport=new tr;const C=new Sr;C.layers.enable(2),C.viewport=new tr;const T=[w,C],j=new pm;j.layers.enable(1),j.layers.enable(2);let A=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(q){v=q},this.getController=function(q){let D=y[q];return D===void 0&&(D=new Zs,y[q]=D),D.getTargetRaySpace()},this.getControllerGrip=function(q){let D=y[q];return D===void 0&&(D=new Zs,y[q]=D),D.getGripSpace()},this.getHand=function(q){let D=y[q];return D===void 0&&(D=new Zs,y[q]=D),D.getHandSpace()};function M(q){const D=p.indexOf(q.inputSource);if(D===-1)return;const F=y[D];F!==void 0&&(F.update(q.inputSource,q.frame,f||h),F.dispatchEvent({type:q.type,data:q.inputSource}))}function k(){x.removeEventListener("select",M),x.removeEventListener("selectstart",M),x.removeEventListener("selectend",M),x.removeEventListener("squeeze",M),x.removeEventListener("squeezestart",M),x.removeEventListener("squeezeend",M),x.removeEventListener("end",k),x.removeEventListener("inputsourceschange",O);for(let q=0;q<y.length;q++){const D=p[q];D!==null&&(p[q]=null,y[q].disconnect(D))}A=null,L=null,r.setRenderTarget(a),s=null,n=null,m=null,x=null,u=null,I.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){b=q,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){d=q,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||h},this.setReferenceSpace=function(q){f=q},this.getBaseLayer=function(){return n!==null?n:s},this.getBinding=function(){return m},this.getFrame=function(){return l},this.getSession=function(){return x},this.setSession=async function(q){if(x=q,x!==null){if(a=r.getRenderTarget(),x.addEventListener("select",M),x.addEventListener("selectstart",M),x.addEventListener("selectend",M),x.addEventListener("squeeze",M),x.addEventListener("squeezestart",M),x.addEventListener("squeezeend",M),x.addEventListener("end",k),x.addEventListener("inputsourceschange",O),c.xrCompatible!==!0&&await o.makeXRCompatible(),x.renderState.layers===void 0||r.capabilities.isWebGL2===!1){const D={antialias:x.renderState.layers===void 0?c.antialias:!0,alpha:!0,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:b};s=new XRWebGLLayer(x,o,D),x.updateRenderState({baseLayer:s}),u=new Dn(s.framebufferWidth,s.framebufferHeight,{format:Or,type:mn,colorSpace:r.outputColorSpace,stencilBuffer:c.stencil})}else{let D=null,F=null,H=null;c.depth&&(H=c.stencil?o.DEPTH24_STENCIL8:o.DEPTH_COMPONENT24,D=c.stencil?ui:Rn,F=c.stencil?Cn:hn);const Y={colorFormat:o.RGBA8,depthFormat:H,scaleFactor:b};m=new XRWebGLBinding(x,o),n=m.createProjectionLayer(Y),x.updateRenderState({layers:[n]}),u=new Dn(n.textureWidth,n.textureHeight,{format:Or,type:mn,depthTexture:new gm(n.textureWidth,n.textureHeight,F,void 0,void 0,void 0,void 0,void 0,void 0,D),stencilBuffer:c.stencil,colorSpace:r.outputColorSpace,samples:c.antialias?4:0});const te=r.properties.get(u);te.__ignoreDepthValues=n.ignoreDepthValues}u.isXRRenderTarget=!0,this.setFoveation(i),f=null,h=await x.requestReferenceSpace(d),I.setContext(x),I.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(x!==null)return x.environmentBlendMode};function O(q){for(let D=0;D<q.removed.length;D++){const F=q.removed[D],H=p.indexOf(F);H>=0&&(p[H]=null,y[H].disconnect(F))}for(let D=0;D<q.added.length;D++){const F=q.added[D];let H=p.indexOf(F);if(H===-1){for(let te=0;te<y.length;te++)if(te>=p.length){p.push(F),H=te;break}else if(p[te]===null){p[te]=F,H=te;break}if(H===-1)break}const Y=y[H];Y&&Y.connect(F)}}const N=new qe,U=new qe;function V(q,D,F){N.setFromMatrixPosition(D.matrixWorld),U.setFromMatrixPosition(F.matrixWorld);const H=N.distanceTo(U),Y=D.projectionMatrix.elements,te=F.projectionMatrix.elements,ie=Y[14]/(Y[10]-1),de=Y[14]/(Y[10]+1),_e=(Y[9]+1)/Y[5],le=(Y[9]-1)/Y[5],re=(Y[8]-1)/Y[0],pe=(te[8]+1)/te[0],Q=ie*re,ce=ie*pe,be=H/(-re+pe),Re=be*-re;D.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Re),q.translateZ(be),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const xe=ie+be,Te=de+be,Le=Q-Re,Je=ce+(H-Re),ke=_e*de/Te*xe,ue=le*de/Te*xe;q.projectionMatrix.makePerspective(Le,Je,ke,ue,xe,Te),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}function G(q,D){D===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(D.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCameraXR=function(q){if(x===null)return q;v&&(q=v),j.near=C.near=w.near=q.near,j.far=C.far=w.far=q.far,(A!==j.near||L!==j.far)&&(x.updateRenderState({depthNear:j.near,depthFar:j.far}),A=j.near,L=j.far);const D=q.parent,F=j.cameras;G(j,D);for(let H=0;H<F.length;H++)G(F[H],D);return F.length===2?V(j,w,C):j.projectionMatrix.copy(w.projectionMatrix),v&&z(j,D),j};function z(q,D){const F=v;D===null?F.matrix.copy(q.matrixWorld):(F.matrix.copy(D.matrixWorld),F.matrix.invert(),F.matrix.multiply(q.matrixWorld)),F.matrix.decompose(F.position,F.quaternion,F.scale),F.updateMatrixWorld(!0);const H=F.children;for(let Y=0,te=H.length;Y<te;Y++)H[Y].updateMatrixWorld(!0);F.projectionMatrix.copy(q.projectionMatrix),F.projectionMatrixInverse.copy(q.projectionMatrixInverse),F.isPerspectiveCamera&&(F.fov=oo*2*Math.atan(1/F.projectionMatrix.elements[5]),F.zoom=1)}this.getFoveation=function(){if(!(n===null&&s===null))return i},this.setFoveation=function(q){i=q,n!==null&&(n.fixedFoveation=q),s!==null&&s.fixedFoveation!==void 0&&(s.fixedFoveation=q)};let W=null;function Z(q,D){if(g=D.getViewerPose(f||h),l=D,g!==null){const F=g.views;s!==null&&(r.setRenderTargetFramebuffer(u,s.framebuffer),r.setRenderTarget(u));let H=!1;F.length!==j.cameras.length&&(j.cameras.length=0,H=!0);for(let Y=0;Y<F.length;Y++){const te=F[Y];let ie=null;if(s!==null)ie=s.getViewport(te);else{const _e=m.getViewSubImage(n,te);ie=_e.viewport,Y===0&&(r.setRenderTargetTextures(u,_e.colorTexture,n.ignoreDepthValues?void 0:_e.depthStencilTexture),r.setRenderTarget(u))}let de=T[Y];de===void 0&&(de=new Sr,de.layers.enable(Y),de.viewport=new tr,T[Y]=de),de.matrix.fromArray(te.transform.matrix),de.matrix.decompose(de.position,de.quaternion,de.scale),de.projectionMatrix.fromArray(te.projectionMatrix),de.projectionMatrixInverse.copy(de.projectionMatrix).invert(),de.viewport.set(ie.x,ie.y,ie.width,ie.height),Y===0&&(j.matrix.copy(de.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale)),H===!0&&j.cameras.push(de)}}for(let F=0;F<y.length;F++){const H=p[F],Y=y[F];H!==null&&Y!==void 0&&Y.update(H,D,f||h)}W&&W(q,D),D.detectedPlanes&&t.dispatchEvent({type:"planesdetected",data:D}),l=null}const I=new zl;I.setAnimationLoop(Z),this.setAnimationLoop=function(q){W=q},this.dispose=function(){}}}function vm(S,r){function o(a,u){a.matrixAutoUpdate===!0&&a.updateMatrix(),u.value.copy(a.matrix)}function t(a,u){u.color.getRGB(a.fogColor.value,Fl(S)),u.isFog?(a.fogNear.value=u.near,a.fogFar.value=u.far):u.isFogExp2&&(a.fogDensity.value=u.density)}function x(a,u,y,p,v){u.isMeshBasicMaterial||u.isMeshLambertMaterial?b(a,u):u.isMeshToonMaterial?(b(a,u),m(a,u)):u.isMeshPhongMaterial?(b(a,u),g(a,u)):u.isMeshStandardMaterial?(b(a,u),n(a,u),u.isMeshPhysicalMaterial&&s(a,u,v)):u.isMeshMatcapMaterial?(b(a,u),l(a,u)):u.isMeshDepthMaterial?b(a,u):u.isMeshDistanceMaterial?(b(a,u),c(a,u)):u.isMeshNormalMaterial?b(a,u):u.isLineBasicMaterial?(h(a,u),u.isLineDashedMaterial&&d(a,u)):u.isPointsMaterial?i(a,u,y,p):u.isSpriteMaterial?f(a,u):u.isShadowMaterial?(a.color.value.copy(u.color),a.opacity.value=u.opacity):u.isShaderMaterial&&(u.uniformsNeedUpdate=!1)}function b(a,u){a.opacity.value=u.opacity,u.color&&a.diffuse.value.copy(u.color),u.emissive&&a.emissive.value.copy(u.emissive).multiplyScalar(u.emissiveIntensity),u.map&&(a.map.value=u.map,o(u.map,a.mapTransform)),u.alphaMap&&(a.alphaMap.value=u.alphaMap,o(u.alphaMap,a.alphaMapTransform)),u.bumpMap&&(a.bumpMap.value=u.bumpMap,o(u.bumpMap,a.bumpMapTransform),a.bumpScale.value=u.bumpScale,u.side===dr&&(a.bumpScale.value*=-1)),u.normalMap&&(a.normalMap.value=u.normalMap,o(u.normalMap,a.normalMapTransform),a.normalScale.value.copy(u.normalScale),u.side===dr&&a.normalScale.value.negate()),u.displacementMap&&(a.displacementMap.value=u.displacementMap,o(u.displacementMap,a.displacementMapTransform),a.displacementScale.value=u.displacementScale,a.displacementBias.value=u.displacementBias),u.emissiveMap&&(a.emissiveMap.value=u.emissiveMap,o(u.emissiveMap,a.emissiveMapTransform)),u.specularMap&&(a.specularMap.value=u.specularMap,o(u.specularMap,a.specularMapTransform)),u.alphaTest>0&&(a.alphaTest.value=u.alphaTest);const y=r.get(u).envMap;if(y&&(a.envMap.value=y,a.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,a.reflectivity.value=u.reflectivity,a.ior.value=u.ior,a.refractionRatio.value=u.refractionRatio),u.lightMap){a.lightMap.value=u.lightMap;const p=S.useLegacyLights===!0?Math.PI:1;a.lightMapIntensity.value=u.lightMapIntensity*p,o(u.lightMap,a.lightMapTransform)}u.aoMap&&(a.aoMap.value=u.aoMap,a.aoMapIntensity.value=u.aoMapIntensity,o(u.aoMap,a.aoMapTransform))}function h(a,u){a.diffuse.value.copy(u.color),a.opacity.value=u.opacity,u.map&&(a.map.value=u.map,o(u.map,a.mapTransform))}function d(a,u){a.dashSize.value=u.dashSize,a.totalSize.value=u.dashSize+u.gapSize,a.scale.value=u.scale}function i(a,u,y,p){a.diffuse.value.copy(u.color),a.opacity.value=u.opacity,a.size.value=u.size*y,a.scale.value=p*.5,u.map&&(a.map.value=u.map,o(u.map,a.uvTransform)),u.alphaMap&&(a.alphaMap.value=u.alphaMap,o(u.alphaMap,a.alphaMapTransform)),u.alphaTest>0&&(a.alphaTest.value=u.alphaTest)}function f(a,u){a.diffuse.value.copy(u.color),a.opacity.value=u.opacity,a.rotation.value=u.rotation,u.map&&(a.map.value=u.map,o(u.map,a.mapTransform)),u.alphaMap&&(a.alphaMap.value=u.alphaMap,o(u.alphaMap,a.alphaMapTransform)),u.alphaTest>0&&(a.alphaTest.value=u.alphaTest)}function g(a,u){a.specular.value.copy(u.specular),a.shininess.value=Math.max(u.shininess,1e-4)}function m(a,u){u.gradientMap&&(a.gradientMap.value=u.gradientMap)}function n(a,u){a.metalness.value=u.metalness,u.metalnessMap&&(a.metalnessMap.value=u.metalnessMap,o(u.metalnessMap,a.metalnessMapTransform)),a.roughness.value=u.roughness,u.roughnessMap&&(a.roughnessMap.value=u.roughnessMap,o(u.roughnessMap,a.roughnessMapTransform)),r.get(u).envMap&&(a.envMapIntensity.value=u.envMapIntensity)}function s(a,u,y){a.ior.value=u.ior,u.sheen>0&&(a.sheenColor.value.copy(u.sheenColor).multiplyScalar(u.sheen),a.sheenRoughness.value=u.sheenRoughness,u.sheenColorMap&&(a.sheenColorMap.value=u.sheenColorMap,o(u.sheenColorMap,a.sheenColorMapTransform)),u.sheenRoughnessMap&&(a.sheenRoughnessMap.value=u.sheenRoughnessMap,o(u.sheenRoughnessMap,a.sheenRoughnessMapTransform))),u.clearcoat>0&&(a.clearcoat.value=u.clearcoat,a.clearcoatRoughness.value=u.clearcoatRoughness,u.clearcoatMap&&(a.clearcoatMap.value=u.clearcoatMap,o(u.clearcoatMap,a.clearcoatMapTransform)),u.clearcoatRoughnessMap&&(a.clearcoatRoughnessMap.value=u.clearcoatRoughnessMap,o(u.clearcoatRoughnessMap,a.clearcoatRoughnessMapTransform)),u.clearcoatNormalMap&&(a.clearcoatNormalMap.value=u.clearcoatNormalMap,o(u.clearcoatNormalMap,a.clearcoatNormalMapTransform),a.clearcoatNormalScale.value.copy(u.clearcoatNormalScale),u.side===dr&&a.clearcoatNormalScale.value.negate())),u.iridescence>0&&(a.iridescence.value=u.iridescence,a.iridescenceIOR.value=u.iridescenceIOR,a.iridescenceThicknessMinimum.value=u.iridescenceThicknessRange[0],a.iridescenceThicknessMaximum.value=u.iridescenceThicknessRange[1],u.iridescenceMap&&(a.iridescenceMap.value=u.iridescenceMap,o(u.iridescenceMap,a.iridescenceMapTransform)),u.iridescenceThicknessMap&&(a.iridescenceThicknessMap.value=u.iridescenceThicknessMap,o(u.iridescenceThicknessMap,a.iridescenceThicknessMapTransform))),u.transmission>0&&(a.transmission.value=u.transmission,a.transmissionSamplerMap.value=y.texture,a.transmissionSamplerSize.value.set(y.width,y.height),u.transmissionMap&&(a.transmissionMap.value=u.transmissionMap,o(u.transmissionMap,a.transmissionMapTransform)),a.thickness.value=u.thickness,u.thicknessMap&&(a.thicknessMap.value=u.thicknessMap,o(u.thicknessMap,a.thicknessMapTransform)),a.attenuationDistance.value=u.attenuationDistance,a.attenuationColor.value.copy(u.attenuationColor)),u.anisotropy>0&&(a.anisotropyVector.value.set(u.anisotropy*Math.cos(u.anisotropyRotation),u.anisotropy*Math.sin(u.anisotropyRotation)),u.anisotropyMap&&(a.anisotropyMap.value=u.anisotropyMap,o(u.anisotropyMap,a.anisotropyMapTransform))),a.specularIntensity.value=u.specularIntensity,a.specularColor.value.copy(u.specularColor),u.specularColorMap&&(a.specularColorMap.value=u.specularColorMap,o(u.specularColorMap,a.specularColorMapTransform)),u.specularIntensityMap&&(a.specularIntensityMap.value=u.specularIntensityMap,o(u.specularIntensityMap,a.specularIntensityMapTransform))}function l(a,u){u.matcap&&(a.matcap.value=u.matcap)}function c(a,u){const y=r.get(u).light;a.referencePosition.value.setFromMatrixPosition(y.matrixWorld),a.nearDistance.value=y.shadow.camera.near,a.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:t,refreshMaterialUniforms:x}}function bm(S,r,o,t){let x={},b={},h=[];const d=o.isWebGL2?S.getParameter(S.MAX_UNIFORM_BUFFER_BINDINGS):0;function i(y,p){const v=p.program;t.uniformBlockBinding(y,v)}function f(y,p){let v=x[y.id];v===void 0&&(l(y),v=g(y),x[y.id]=v,y.addEventListener("dispose",a));const w=p.program;t.updateUBOMapping(y,w);const C=r.render.frame;b[y.id]!==C&&(n(y),b[y.id]=C)}function g(y){const p=m();y.__bindingPointIndex=p;const v=S.createBuffer(),w=y.__size,C=y.usage;return S.bindBuffer(S.UNIFORM_BUFFER,v),S.bufferData(S.UNIFORM_BUFFER,w,C),S.bindBuffer(S.UNIFORM_BUFFER,null),S.bindBufferBase(S.UNIFORM_BUFFER,p,v),v}function m(){for(let y=0;y<d;y++)if(h.indexOf(y)===-1)return h.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function n(y){const p=x[y.id],v=y.uniforms,w=y.__cache;S.bindBuffer(S.UNIFORM_BUFFER,p);for(let C=0,T=v.length;C<T;C++){const j=v[C];if(s(j,C,w)===!0){const A=j.__offset,L=Array.isArray(j.value)?j.value:[j.value];let M=0;for(let k=0;k<L.length;k++){const O=L[k],N=c(O);typeof O=="number"?(j.__data[0]=O,S.bufferSubData(S.UNIFORM_BUFFER,A+M,j.__data)):O.isMatrix3?(j.__data[0]=O.elements[0],j.__data[1]=O.elements[1],j.__data[2]=O.elements[2],j.__data[3]=O.elements[0],j.__data[4]=O.elements[3],j.__data[5]=O.elements[4],j.__data[6]=O.elements[5],j.__data[7]=O.elements[0],j.__data[8]=O.elements[6],j.__data[9]=O.elements[7],j.__data[10]=O.elements[8],j.__data[11]=O.elements[0]):(O.toArray(j.__data,M),M+=N.storage/Float32Array.BYTES_PER_ELEMENT)}S.bufferSubData(S.UNIFORM_BUFFER,A,j.__data)}}S.bindBuffer(S.UNIFORM_BUFFER,null)}function s(y,p,v){const w=y.value;if(v[p]===void 0){if(typeof w=="number")v[p]=w;else{const C=Array.isArray(w)?w:[w],T=[];for(let j=0;j<C.length;j++)T.push(C[j].clone());v[p]=T}return!0}else if(typeof w=="number"){if(v[p]!==w)return v[p]=w,!0}else{const C=Array.isArray(v[p])?v[p]:[v[p]],T=Array.isArray(w)?w:[w];for(let j=0;j<C.length;j++){const A=C[j];if(A.equals(T[j])===!1)return A.copy(T[j]),!0}}return!1}function l(y){const p=y.uniforms;let v=0;const w=16;let C=0;for(let T=0,j=p.length;T<j;T++){const A=p[T],L={boundary:0,storage:0},M=Array.isArray(A.value)?A.value:[A.value];for(let k=0,O=M.length;k<O;k++){const N=M[k],U=c(N);L.boundary+=U.boundary,L.storage+=U.storage}if(A.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=v,T>0){C=v%w;const k=w-C;C!==0&&k-L.boundary<0&&(v+=w-C,A.__offset=v)}v+=L.storage}return C=v%w,C>0&&(v+=w-C),y.__size=v,y.__cache={},this}function c(y){const p={boundary:0,storage:0};return typeof y=="number"?(p.boundary=4,p.storage=4):y.isVector2?(p.boundary=8,p.storage=8):y.isVector3||y.isColor?(p.boundary=16,p.storage=12):y.isVector4?(p.boundary=16,p.storage=16):y.isMatrix3?(p.boundary=48,p.storage=48):y.isMatrix4?(p.boundary=64,p.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),p}function a(y){const p=y.target;p.removeEventListener("dispose",a);const v=h.indexOf(p.__bindingPointIndex);h.splice(v,1),S.deleteBuffer(x[p.id]),delete x[p.id],delete b[p.id]}function u(){for(const y in x)S.deleteBuffer(x[y]);h=[],x={},b={}}return{bind:i,update:f,dispose:u}}function _m(){const S=us("canvas");return S.style.display="block",S}class ql{constructor(r={}){const{canvas:o=_m(),context:t=null,depth:x=!0,stencil:b=!0,alpha:h=!1,antialias:d=!1,premultipliedAlpha:i=!0,preserveDrawingBuffer:f=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:m=!1}=r;this.isWebGLRenderer=!0;let n;t!==null?n=t.getContextAttributes().alpha:n=h;const s=new Uint32Array(4),l=new Int32Array(4);let c=null,a=null;const u=[],y=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=bt,this.useLegacyLights=!0,this.toneMapping=en,this.toneMappingExposure=1;const p=this;let v=!1,w=0,C=0,T=null,j=-1,A=null;const L=new tr,M=new tr;let k=null;const O=new Ut(0);let N=0,U=o.width,V=o.height,G=1,z=null,W=null;const Z=new tr(0,0,U,V),I=new tr(0,0,U,V);let q=!1;const D=new Gl;let F=!1,H=!1,Y=null;const te=new rr,ie=new It,de=new qe,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function le(){return T===null?G:1}let re=t;function pe(ye,Xe){for(let ae=0;ae<ye.length;ae++){const we=ye[ae],Pe=o.getContext(we,Xe);if(Pe!==null)return Pe}return null}try{const ye={alpha:!0,depth:x,stencil:b,antialias:d,premultipliedAlpha:i,preserveDrawingBuffer:f,powerPreference:g,failIfMajorPerformanceCaveat:m};if("setAttribute"in o&&o.setAttribute("data-engine",`three.js r${ho}`),o.addEventListener("webglcontextlost",ze,!1),o.addEventListener("webglcontextrestored",je,!1),o.addEventListener("webglcontextcreationerror",Ze,!1),re===null){const Xe=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&Xe.shift(),re=pe(Xe,ye),re===null)throw pe(Xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ye){throw console.error("THREE.WebGLRenderer: "+ye.message),ye}let Q,ce,be,Re,xe,Te,Le,Je,ke,ue,oe,Ce,He,Ge,ve,Ie,Me,J,ee,K,ne,me,Ee,De;function $e(){Q=new Lf(re),ce=new Mf(re,Q,r),Q.init(ce),me=new fm(re,Q,ce),be=new dm(re,Q,ce),Re=new Df(re),xe=new Kp,Te=new hm(re,Q,be,xe,ce,me,Re),Le=new Tf(p),Je=new Rf(p),ke=new Hu(re,ce),Ee=new wf(re,Q,ke,ce),ue=new Pf(re,ke,Re,Ee),oe=new Ff(re,ue,ke,Re),ee=new Uf(re,ce,Te),Ie=new Ef(xe),Ce=new Zp(p,Le,Je,Q,ce,Ee,Ie),He=new vm(p,xe),Ge=new Qp,ve=new sm(Q,ce),J=new xf(p,Le,Je,be,oe,n,i),Me=new um(p,oe,ce),De=new bm(re,Re,ce,be),K=new Sf(re,Q,Re,ce),ne=new Of(re,Q,Re,ce),Re.programs=Ce.programs,p.capabilities=ce,p.extensions=Q,p.properties=xe,p.renderLists=Ge,p.shadowMap=Me,p.state=be,p.info=Re}$e();const ge=new ym(p,re);this.xr=ge,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const ye=Q.get("WEBGL_lose_context");ye&&ye.loseContext()},this.forceContextRestore=function(){const ye=Q.get("WEBGL_lose_context");ye&&ye.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(ye){ye!==void 0&&(G=ye,this.setSize(U,V,!1))},this.getSize=function(ye){return ye.set(U,V)},this.setSize=function(ye,Xe,ae=!0){if(ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=ye,V=Xe,o.width=Math.floor(ye*G),o.height=Math.floor(Xe*G),ae===!0&&(o.style.width=ye+"px",o.style.height=Xe+"px"),this.setViewport(0,0,ye,Xe)},this.getDrawingBufferSize=function(ye){return ye.set(U*G,V*G).floor()},this.setDrawingBufferSize=function(ye,Xe,ae){U=ye,V=Xe,G=ae,o.width=Math.floor(ye*ae),o.height=Math.floor(Xe*ae),this.setViewport(0,0,ye,Xe)},this.getCurrentViewport=function(ye){return ye.copy(L)},this.getViewport=function(ye){return ye.copy(Z)},this.setViewport=function(ye,Xe,ae,we){ye.isVector4?Z.set(ye.x,ye.y,ye.z,ye.w):Z.set(ye,Xe,ae,we),be.viewport(L.copy(Z).multiplyScalar(G).floor())},this.getScissor=function(ye){return ye.copy(I)},this.setScissor=function(ye,Xe,ae,we){ye.isVector4?I.set(ye.x,ye.y,ye.z,ye.w):I.set(ye,Xe,ae,we),be.scissor(M.copy(I).multiplyScalar(G).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(ye){be.setScissorTest(q=ye)},this.setOpaqueSort=function(ye){z=ye},this.setTransparentSort=function(ye){W=ye},this.getClearColor=function(ye){return ye.copy(J.getClearColor())},this.setClearColor=function(){J.setClearColor.apply(J,arguments)},this.getClearAlpha=function(){return J.getClearAlpha()},this.setClearAlpha=function(){J.setClearAlpha.apply(J,arguments)},this.clear=function(ye=!0,Xe=!0,ae=!0){let we=0;if(ye){let Pe=!1;if(T!==null){const Fe=T.texture.format;Pe=Fe===El||Fe===Ml||Fe===Sl}if(Pe){const Fe=T.texture.type,nt=Fe===mn||Fe===hn||Fe===fo||Fe===Cn||Fe===_l||Fe===xl,Ve=J.getClearColor(),it=J.getClearAlpha(),tt=Ve.r,st=Ve.g,et=Ve.b,pt=xe.get(T).__webglFramebuffer;nt?(s[0]=tt,s[1]=st,s[2]=et,s[3]=it,re.clearBufferuiv(re.COLOR,pt,s)):(l[0]=tt,l[1]=st,l[2]=et,l[3]=it,re.clearBufferiv(re.COLOR,pt,l))}else we|=re.COLOR_BUFFER_BIT}Xe&&(we|=re.DEPTH_BUFFER_BIT),ae&&(we|=re.STENCIL_BUFFER_BIT),re.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",ze,!1),o.removeEventListener("webglcontextrestored",je,!1),o.removeEventListener("webglcontextcreationerror",Ze,!1),Ge.dispose(),ve.dispose(),xe.dispose(),Le.dispose(),Je.dispose(),oe.dispose(),Ee.dispose(),De.dispose(),Ce.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",_t),ge.removeEventListener("sessionend",At),Y&&(Y.dispose(),Y=null),mt.stop()};function ze(ye){ye.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const ye=Re.autoReset,Xe=Me.enabled,ae=Me.autoUpdate,we=Me.needsUpdate,Pe=Me.type;$e(),Re.autoReset=ye,Me.enabled=Xe,Me.autoUpdate=ae,Me.needsUpdate=we,Me.type=Pe}function Ze(ye){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ye.statusMessage)}function Ke(ye){const Xe=ye.target;Xe.removeEventListener("dispose",Ke),rt(Xe)}function rt(ye){lt(ye),xe.remove(ye)}function lt(ye){const Xe=xe.get(ye).programs;Xe!==void 0&&(Xe.forEach(function(ae){Ce.releaseProgram(ae)}),ye.isShaderMaterial&&Ce.releaseShaderCache(ye))}this.renderBufferDirect=function(ye,Xe,ae,we,Pe,Fe){Xe===null&&(Xe=_e);const nt=Pe.isMesh&&Pe.matrixWorld.determinant()<0,Ve=vn(ye,Xe,ae,we,Pe);be.setMaterial(we,nt);let it=ae.index,tt=1;we.wireframe===!0&&(it=ue.getWireframeAttribute(ae),tt=2);const st=ae.drawRange,et=ae.attributes.position;let pt=st.start*tt,yt=(st.start+st.count)*tt;Fe!==null&&(pt=Math.max(pt,Fe.start*tt),yt=Math.min(yt,(Fe.start+Fe.count)*tt)),it!==null?(pt=Math.max(pt,0),yt=Math.min(yt,it.count)):et!=null&&(pt=Math.max(pt,0),yt=Math.min(yt,et.count));const Tt=yt-pt;if(Tt<0||Tt===1/0)return;Ee.setup(Pe,we,Ve,ae,it);let Pt,Ct=K;if(it!==null&&(Pt=ke.get(it),Ct=ne,Ct.setIndex(Pt)),Pe.isMesh)we.wireframe===!0?(be.setLineWidth(we.wireframeLinewidth*le()),Ct.setMode(re.LINES)):Ct.setMode(re.TRIANGLES);else if(Pe.isLine){let ft=we.linewidth;ft===void 0&&(ft=1),be.setLineWidth(ft*le()),Pe.isLineSegments?Ct.setMode(re.LINES):Pe.isLineLoop?Ct.setMode(re.LINE_LOOP):Ct.setMode(re.LINE_STRIP)}else Pe.isPoints?Ct.setMode(re.POINTS):Pe.isSprite&&Ct.setMode(re.TRIANGLES);if(Pe.isInstancedMesh)Ct.renderInstances(pt,Tt,Pe.count);else if(ae.isInstancedBufferGeometry){const ft=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,hr=Math.min(ae.instanceCount,ft);Ct.renderInstances(pt,Tt,hr)}else Ct.render(pt,Tt)},this.compile=function(ye,Xe){function ae(we,Pe,Fe){we.transparent===!0&&we.side===Kr&&we.forceSinglePass===!1?(we.side=dr,we.needsUpdate=!0,zt(we,Pe,Fe),we.side=gn,we.needsUpdate=!0,zt(we,Pe,Fe),we.side=Kr):zt(we,Pe,Fe)}a=ve.get(ye),a.init(),y.push(a),ye.traverseVisible(function(we){we.isLight&&we.layers.test(Xe.layers)&&(a.pushLight(we),we.castShadow&&a.pushShadow(we))}),a.setupLights(p.useLegacyLights),ye.traverse(function(we){const Pe=we.material;if(Pe)if(Array.isArray(Pe))for(let Fe=0;Fe<Pe.length;Fe++){const nt=Pe[Fe];ae(nt,ye,we)}else ae(Pe,ye,we)}),y.pop(),a=null};let at=null;function Et(ye){at&&at(ye)}function _t(){mt.stop()}function At(){mt.start()}const mt=new zl;mt.setAnimationLoop(Et),typeof self<"u"&&mt.setContext(self),this.setAnimationLoop=function(ye){at=ye,ge.setAnimationLoop(ye),ye===null?mt.stop():mt.start()},ge.addEventListener("sessionstart",_t),ge.addEventListener("sessionend",At),this.render=function(ye,Xe){if(Xe!==void 0&&Xe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),Xe.parent===null&&Xe.matrixWorldAutoUpdate===!0&&Xe.updateMatrixWorld(),ge.enabled===!0&&ge.isPresenting===!0&&(Xe=ge.updateCameraXR(Xe)),ye.isScene===!0&&ye.onBeforeRender(p,ye,Xe,T),a=ve.get(ye,y.length),a.init(),y.push(a),te.multiplyMatrices(Xe.projectionMatrix,Xe.matrixWorldInverse),D.setFromProjectionMatrix(te),H=this.localClippingEnabled,F=Ie.init(this.clippingPlanes,H),c=Ge.get(ye,u.length),c.init(),u.push(c),Lt(ye,Xe,0,p.sortObjects),c.finish(),p.sortObjects===!0&&c.sort(z,W),F===!0&&Ie.beginShadows();const ae=a.state.shadowsArray;if(Me.render(ae,ye,Xe),F===!0&&Ie.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,J.render(c,ye),a.setupLights(p.useLegacyLights),Xe.isArrayCamera){const we=Xe.cameras;for(let Pe=0,Fe=we.length;Pe<Fe;Pe++){const nt=we[Pe];Mt(c,ye,nt,nt.viewport)}}else Mt(c,ye,Xe);T!==null&&(Te.updateMultisampleRenderTarget(T),Te.updateRenderTargetMipmap(T)),ye.isScene===!0&&ye.onAfterRender(p,ye,Xe),Ee.resetDefaultState(),j=-1,A=null,y.pop(),y.length>0?a=y[y.length-1]:a=null,u.pop(),u.length>0?c=u[u.length-1]:c=null};function Lt(ye,Xe,ae,we){if(ye.visible===!1)return;if(ye.layers.test(Xe.layers)){if(ye.isGroup)ae=ye.renderOrder;else if(ye.isLOD)ye.autoUpdate===!0&&ye.update(Xe);else if(ye.isLight)a.pushLight(ye),ye.castShadow&&a.pushShadow(ye);else if(ye.isSprite){if(!ye.frustumCulled||D.intersectsSprite(ye)){we&&de.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(te);const nt=oe.update(ye),Ve=ye.material;Ve.visible&&c.push(ye,nt,Ve,ae,de.z,null)}}else if((ye.isMesh||ye.isLine||ye.isPoints)&&(!ye.frustumCulled||D.intersectsObject(ye))){ye.isSkinnedMesh&&ye.skeleton.frame!==Re.render.frame&&(ye.skeleton.update(),ye.skeleton.frame=Re.render.frame);const nt=oe.update(ye),Ve=ye.material;if(we&&(ye.boundingSphere!==void 0?(ye.boundingSphere===null&&ye.computeBoundingSphere(),de.copy(ye.boundingSphere.center)):(nt.boundingSphere===null&&nt.computeBoundingSphere(),de.copy(nt.boundingSphere.center)),de.applyMatrix4(ye.matrixWorld).applyMatrix4(te)),Array.isArray(Ve)){const it=nt.groups;for(let tt=0,st=it.length;tt<st;tt++){const et=it[tt],pt=Ve[et.materialIndex];pt&&pt.visible&&c.push(ye,nt,pt,ae,de.z,et)}}else Ve.visible&&c.push(ye,nt,Ve,ae,de.z,null)}}const Fe=ye.children;for(let nt=0,Ve=Fe.length;nt<Ve;nt++)Lt(Fe[nt],Xe,ae,we)}function Mt(ye,Xe,ae,we){const Pe=ye.opaque,Fe=ye.transmissive,nt=ye.transparent;a.setupLightsView(ae),F===!0&&Ie.setGlobalState(p.clippingPlanes,ae),Fe.length>0&&qt(Pe,Fe,Xe,ae),we&&be.viewport(L.copy(we)),Pe.length>0&&Bt(Pe,Xe,ae),Fe.length>0&&Bt(Fe,Xe,ae),nt.length>0&&Bt(nt,Xe,ae),be.buffers.depth.setTest(!0),be.buffers.depth.setMask(!0),be.buffers.color.setMask(!0),be.setPolygonOffset(!1)}function qt(ye,Xe,ae,we){const Pe=ce.isWebGL2;Y===null&&(Y=new Dn(1,1,{generateMipmaps:!0,type:Q.has("EXT_color_buffer_half_float")?ji:mn,minFilter:Ai,samples:Pe&&d===!0?4:0})),p.getDrawingBufferSize(ie),Pe?Y.setSize(ie.x,ie.y):Y.setSize(ao(ie.x),ao(ie.y));const Fe=p.getRenderTarget();p.setRenderTarget(Y),p.getClearColor(O),N=p.getClearAlpha(),N<1&&p.setClearColor(16777215,.5),p.clear();const nt=p.toneMapping;p.toneMapping=en,Bt(ye,ae,we),Te.updateMultisampleRenderTarget(Y),Te.updateRenderTargetMipmap(Y);let Ve=!1;for(let it=0,tt=Xe.length;it<tt;it++){const st=Xe[it],et=st.object,pt=st.geometry,yt=st.material,Tt=st.group;if(yt.side===Kr&&et.layers.test(we.layers)){const Pt=yt.side;yt.side=dr,yt.needsUpdate=!0,jt(et,ae,we,pt,yt,Tt),yt.side=Pt,yt.needsUpdate=!0,Ve=!0}}Ve===!0&&(Te.updateMultisampleRenderTarget(Y),Te.updateRenderTargetMipmap(Y)),p.setRenderTarget(Fe),p.setClearColor(O,N),p.toneMapping=nt}function Bt(ye,Xe,ae){const we=Xe.isScene===!0?Xe.overrideMaterial:null;for(let Pe=0,Fe=ye.length;Pe<Fe;Pe++){const nt=ye[Pe],Ve=nt.object,it=nt.geometry,tt=we===null?nt.material:we,st=nt.group;Ve.layers.test(ae.layers)&&jt(Ve,Xe,ae,it,tt,st)}}function jt(ye,Xe,ae,we,Pe,Fe){ye.onBeforeRender(p,Xe,ae,we,Pe,Fe),ye.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,ye.matrixWorld),ye.normalMatrix.getNormalMatrix(ye.modelViewMatrix),Pe.onBeforeRender(p,Xe,ae,we,ye,Fe),Pe.transparent===!0&&Pe.side===Kr&&Pe.forceSinglePass===!1?(Pe.side=dr,Pe.needsUpdate=!0,p.renderBufferDirect(ae,Xe,we,Pe,ye,Fe),Pe.side=gn,Pe.needsUpdate=!0,p.renderBufferDirect(ae,Xe,we,Pe,ye,Fe),Pe.side=Kr):p.renderBufferDirect(ae,Xe,we,Pe,ye,Fe),ye.onAfterRender(p,Xe,ae,we,Pe,Fe)}function zt(ye,Xe,ae){Xe.isScene!==!0&&(Xe=_e);const we=xe.get(ye),Pe=a.state.lights,Fe=a.state.shadowsArray,nt=Pe.state.version,Ve=Ce.getParameters(ye,Pe.state,Fe,Xe,ae),it=Ce.getProgramCacheKey(Ve);let tt=we.programs;we.environment=ye.isMeshStandardMaterial?Xe.environment:null,we.fog=Xe.fog,we.envMap=(ye.isMeshStandardMaterial?Je:Le).get(ye.envMap||we.environment),tt===void 0&&(ye.addEventListener("dispose",Ke),tt=new Map,we.programs=tt);let st=tt.get(it);if(st!==void 0){if(we.currentProgram===st&&we.lightsStateVersion===nt)return tn(ye,Ve),st}else Ve.uniforms=Ce.getUniforms(ye),ye.onBuild(ae,Ve,p),ye.onBeforeCompile(Ve,p),st=Ce.acquireProgram(Ve,it),tt.set(it,st),we.uniforms=Ve.uniforms;const et=we.uniforms;(!ye.isShaderMaterial&&!ye.isRawShaderMaterial||ye.clipping===!0)&&(et.clippingPlanes=Ie.uniform),tn(ye,Ve),we.needsLights=kn(ye),we.lightsStateVersion=nt,we.needsLights&&(et.ambientLightColor.value=Pe.state.ambient,et.lightProbe.value=Pe.state.probe,et.directionalLights.value=Pe.state.directional,et.directionalLightShadows.value=Pe.state.directionalShadow,et.spotLights.value=Pe.state.spot,et.spotLightShadows.value=Pe.state.spotShadow,et.rectAreaLights.value=Pe.state.rectArea,et.ltc_1.value=Pe.state.rectAreaLTC1,et.ltc_2.value=Pe.state.rectAreaLTC2,et.pointLights.value=Pe.state.point,et.pointLightShadows.value=Pe.state.pointShadow,et.hemisphereLights.value=Pe.state.hemi,et.directionalShadowMap.value=Pe.state.directionalShadowMap,et.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,et.spotShadowMap.value=Pe.state.spotShadowMap,et.spotLightMatrix.value=Pe.state.spotLightMatrix,et.spotLightMap.value=Pe.state.spotLightMap,et.pointShadowMap.value=Pe.state.pointShadowMap,et.pointShadowMatrix.value=Pe.state.pointShadowMatrix);const pt=st.getUniforms(),yt=ls.seqWithValue(pt.seq,et);return we.currentProgram=st,we.uniformsList=yt,st}function tn(ye,Xe){const ae=xe.get(ye);ae.outputColorSpace=Xe.outputColorSpace,ae.instancing=Xe.instancing,ae.skinning=Xe.skinning,ae.morphTargets=Xe.morphTargets,ae.morphNormals=Xe.morphNormals,ae.morphColors=Xe.morphColors,ae.morphTargetsCount=Xe.morphTargetsCount,ae.numClippingPlanes=Xe.numClippingPlanes,ae.numIntersection=Xe.numClipIntersection,ae.vertexAlphas=Xe.vertexAlphas,ae.vertexTangents=Xe.vertexTangents,ae.toneMapping=Xe.toneMapping}function vn(ye,Xe,ae,we,Pe){Xe.isScene!==!0&&(Xe=_e),Te.resetTextureUnits();const Fe=Xe.fog,nt=we.isMeshStandardMaterial?Xe.environment:null,Ve=T===null?p.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:Gr,it=(we.isMeshStandardMaterial?Je:Le).get(we.envMap||nt),tt=we.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,st=!!ae.attributes.tangent&&(!!we.normalMap||we.anisotropy>0),et=!!ae.morphAttributes.position,pt=!!ae.morphAttributes.normal,yt=!!ae.morphAttributes.color,Tt=we.toneMapped?p.toneMapping:en,Pt=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Ct=Pt!==void 0?Pt.length:0,ft=xe.get(we),hr=a.state.lights;if(F===!0&&(H===!0||ye!==A)){const Qt=ye===A&&we.id===j;Ie.setState(we,ye,Qt)}let St=!1;we.version===ft.__version?(ft.needsLights&&ft.lightsStateVersion!==hr.state.version||ft.outputColorSpace!==Ve||Pe.isInstancedMesh&&ft.instancing===!1||!Pe.isInstancedMesh&&ft.instancing===!0||Pe.isSkinnedMesh&&ft.skinning===!1||!Pe.isSkinnedMesh&&ft.skinning===!0||ft.envMap!==it||we.fog===!0&&ft.fog!==Fe||ft.numClippingPlanes!==void 0&&(ft.numClippingPlanes!==Ie.numPlanes||ft.numIntersection!==Ie.numIntersection)||ft.vertexAlphas!==tt||ft.vertexTangents!==st||ft.morphTargets!==et||ft.morphNormals!==pt||ft.morphColors!==yt||ft.toneMapping!==Tt||ce.isWebGL2===!0&&ft.morphTargetsCount!==Ct)&&(St=!0):(St=!0,ft.__version=we.version);let Dr=ft.currentProgram;St===!0&&(Dr=zt(we,Xe,Pe));let fr=!1,xr=!1,rn=!1;const Zt=Dr.getUniforms(),Ir=ft.uniforms;if(be.useProgram(Dr.program)&&(fr=!0,xr=!0,rn=!0),we.id!==j&&(j=we.id,xr=!0),fr||A!==ye){if(Zt.setValue(re,"projectionMatrix",ye.projectionMatrix),ce.logarithmicDepthBuffer&&Zt.setValue(re,"logDepthBufFC",2/(Math.log(ye.far+1)/Math.LN2)),A!==ye&&(A=ye,xr=!0,rn=!0),we.isShaderMaterial||we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshStandardMaterial||we.envMap){const Qt=Zt.map.cameraPosition;Qt!==void 0&&Qt.setValue(re,de.setFromMatrixPosition(ye.matrixWorld))}(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&Zt.setValue(re,"isOrthographic",ye.isOrthographicCamera===!0),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial||we.isShadowMaterial||Pe.isSkinnedMesh)&&Zt.setValue(re,"viewMatrix",ye.matrixWorldInverse)}if(Pe.isSkinnedMesh){Zt.setOptional(re,Pe,"bindMatrix"),Zt.setOptional(re,Pe,"bindMatrixInverse");const Qt=Pe.skeleton;Qt&&(ce.floatVertexTextures?(Qt.boneTexture===null&&Qt.computeBoneTexture(),Zt.setValue(re,"boneTexture",Qt.boneTexture,Te),Zt.setValue(re,"boneTextureSize",Qt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Un=ae.morphAttributes;if((Un.position!==void 0||Un.normal!==void 0||Un.color!==void 0&&ce.isWebGL2===!0)&&ee.update(Pe,ae,Dr),(xr||ft.receiveShadow!==Pe.receiveShadow)&&(ft.receiveShadow=Pe.receiveShadow,Zt.setValue(re,"receiveShadow",Pe.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(Ir.envMap.value=it,Ir.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1),xr&&(Zt.setValue(re,"toneMappingExposure",p.toneMappingExposure),ft.needsLights&&bn(Ir,rn),Fe&&we.fog===!0&&He.refreshFogUniforms(Ir,Fe),He.refreshMaterialUniforms(Ir,we,G,V,Y),ls.upload(re,ft.uniformsList,Ir,Te)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(ls.upload(re,ft.uniformsList,Ir,Te),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&Zt.setValue(re,"center",Pe.center),Zt.setValue(re,"modelViewMatrix",Pe.modelViewMatrix),Zt.setValue(re,"normalMatrix",Pe.normalMatrix),Zt.setValue(re,"modelMatrix",Pe.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const Qt=we.uniformsGroups;for(let Fn=0,Oi=Qt.length;Fn<Oi;Fn++)if(ce.isWebGL2){const mi=Qt[Fn];De.update(mi,Dr),De.bind(mi,Dr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Dr}function bn(ye,Xe){ye.ambientLightColor.needsUpdate=Xe,ye.lightProbe.needsUpdate=Xe,ye.directionalLights.needsUpdate=Xe,ye.directionalLightShadows.needsUpdate=Xe,ye.pointLights.needsUpdate=Xe,ye.pointLightShadows.needsUpdate=Xe,ye.spotLights.needsUpdate=Xe,ye.spotLightShadows.needsUpdate=Xe,ye.rectAreaLights.needsUpdate=Xe,ye.hemisphereLights.needsUpdate=Xe}function kn(ye){return ye.isMeshLambertMaterial||ye.isMeshToonMaterial||ye.isMeshPhongMaterial||ye.isMeshStandardMaterial||ye.isShadowMaterial||ye.isShaderMaterial&&ye.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(ye,Xe,ae){xe.get(ye.texture).__webglTexture=Xe,xe.get(ye.depthTexture).__webglTexture=ae;const we=xe.get(ye);we.__hasExternalTextures=!0,we.__hasExternalTextures&&(we.__autoAllocateDepthBuffer=ae===void 0,we.__autoAllocateDepthBuffer||Q.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),we.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ye,Xe){const ae=xe.get(ye);ae.__webglFramebuffer=Xe,ae.__useDefaultFramebuffer=Xe===void 0},this.setRenderTarget=function(ye,Xe=0,ae=0){T=ye,w=Xe,C=ae;let we=!0,Pe=null,Fe=!1,nt=!1;if(ye){const it=xe.get(ye);it.__useDefaultFramebuffer!==void 0?(be.bindFramebuffer(re.FRAMEBUFFER,null),we=!1):it.__webglFramebuffer===void 0?Te.setupRenderTarget(ye):it.__hasExternalTextures&&Te.rebindTextures(ye,xe.get(ye.texture).__webglTexture,xe.get(ye.depthTexture).__webglTexture);const tt=ye.texture;(tt.isData3DTexture||tt.isDataArrayTexture||tt.isCompressedArrayTexture)&&(nt=!0);const st=xe.get(ye).__webglFramebuffer;ye.isWebGLCubeRenderTarget?(Pe=st[Xe],Fe=!0):ce.isWebGL2&&ye.samples>0&&Te.useMultisampledRTT(ye)===!1?Pe=xe.get(ye).__webglMultisampledFramebuffer:Pe=st,L.copy(ye.viewport),M.copy(ye.scissor),k=ye.scissorTest}else L.copy(Z).multiplyScalar(G).floor(),M.copy(I).multiplyScalar(G).floor(),k=q;if(be.bindFramebuffer(re.FRAMEBUFFER,Pe)&&ce.drawBuffers&&we&&be.drawBuffers(ye,Pe),be.viewport(L),be.scissor(M),be.setScissorTest(k),Fe){const it=xe.get(ye.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,it.__webglTexture,ae)}else if(nt){const it=xe.get(ye.texture),tt=Xe||0;re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,it.__webglTexture,ae||0,tt)}j=-1},this.readRenderTargetPixels=function(ye,Xe,ae,we,Pe,Fe,nt){if(!(ye&&ye.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ve=xe.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&nt!==void 0&&(Ve=Ve[nt]),Ve){be.bindFramebuffer(re.FRAMEBUFFER,Ve);try{const it=ye.texture,tt=it.format,st=it.type;if(tt!==Or&&me.convert(tt)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const et=st===ji&&(Q.has("EXT_color_buffer_half_float")||ce.isWebGL2&&Q.has("EXT_color_buffer_float"));if(st!==mn&&me.convert(st)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_TYPE)&&!(st===fn&&(ce.isWebGL2||Q.has("OES_texture_float")||Q.has("WEBGL_color_buffer_float")))&&!et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Xe>=0&&Xe<=ye.width-we&&ae>=0&&ae<=ye.height-Pe&&re.readPixels(Xe,ae,we,Pe,me.convert(tt),me.convert(st),Fe)}finally{const it=T!==null?xe.get(T).__webglFramebuffer:null;be.bindFramebuffer(re.FRAMEBUFFER,it)}}},this.copyFramebufferToTexture=function(ye,Xe,ae=0){const we=Math.pow(2,-ae),Pe=Math.floor(Xe.image.width*we),Fe=Math.floor(Xe.image.height*we);Te.setTexture2D(Xe,0),re.copyTexSubImage2D(re.TEXTURE_2D,ae,0,0,ye.x,ye.y,Pe,Fe),be.unbindTexture()},this.copyTextureToTexture=function(ye,Xe,ae,we=0){const Pe=Xe.image.width,Fe=Xe.image.height,nt=me.convert(ae.format),Ve=me.convert(ae.type);Te.setTexture2D(ae,0),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,ae.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,ae.unpackAlignment),Xe.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,we,ye.x,ye.y,Pe,Fe,nt,Ve,Xe.image.data):Xe.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,we,ye.x,ye.y,Xe.mipmaps[0].width,Xe.mipmaps[0].height,nt,Xe.mipmaps[0].data):re.texSubImage2D(re.TEXTURE_2D,we,ye.x,ye.y,nt,Ve,Xe.image),we===0&&ae.generateMipmaps&&re.generateMipmap(re.TEXTURE_2D),be.unbindTexture()},this.copyTextureToTexture3D=function(ye,Xe,ae,we,Pe=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=ye.max.x-ye.min.x+1,nt=ye.max.y-ye.min.y+1,Ve=ye.max.z-ye.min.z+1,it=me.convert(we.format),tt=me.convert(we.type);let st;if(we.isData3DTexture)Te.setTexture3D(we,0),st=re.TEXTURE_3D;else if(we.isDataArrayTexture)Te.setTexture2DArray(we,0),st=re.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,we.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,we.unpackAlignment);const et=re.getParameter(re.UNPACK_ROW_LENGTH),pt=re.getParameter(re.UNPACK_IMAGE_HEIGHT),yt=re.getParameter(re.UNPACK_SKIP_PIXELS),Tt=re.getParameter(re.UNPACK_SKIP_ROWS),Pt=re.getParameter(re.UNPACK_SKIP_IMAGES),Ct=ae.isCompressedTexture?ae.mipmaps[0]:ae.image;re.pixelStorei(re.UNPACK_ROW_LENGTH,Ct.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Ct.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,ye.min.x),re.pixelStorei(re.UNPACK_SKIP_ROWS,ye.min.y),re.pixelStorei(re.UNPACK_SKIP_IMAGES,ye.min.z),ae.isDataTexture||ae.isData3DTexture?re.texSubImage3D(st,Pe,Xe.x,Xe.y,Xe.z,Fe,nt,Ve,it,tt,Ct.data):ae.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(st,Pe,Xe.x,Xe.y,Xe.z,Fe,nt,Ve,it,Ct.data)):re.texSubImage3D(st,Pe,Xe.x,Xe.y,Xe.z,Fe,nt,Ve,it,tt,Ct),re.pixelStorei(re.UNPACK_ROW_LENGTH,et),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,pt),re.pixelStorei(re.UNPACK_SKIP_PIXELS,yt),re.pixelStorei(re.UNPACK_SKIP_ROWS,Tt),re.pixelStorei(re.UNPACK_SKIP_IMAGES,Pt),Pe===0&&we.generateMipmaps&&re.generateMipmap(st),be.unbindTexture()},this.initTexture=function(ye){ye.isCubeTexture?Te.setTextureCube(ye,0):ye.isData3DTexture?Te.setTexture3D(ye,0):ye.isDataArrayTexture||ye.isCompressedArrayTexture?Te.setTexture2DArray(ye,0):Te.setTexture2D(ye,0),be.unbindTexture()},this.resetState=function(){w=0,C=0,T=null,be.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Jr}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(r){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!r}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===bt?Ln:Tl}set outputEncoding(r){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=r===Ln?bt:Gr}}class xm extends ql{}xm.prototype.isWebGL1Renderer=!0;class wm extends _r{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(r,o){return super.copy(r,o),r.background!==null&&(this.background=r.background.clone()),r.environment!==null&&(this.environment=r.environment.clone()),r.fog!==null&&(this.fog=r.fog.clone()),this.backgroundBlurriness=r.backgroundBlurriness,this.backgroundIntensity=r.backgroundIntensity,r.overrideMaterial!==null&&(this.overrideMaterial=r.overrideMaterial.clone()),this.matrixAutoUpdate=r.matrixAutoUpdate,this}toJSON(r){const o=super.toJSON(r);return this.fog!==null&&(o.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(o.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(o.object.backgroundIntensity=this.backgroundIntensity),o}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(r){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=r}}class Sm extends yn{constructor(r){super(r),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ho}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ho);var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mm(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function as(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yl={exports:{}};/*! p5.js v1.8.0 October 25, 2023 */(function(S,r){(function(o){S.exports=o()})(function(){var o;return function t(x,b,h){function d(g,m){if(!b[g]){if(!x[g]){var n=typeof as=="function"&&as;if(!m&&n)return n(g,!0);if(i)return i(g,!0);throw(m=new Error("Cannot find module '"+g+"'")).code="MODULE_NOT_FOUND",m}n=b[g]={exports:{}},x[g][0].call(n.exports,function(s){return d(x[g][1][s]||s)},n,n.exports,t,x,b,h)}return b[g].exports}for(var i=typeof as=="function"&&as,f=0;f<h.length;f++)d(h[f]);return d}({1:[function(t,x,b){b.byteLength=function(c){var c=n(c),l=c[0],c=c[1];return 3*(l+c)/4-c},b.toByteArray=function(s){var l,c,u=n(s),a=u[0],u=u[1],y=new i(function(w,C){return 3*(w+C)/4-C}(a,u)),p=0,v=0<u?a-4:a;for(c=0;c<v;c+=4)l=d[s.charCodeAt(c)]<<18|d[s.charCodeAt(c+1)]<<12|d[s.charCodeAt(c+2)]<<6|d[s.charCodeAt(c+3)],y[p++]=l>>16&255,y[p++]=l>>8&255,y[p++]=255&l;return u===2&&(l=d[s.charCodeAt(c)]<<2|d[s.charCodeAt(c+1)]>>4,y[p++]=255&l),u===1&&(l=d[s.charCodeAt(c)]<<10|d[s.charCodeAt(c+1)]<<4|d[s.charCodeAt(c+2)]>>2,y[p++]=l>>8&255,y[p++]=255&l),y},b.fromByteArray=function(s){for(var l,c=s.length,a=c%3,u=[],y=0,p=c-a;y<p;y+=16383)u.push(function(v,w,C){for(var T,j=[],A=w;A<C;A+=3)T=(v[A]<<16&16711680)+(v[A+1]<<8&65280)+(255&v[A+2]),j.push(function(L){return h[L>>18&63]+h[L>>12&63]+h[L>>6&63]+h[63&L]}(T));return j.join("")}(s,y,p<y+16383?p:y+16383));return a==1?(l=s[c-1],u.push(h[l>>2]+h[l<<4&63]+"==")):a==2&&(l=(s[c-2]<<8)+s[c-1],u.push(h[l>>10]+h[l>>4&63]+h[l<<2&63]+"=")),u.join("")};for(var h=[],d=[],i=typeof Uint8Array<"u"?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,m=f.length;g<m;++g)h[g]=f[g],d[f.charCodeAt(g)]=g;function n(s){var l=s.length;if(0<l%4)throw new Error("Invalid string. Length must be a multiple of 4");return s=s.indexOf("="),l=(s=s===-1?l:s)===l?0:4-s%4,[s,l]}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}],2:[function(t,x,b){},{}],3:[function(t,x,b){},{}],4:[function(t,x,b){(function(n){var d=t("base64-js"),i=t("ieee754"),f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,g=(b.Buffer=n,b.SlowBuffer=function(D){return+D!=D&&(D=0),n.alloc(+D)},b.INSPECT_MAX_BYTES=50,2147483647);function m(D){if(g<D)throw new RangeError('The value "'+D+'" is invalid for option "size"');return D=new Uint8Array(D),Object.setPrototypeOf(D,n.prototype),D}function n(D,F,H){if(typeof D!="number")return s(D,F,H);if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(D)}function s(D,F,H){if(typeof D=="string"){var Y=D,te=F;if(n.isEncoding(te=typeof te=="string"&&te!==""?te:"utf8"))return ie=0|y(Y,te),de=m(ie),de=(Y=de.write(Y,te))!==ie?de.slice(0,Y):de;throw new TypeError("Unknown encoding: "+te)}if(ArrayBuffer.isView(D))return a(D);if(D!=null){if(Z(D,ArrayBuffer)||D&&Z(D.buffer,ArrayBuffer)){var ie=D,Y=F,de=H;if(Y<0||ie.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<Y+(de||0))throw new RangeError('"length" is outside of buffer bounds');return ie=Y===void 0&&de===void 0?new Uint8Array(ie):de===void 0?new Uint8Array(ie,Y):new Uint8Array(ie,Y,de),Object.setPrototypeOf(ie,n.prototype),ie}if(typeof D=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(te=D.valueOf&&D.valueOf(),te!=null&&te!==D)return n.from(te,F,H);var _e=function(le){{var re,pe;if(n.isBuffer(le))return re=0|u(le.length),(pe=m(re)).length!==0&&le.copy(pe,0,0,re),pe}if(le.length!==void 0)return typeof le.length!="number"||I(le.length)?m(0):a(le);if(le.type==="Buffer"&&Array.isArray(le.data))return a(le.data)}(D);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof D[Symbol.toPrimitive]=="function")return n.from(D[Symbol.toPrimitive]("string"),F,H)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}function l(D){if(typeof D!="number")throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function c(D){return l(D),m(D<0?0:0|u(D))}function a(D){for(var F=D.length<0?0:0|u(D.length),H=m(F),Y=0;Y<F;Y+=1)H[Y]=255&D[Y];return H}function u(D){if(g<=D)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|D}function y(D,F){if(n.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||Z(D,ArrayBuffer))return D.byteLength;if(typeof D!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);var H=D.length,Y=2<arguments.length&&arguments[2]===!0;if(!Y&&H===0)return 0;for(var te=!1;;)switch(F){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return G(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return z(D).length;default:if(te)return Y?-1:G(D).length;F=(""+F).toLowerCase(),te=!0}}function p(D,F,H){var Y,te=!1;if((F=F===void 0||F<0?0:F)>this.length||(H=H===void 0||H>this.length?this.length:H)<=0||(H>>>=0)<=(F>>>=0))return"";for(D=D||"utf8";;)switch(D){case"hex":var ie=this,xe=F,de=H,pe=ie.length;(!de||de<0||pe<de)&&(de=pe);for(var _e="",le=xe=!xe||xe<0?0:xe;le<de;++le)_e+=q[ie[le]];return _e;case"utf8":case"utf-8":return A(this,F,H);case"ascii":var re=this,pe=F,Q=H,ce="";Q=Math.min(re.length,Q);for(var be=pe;be<Q;++be)ce+=String.fromCharCode(127&re[be]);return ce;case"latin1":case"binary":var Re=this,xe=F,Te=H,Le="";Te=Math.min(Re.length,Te);for(var Je=xe;Je<Te;++Je)Le+=String.fromCharCode(Re[Je]);return Le;case"base64":return ke=this,Y=H,(ue=F)===0&&Y===ke.length?d.fromByteArray(ke):d.fromByteArray(ke.slice(ue,Y));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var ke=F,ue=H,oe=this.slice(ke,ue),Ce="",He=0;He<oe.length;He+=2)Ce+=String.fromCharCode(oe[He]+256*oe[He+1]);return Ce;default:if(te)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),te=!0}}function v(D,F,H){var Y=D[F];D[F]=D[H],D[H]=Y}function w(D,F,H,Y,te){if(D.length===0)return-1;if(typeof H=="string"?(Y=H,H=0):2147483647<H?H=2147483647:H<-2147483648&&(H=-2147483648),(H=(H=I(H=+H)?te?0:D.length-1:H)<0?D.length+H:H)>=D.length){if(te)return-1;H=D.length-1}else if(H<0){if(!te)return-1;H=0}if(typeof F=="string"&&(F=n.from(F,Y)),n.isBuffer(F))return F.length===0?-1:C(D,F,H,Y,te);if(typeof F=="number")return F&=255,typeof Uint8Array.prototype.indexOf=="function"?(te?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(D,F,H):C(D,[F],H,Y,te);throw new TypeError("val must be string, number or Buffer")}function C(D,F,H,Y,te){var ie=1,de=D.length,_e=F.length;if(Y!==void 0&&((Y=String(Y).toLowerCase())==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(D.length<2||F.length<2)return-1;de/=ie=2,_e/=2,H/=2}function le(be,Re){return ie===1?be[Re]:be.readUInt16BE(Re*ie)}if(te)for(var re=-1,pe=H;pe<de;pe++)if(le(D,pe)===le(F,re===-1?0:pe-re)){if(pe-(re=re===-1?pe:re)+1===_e)return re*ie}else re!==-1&&(pe-=pe-re),re=-1;else for(pe=H=de<H+_e?de-_e:H;0<=pe;pe--){for(var Q=!0,ce=0;ce<_e;ce++)if(le(D,pe+ce)!==le(F,ce)){Q=!1;break}if(Q)return pe}return-1}function T(D,F,H,Y){return W(function(te){for(var ie=[],de=0;de<te.length;++de)ie.push(255&te.charCodeAt(de));return ie}(F),D,H,Y)}function j(D,F,H,Y){return W(function(te,ie){for(var de,_e,le=[],re=0;re<te.length&&!((ie-=2)<0);++re)_e=te.charCodeAt(re),de=_e>>8,_e=_e%256,le.push(_e),le.push(de);return le}(F,D.length-H),D,H,Y)}function A(D,F,H){H=Math.min(D.length,H);for(var Y=[],te=F;te<H;){var ie,de,_e,le,re=D[te],pe=null,Q=239<re?4:223<re?3:191<re?2:1;if(te+Q<=H)switch(Q){case 1:re<128&&(pe=re);break;case 2:(192&(ie=D[te+1]))==128&&127<(le=(31&re)<<6|63&ie)&&(pe=le);break;case 3:ie=D[te+1],de=D[te+2],(192&ie)==128&&(192&de)==128&&2047<(le=(15&re)<<12|(63&ie)<<6|63&de)&&(le<55296||57343<le)&&(pe=le);break;case 4:ie=D[te+1],de=D[te+2],_e=D[te+3],(192&ie)==128&&(192&de)==128&&(192&_e)==128&&65535<(le=(15&re)<<18|(63&ie)<<12|(63&de)<<6|63&_e)&&le<1114112&&(pe=le)}pe===null?(pe=65533,Q=1):65535<pe&&(pe-=65536,Y.push(pe>>>10&1023|55296),pe=56320|1023&pe),Y.push(pe),te+=Q}var ce=Y,be=ce.length;if(be<=L)return String.fromCharCode.apply(String,ce);for(var Re="",xe=0;xe<be;)Re+=String.fromCharCode.apply(String,ce.slice(xe,xe+=L));return Re}b.kMaxLength=g,(n.TYPED_ARRAY_SUPPORT=function(){try{var D=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(D,F),D.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=s,Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(D,F,H){return F=F,H=H,l(D=D),!(D<=0)&&F!==void 0?typeof H=="string"?m(D).fill(F,H):m(D).fill(F):m(D)},n.allocUnsafe=c,n.allocUnsafeSlow=c,n.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==n.prototype},n.compare=function(D,F){if(Z(D,Uint8Array)&&(D=n.from(D,D.offset,D.byteLength)),Z(F,Uint8Array)&&(F=n.from(F,F.offset,F.byteLength)),!n.isBuffer(D)||!n.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===F)return 0;for(var H=D.length,Y=F.length,te=0,ie=Math.min(H,Y);te<ie;++te)if(D[te]!==F[te]){H=D[te],Y=F[te];break}return H<Y?-1:Y<H?1:0},n.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(D,F){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return n.alloc(0);if(F===void 0)for(te=F=0;te<D.length;++te)F+=D[te].length;for(var H=n.allocUnsafe(F),Y=0,te=0;te<D.length;++te){var ie=D[te];if(Z(ie,Uint8Array)&&(ie=n.from(ie)),!n.isBuffer(ie))throw new TypeError('"list" argument must be an Array of Buffers');ie.copy(H,Y),Y+=ie.length}return H},n.byteLength=y,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<D;F+=2)v(this,F,F+1);return this},n.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<D;F+=4)v(this,F,F+3),v(this,F+1,F+2);return this},n.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<D;F+=8)v(this,F,F+7),v(this,F+1,F+6),v(this,F+2,F+5),v(this,F+3,F+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var D=this.length;return D===0?"":arguments.length===0?A(this,0,D):p.apply(this,arguments)},n.prototype.equals=function(D){if(n.isBuffer(D))return this===D||n.compare(this,D)===0;throw new TypeError("Argument must be a Buffer")},n.prototype.inspect=function(){var F="",D=b.INSPECT_MAX_BYTES,F=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim();return this.length>D&&(F+=" ... "),"<Buffer "+F+">"},f&&(n.prototype[f]=n.prototype.inspect),n.prototype.compare=function(D,F,H,Y,te){if(Z(D,Uint8Array)&&(D=n.from(D,D.offset,D.byteLength)),!n.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(H===void 0&&(H=D?D.length:0),Y===void 0&&(Y=0),te===void 0&&(te=this.length),(F=F===void 0?0:F)<0||H>D.length||Y<0||te>this.length)throw new RangeError("out of range index");if(te<=Y&&H<=F)return 0;if(te<=Y)return-1;if(H<=F)return 1;if(this===D)return 0;for(var ie=(te>>>=0)-(Y>>>=0),de=(H>>>=0)-(F>>>=0),_e=Math.min(ie,de),le=this.slice(Y,te),re=D.slice(F,H),pe=0;pe<_e;++pe)if(le[pe]!==re[pe]){ie=le[pe],de=re[pe];break}return ie<de?-1:de<ie?1:0},n.prototype.includes=function(D,F,H){return this.indexOf(D,F,H)!==-1},n.prototype.indexOf=function(D,F,H){return w(this,D,F,H,!0)},n.prototype.lastIndexOf=function(D,F,H){return w(this,D,F,H,!1)},n.prototype.write=function(D,F,H,Y){if(F===void 0)Y="utf8",H=this.length,F=0;else if(H===void 0&&typeof F=="string")Y=F,H=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(H)?(H>>>=0,Y===void 0&&(Y="utf8")):(Y=H,H=void 0)}var te=this.length-F;if((H===void 0||te<H)&&(H=te),0<D.length&&(H<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y=Y||"utf8";for(var ie,de,_e,le=!1;;)switch(Y){case"hex":var re=this,pe=D,Q=F,ce=H,be=(Q=Number(Q)||0,re.length-Q);(!ce||be<(ce=Number(ce)))&&(ce=be),(be=pe.length)/2<ce&&(ce=be/2);for(var Re=0;Re<ce;++Re){var xe=parseInt(pe.substr(2*Re,2),16);if(I(xe))return Re;re[Q+Re]=xe}return Re;case"utf8":case"utf-8":return be=F,_e=H,W(G(D,(de=this).length-be),de,be,_e);case"ascii":return T(this,D,F,H);case"latin1":case"binary":return T(this,D,F,H);case"base64":return de=this,_e=F,ie=H,W(z(D),de,_e,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,D,F,H);default:if(le)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),le=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function M(D,F,H){if(D%1!=0||D<0)throw new RangeError("offset is not uint");if(H<D+F)throw new RangeError("Trying to access beyond buffer length")}function k(D,F,H,Y,te,ie){if(!n.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(te<F||F<ie)throw new RangeError('"value" argument is out of bounds');if(H+Y>D.length)throw new RangeError("Index out of range")}function O(D,F,H,Y){if(H+Y>D.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function N(D,F,H,Y,te){return F=+F,H>>>=0,te||O(D,0,H,4),i.write(D,F,H,Y,23,4),H+4}function U(D,F,H,Y,te){return F=+F,H>>>=0,te||O(D,0,H,8),i.write(D,F,H,Y,52,8),H+8}n.prototype.slice=function(D,F){var H=this.length,H=((D=~~D)<0?(D+=H)<0&&(D=0):H<D&&(D=H),(F=F===void 0?H:~~F)<0?(F+=H)<0&&(F=0):H<F&&(F=H),F<D&&(F=D),this.subarray(D,F));return Object.setPrototypeOf(H,n.prototype),H},n.prototype.readUIntLE=function(D,F,H){D>>>=0,F>>>=0,H||M(D,F,this.length);for(var Y=this[D],te=1,ie=0;++ie<F&&(te*=256);)Y+=this[D+ie]*te;return Y},n.prototype.readUIntBE=function(D,F,H){D>>>=0,F>>>=0,H||M(D,F,this.length);for(var Y=this[D+--F],te=1;0<F&&(te*=256);)Y+=this[D+--F]*te;return Y},n.prototype.readUInt8=function(D,F){return D>>>=0,F||M(D,1,this.length),this[D]},n.prototype.readUInt16LE=function(D,F){return D>>>=0,F||M(D,2,this.length),this[D]|this[D+1]<<8},n.prototype.readUInt16BE=function(D,F){return D>>>=0,F||M(D,2,this.length),this[D]<<8|this[D+1]},n.prototype.readUInt32LE=function(D,F){return D>>>=0,F||M(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},n.prototype.readUInt32BE=function(D,F){return D>>>=0,F||M(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},n.prototype.readIntLE=function(D,F,H){D>>>=0,F>>>=0,H||M(D,F,this.length);for(var Y=this[D],te=1,ie=0;++ie<F&&(te*=256);)Y+=this[D+ie]*te;return(te*=128)<=Y&&(Y-=Math.pow(2,8*F)),Y},n.prototype.readIntBE=function(D,F,H){D>>>=0,F>>>=0,H||M(D,F,this.length);for(var Y=F,te=1,ie=this[D+--Y];0<Y&&(te*=256);)ie+=this[D+--Y]*te;return(te*=128)<=ie&&(ie-=Math.pow(2,8*F)),ie},n.prototype.readInt8=function(D,F){return D>>>=0,F||M(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},n.prototype.readInt16LE=function(D,F){return D>>>=0,F||M(D,2,this.length),F=this[D]|this[D+1]<<8,32768&F?4294901760|F:F},n.prototype.readInt16BE=function(D,F){return D>>>=0,F||M(D,2,this.length),F=this[D+1]|this[D]<<8,32768&F?4294901760|F:F},n.prototype.readInt32LE=function(D,F){return D>>>=0,F||M(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},n.prototype.readInt32BE=function(D,F){return D>>>=0,F||M(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},n.prototype.readFloatLE=function(D,F){return D>>>=0,F||M(D,4,this.length),i.read(this,D,!0,23,4)},n.prototype.readFloatBE=function(D,F){return D>>>=0,F||M(D,4,this.length),i.read(this,D,!1,23,4)},n.prototype.readDoubleLE=function(D,F){return D>>>=0,F||M(D,8,this.length),i.read(this,D,!0,52,8)},n.prototype.readDoubleBE=function(D,F){return D>>>=0,F||M(D,8,this.length),i.read(this,D,!1,52,8)},n.prototype.writeUIntLE=function(D,F,H,Y){D=+D,F>>>=0,H>>>=0,Y||k(this,D,F,H,Math.pow(2,8*H)-1,0);var te=1,ie=0;for(this[F]=255&D;++ie<H&&(te*=256);)this[F+ie]=D/te&255;return F+H},n.prototype.writeUIntBE=function(D,F,H,Y){D=+D,F>>>=0,H>>>=0,Y||k(this,D,F,H,Math.pow(2,8*H)-1,0);var te=H-1,ie=1;for(this[F+te]=255&D;0<=--te&&(ie*=256);)this[F+te]=D/ie&255;return F+H},n.prototype.writeUInt8=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,1,255,0),this[F]=255&D,F+1},n.prototype.writeUInt16LE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,2,65535,0),this[F]=255&D,this[F+1]=D>>>8,F+2},n.prototype.writeUInt16BE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,2,65535,0),this[F]=D>>>8,this[F+1]=255&D,F+2},n.prototype.writeUInt32LE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,4,4294967295,0),this[F+3]=D>>>24,this[F+2]=D>>>16,this[F+1]=D>>>8,this[F]=255&D,F+4},n.prototype.writeUInt32BE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,4,4294967295,0),this[F]=D>>>24,this[F+1]=D>>>16,this[F+2]=D>>>8,this[F+3]=255&D,F+4},n.prototype.writeIntLE=function(D,F,H,Y){D=+D,F>>>=0,Y||k(this,D,F,H,(Y=Math.pow(2,8*H-1))-1,-Y);var te=0,ie=1,de=0;for(this[F]=255&D;++te<H&&(ie*=256);)D<0&&de===0&&this[F+te-1]!==0&&(de=1),this[F+te]=(D/ie>>0)-de&255;return F+H},n.prototype.writeIntBE=function(D,F,H,Y){D=+D,F>>>=0,Y||k(this,D,F,H,(Y=Math.pow(2,8*H-1))-1,-Y);var te=H-1,ie=1,de=0;for(this[F+te]=255&D;0<=--te&&(ie*=256);)D<0&&de===0&&this[F+te+1]!==0&&(de=1),this[F+te]=(D/ie>>0)-de&255;return F+H},n.prototype.writeInt8=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,1,127,-128),this[F]=255&(D=D<0?255+D+1:D),F+1},n.prototype.writeInt16LE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,2,32767,-32768),this[F]=255&D,this[F+1]=D>>>8,F+2},n.prototype.writeInt16BE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,2,32767,-32768),this[F]=D>>>8,this[F+1]=255&D,F+2},n.prototype.writeInt32LE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,4,2147483647,-2147483648),this[F]=255&D,this[F+1]=D>>>8,this[F+2]=D>>>16,this[F+3]=D>>>24,F+4},n.prototype.writeInt32BE=function(D,F,H){return D=+D,F>>>=0,H||k(this,D,F,4,2147483647,-2147483648),this[F]=(D=D<0?4294967295+D+1:D)>>>24,this[F+1]=D>>>16,this[F+2]=D>>>8,this[F+3]=255&D,F+4},n.prototype.writeFloatLE=function(D,F,H){return N(this,D,F,!0,H)},n.prototype.writeFloatBE=function(D,F,H){return N(this,D,F,!1,H)},n.prototype.writeDoubleLE=function(D,F,H){return U(this,D,F,!0,H)},n.prototype.writeDoubleBE=function(D,F,H){return U(this,D,F,!1,H)},n.prototype.copy=function(D,F,H,Y){if(!n.isBuffer(D))throw new TypeError("argument should be a Buffer");if(H=H||0,Y||Y===0||(Y=this.length),F>=D.length&&(F=D.length),(Y=0<Y&&Y<H?H:Y)===H||D.length===0||this.length===0)return 0;if((F=F||0)<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length);var te=(Y=D.length-F<Y-H?D.length-F+H:Y)-H;if(this===D&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(F,H,Y);else if(this===D&&H<F&&F<Y)for(var ie=te-1;0<=ie;--ie)D[ie+F]=this[ie+H];else Uint8Array.prototype.set.call(D,this.subarray(H,Y),F);return te},n.prototype.fill=function(D,F,H,Y){if(typeof D=="string"){if(typeof F=="string"?(Y=F,F=0,H=this.length):typeof H=="string"&&(Y=H,H=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!n.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);var te;D.length===1&&(te=D.charCodeAt(0),(Y==="utf8"&&te<128||Y==="latin1")&&(D=te))}else typeof D=="number"?D&=255:typeof D=="boolean"&&(D=Number(D));if(F<0||this.length<F||this.length<H)throw new RangeError("Out of range index");var ie;if(!(H<=F))if(F>>>=0,H=H===void 0?this.length:H>>>0,typeof(D=D||0)=="number")for(ie=F;ie<H;++ie)this[ie]=D;else{var de=n.isBuffer(D)?D:n.from(D,Y),_e=de.length;if(_e===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ie=0;ie<H-F;++ie)this[ie+F]=de[ie%_e]}return this};var V=/[^+/0-9A-Za-z-_]/g;function G(D,F){F=F||1/0;for(var H,Y=D.length,te=null,ie=[],de=0;de<Y;++de){if(55295<(H=D.charCodeAt(de))&&H<57344){if(!te){if(56319<H){-1<(F-=3)&&ie.push(239,191,189);continue}if(de+1===Y){-1<(F-=3)&&ie.push(239,191,189);continue}te=H;continue}if(H<56320){-1<(F-=3)&&ie.push(239,191,189),te=H;continue}H=65536+(te-55296<<10|H-56320)}else te&&-1<(F-=3)&&ie.push(239,191,189);if(te=null,H<128){if(--F<0)break;ie.push(H)}else if(H<2048){if((F-=2)<0)break;ie.push(H>>6|192,63&H|128)}else if(H<65536){if((F-=3)<0)break;ie.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((F-=4)<0)break;ie.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return ie}function z(D){return d.toByteArray(function(F){if((F=(F=F.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(D))}function W(D,F,H,Y){for(var te=0;te<Y&&!(te+H>=F.length||te>=D.length);++te)F[te+H]=D[te];return te}function Z(D,F){return D instanceof F||D!=null&&D.constructor!=null&&D.constructor.name!=null&&D.constructor.name===F.name}function I(D){return D!=D}var q=function(){for(var D="0123456789abcdef",F=new Array(256),H=0;H<16;++H)for(var Y=16*H,te=0;te<16;++te)F[Y+te]=D[H]+D[te];return F}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:246}],5:[function(t,x,b){x.exports=function(h){if(typeof h!="function")throw TypeError(String(h)+" is not a function");return h}},{}],6:[function(t,x,b){var h=t("../internals/is-object");x.exports=function(d){if(h(d)||d===null)return d;throw TypeError("Can't set "+String(d)+" as a prototype")}},{"../internals/is-object":74}],7:[function(i,x,b){var h=i("../internals/well-known-symbol"),d=i("../internals/object-create"),i=i("../internals/object-define-property"),f=h("unscopables"),g=Array.prototype;g[f]==null&&i.f(g,f,{configurable:!0,value:d(null)}),x.exports=function(m){g[f][m]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(t,x,b){var h=t("../internals/string-multibyte").charAt;x.exports=function(d,i,f){return i+(f?h(d,i).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,x,b){x.exports=function(h,d,i){if(h instanceof d)return h;throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")}},{}],10:[function(t,x,b){var h=t("../internals/is-object");x.exports=function(d){if(h(d))return d;throw TypeError(String(d)+" is not an object")}},{"../internals/is-object":74}],11:[function(t,x,b){x.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(O,x,b){function h(U){return m(U)&&n(N,s(U))}var d,i=O("../internals/array-buffer-native"),f=O("../internals/descriptors"),g=O("../internals/global"),m=O("../internals/is-object"),n=O("../internals/has"),s=O("../internals/classof"),l=O("../internals/create-non-enumerable-property"),c=O("../internals/redefine"),a=O("../internals/object-define-property").f,u=O("../internals/object-get-prototype-of"),y=O("../internals/object-set-prototype-of"),L=O("../internals/well-known-symbol"),O=O("../internals/uid"),p=g.Int8Array,v=p&&p.prototype,w=g.Uint8ClampedArray,w=w&&w.prototype,C=p&&u(p),T=v&&u(v),j=Object.prototype,A=j.isPrototypeOf,L=L("toStringTag"),M=O("TYPED_ARRAY_TAG"),k=i&&!!y&&s(g.opera)!=="Opera",O=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(d in N)g[d]||(k=!1);if((!k||typeof C!="function"||C===Function.prototype)&&(C=function(){throw TypeError("Incorrect invocation")},k))for(d in N)g[d]&&y(g[d],C);if((!k||!T||T===j)&&(T=C.prototype,k))for(d in N)g[d]&&y(g[d].prototype,T);if(k&&u(w)!==T&&y(w,T),f&&!n(T,L))for(d in O=!0,a(T,L,{get:function(){return m(this)?this[M]:void 0}}),N)g[d]&&l(g[d],M,d);x.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:O&&M,aTypedArray:function(U){if(h(U))return U;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(U){if(y){if(A.call(C,U))return U}else for(var V in N)if(n(N,d)&&(V=g[V],V&&(U===V||A.call(V,U))))return U;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(U,V,G){if(f){if(G)for(var z in N)z=g[z],z&&n(z.prototype,U)&&delete z.prototype[U];T[U]&&!G||c(T,U,!G&&k&&v[U]||V)}},exportTypedArrayStaticMethod:function(U,V,G){var z,W;if(f){if(y){if(G)for(z in N)(W=g[z])&&n(W,U)&&delete W[U];if(C[U]&&!G)return;try{return c(C,U,!G&&k&&p[U]||V)}catch{}}for(z in N)!(W=g[z])||W[U]&&!G||c(W,U,V)}},isView:function(U){return U=s(U),U==="DataView"||n(N,U)},isTypedArray:h,TypedArray:C,TypedArrayPrototype:T}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(H,x,b){function h(Q){return[255&Q]}function d(Q){return[255&Q,Q>>8&255]}function i(Q){return[255&Q,Q>>8&255,Q>>16&255,Q>>24&255]}function f(Q){return Q[3]<<24|Q[2]<<16|Q[1]<<8|Q[0]}function g(Q){return ie(Q,23,4)}function m(Q){return ie(Q,52,8)}function n(Q,ce){O(Q[Z],ce,{get:function(){return V(this)[ce]}})}function s(Le,ce,Te,Re){if(Te=j(Te),Le=V(Le),Te+ce>Le.byteLength)throw te(I);var xe=V(Le.buffer).bytes,Te=Te+Le.byteOffset,Le=xe.slice(Te,Te+ce);return Re?Le:Le.reverse()}function l(Q,ce,be,Re,xe,Te){if(be=j(be),Q=V(Q),be+ce>Q.byteLength)throw te(I);for(var Le=V(Q.buffer).bytes,Je=be+Q.byteOffset,ke=Re(+xe),ue=0;ue<ce;ue++)Le[Je+ue]=ke[Te?ue:ce-ue-1]}var c=H("../internals/global"),a=H("../internals/descriptors"),u=H("../internals/array-buffer-native"),y=H("../internals/create-non-enumerable-property"),p=H("../internals/redefine-all"),v=H("../internals/fails"),w=H("../internals/an-instance"),C=H("../internals/to-integer"),T=H("../internals/to-length"),j=H("../internals/to-index"),A=H("../internals/ieee754"),L=H("../internals/object-get-prototype-of"),M=H("../internals/object-set-prototype-of"),k=H("../internals/object-get-own-property-names").f,O=H("../internals/object-define-property").f,N=H("../internals/array-fill"),U=H("../internals/set-to-string-tag"),H=H("../internals/internal-state"),V=H.get,G=H.set,z="ArrayBuffer",W="DataView",Z="prototype",I="Wrong index",q=c[z],D=q,F=c[W],H=F&&F[Z],Y=Object.prototype,te=c.RangeError,ie=A.pack,de=A.unpack;if(u){if(!v(function(){q(1)})||!v(function(){new q(-1)})||v(function(){return new q,new q(1.5),new q(NaN),q.name!=z})){for(var _e,c=(D=function(be){return w(this,D),new q(j(be))})[Z]=q[Z],le=k(q),re=0;le.length>re;)(_e=le[re++])in D||y(D,_e,q[_e]);c.constructor=D}M&&L(H)!==Y&&M(H,Y);var A=new F(new D(2)),pe=H.setInt8;A.setInt8(0,2147483648),A.setInt8(1,2147483649),!A.getInt8(0)&&A.getInt8(1)||p(H,{setInt8:function(ce,be){pe.call(this,ce,be<<24>>24)},setUint8:function(ce,be){pe.call(this,ce,be<<24>>24)}},{unsafe:!0})}else D=function(Q){w(this,D,z),Q=j(Q),G(this,{bytes:N.call(new Array(Q),0),byteLength:Q}),a||(this.byteLength=Q)},F=function(Q,xe,be){w(this,F,W),w(Q,D,W);var Re=V(Q).byteLength,xe=C(xe);if(xe<0||Re<xe)throw te("Wrong offset");if(Re<xe+(be=be===void 0?Re-xe:T(be)))throw te("Wrong length");G(this,{buffer:Q,byteLength:be,byteOffset:xe}),a||(this.buffer=Q,this.byteLength=be,this.byteOffset=xe)},a&&(n(D,"byteLength"),n(F,"buffer"),n(F,"byteLength"),n(F,"byteOffset")),p(F[Z],{getInt8:function(Q){return s(this,1,Q)[0]<<24>>24},getUint8:function(Q){return s(this,1,Q)[0]},getInt16:function(Q){return Q=s(this,2,Q,1<arguments.length?arguments[1]:void 0),(Q[1]<<8|Q[0])<<16>>16},getUint16:function(Q){return Q=s(this,2,Q,1<arguments.length?arguments[1]:void 0),Q[1]<<8|Q[0]},getInt32:function(Q){return f(s(this,4,Q,1<arguments.length?arguments[1]:void 0))},getUint32:function(Q){return f(s(this,4,Q,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(Q){return de(s(this,4,Q,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(Q){return de(s(this,8,Q,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(Q,ce){l(this,1,Q,h,ce)},setUint8:function(Q,ce){l(this,1,Q,h,ce)},setInt16:function(Q,ce){l(this,2,Q,d,ce,2<arguments.length?arguments[2]:void 0)},setUint16:function(Q,ce){l(this,2,Q,d,ce,2<arguments.length?arguments[2]:void 0)},setInt32:function(Q,ce){l(this,4,Q,i,ce,2<arguments.length?arguments[2]:void 0)},setUint32:function(Q,ce){l(this,4,Q,i,ce,2<arguments.length?arguments[2]:void 0)},setFloat32:function(Q,ce){l(this,4,Q,g,ce,2<arguments.length?arguments[2]:void 0)},setFloat64:function(Q,ce){l(this,8,Q,m,ce,2<arguments.length?arguments[2]:void 0)}});U(D,z),U(F,W),x.exports={ArrayBuffer:D,DataView:F}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(t,x,b){var h=t("../internals/to-object"),d=t("../internals/to-absolute-index"),i=t("../internals/to-length"),f=Math.min;x.exports=[].copyWithin||function(a,m){var n=h(this),s=i(n.length),l=d(a,s),c=d(m,s),a=2<arguments.length?arguments[2]:void 0,u=f((a===void 0?s:d(a,s))-c,s-l),y=1;for(c<l&&l<c+u&&(y=-1,c+=u-1,l+=u-1);0<u--;)c in n?n[l]=n[c]:delete n[l],l+=y,c+=y;return n}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(t,x,b){var h=t("../internals/to-object"),d=t("../internals/to-absolute-index"),i=t("../internals/to-length");x.exports=function(f){for(var g=h(this),m=i(g.length),s=arguments.length,n=d(1<s?arguments[1]:void 0,m),s=2<s?arguments[2]:void 0,l=s===void 0?m:d(s,m);n<l;)g[n++]=f;return g}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(i,x,b){var h=i("../internals/array-iteration").forEach,d=i("../internals/array-method-is-strict"),i=i("../internals/array-method-uses-to-length"),d=d("forEach"),i=i("forEach");x.exports=d&&i?[].forEach:function(f){return h(this,f,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,x,b){var h=t("../internals/function-bind-context"),d=t("../internals/to-object"),i=t("../internals/call-with-safe-iteration-closing"),f=t("../internals/is-array-iterator-method"),g=t("../internals/to-length"),m=t("../internals/create-property"),n=t("../internals/get-iterator-method");x.exports=function(w){var l,c,a,u,y,p,v=d(w),w=typeof this=="function"?this:Array,C=arguments.length,T=1<C?arguments[1]:void 0,j=T!==void 0,A=n(v),L=0;if(j&&(T=h(T,2<C?arguments[2]:void 0,2)),A==null||w==Array&&f(A))for(c=new w(l=g(v.length));L<l;L++)p=j?T(v[L],L):v[L],m(c,L,p);else for(y=(u=A.call(v)).next,c=new w;!(a=y.call(u)).done;L++)p=j?i(u,T,[a.value,L],!0):a.value,m(c,L,p);return c.length=L,c}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(t,x,b){function h(g){return function(m,n,s){var l,c=d(m),a=i(c.length),u=f(s,a);if(g&&n!=n){for(;u<a;)if((l=c[u++])!=l)return!0}else for(;u<a;u++)if((g||u in c)&&c[u]===n)return g||u||0;return!g&&-1}}var d=t("../internals/to-indexed-object"),i=t("../internals/to-length"),f=t("../internals/to-absolute-index");x.exports={includes:h(!0),indexOf:h(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(t,x,b){function h(s){var l=s==1,c=s==2,a=s==3,u=s==4,y=s==6,p=s==5||y;return function(v,w,C,T){for(var j,A,L=f(v),M=i(L),k=d(w,C,3),O=g(M.length),N=0,w=T||m,U=l?w(v,O):c?w(v,0):void 0;N<O;N++)if((p||N in M)&&(A=k(j=M[N],N,L),s)){if(l)U[N]=A;else if(A)switch(s){case 3:return!0;case 5:return j;case 6:return N;case 2:n.call(U,j)}else if(u)return!1}return y?-1:a||u?u:U}}var d=t("../internals/function-bind-context"),i=t("../internals/indexed-object"),f=t("../internals/to-object"),g=t("../internals/to-length"),m=t("../internals/array-species-create"),n=[].push;x.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(s,x,b){var h=s("../internals/to-indexed-object"),d=s("../internals/to-integer"),i=s("../internals/to-length"),n=s("../internals/array-method-is-strict"),s=s("../internals/array-method-uses-to-length"),f=Math.min,g=[].lastIndexOf,m=!!g&&1/[1].lastIndexOf(1,-0)<0,n=n("lastIndexOf"),s=s("indexOf",{ACCESSORS:!0,1:0});x.exports=m||!n||!s?function(l){if(m)return g.apply(this,arguments)||0;var c=h(this),a=i(c.length),u=a-1;for((u=1<arguments.length?f(u,d(arguments[1])):u)<0&&(u=a+u);0<=u;u--)if(u in c&&c[u]===l)return u||0;return-1}:g},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(t,x,b){var h=t("../internals/fails"),d=t("../internals/well-known-symbol"),i=t("../internals/engine-v8-version"),f=d("species");x.exports=function(g){return 51<=i||!h(function(){var m=[];return(m.constructor={})[f]=function(){return{foo:1}},m[g](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(t,x,b){var h=t("../internals/fails");x.exports=function(d,i){var f=[][d];return!!f&&h(function(){f.call(null,i||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,x,b){function h(n){throw n}var d=t("../internals/descriptors"),i=t("../internals/fails"),f=t("../internals/has"),g=Object.defineProperty,m={};x.exports=function(n,s){var l,c,a,u;return f(m,n)?m[n]:(l=[][n],c=!!f(s=s||{},"ACCESSORS")&&s.ACCESSORS,a=f(s,0)?s[0]:h,u=f(s,1)?s[1]:void 0,m[n]=!!l&&!i(function(){if(c&&!d)return!0;var y={length:-1};c?g(y,1,{enumerable:!0,get:h}):y[1]=1,l.call(y,a,u)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(t,x,b){function h(m){return function(n,s,l,c){d(s);var a=i(n),u=f(a),y=g(a.length),p=m?y-1:0,v=m?-1:1;if(l<2)for(;;){if(p in u){c=u[p],p+=v;break}if(p+=v,m?p<0:y<=p)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=p:p<y;p+=v)p in u&&(c=s(c,u[p],p,a));return c}}var d=t("../internals/a-function"),i=t("../internals/to-object"),f=t("../internals/indexed-object"),g=t("../internals/to-length");x.exports={left:h(!1),right:h(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(t,x,b){var h=t("../internals/is-object"),d=t("../internals/is-array"),i=t("../internals/well-known-symbol")("species");x.exports=function(f,g){var m;return new((m=d(f)&&(typeof(m=f.constructor)=="function"&&(m===Array||d(m.prototype))||h(m)&&(m=m[i])===null)?void 0:m)===void 0?Array:m)(g===0?0:g)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(t,x,b){var h=t("../internals/an-object");x.exports=function(d,i,f,g){try{return g?i(h(f)[0],f[1]):i(f)}catch(m){throw g=d.return,g!==void 0&&h(g.call(d)),m}}},{"../internals/an-object":10}],27:[function(t,x,b){var h=t("../internals/well-known-symbol")("iterator"),d=!1;try{var i=0,f={next:function(){return{done:!!i++}},return:function(){d=!0}};f[h]=function(){return this},Array.from(f,function(){throw 2})}catch{}x.exports=function(g,m){if(!m&&!d)return!1;var n=!1;try{var s={};s[h]=function(){return{next:function(){return{done:n=!0}}}},g(s)}catch{}return n}},{"../internals/well-known-symbol":148}],28:[function(t,x,b){var h={}.toString;x.exports=function(d){return h.call(d).slice(8,-1)}},{}],29:[function(t,x,b){var h=t("../internals/to-string-tag-support"),d=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("toStringTag"),f=d(function(){return arguments}())=="Arguments";x.exports=h?d:function(g){var m;return g===void 0?"Undefined":g===null?"Null":typeof(m=function(n,s){try{return n[s]}catch{}}(g=Object(g),i))=="string"?m:f?d(g):(m=d(g))=="Object"&&typeof g.callee=="function"?"Arguments":m}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(a,x,b){var h=a("../internals/object-define-property").f,d=a("../internals/object-create"),i=a("../internals/redefine-all"),f=a("../internals/function-bind-context"),g=a("../internals/an-instance"),m=a("../internals/iterate"),n=a("../internals/define-iterator"),s=a("../internals/set-species"),l=a("../internals/descriptors"),c=a("../internals/internal-metadata").fastKey,a=a("../internals/internal-state"),u=a.set,y=a.getterFor;x.exports={getConstructor:function(p,v,w,C){function T(M,k,O){var N,U=L(M),V=j(M,k);return V?V.value=O:(U.last=V={index:N=c(k,!0),key:k,value:O,previous:k=U.last,next:void 0,removed:!1},U.first||(U.first=V),k&&(k.next=V),l?U.size++:M.size++,N!=="F"&&(U.index[N]=V)),M}function j(N,k){var O,N=L(N),U=c(k);if(U!=="F")return N.index[U];for(O=N.first;O;O=O.next)if(O.key==k)return O}var A=p(function(M,k){g(M,A,v),u(M,{type:v,index:d(null),first:void 0,last:void 0,size:0}),l||(M.size=0),k!=null&&m(k,M[C],M,w)}),L=y(v);return i(A.prototype,{clear:function(){for(var M=L(this),k=M.index,O=M.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=void 0),delete k[O.index],O=O.next;M.first=M.last=void 0,l?M.size=0:this.size=0},delete:function(U){var k,O,N=L(this),U=j(this,U);return U&&(k=U.next,O=U.previous,delete N.index[U.index],U.removed=!0,O&&(O.next=k),k&&(k.previous=O),N.first==U&&(N.first=k),N.last==U&&(N.last=O),l?N.size--:this.size--),!!U},forEach:function(M){for(var k,O=L(this),N=f(M,1<arguments.length?arguments[1]:void 0,3);k=k?k.next:O.first;)for(N(k.value,k.key,this);k&&k.removed;)k=k.previous},has:function(M){return!!j(this,M)}}),i(A.prototype,w?{get:function(M){return M=j(this,M),M&&M.value},set:function(M,k){return T(this,M===0?0:M,k)}}:{add:function(M){return T(this,M=M===0?0:M,M)}}),l&&h(A.prototype,"size",{get:function(){return L(this).size}}),A},setStrong:function(p,v,w){var C=v+" Iterator",T=y(v),j=y(C);n(p,v,function(A,L){u(this,{type:C,target:A,state:T(A),kind:L,last:void 0})},function(){for(var A=j(this),L=A.kind,M=A.last;M&&M.removed;)M=M.previous;return A.target&&(A.last=M=M?M.next:A.state.first)?L=="keys"?{value:M.key,done:!1}:L=="values"?{value:M.value,done:!1}:{value:[M.key,M.value],done:!1}:{value:A.target=void 0,done:!0}},w?"entries":"values",!w,!0),s(v)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(u,x,b){function h(T){return T.frozen||(T.frozen=new d)}function d(){this.entries=[]}function i(T,j){return v(T.entries,function(A){return A[0]===j})}var f=u("../internals/redefine-all"),g=u("../internals/internal-metadata").getWeakData,m=u("../internals/an-object"),n=u("../internals/is-object"),s=u("../internals/an-instance"),l=u("../internals/iterate"),c=u("../internals/array-iteration"),a=u("../internals/has"),u=u("../internals/internal-state"),y=u.set,p=u.getterFor,v=c.find,w=c.findIndex,C=0;d.prototype={get:function(T){if(T=i(this,T),T)return T[1]},has:function(T){return!!i(this,T)},set:function(T,j){var A=i(this,T);A?A[1]=j:this.entries.push([T,j])},delete:function(T){var j=w(this.entries,function(A){return A[0]===T});return~j&&this.entries.splice(j,1),!!~j}},x.exports={getConstructor:function(T,j,A,L){function M(N,U,V){var G=O(N),z=g(m(U),!0);return z===!0?h(G).set(U,V):z[G.id]=V,N}var k=T(function(N,U){s(N,k,j),y(N,{type:j,id:C++,frozen:void 0}),U!=null&&l(U,N[L],N,A)}),O=p(j);return f(k.prototype,{delete:function(N){var U,V=O(this);return!!n(N)&&((U=g(N))===!0?h(V).delete(N):U&&a(U,V.id)&&delete U[V.id])},has:function(N){var U,V=O(this);return!!n(N)&&((U=g(N))===!0?h(V).has(N):U&&a(U,V.id))}}),f(k.prototype,A?{get:function(N){var U,V=O(this);if(n(N))return(U=g(N))===!0?h(V).get(N):U?U[V.id]:void 0},set:function(N,U){return M(this,N,U)}}:{add:function(N){return M(this,N,!0)}}),k}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/global"),i=t("../internals/is-forced"),f=t("../internals/redefine"),g=t("../internals/internal-metadata"),m=t("../internals/iterate"),n=t("../internals/an-instance"),s=t("../internals/is-object"),l=t("../internals/fails"),c=t("../internals/check-correctness-of-iteration"),a=t("../internals/set-to-string-tag"),u=t("../internals/inherit-if-required");x.exports=function(y,p,v){function w(z){var W=U[z];f(U,z,z=="add"?function(Z){return W.call(this,Z===0?0:Z),this}:z=="delete"?function(Z){return!(k&&!s(Z))&&W.call(this,Z===0?0:Z)}:z=="get"?function(Z){return k&&!s(Z)?void 0:W.call(this,Z===0?0:Z)}:z=="has"?function(Z){return!(k&&!s(Z))&&W.call(this,Z===0?0:Z)}:function(Z,I){return W.call(this,Z===0?0:Z,I),this})}var C,T,j,A,L,M=y.indexOf("Map")!==-1,k=y.indexOf("Weak")!==-1,O=M?"set":"add",N=d[y],U=N&&N.prototype,V=N,G={};return i(y,typeof N!="function"||!(k||U.forEach&&!l(function(){new N().entries().next()})))?(V=v.getConstructor(p,y,M,O),g.REQUIRED=!0):i(y,!0)&&(T=(C=new V)[O](k?{}:-0,1)!=C,j=l(function(){C.has(1)}),A=c(function(z){new N(z)}),L=!k&&l(function(){for(var z=new N,W=5;W--;)z[O](W,W);return!z.has(-0)}),A||(((V=p(function(z,W){return n(z,V,y),z=u(new N,z,V),W!=null&&m(W,z[O],z,M),z})).prototype=U).constructor=V),(j||L)&&(w("delete"),w("has"),M&&w("get")),(L||T)&&w(O),k&&U.clear&&delete U.clear),G[y]=V,h({global:!0,forced:V!=N},G),a(V,y),k||v.setStrong(V,y,M),V}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(t,x,b){var h=t("../internals/has"),d=t("../internals/own-keys"),i=t("../internals/object-get-own-property-descriptor"),f=t("../internals/object-define-property");x.exports=function(g,m){for(var n=d(m),s=f.f,l=i.f,c=0;c<n.length;c++){var a=n[c];h(g,a)||s(g,a,l(m,a))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(t,x,b){var h=t("../internals/well-known-symbol")("match");x.exports=function(d){var i=/./;try{"/./"[d](i)}catch{try{return i[h]=!1,"/./"[d](i)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(t,x,b){t=t("../internals/fails"),x.exports=!t(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},{"../internals/fails":51}],36:[function(t,x,b){var h=t("../internals/require-object-coercible"),d=/"/g;x.exports=function(n,f,g,m){var n=String(h(n)),s="<"+f;return g!==""&&(s+=" "+g+'="'+String(m).replace(d,"&quot;")+'"'),s+">"+n+"</"+f+">"}},{"../internals/require-object-coercible":113}],37:[function(t,x,b){function h(){return this}var d=t("../internals/iterators-core").IteratorPrototype,i=t("../internals/object-create"),f=t("../internals/create-property-descriptor"),g=t("../internals/set-to-string-tag"),m=t("../internals/iterators");x.exports=function(n,s,l){return s+=" Iterator",n.prototype=i(d,{next:f(1,l)}),g(n,s,!1,!0),m[s]=h,n}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");x.exports=h?function(f,g,m){return d.f(f,g,i(1,m))}:function(f,g,m){return f[g]=m,f}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(t,x,b){x.exports=function(h,d){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:d}}},{}],40:[function(t,x,b){var h=t("../internals/to-primitive"),d=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");x.exports=function(f,g,m){g=h(g),g in f?d.f(f,g,i(0,m)):f[g]=m}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(u,x,b){function h(){return this}var d=u("../internals/export"),i=u("../internals/create-iterator-constructor"),f=u("../internals/object-get-prototype-of"),g=u("../internals/object-set-prototype-of"),m=u("../internals/set-to-string-tag"),n=u("../internals/create-non-enumerable-property"),s=u("../internals/redefine"),l=u("../internals/well-known-symbol"),c=u("../internals/is-pure"),a=u("../internals/iterators"),u=u("../internals/iterators-core"),y=u.IteratorPrototype,p=u.BUGGY_SAFARI_ITERATORS,v=l("iterator"),w="values",C="entries";x.exports=function(T,j,A,G,M,k,O){i(A,j,G);function N(D){if(D===M&&I)return I;if(!p&&D in W)return W[D];switch(D){case"keys":case w:case C:return function(){return new A(this,D)}}return function(){return new A(this)}}var U,V,G=j+" Iterator",z=!1,W=T.prototype,Z=W[v]||W["@@iterator"]||M&&W[M],I=!p&&Z||N(M),q=j=="Array"&&W.entries||Z;if(q&&(q=f(q.call(new T)),y!==Object.prototype&&q.next&&(c||f(q)===y||(g?g(q,y):typeof q[v]!="function"&&n(q,v,h)),m(q,G,!0,!0),c&&(a[G]=h))),M==w&&Z&&Z.name!==w&&(z=!0,I=function(){return Z.call(this)}),c&&!O||W[v]===I||n(W,v,I),a[j]=I,M)if(U={values:N(w),keys:k?I:N("keys"),entries:N(C)},O)for(V in U)!p&&!z&&V in W||s(W,V,U[V]);else d({target:j,proto:!0,forced:p||z},U);return U}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(t,x,b){var h=t("../internals/path"),d=t("../internals/has"),i=t("../internals/well-known-symbol-wrapped"),f=t("../internals/object-define-property").f;x.exports=function(g){var m=h.Symbol||(h.Symbol={});d(m,g)||f(m,g,{value:i.f(g)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(t,x,b){t=t("../internals/fails"),x.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(d,x,b){var h=d("../internals/global"),d=d("../internals/is-object"),i=h.document,f=d(i)&&d(i.createElement);x.exports=function(g){return f?i.createElement(g):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(t,x,b){x.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,x,b){t=t("../internals/engine-user-agent"),x.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,x,b){t=t("../internals/get-built-in"),x.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(i,x,b){var h,d,f=i("../internals/global"),i=i("../internals/engine-user-agent"),f=f.process,f=f&&f.versions,f=f&&f.v8;f?d=(h=f.split("."))[0]+h[1]:i&&(!(h=i.match(/Edge\/(\d+)/))||74<=h[1])&&(h=i.match(/Chrome\/(\d+)/))&&(d=h[1]),x.exports=d&&+d},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(t,x,b){x.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,x,b){var h=t("../internals/global"),d=t("../internals/object-get-own-property-descriptor").f,i=t("../internals/create-non-enumerable-property"),f=t("../internals/redefine"),g=t("../internals/set-global"),m=t("../internals/copy-constructor-properties"),n=t("../internals/is-forced");x.exports=function(s,l){var c,a,u,y=s.target,p=s.global,v=s.stat,w=p?h:v?h[y]||g(y,{}):(h[y]||{}).prototype;if(w)for(c in l){if(a=l[c],u=s.noTargetGet?(u=d(w,c))&&u.value:w[c],!n(p?c:y+(v?".":"#")+c,s.forced)&&u!==void 0){if(typeof a==typeof u)continue;m(a,u)}(s.sham||u&&u.sham)&&i(a,"sham",!0),f(w,c,a,s)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(t,x,b){x.exports=function(h){try{return!!h()}catch{return!0}}},{}],52:[function(l,x,b){l("../modules/es.regexp.exec");var h=l("../internals/redefine"),d=l("../internals/fails"),i=l("../internals/well-known-symbol"),f=l("../internals/regexp-exec"),g=l("../internals/create-non-enumerable-property"),m=i("species"),n=!d(function(){var u=/./;return u.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(u,"$<a>")!=="7"}),s="a".replace(/./,"$0")==="$0",l=i("replace"),c=!!/./[l]&&/./[l]("a","$0")==="",a=!d(function(){var y=/(?:)/,u=y.exec,y=(y.exec=function(){return u.apply(this,arguments)},"ab".split(y));return y.length!==2||y[0]!=="a"||y[1]!=="b"});x.exports=function(u,y,p,v){var w,C,T=i(u),j=!d(function(){var L={};return L[T]=function(){return 7},""[u](L)!=7}),A=j&&!d(function(){var L=!1,M=/a/;return u==="split"&&((M={constructor:{}}).constructor[m]=function(){return M},M.flags="",M[T]=/./[T]),M.exec=function(){return L=!0,null},M[T](""),!L});j&&A&&(u!=="replace"||n&&s&&!c)&&(u!=="split"||a)||(w=/./[T],p=(A=p(T,""[u],function(L,M,k,O,N){return M.exec===f?j&&!N?{done:!0,value:w.call(M,k,O)}:{done:!0,value:L.call(k,M,O)}:{done:!1}},{REPLACE_KEEPS_$0:s,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:c}))[0],C=A[1],h(String.prototype,u,p),h(RegExp.prototype,T,y==2?function(L,M){return C.call(L,this,M)}:function(L){return C.call(L,this)})),v&&g(RegExp.prototype[T],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":187}],53:[function(t,x,b){t=t("../internals/fails"),x.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(t,x,b){var h=t("../internals/a-function");x.exports=function(d,i,f){if(h(d),i===void 0)return d;switch(f){case 0:return function(){return d.call(i)};case 1:return function(g){return d.call(i,g)};case 2:return function(g,m){return d.call(i,g,m)};case 3:return function(g,m,n){return d.call(i,g,m,n)}}return function(){return d.apply(i,arguments)}}},{"../internals/a-function":5}],55:[function(t,x,b){var h=t("../internals/a-function"),d=t("../internals/is-object"),i=[].slice,f={};x.exports=Function.bind||function(g){var m=h(this),n=i.call(arguments,1),s=function(){var l=n.concat(i.call(arguments));if(this instanceof s){var c=m,a=l.length,u=l;if(!(a in f)){for(var y=[],p=0;p<a;p++)y[p]="a["+p+"]";f[a]=Function("C,a","return new C("+y.join(",")+")")}return f[a](c,u)}return m.apply(g,l)};return d(m.prototype)&&(s.prototype=m.prototype),s}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,x,b){function h(f){return typeof f=="function"?f:void 0}var d=t("../internals/path"),i=t("../internals/global");x.exports=function(f,g){return arguments.length<2?h(d[f])||h(i[f]):d[f]&&d[f][g]||i[f]&&i[f][g]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,x,b){var h=t("../internals/classof"),d=t("../internals/iterators"),i=t("../internals/well-known-symbol")("iterator");x.exports=function(f){if(f!=null)return f[i]||f["@@iterator"]||d[h(f)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(t,x,b){var h=t("../internals/an-object"),d=t("../internals/get-iterator-method");x.exports=function(i){var f=d(i);if(typeof f!="function")throw TypeError(String(i)+" is not iterable");return h(f.call(i))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,x,b){(function(h){function d(i){return i&&i.Math==Math&&i}x.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof h=="object"&&h)||Function("return this")()}).call(this,typeof os<"u"?os:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(t,x,b){var h={}.hasOwnProperty;x.exports=function(d,i){return h.call(d,i)}},{}],61:[function(t,x,b){x.exports={}},{}],62:[function(t,x,b){var h=t("../internals/global");x.exports=function(d,i){var f=h.console;f&&f.error&&(arguments.length===1?f.error(d):f.error(d,i))}},{"../internals/global":59}],63:[function(t,x,b){t=t("../internals/get-built-in"),x.exports=t("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/fails"),i=t("../internals/document-create-element");x.exports=!h&&!d(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(t,x,b){var h=Math.abs,d=Math.pow,i=Math.floor,f=Math.log,g=Math.LN2;x.exports={pack:function(m,n,p){var l,c,a,u=new Array(p),y=8*p-n-1,p=(1<<y)-1,v=p>>1,w=n===23?d(2,-24)-d(2,-77):0,C=m<0||m===0&&1/m<0?1:0,T=0;for((m=h(m))!=m||m===1/0?(c=m!=m?1:0,l=p):(l=i(f(m)/g),m*(a=d(2,-l))<1&&(l--,a*=2),2<=(m+=1<=l+v?w/a:w*d(2,1-v))*a&&(l++,a/=2),p<=l+v?(c=0,l=p):1<=l+v?(c=(m*a-1)*d(2,n),l+=v):(c=m*d(2,v-1)*d(2,n),l=0));8<=n;u[T++]=255&c,c/=256,n-=8);for(l=l<<n|c,y+=n;0<y;u[T++]=255&l,l/=256,y-=8);return u[--T]|=128*C,u},unpack:function(m,n){var s,l=m.length,p=8*l-n-1,c=(1<<p)-1,a=c>>1,u=p-7,y=l-1,p=m[y--],v=127&p;for(p>>=7;0<u;v=256*v+m[y],y--,u-=8);for(s=v&(1<<-u)-1,v>>=-u,u+=n;0<u;s=256*s+m[y],y--,u-=8);if(v===0)v=1-a;else{if(v===c)return s?NaN:p?-1/0:1/0;s+=d(2,n),v-=a}return(p?-1:1)*s*d(2,v-n)}}},{}],66:[function(t,x,b){var h=t("../internals/fails"),d=t("../internals/classof-raw"),i="".split;x.exports=h(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return d(f)=="String"?i.call(f,""):Object(f)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(t,x,b){var h=t("../internals/is-object"),d=t("../internals/object-set-prototype-of");x.exports=function(i,f,g){return d&&typeof(f=f.constructor)=="function"&&f!==g&&h(f=f.prototype)&&f!==g.prototype&&d(i,f),i}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(h,x,b){var h=h("../internals/shared-store"),d=Function.toString;typeof h.inspectSource!="function"&&(h.inspectSource=function(i){return d.call(i)}),x.exports=h.inspectSource},{"../internals/shared-store":119}],69:[function(t,x,b){function h(u){g(u,s,{value:{objectID:"O"+ ++l,weakData:{}}})}var d=t("../internals/hidden-keys"),i=t("../internals/is-object"),f=t("../internals/has"),g=t("../internals/object-define-property").f,m=t("../internals/uid"),n=t("../internals/freezing"),s=m("meta"),l=0,c=Object.isExtensible||function(){return!0},a=x.exports={REQUIRED:!1,fastKey:function(u,y){if(!i(u))return typeof u=="symbol"?u:(typeof u=="string"?"S":"P")+u;if(!f(u,s)){if(!c(u))return"F";if(!y)return"E";h(u)}return u[s].objectID},getWeakData:function(u,y){if(!f(u,s)){if(!c(u))return!0;if(!y)return!1;h(u)}return u[s].weakData},onFreeze:function(u){return n&&a.REQUIRED&&c(u)&&!f(u,s)&&h(u),u}};d[s]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(p,x,b){var h,d,i,f,g,m,n,s,l=p("../internals/native-weak-map"),v=p("../internals/global"),c=p("../internals/is-object"),a=p("../internals/create-non-enumerable-property"),u=p("../internals/has"),y=p("../internals/shared-key"),p=p("../internals/hidden-keys"),v=v.WeakMap;n=l?(h=new v,d=h.get,i=h.has,f=h.set,g=function(w,C){return f.call(h,w,C),C},m=function(w){return d.call(h,w)||{}},function(w){return i.call(h,w)}):(p[s=y("state")]=!0,g=function(w,C){return a(w,s,C),C},m=function(w){return u(w,s)?w[s]:{}},function(w){return u(w,s)}),x.exports={set:g,get:m,has:n,enforce:function(w){return n(w)?m(w):g(w,{})},getterFor:function(w){return function(C){if(c(C)&&(C=m(C)).type===w)return C;throw TypeError("Incompatible receiver, "+w+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,x,b){var h=t("../internals/well-known-symbol"),d=t("../internals/iterators"),i=h("iterator"),f=Array.prototype;x.exports=function(g){return g!==void 0&&(d.Array===g||f[i]===g)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(t,x,b){var h=t("../internals/classof-raw");x.exports=Array.isArray||function(d){return h(d)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,x,b){function h(s,l){return(s=g[f(s)])==n||s!=m&&(typeof l=="function"?d(l):!!l)}var d=t("../internals/fails"),i=/#|\.prototype\./,f=h.normalize=function(s){return String(s).replace(i,".").toLowerCase()},g=h.data={},m=h.NATIVE="N",n=h.POLYFILL="P";x.exports=h},{"../internals/fails":51}],74:[function(t,x,b){x.exports=function(h){return typeof h=="object"?h!==null:typeof h=="function"}},{}],75:[function(t,x,b){x.exports=!1},{}],76:[function(t,x,b){var h=t("../internals/is-object"),d=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("match");x.exports=function(f){var g;return h(f)&&((g=f[i])!==void 0?!!g:d(f)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(t,x,b){function h(s,l){this.stopped=s,this.result=l}var d=t("../internals/an-object"),i=t("../internals/is-array-iterator-method"),f=t("../internals/to-length"),g=t("../internals/function-bind-context"),m=t("../internals/get-iterator-method"),n=t("../internals/call-with-safe-iteration-closing");(x.exports=function(s,l,c,a,u){var y,p,v,w,C,T,j=g(l,c,a?2:1);if(u)y=s;else{if(typeof(l=m(s))!="function")throw TypeError("Target is not iterable");if(i(l)){for(p=0,v=f(s.length);p<v;p++)if((w=a?j(d(T=s[p])[0],T[1]):j(s[p]))&&w instanceof h)return w;return new h(!1)}y=l.call(s)}for(C=y.next;!(T=C.call(y)).done;)if(typeof(w=n(y,j,T.value,a))=="object"&&w&&w instanceof h)return w;return new h(!1)}).stop=function(s){return new h(!0,s)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(m,x,b){var h,d,i=m("../internals/object-get-prototype-of"),f=m("../internals/create-non-enumerable-property"),g=m("../internals/has"),n=m("../internals/well-known-symbol"),m=m("../internals/is-pure"),n=n("iterator"),s=!1;[].keys&&("next"in(d=[].keys())?(i=i(i(d)))!==Object.prototype&&(h=i):s=!0),h==null&&(h={}),m||g(h,n)||f(h,n,function(){return this}),x.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:s}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(t,x,b){x.exports={}},{}],80:[function(t,x,b){x.exports=Math.sign||function(h){return(h=+h)==0||h!=h?h:h<0?-1:1}},{}],81:[function(a,x,b){var h,d,i,f,g,m,n,s,l=a("../internals/global"),C=a("../internals/object-get-own-property-descriptor").f,w=a("../internals/classof-raw"),c=a("../internals/task").set,a=a("../internals/engine-is-ios"),u=l.MutationObserver||l.WebKitMutationObserver,y=l.process,p=l.Promise,v=w(y)=="process",w=C(l,"queueMicrotask"),C=w&&w.value;C||(h=function(){var T,j;for(v&&(T=y.domain)&&T.exit();d;){j=d.fn,d=d.next;try{j()}catch(A){throw d?f():i=void 0,A}}i=void 0,T&&T.enter()},f=v?function(){y.nextTick(h)}:u&&!a?(g=!0,m=document.createTextNode(""),new u(h).observe(m,{characterData:!0}),function(){m.data=g=!g}):p&&p.resolve?(n=p.resolve(void 0),s=n.then,function(){s.call(n,h)}):function(){c.call(l,h)}),x.exports=C||function(T){T={fn:T,next:void 0},i&&(i.next=T),d||(d=T,f()),i=T}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(t,x,b){t=t("../internals/global"),x.exports=t.Promise},{"../internals/global":59}],83:[function(t,x,b){t=t("../internals/fails"),x.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(t,x,b){var h=t("../internals/fails"),d=t("../internals/well-known-symbol"),i=t("../internals/is-pure"),f=d("iterator");x.exports=!h(function(){var g=new URL("b?a=1&b=2&c=3","http://a"),m=g.searchParams,n="";return g.pathname="c%20d",m.forEach(function(s,l){m.delete("b"),n+=l+s}),i&&!g.toJSON||!m.sort||g.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[f]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(h,x,b){var d=h("../internals/global"),h=h("../internals/inspect-source"),d=d.WeakMap;x.exports=typeof d=="function"&&/native code/.test(h(d))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,x,b){function h(i){var f,g;this.promise=new i(function(m,n){if(f!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");f=m,g=n}),this.resolve=d(f),this.reject=d(g)}var d=t("../internals/a-function");x.exports.f=function(i){return new h(i)}},{"../internals/a-function":5}],87:[function(t,x,b){var h=t("../internals/is-regexp");x.exports=function(d){if(h(d))throw TypeError("The method doesn't accept regular expressions");return d}},{"../internals/is-regexp":76}],88:[function(t,x,b){var h=t("../internals/global").isFinite;x.exports=Number.isFinite||function(d){return typeof d=="number"&&h(d)}},{"../internals/global":59}],89:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/fails"),i=t("../internals/object-keys"),f=t("../internals/object-get-own-property-symbols"),g=t("../internals/object-property-is-enumerable"),m=t("../internals/to-object"),n=t("../internals/indexed-object"),s=Object.assign,l=Object.defineProperty;x.exports=!s||d(function(){var c,a,u,y;return!(!h||s({b:1},s(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(a={},y="abcdefghijklmnopqrst",(c={})[u=Symbol()]=7,y.split("").forEach(function(p){a[p]=p}),s({},c)[u]!=7||i(s({},a)).join("")!=y)})?function(c,a){for(var u=m(c),y=arguments.length,p=1,v=f.f,w=g.f;p<y;)for(var C,T=n(arguments[p++]),j=v?i(T).concat(v(T)):i(T),A=j.length,L=0;L<A;)C=j[L++],h&&!w.call(T,C)||(u[C]=T[C]);return u}:s},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(l,x,b){function h(){}var d,i=l("../internals/an-object"),f=l("../internals/object-define-properties"),g=l("../internals/enum-bug-keys"),m=l("../internals/hidden-keys"),n=l("../internals/html"),s=l("../internals/document-create-element"),l=l("../internals/shared-key"),c="prototype",a="script",u=l("IE_PROTO"),y=function(v){return"<"+a+">"+v+"</"+a+">"},p=function(){try{d=document.domain&&new ActiveXObject("htmlfile")}catch{}p=d?((v=d).write(y("")),v.close(),w=v.parentWindow.Object,v=null,w):(v=s("iframe"),w="java"+a+":",v.style.display="none",n.appendChild(v),v.src=String(w),(w=v.contentWindow.document).open(),w.write(y("document.F=Object")),w.close(),w.F);for(var v,w,C=g.length;C--;)delete p[c][g[C]];return p()};m[u]=!0,x.exports=Object.create||function(v,w){var C;return v!==null?(h[c]=i(v),C=new h,h[c]=null,C[u]=v):C=p(),w===void 0?C:f(C,w)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/object-define-property"),i=t("../internals/an-object"),f=t("../internals/object-keys");x.exports=h?Object.defineProperties:function(g,m){i(g);for(var n,s=f(m),l=s.length,c=0;c<l;)d.f(g,n=s[c++],m[n]);return g}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/ie8-dom-define"),i=t("../internals/an-object"),f=t("../internals/to-primitive"),g=Object.defineProperty;b.f=h?g:function(m,n,s){if(i(m),n=f(n,!0),i(s),d)try{return g(m,n,s)}catch{}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(m[n]=s.value),m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/object-property-is-enumerable"),i=t("../internals/create-property-descriptor"),f=t("../internals/to-indexed-object"),g=t("../internals/to-primitive"),m=t("../internals/has"),n=t("../internals/ie8-dom-define"),s=Object.getOwnPropertyDescriptor;b.f=h?s:function(l,c){if(l=f(l),c=g(c,!0),n)try{return s(l,c)}catch{}if(m(l,c))return i(!d.f.call(l,c),l[c])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(t,x,b){var h=t("../internals/to-indexed-object"),d=t("../internals/object-get-own-property-names").f,i={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];x.exports.f=function(g){if(!f||i.call(g)!="[object Window]")return d(h(g));try{return d(g)}catch{return f.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(t,x,b){var h=t("../internals/object-keys-internal"),d=t("../internals/enum-bug-keys").concat("length","prototype");b.f=Object.getOwnPropertyNames||function(i){return h(i,d)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(t,x,b){b.f=Object.getOwnPropertySymbols},{}],97:[function(f,x,b){var h=f("../internals/has"),d=f("../internals/to-object"),i=f("../internals/shared-key"),f=f("../internals/correct-prototype-getter"),g=i("IE_PROTO"),m=Object.prototype;x.exports=f?Object.getPrototypeOf:function(n){return n=d(n),h(n,g)?n[g]:typeof n.constructor=="function"&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?m:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(t,x,b){var h=t("../internals/has"),d=t("../internals/to-indexed-object"),i=t("../internals/array-includes").indexOf,f=t("../internals/hidden-keys");x.exports=function(g,m){var n,s=d(g),l=0,c=[];for(n in s)!h(f,n)&&h(s,n)&&c.push(n);for(;m.length>l;)!h(s,n=m[l++])||~i(c,n)||c.push(n);return c}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(t,x,b){var h=t("../internals/object-keys-internal"),d=t("../internals/enum-bug-keys");x.exports=Object.keys||function(i){return h(i,d)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(t,x,b){var h={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,i=d&&!h.call({1:2},1);b.f=i?function(f){return f=d(this,f),!!f&&f.enumerable}:h},{}],101:[function(t,x,b){var h=t("../internals/an-object"),d=t("../internals/a-possible-prototype");x.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,f=!1,g={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(g,[]),f=g instanceof Array}catch{}return function(m,n){return h(m),d(n),f?i.call(m,n):m.__proto__=n,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,x,b){var h=t("../internals/to-string-tag-support"),d=t("../internals/classof");x.exports=h?{}.toString:function(){return"[object "+d(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(t,x,b){var h=t("../internals/get-built-in"),d=t("../internals/object-get-own-property-names"),i=t("../internals/object-get-own-property-symbols"),f=t("../internals/an-object");x.exports=h("Reflect","ownKeys")||function(g){var m=d.f(f(g)),n=i.f;return n?m.concat(n(g)):m}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,x,b){t=t("../internals/global"),x.exports=t},{"../internals/global":59}],105:[function(t,x,b){x.exports=function(h){try{return{error:!1,value:h()}}catch(d){return{error:!0,value:d}}}},{}],106:[function(t,x,b){var h=t("../internals/an-object"),d=t("../internals/is-object"),i=t("../internals/new-promise-capability");x.exports=function(f,g){return h(f),d(g)&&g.constructor===f?g:((0,(f=i.f(f)).resolve)(g),f.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,x,b){var h=t("../internals/redefine");x.exports=function(d,i,f){for(var g in i)h(d,g,i[g],f);return d}},{"../internals/redefine":108}],108:[function(m,x,b){var h=m("../internals/global"),d=m("../internals/create-non-enumerable-property"),i=m("../internals/has"),f=m("../internals/set-global"),g=m("../internals/inspect-source"),m=m("../internals/internal-state"),n=m.get,s=m.enforce,l=String(String).split("String");(x.exports=function(c,a,u,w){var p=!!w&&!!w.unsafe,v=!!w&&!!w.enumerable,w=!!w&&!!w.noTargetGet;typeof u=="function"&&(typeof a!="string"||i(u,"name")||d(u,"name",a),s(u).source=l.join(typeof a=="string"?a:"")),c===h?v?c[a]=u:f(a,u):(p?!w&&c[a]&&(v=!0):delete c[a],v?c[a]=u:d(c,a,u))})(Function.prototype,"toString",function(){return typeof this=="function"&&n(this).source||g(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,x,b){var h=t("./classof-raw"),d=t("./regexp-exec");x.exports=function(i,f){var g=i.exec;if(typeof g=="function"){if(g=g.call(i,f),typeof g!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return g}if(h(i)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return d.call(i,f)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(f,x,b){var h,d,i=f("./regexp-flags"),f=f("./regexp-sticky-helpers"),g=RegExp.prototype.exec,m=String.prototype.replace,n=g,s=(h=/a/,d=/b*/g,g.call(h,"a"),g.call(d,"a"),h.lastIndex!==0||d.lastIndex!==0),l=f.UNSUPPORTED_Y||f.BROKEN_CARET,c=/()??/.exec("")[1]!==void 0;x.exports=n=s||c||l?function(a){var u,y,p,v,w=this,C=l&&w.sticky,T=i.call(w),j=w.source,A=0,L=a;return C&&((T=T.replace("y","")).indexOf("g")===-1&&(T+="g"),L=String(a).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&a[w.lastIndex-1]!==`
`)&&(j="(?: "+j+")",L=" "+L,A++),y=new RegExp("^(?:"+j+")",T)),c&&(y=new RegExp("^"+j+"$(?!\\s)",T)),s&&(u=w.lastIndex),p=g.call(C?y:w,L),C?p?(p.input=p.input.slice(A),p[0]=p[0].slice(A),p.index=w.lastIndex,w.lastIndex+=p[0].length):w.lastIndex=0:s&&p&&(w.lastIndex=w.global?p.index+p[0].length:u),c&&p&&1<p.length&&m.call(p[0],y,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(p[v]=void 0)}),p}:n},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,x,b){var h=t("../internals/an-object");x.exports=function(){var d=h(this),i="";return d.global&&(i+="g"),d.ignoreCase&&(i+="i"),d.multiline&&(i+="m"),d.dotAll&&(i+="s"),d.unicode&&(i+="u"),d.sticky&&(i+="y"),i}},{"../internals/an-object":10}],112:[function(t,x,b){t=t("./fails");function h(d,i){return RegExp(d,i)}b.UNSUPPORTED_Y=t(function(){var d=h("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),b.BROKEN_CARET=t(function(){var d=h("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},{"./fails":51}],113:[function(t,x,b){x.exports=function(h){if(h==null)throw TypeError("Can't call method on "+h);return h}},{}],114:[function(t,x,b){x.exports=Object.is||function(h,d){return h===d?h!==0||1/h==1/d:h!=h&&d!=d}},{}],115:[function(t,x,b){var h=t("../internals/global"),d=t("../internals/create-non-enumerable-property");x.exports=function(i,f){try{d(h,i,f)}catch{h[i]=f}return f}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(t,x,b){var h=t("../internals/get-built-in"),d=t("../internals/object-define-property"),i=t("../internals/well-known-symbol"),f=t("../internals/descriptors"),g=i("species");x.exports=function(n){var n=h(n),s=d.f;f&&n&&!n[g]&&s(n,g,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(t,x,b){var h=t("../internals/object-define-property").f,d=t("../internals/has"),i=t("../internals/well-known-symbol")("toStringTag");x.exports=function(f,g,m){f&&!d(f=m?f:f.prototype,i)&&h(f,i,{configurable:!0,value:g})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(t,x,b){var h=t("../internals/shared"),d=t("../internals/uid"),i=h("keys");x.exports=function(f){return i[f]||(i[f]=d(f))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(h,x,b){var i=h("../internals/global"),h=h("../internals/set-global"),d="__core-js_shared__",i=i[d]||h(d,{});x.exports=i},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,x,b){var h=t("../internals/is-pure"),d=t("../internals/shared-store");(x.exports=function(i,f){return d[i]||(d[i]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:h?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,x,b){var h=t("../internals/an-object"),d=t("../internals/a-function"),i=t("../internals/well-known-symbol")("species");x.exports=function(m,g){var m=h(m).constructor;return m===void 0||(m=h(m)[i])==null?g:d(m)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(t,x,b){var h=t("../internals/fails");x.exports=function(d){return h(function(){var i=""[d]('"');return i!==i.toLowerCase()||3<i.split('"').length})}},{"../internals/fails":51}],123:[function(t,x,b){function h(f){return function(s,l){var n,s=String(i(s)),l=d(l),c=s.length;return l<0||c<=l?f?"":void 0:(n=s.charCodeAt(l))<55296||56319<n||l+1===c||(c=s.charCodeAt(l+1))<56320||57343<c?f?s.charAt(l):n:f?s.slice(l,l+2):c-56320+(n-55296<<10)+65536}}var d=t("../internals/to-integer"),i=t("../internals/require-object-coercible");x.exports={codeAt:h(!1),charAt:h(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(t,x,b){t=t("../internals/engine-user-agent"),x.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],125:[function(t,x,b){function h(m){return function(c,y,u){var c=String(f(c)),a=c.length,u=u===void 0?" ":String(u),y=d(y);return y<=a||u==""?c:((a=i.call(u,g((y=y-a)/u.length))).length>y&&(a=a.slice(0,y)),m?c+a:a+c)}}var d=t("../internals/to-length"),i=t("../internals/string-repeat"),f=t("../internals/require-object-coercible"),g=Math.ceil;x.exports={start:h(!1),end:h(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(t,x,b){function h(p){return p+22+75*(p<26)}function d(p){var v,w=[],C=(p=function(Z){for(var I=[],q=0,D=Z.length;q<D;){var F,H=Z.charCodeAt(q++);55296<=H&&H<=56319&&q<D?(64512&(F=Z.charCodeAt(q++)))==56320?I.push(((1023&H)<<10)+(1023&F)+65536):(I.push(H),q--):I.push(H)}return I}(p)).length,T=128,j=0,A=72;for(O=0;O<p.length;O++)(v=p[O])<128&&w.push(y(v));var L=w.length,M=L;for(L&&w.push("-");M<C;){for(var k=i,O=0;O<p.length;O++)T<=(v=p[O])&&v<k&&(k=v);var N=M+1;if(k-T>u((i-j)/N))throw RangeError(c);for(j+=(k-T)*N,T=k,O=0;O<p.length;O++){if((v=p[O])<T&&++j>i)throw RangeError(c);if(v==T){for(var U=j,V=f;;V+=f){var G=V<=A?1:A+g<=V?g:V-A;if(U<G)break;var z=U-G,W=f-G;w.push(y(h(G+z%W))),U=u(z/W)}w.push(y(h(U))),A=function(Z,I,q){var D=0;for(Z=q?u(Z/n):Z>>1,Z+=u(Z/I);a*g>>1<Z;D+=f)Z=u(Z/a);return u(D+(a+1)*Z/(Z+m))}(j,N,M==L),j=0,++M}}++j,++T}return w.join("")}var i=2147483647,f=36,g=26,m=38,n=700,s=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,c="Overflow: input needs wider integers to process",a=f-1,u=Math.floor,y=String.fromCharCode;x.exports=function(p){for(var v,w=[],C=p.toLowerCase().replace(l,".").split("."),T=0;T<C.length;T++)v=C[T],w.push(s.test(v)?"xn--"+d(v):v);return w.join(".")}},{}],127:[function(t,x,b){var h=t("../internals/to-integer"),d=t("../internals/require-object-coercible");x.exports="".repeat||function(i){var f=String(d(this)),g="",m=h(i);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(f+=f))1&m&&(g+=f);return g}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(t,x,b){var h=t("../internals/fails"),d=t("../internals/whitespaces");x.exports=function(i){return h(function(){return!!d[i]()||""[i]()!=""||d[i].name!==i})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(i,x,b){function h(m){return function(n){return n=String(d(n)),1&m&&(n=n.replace(f,"")),n=2&m?n.replace(g,""):n}}var d=i("../internals/require-object-coercible"),i="["+i("../internals/whitespaces")+"]",f=RegExp("^"+i+i+"*"),g=RegExp(i+i+"*$");x.exports={start:h(1),end:h(2),trim:h(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(a,x,b){function h(M){return function(){L(M)}}function d(M){L(M.data)}function i(M){g.postMessage(M+"",u.protocol+"//"+u.host)}var f,g=a("../internals/global"),m=a("../internals/fails"),n=a("../internals/classof-raw"),s=a("../internals/function-bind-context"),l=a("../internals/html"),c=a("../internals/document-create-element"),a=a("../internals/engine-is-ios"),u=g.location,y=g.setImmediate,p=g.clearImmediate,v=g.process,w=g.MessageChannel,C=g.Dispatch,T=0,j={},A="onreadystatechange",L=function(M){var k;j.hasOwnProperty(M)&&(k=j[M],delete j[M],k())};y&&p||(y=function(M){for(var k=[],O=1;O<arguments.length;)k.push(arguments[O++]);return j[++T]=function(){(typeof M=="function"?M:Function(M)).apply(void 0,k)},f(T),T},p=function(M){delete j[M]},n(v)=="process"?f=function(M){v.nextTick(h(M))}:C&&C.now?f=function(M){C.now(h(M))}:w&&!a?(a=(n=new w).port2,n.port1.onmessage=d,f=s(a.postMessage,a,1)):!g.addEventListener||typeof postMessage!="function"||g.importScripts||m(i)||u.protocol==="file:"?f=A in c("script")?function(M){l.appendChild(c("script"))[A]=function(){l.removeChild(this),L(M)}}:function(M){setTimeout(h(M),0)}:(f=i,g.addEventListener("message",d,!1))),x.exports={set:y,clear:p}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(t,x,b){var h=t("../internals/classof-raw");x.exports=function(d){if(typeof d!="number"&&h(d)!="Number")throw TypeError("Incorrect invocation");return+d}},{"../internals/classof-raw":28}],132:[function(t,x,b){var h=t("../internals/to-integer"),d=Math.max,i=Math.min;x.exports=function(f,g){return f=h(f),f<0?d(f+g,0):i(f,g)}},{"../internals/to-integer":135}],133:[function(t,x,b){var h=t("../internals/to-integer"),d=t("../internals/to-length");x.exports=function(f){if(f===void 0)return 0;var f=h(f),g=d(f);if(f!==g)throw RangeError("Wrong length or index");return g}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(t,x,b){var h=t("../internals/indexed-object"),d=t("../internals/require-object-coercible");x.exports=function(i){return h(d(i))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(t,x,b){var h=Math.ceil,d=Math.floor;x.exports=function(i){return isNaN(i=+i)?0:(0<i?d:h)(i)}},{}],136:[function(t,x,b){var h=t("../internals/to-integer"),d=Math.min;x.exports=function(i){return 0<i?d(h(i),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(t,x,b){var h=t("../internals/require-object-coercible");x.exports=function(d){return Object(h(d))}},{"../internals/require-object-coercible":113}],138:[function(t,x,b){var h=t("../internals/to-positive-integer");x.exports=function(d,i){if(d=h(d),d%i)throw RangeError("Wrong offset");return d}},{"../internals/to-positive-integer":139}],139:[function(t,x,b){var h=t("../internals/to-integer");x.exports=function(d){if(d=h(d),d<0)throw RangeError("The argument can't be less than 0");return d}},{"../internals/to-integer":135}],140:[function(t,x,b){var h=t("../internals/is-object");x.exports=function(d,i){if(!h(d))return d;var f,g;if(i&&typeof(f=d.toString)=="function"&&!h(g=f.call(d))||typeof(f=d.valueOf)=="function"&&!h(g=f.call(d))||!i&&typeof(f=d.toString)=="function"&&!h(g=f.call(d)))return g;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(t,x,b){var h={};h[t("../internals/well-known-symbol")("toStringTag")]="z",x.exports=String(h)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(t,x,b){function h(xe,Te){for(var Le=0,Je=Te.length,ke=new(Q(xe))(Je);Le<Je;)ke[Le]=Te[Le++];return ke}function d(xe,Te){F(xe,Te,{get:function(){return q(this)[Te]}})}function i(xe){return xe instanceof ie||(xe=L(xe))=="ArrayBuffer"||xe=="SharedArrayBuffer"}function f(xe,Te){return ce(xe)&&typeof Te!="symbol"&&Te in xe&&String(+Te)==String(Te)}function g(xe,Te){return f(xe,Te=j(Te,!0))?p(2,xe[Te]):H(xe,Te)}function m(xe,Te,Le){return!(f(xe,Te=j(Te,!0))&&M(Le)&&A(Le,"value"))||A(Le,"get")||A(Le,"set")||Le.configurable||A(Le,"writable")&&!Le.writable||A(Le,"enumerable")&&!Le.enumerable?F(xe,Te,Le):(xe[Te]=Le.value,xe)}var n=t("../internals/export"),s=t("../internals/global"),l=t("../internals/descriptors"),c=t("../internals/typed-array-constructors-require-wrappers"),a=t("../internals/array-buffer-view-core"),u=t("../internals/array-buffer"),y=t("../internals/an-instance"),p=t("../internals/create-property-descriptor"),v=t("../internals/create-non-enumerable-property"),w=t("../internals/to-length"),C=t("../internals/to-index"),T=t("../internals/to-offset"),j=t("../internals/to-primitive"),A=t("../internals/has"),L=t("../internals/classof"),M=t("../internals/is-object"),k=t("../internals/object-create"),O=t("../internals/object-set-prototype-of"),N=t("../internals/object-get-own-property-names").f,U=t("../internals/typed-array-from"),V=t("../internals/array-iteration").forEach,G=t("../internals/set-species"),z=t("../internals/object-define-property"),W=t("../internals/object-get-own-property-descriptor"),Z=t("../internals/internal-state"),I=t("../internals/inherit-if-required"),q=Z.get,D=Z.set,F=z.f,H=W.f,Y=Math.round,te=s.RangeError,ie=u.ArrayBuffer,de=u.DataView,_e=a.NATIVE_ARRAY_BUFFER_VIEWS,le=a.TYPED_ARRAY_TAG,re=a.TypedArray,pe=a.TypedArrayPrototype,Q=a.aTypedArrayConstructor,ce=a.isTypedArray,be="BYTES_PER_ELEMENT",Re="Wrong length";l?(_e||(W.f=g,z.f=m,d(pe,"buffer"),d(pe,"byteOffset"),d(pe,"byteLength"),d(pe,"length")),n({target:"Object",stat:!0,forced:!_e},{getOwnPropertyDescriptor:g,defineProperty:m}),x.exports=function(ve,Te,Le){function Je(Me,J){F(Me,J,{get:function(){var ee=this,K=J;return(ee=q(ee)).view[oe](K*ke+ee.byteOffset,!0)},set:function(ee){var K=this,ne=J;K=q(K),Le&&(ee=(ee=Y(ee))<0?0:255<ee?255:255&ee),K.view[Ce](ne*ke+K.byteOffset,ee,!0)},enumerable:!0})}var ke=ve.match(/\d+$/)[0]/8,ue=ve+(Le?"Clamped":"")+"Array",oe="get"+ve,Ce="set"+ve,He=s[ue],Ge=He,ve=Ge&&Ge.prototype,Ie={};_e?c&&(Ge=Te(function(Me,J,ee,K){return y(Me,Ge,ue),I(M(J)?i(J)?K!==void 0?new He(J,T(ee,ke),K):ee!==void 0?new He(J,T(ee,ke)):new He(J):ce(J)?h(Ge,J):U.call(Ge,J):new He(C(J)),Me,Ge)}),O&&O(Ge,re),V(N(He),function(Me){Me in Ge||v(Ge,Me,He[Me])}),Ge.prototype=ve):(Ge=Te(function(Me,J,ee,K){y(Me,Ge,ue);var ne,me,Ee=0,De=0;if(M(J)){if(!i(J))return ce(J)?h(Ge,J):U.call(Ge,J);var $e=J,De=T(ee,ke),ee=J.byteLength;if(K===void 0){if(ee%ke||(ne=ee-De)<0)throw te(Re)}else if(ee<(ne=w(K)*ke)+De)throw te(Re);me=ne/ke}else me=C(J),$e=new ie(ne=me*ke);for(D(Me,{buffer:$e,byteOffset:De,byteLength:ne,length:me,view:new de($e)});Ee<me;)Je(Me,Ee++)}),O&&O(Ge,re),ve=Ge.prototype=k(pe)),ve.constructor!==Ge&&v(ve,"constructor",Ge),le&&v(ve,le,ue),Ie[ue]=Ge,n({global:!0,forced:Ge!=He,sham:!_e},Ie),be in Ge||v(Ge,be,ke),be in ve||v(ve,be,ke),G(ue)}):x.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(f,x,b){var h=f("../internals/global"),d=f("../internals/fails"),i=f("../internals/check-correctness-of-iteration"),f=f("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,g=h.ArrayBuffer,m=h.Int8Array;x.exports=!f||!d(function(){m(1)})||!d(function(){new m(-1)})||!i(function(n){new m,new m(null),new m(1.5),new m(n)},!0)||d(function(){return new m(new g(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(t,x,b){var h=t("../internals/to-object"),d=t("../internals/to-length"),i=t("../internals/get-iterator-method"),f=t("../internals/is-array-iterator-method"),g=t("../internals/function-bind-context"),m=t("../internals/array-buffer-view-core").aTypedArrayConstructor;x.exports=function(n){var s,l,c,a,u,y,p=h(n),v=arguments.length,w=1<v?arguments[1]:void 0,C=w!==void 0,T=i(p);if(T!=null&&!f(T))for(y=(u=T.call(p)).next,p=[];!(a=y.call(u)).done;)p.push(a.value);for(C&&2<v&&(w=g(w,arguments[2],2)),l=d(p.length),c=new(m(this))(l),s=0;s<l;s++)c[s]=C?w(p[s],s):p[s];return c}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(t,x,b){var h=0,d=Math.random();x.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++h+d).toString(36)}},{}],146:[function(t,x,b){t=t("../internals/native-symbol"),x.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(t,x,b){t=t("../internals/well-known-symbol"),b.f=t},{"../internals/well-known-symbol":148}],148:[function(m,x,b){var h=m("../internals/global"),d=m("../internals/shared"),i=m("../internals/has"),f=m("../internals/uid"),g=m("../internals/native-symbol"),m=m("../internals/use-symbol-as-uid"),n=d("wks"),s=h.Symbol,l=m?s:s&&s.withoutSetter||f;x.exports=function(c){return i(n,c)||(g&&i(s,c)?n[c]=s[c]:n[c]=l("Symbol."+c)),n[c]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(t,x,b){x.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],150:[function(i,x,b){var h=i("../internals/export"),d=i("../internals/global"),g=i("../internals/array-buffer"),i=i("../internals/set-species"),f="ArrayBuffer",g=g[f];h({global:!0,forced:d[f]!==g},{ArrayBuffer:g}),i(f)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(p,x,b){var h=p("../internals/export"),d=p("../internals/fails"),i=p("../internals/is-array"),f=p("../internals/is-object"),g=p("../internals/to-object"),m=p("../internals/to-length"),n=p("../internals/create-property"),s=p("../internals/array-species-create"),l=p("../internals/array-method-has-species-support"),y=p("../internals/well-known-symbol"),p=p("../internals/engine-v8-version"),c=y("isConcatSpreadable"),a=9007199254740991,u="Maximum allowed index exceeded",y=51<=p||!d(function(){var v=[];return v[c]=!1,v.concat()[0]!==v}),p=l("concat");h({target:"Array",proto:!0,forced:!y||!p},{concat:function(v){for(var w,C,T,j,A,L=g(this),M=s(L,0),k=0,O=-1,N=arguments.length;O<N;O++)if(A=void 0,!f(j=T=O===-1?L:arguments[O])||((A=j[c])!==void 0?!A:!i(j))){if(a<=k)throw TypeError(u);n(M,k++,T)}else{if(C=m(T.length),a<k+C)throw TypeError(u);for(w=0;w<C;w++,k++)w in T&&n(M,k,T[w])}return M.length=k,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(i,x,b){var h=i("../internals/export"),d=i("../internals/array-copy-within"),i=i("../internals/add-to-unscopables");h({target:"Array",proto:!0},{copyWithin:d}),i("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(f,x,b){var h=f("../internals/export"),d=f("../internals/array-iteration").every,i=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),i=i("every"),f=f("every");h({target:"Array",proto:!0,forced:!i||!f},{every:function(g){return d(this,g,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(i,x,b){var h=i("../internals/export"),d=i("../internals/array-fill"),i=i("../internals/add-to-unscopables");h({target:"Array",proto:!0},{fill:d}),i("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(f,x,b){var h=f("../internals/export"),d=f("../internals/array-iteration").filter,i=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),i=i("filter"),f=f("filter");h({target:"Array",proto:!0,forced:!i||!f},{filter:function(g){return d(this,g,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(m,x,b){var h=m("../internals/export"),d=m("../internals/array-iteration").findIndex,i=m("../internals/add-to-unscopables"),m=m("../internals/array-method-uses-to-length"),f="findIndex",g=!0,m=m(f);f in[]&&Array(1)[f](function(){g=!1}),h({target:"Array",proto:!0,forced:g||!m},{findIndex:function(n){return d(this,n,1<arguments.length?arguments[1]:void 0)}}),i(f)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(d,x,b){var h=d("../internals/export"),d=d("../internals/array-for-each");h({target:"Array",proto:!0,forced:[].forEach!=d},{forEach:d})},{"../internals/array-for-each":16,"../internals/export":50}],158:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/array-from");h({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(i){Array.from(i)})},{from:d})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],159:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/array-includes").includes,i=t("../internals/add-to-unscopables");h({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(f){return d(this,f,1<arguments.length?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(m,x,b){var h=m("../internals/export"),d=m("../internals/array-includes").indexOf,g=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),i=[].indexOf,f=!!i&&1/[1].indexOf(1,-0)<0,g=g("indexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});h({target:"Array",proto:!0,forced:f||!g||!m},{indexOf:function(n){return f?i.apply(this,arguments)||0:d(this,n,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],161:[function(g,x,b){var h=g("../internals/to-indexed-object"),d=g("../internals/add-to-unscopables"),i=g("../internals/iterators"),f=g("../internals/internal-state"),g=g("../internals/define-iterator"),m="Array Iterator",n=f.set,s=f.getterFor(m);x.exports=g(Array,"Array",function(l,c){n(this,{type:m,target:h(l),index:0,kind:c})},function(){var l=s(this),c=l.target,a=l.kind,u=l.index++;return!c||u>=c.length?{value:l.target=void 0,done:!0}:a=="keys"?{value:u,done:!1}:a=="values"?{value:c[u],done:!1}:{value:[u,c[u]],done:!1}},"values"),i.Arguments=i.Array,d("keys"),d("values"),d("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],162:[function(g,x,b){var h=g("../internals/export"),f=g("../internals/indexed-object"),d=g("../internals/to-indexed-object"),g=g("../internals/array-method-is-strict"),i=[].join,f=f!=Object,g=g("join",",");h({target:"Array",proto:!0,forced:f||!g},{join:function(m){return i.call(d(this),m===void 0?",":m)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],163:[function(d,x,b){var h=d("../internals/export"),d=d("../internals/array-last-index-of");h({target:"Array",proto:!0,forced:d!==[].lastIndexOf},{lastIndexOf:d})},{"../internals/array-last-index-of":20,"../internals/export":50}],164:[function(f,x,b){var h=f("../internals/export"),d=f("../internals/array-iteration").map,i=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),i=i("map"),f=f("map");h({target:"Array",proto:!0,forced:!i||!f},{map:function(g){return d(this,g,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(c,x,b){var h=c("../internals/export"),d=c("../internals/is-object"),i=c("../internals/is-array"),f=c("../internals/to-absolute-index"),g=c("../internals/to-length"),m=c("../internals/to-indexed-object"),n=c("../internals/create-property"),s=c("../internals/well-known-symbol"),l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("slice"),c=c("slice",{ACCESSORS:!0,0:0,1:2}),a=s("species"),u=[].slice,y=Math.max;h({target:"Array",proto:!0,forced:!l||!c},{slice:function(p,v){var w,C,T,j=m(this),A=g(j.length),L=f(p,A),M=f(v===void 0?A:v,A);if(i(j)&&((w=typeof(w=j.constructor)=="function"&&(w===Array||i(w.prototype))||d(w)&&(w=w[a])===null?void 0:w)===Array||w===void 0))return u.call(j,L,M);for(C=new(w===void 0?Array:w)(y(M-L,0)),T=0;L<M;L++,T++)L in j&&n(C,T,j[L]);return C.length=T,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],166:[function(f,x,b){var h=f("../internals/export"),d=f("../internals/array-iteration").some,i=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),i=i("some"),f=f("some");h({target:"Array",proto:!0,forced:!i||!f},{some:function(g){return d(this,g,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],167:[function(l,x,b){var h=l("../internals/export"),d=l("../internals/to-absolute-index"),i=l("../internals/to-integer"),f=l("../internals/to-length"),g=l("../internals/to-object"),m=l("../internals/array-species-create"),n=l("../internals/create-property"),s=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),s=s("splice"),l=l("splice",{ACCESSORS:!0,0:0,1:2}),c=Math.max,a=Math.min;h({target:"Array",proto:!0,forced:!s||!l},{splice:function(k,y){var p,v,w,C,T,j,A=g(this),L=f(A.length),M=d(k,L),k=arguments.length;if(k===0?p=v=0:v=k===1?(p=0,L-M):(p=k-2,a(c(i(y),0),L-M)),9007199254740991<L+p-v)throw TypeError("Maximum allowed length exceeded");for(w=m(A,v),C=0;C<v;C++)(T=M+C)in A&&n(w,C,A[T]);if(p<(w.length=v)){for(C=M;C<L-v;C++)j=C+p,(T=C+v)in A?A[j]=A[T]:delete A[j];for(C=L;L-v+p<C;C--)delete A[C-1]}else if(v<p)for(C=L-v;M<C;C--)j=C+p-1,(T=C+v-1)in A?A[j]=A[T]:delete A[j];for(C=0;C<p;C++)A[C+M]=arguments[C+2];return A.length=L-v+p,w}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],168:[function(d,x,b){var h=d("../internals/descriptors"),d=d("../internals/object-define-property").f,i=Function.prototype,f=i.toString,g=/^\s*function ([^ (]*)/;!h||"name"in i||d(i,"name",{configurable:!0,get:function(){try{return f.call(this).match(g)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],169:[function(d,x,b){var h=d("../internals/collection"),d=d("../internals/collection-strong");x.exports=h("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},d)},{"../internals/collection":32,"../internals/collection-strong":30}],170:[function(h,x,b){var h=h("../internals/export"),d=Math.hypot,i=Math.abs,f=Math.sqrt;h({target:"Math",stat:!0,forced:!!d&&d(1/0,NaN)!==1/0},{hypot:function(g,m){for(var n,s,l=0,c=0,a=arguments.length,u=0;c<a;)u<(n=i(arguments[c++]))?(l=l*(s=u/n)*s+1,u=n):l+=0<n?(s=n/u)*s:n;return u===1/0?1/0:u*f(l)}})},{"../internals/export":50}],171:[function(h,x,b){var h=h("../internals/export"),d=Math.log,i=Math.LN2;h({target:"Math",stat:!0},{log2:function(f){return d(f)/i}})},{"../internals/export":50}],172:[function(t,x,b){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],173:[function(t,x,b){function h(O){var N,U,V,G,z,W,Z,I=l(O,!1);if(typeof I=="string"&&2<I.length){if((O=(I=v(I)).charCodeAt(0))===43||O===45){if((N=I.charCodeAt(2))===88||N===120)return NaN}else if(O===48){switch(I.charCodeAt(1)){case 66:case 98:U=2,V=49;break;case 79:case 111:U=8,V=55;break;default:return+I}for(z=(G=I.slice(2)).length,W=0;W<z;W++)if((Z=G.charCodeAt(W))<48||V<Z)return NaN;return parseInt(G,U)}}return+I}var d=t("../internals/descriptors"),i=t("../internals/global"),f=t("../internals/is-forced"),g=t("../internals/redefine"),m=t("../internals/has"),n=t("../internals/classof-raw"),s=t("../internals/inherit-if-required"),l=t("../internals/to-primitive"),c=t("../internals/fails"),a=t("../internals/object-create"),u=t("../internals/object-get-own-property-names").f,y=t("../internals/object-get-own-property-descriptor").f,p=t("../internals/object-define-property").f,v=t("../internals/string-trim").trim,w="Number",C=i[w],T=C.prototype,j=n(a(T))==w;if(f(w,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var A,L=function(N){var N=arguments.length<1?0:N,U=this;return U instanceof L&&(j?c(function(){T.valueOf.call(U)}):n(U)!=w)?s(new C(h(N)),U,L):h(N)},M=d?u(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;M.length>k;k++)m(C,A=M[k])&&!m(L,A)&&p(L,A,y(C,A));(L.prototype=T).constructor=L,g(i,w,L)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],174:[function(t,x,b){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],175:[function(m,x,b){function h(l,c,a){return c===0?a:c%2==1?h(l,c-1,a*l):h(l*l,c/2,a)}var d=m("../internals/export"),i=m("../internals/to-integer"),f=m("../internals/this-number-value"),g=m("../internals/string-repeat"),m=m("../internals/fails"),n=1 .toFixed,s=Math.floor;d({target:"Number",proto:!0,forced:n&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!m(function(){n.call({})})},{toFixed:function(w){function c(A,L){for(var M=-1,k=L;++M<6;)k+=A*C[M],C[M]=k%1e7,k=s(k/1e7)}function a(A){for(var L=6,M=0;0<=--L;)M+=C[L],C[L]=s(M/A),M=M%A*1e7}function u(){for(var A,L=6,M="";0<=--L;)M===""&&L!==0&&C[L]===0||(A=String(C[L]),M=M===""?A:M+g.call("0",7-A.length)+A);return M}var y,p,v=f(this),w=i(w),C=[0,0,0,0,0,0],T="",j="0";if(w<0||20<w)throw RangeError("Incorrect fraction digits");if(v!=v)return"NaN";if(v<=-1e21||1e21<=v)return String(v);if(v<0&&(T="-",v=-v),1e-21<v)if(v=(y=function(A){for(var L=0,M=A;4096<=M;)L+=12,M/=4096;for(;2<=M;)L+=1,M/=2;return L}(v*h(2,69,1))-69)<0?v*h(2,-y,1):v/h(2,y,1),v*=4503599627370496,0<(y=52-y)){for(c(0,v),p=w;7<=p;)c(1e7,0),p-=7;for(c(h(10,p,1),0),p=y-1;23<=p;)a(1<<23),p-=23;a(1<<p),c(1,1),a(2),j=u()}else c(0,v),c(1<<-y,0),j=u()+g.call("0",w);return j=0<w?T+((v=j.length)<=w?"0."+g.call("0",w-v)+j:j.slice(0,v-w)+"."+j.slice(v-w)):T+j}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],176:[function(d,x,b){var h=d("../internals/export"),d=d("../internals/object-assign");h({target:"Object",stat:!0,forced:Object.assign!==d},{assign:d})},{"../internals/export":50,"../internals/object-assign":89}],177:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/iterate"),i=t("../internals/create-property");h({target:"Object",stat:!0},{fromEntries:function(f){var g={};return d(f,function(m,n){i(g,m,n)},void 0,!0),g}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],178:[function(f,x,b){var h=f("../internals/export"),g=f("../internals/fails"),d=f("../internals/to-indexed-object"),i=f("../internals/object-get-own-property-descriptor").f,f=f("../internals/descriptors"),g=g(function(){i(1)});h({target:"Object",stat:!0,forced:!f||g,sham:!f},{getOwnPropertyDescriptor:function(m,n){return i(d(m),n)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],179:[function(i,x,b){var h=i("../internals/export"),d=i("../internals/fails"),i=i("../internals/object-get-own-property-names-external").f;h({target:"Object",stat:!0,forced:d(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],180:[function(g,x,b){var h=g("../internals/export"),d=g("../internals/fails"),i=g("../internals/to-object"),f=g("../internals/object-get-prototype-of"),g=g("../internals/correct-prototype-getter");h({target:"Object",stat:!0,forced:d(function(){f(1)}),sham:!g},{getPrototypeOf:function(m){return f(i(m))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],181:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/to-object"),i=t("../internals/object-keys");h({target:"Object",stat:!0,forced:t("../internals/fails")(function(){i(1)})},{keys:function(f){return i(d(f))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],182:[function(i,x,b){var h=i("../internals/to-string-tag-support"),d=i("../internals/redefine"),i=i("../internals/object-to-string");h||d(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],183:[function(Le,x,b){var h,d,i,f,g=Le("../internals/export"),m=Le("../internals/is-pure"),n=Le("../internals/global"),s=Le("../internals/get-built-in"),l=Le("../internals/native-promise-constructor"),c=Le("../internals/redefine"),a=Le("../internals/redefine-all"),u=Le("../internals/set-to-string-tag"),y=Le("../internals/set-species"),p=Le("../internals/is-object"),v=Le("../internals/a-function"),w=Le("../internals/an-instance"),C=Le("../internals/classof-raw"),T=Le("../internals/inspect-source"),j=Le("../internals/iterate"),A=Le("../internals/check-correctness-of-iteration"),L=Le("../internals/species-constructor"),M=Le("../internals/task").set,k=Le("../internals/microtask"),O=Le("../internals/promise-resolve"),N=Le("../internals/host-report-errors"),U=Le("../internals/new-promise-capability"),V=Le("../internals/perform"),G=Le("../internals/internal-state"),z=Le("../internals/is-forced"),Je=Le("../internals/well-known-symbol"),W=Le("../internals/engine-v8-version"),Z=Je("species"),I="Promise",q=G.get,D=G.set,F=G.getterFor(I),H=l,Y=n.TypeError,te=n.document,ie=n.process,de=s("fetch"),_e=U.f,le=_e,re=C(ie)=="process",pe=!!(te&&te.createEvent&&n.dispatchEvent),Q="unhandledrejection",ce="rejectionhandled",be=1,Re=2,xe=1,Te=2,Le=z(I,function(){var Ie,Me;return T(H)===String(H)&&(W===66||!re&&typeof PromiseRejectionEvent!="function")?!0:!(!m||H.prototype.finally)||!(51<=W&&/native code/.test(H))&&(Me=function(J){J(function(){},function(){})},((Ie=H.resolve(1)).constructor={})[Z]=Me,!(Ie.then(function(){})instanceof Me))}),Je=Le||!A(function(Ie){H.all(Ie).catch(function(){})}),ke=function(Ie){var Me;return!(!p(Ie)||typeof(Me=Ie.then)!="function")&&Me},ue=function(Ie,Me,J){var ee;Me.notified||(Me.notified=!0,ee=Me.reactions,k(function(){for(var K,ne,me=Me.value,Ee=Me.state==be,De=0;ee.length>De;){var $e,ge,ze,je=ee[De++],Ze=Ee?je.ok:je.fail,Ke=je.resolve,rt=je.reject,lt=je.domain;try{Ze?(Ee||(Me.rejection===Te&&function(at,Et){M.call(n,function(){re?ie.emit("rejectionHandled",at):oe(ce,at,Et.value)})}(Ie,Me),Me.rejection=xe),Ze===!0?$e=me:(lt&&lt.enter(),$e=Ze(me),lt&&(lt.exit(),ze=!0)),$e===je.promise?rt(Y("Promise-chain cycle")):(ge=ke($e))?ge.call($e,Ke,rt):Ke($e)):rt(me)}catch(at){lt&&!ze&&lt.exit(),rt(at)}}Me.reactions=[],Me.notified=!1,J&&!Me.rejection&&(K=Ie,ne=Me,M.call(n,function(){var at=ne.value,Et=Ce(ne);if(Et&&(Et=V(function(){re?ie.emit("unhandledRejection",at,K):oe(Q,K,at)}),ne.rejection=re||Ce(ne)?Te:xe,Et.error))throw Et.value}))}))},oe=function(Ie,Me,J){var ee;pe?((ee=te.createEvent("Event")).promise=Me,ee.reason=J,ee.initEvent(Ie,!1,!0),n.dispatchEvent(ee)):ee={promise:Me,reason:J},(Me=n["on"+Ie])?Me(ee):Ie===Q&&N("Unhandled promise rejection",J)},Ce=function(Ie){return Ie.rejection!==xe&&!Ie.parent},He=function(Ie,Me,J,ee){return function(K){Ie(Me,J,K,ee)}},Ge=function(Ie,Me,J,ee){Me.done||(Me.done=!0,(Me=ee||Me).value=J,Me.state=Re,ue(Ie,Me,!0))},ve=function(Ie,Me,J,ee){if(!Me.done){Me.done=!0,ee&&(Me=ee);try{if(Ie===J)throw Y("Promise can't be resolved itself");var K=ke(J);K?k(function(){var ne={done:!1};try{K.call(J,He(ve,Ie,ne,Me),He(Ge,Ie,ne,Me))}catch(me){Ge(Ie,ne,me,Me)}}):(Me.value=J,Me.state=be,ue(Ie,Me,!1))}catch(ne){Ge(Ie,{done:!1},ne,Me)}}};Le&&(H=function(Ie){w(this,H,I),v(Ie),h.call(this);var Me=q(this);try{Ie(He(ve,this,Me),He(Ge,this,Me))}catch(J){Ge(this,Me,J)}},(h=function(Ie){D(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=a(H.prototype,{then:function(Ie,Me){var J=F(this),ee=_e(L(this,H));return ee.ok=typeof Ie!="function"||Ie,ee.fail=typeof Me=="function"&&Me,ee.domain=re?ie.domain:void 0,J.parent=!0,J.reactions.push(ee),J.state!=0&&ue(this,J,!1),ee.promise},catch:function(Ie){return this.then(void 0,Ie)}}),d=function(){var Ie=new h,Me=q(Ie);this.promise=Ie,this.resolve=He(ve,Ie,Me),this.reject=He(Ge,Ie,Me)},U.f=_e=function(Ie){return Ie===H||Ie===i?new d:le(Ie)},m||typeof l!="function"||(f=l.prototype.then,c(l.prototype,"then",function(Ie,Me){var J=this;return new H(function(ee,K){f.call(J,ee,K)}).then(Ie,Me)},{unsafe:!0}),typeof de=="function"&&g({global:!0,enumerable:!0,forced:!0},{fetch:function(Ie){return O(H,de.apply(n,arguments))}}))),g({global:!0,wrap:!0,forced:Le},{Promise:H}),u(H,I,!1,!0),y(I),i=s(I),g({target:I,stat:!0,forced:Le},{reject:function(Ie){var Me=_e(this);return Me.reject.call(void 0,Ie),Me.promise}}),g({target:I,stat:!0,forced:m||Le},{resolve:function(Ie){return O(m&&this===i?H:this,Ie)}}),g({target:I,stat:!0,forced:Je},{all:function(Ie){var Me=this,J=_e(Me),ee=J.resolve,K=J.reject,ne=V(function(){var me=v(Me.resolve),Ee=[],De=0,$e=1;j(Ie,function(ge){var ze=De++,je=!1;Ee.push(void 0),$e++,me.call(Me,ge).then(function(Ze){je||(je=!0,Ee[ze]=Ze,--$e||ee(Ee))},K)}),--$e||ee(Ee)});return ne.error&&K(ne.value),J.promise},race:function(Ie){var Me=this,J=_e(Me),ee=J.reject,K=V(function(){var ne=v(Me.resolve);j(Ie,function(me){ne.call(Me,me).then(J.resolve,ee)})});return K.error&&ee(K.value),J.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],184:[function(n,x,b){var h=n("../internals/export"),a=n("../internals/get-built-in"),d=n("../internals/a-function"),i=n("../internals/an-object"),f=n("../internals/is-object"),g=n("../internals/object-create"),m=n("../internals/function-bind"),n=n("../internals/fails"),s=a("Reflect","construct"),l=n(function(){function u(){}return!(s(function(){},[],u)instanceof u)}),c=!n(function(){s(function(){})}),a=l||c;h({target:"Reflect",stat:!0,forced:a,sham:a},{construct:function(u,y){d(u),i(y);var p=arguments.length<3?u:d(arguments[2]);if(c&&!l)return s(u,y,p);if(u==p){switch(y.length){case 0:return new u;case 1:return new u(y[0]);case 2:return new u(y[0],y[1]);case 3:return new u(y[0],y[1],y[2]);case 4:return new u(y[0],y[1],y[2],y[3])}var v=[null];return v.push.apply(v,y),new(m.apply(u,v))}return v=p.prototype,p=g(f(v)?v:Object.prototype),v=Function.apply.call(u,p,y),f(v)?v:p}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],185:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/is-object"),i=t("../internals/an-object"),f=t("../internals/has"),g=t("../internals/object-get-own-property-descriptor"),m=t("../internals/object-get-prototype-of");h({target:"Reflect",stat:!0},{get:function n(s,l){var c,a=arguments.length<3?s:arguments[2];return i(s)===a?s[l]:(c=g.f(s,l))?f(c,"value")?c.value:c.get===void 0?void 0:c.get.call(a):d(c=m(s))?n(c,l,a):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],186:[function(t,x,b){var h=t("../internals/descriptors"),d=t("../internals/global"),i=t("../internals/is-forced"),f=t("../internals/inherit-if-required"),g=t("../internals/object-define-property").f,m=t("../internals/object-get-own-property-names").f,n=t("../internals/is-regexp"),s=t("../internals/regexp-flags"),l=t("../internals/regexp-sticky-helpers"),c=t("../internals/redefine"),a=t("../internals/fails"),u=t("../internals/internal-state").set,y=t("../internals/set-species"),p=t("../internals/well-known-symbol")("match"),v=d.RegExp,w=v.prototype,C=/a/g,T=/a/g,j=new v(C)!==C,A=l.UNSUPPORTED_Y;if(h&&i("RegExp",!j||A||a(function(){return T[p]=!1,v(C)!=C||v(T)==T||v(C,"i")!="/a/i"}))){for(var L=function(O,N){var U,V=this instanceof L,G=n(O),z=N===void 0;return!V&&G&&O.constructor===L&&z?O:(j?G&&!z&&(O=O.source):O instanceof L&&(z&&(N=s.call(O)),O=O.source),A&&(U=!!N&&-1<N.indexOf("y"))&&(N=N.replace(/y/g,"")),G=f(j?new v(O,N):v(O,N),V?this:w,L),A&&U&&u(G,{sticky:U}),G)},M=m(v),k=0;M.length>k;)(function(O){O in L||g(L,O,{configurable:!0,get:function(){return v[O]},set:function(N){v[O]=N}})})(M[k++]);(w.constructor=L).prototype=w,c(d,"RegExp",L)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],187:[function(d,x,b){var h=d("../internals/export"),d=d("../internals/regexp-exec");h({target:"RegExp",proto:!0,forced:/./.exec!==d},{exec:d})},{"../internals/export":50,"../internals/regexp-exec":110}],188:[function(f,x,b){var h=f("../internals/redefine"),d=f("../internals/an-object"),n=f("../internals/fails"),i=f("../internals/regexp-flags"),f="toString",g=RegExp.prototype,m=g[f],n=n(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),s=m.name!=f;(n||s)&&h(RegExp.prototype,f,function(){var l=d(this),c=String(l.source),a=l.flags;return"/"+c+"/"+String(a===void 0&&l instanceof RegExp&&!("flags"in g)?i.call(l):a)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],189:[function(d,x,b){var h=d("../internals/collection"),d=d("../internals/collection-strong");x.exports=h("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},d)},{"../internals/collection":32,"../internals/collection-strong":30}],190:[function(m,x,b){var h=m("../internals/export"),d=m("../internals/object-get-own-property-descriptor").f,i=m("../internals/to-length"),f=m("../internals/not-a-regexp"),g=m("../internals/require-object-coercible"),l=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),n="".endsWith,s=Math.min,l=l("endsWith");h({target:"String",proto:!0,forced:!!(m||l||!(h=d(String.prototype,"endsWith"))||h.writable)&&!l},{endsWith:function(c){var a=String(g(this)),u=(f(c),1<arguments.length?arguments[1]:void 0),y=i(a.length),u=u===void 0?y:s(i(u),y),y=String(c);return n?n.call(a,y,u):a.slice(u-y.length,u)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],191:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/not-a-regexp"),i=t("../internals/require-object-coercible");h({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(f){return!!~String(i(this)).indexOf(d(f),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],192:[function(i,x,b){var h=i("../internals/string-multibyte").charAt,d=i("../internals/internal-state"),i=i("../internals/define-iterator"),f="String Iterator",g=d.set,m=d.getterFor(f);i(String,"String",function(n){g(this,{type:f,string:String(n),index:0})},function(){var n=m(this),s=n.string,l=n.index;return l>=s.length?{value:void 0,done:!0}:(s=h(s,l),n.index+=s.length,{value:s,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],193:[function(t,x,b){var h=t("../internals/fix-regexp-well-known-symbol-logic"),d=t("../internals/an-object"),i=t("../internals/to-length"),f=t("../internals/require-object-coercible"),g=t("../internals/advance-string-index"),m=t("../internals/regexp-exec-abstract");h("match",1,function(n,s,l){return[function(c){var a=f(this),u=c==null?void 0:c[n];return u!==void 0?u.call(c,a):new RegExp(c)[n](String(a))},function(c){var a=l(s,c,this);if(a.done)return a.value;var u=d(c),y=String(this);if(!u.global)return m(u,y);for(var p=u.unicode,v=[],w=u.lastIndex=0;(C=m(u,y))!==null;){var C=String(C[0]);(v[w]=C)===""&&(u.lastIndex=g(y,i(u.lastIndex),p)),w++}return w===0?null:v}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],194:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/string-pad").start;h({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(i){return d(this,i,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],195:[function(t,x,b){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],196:[function(t,x,b){var h=t("../internals/fix-regexp-well-known-symbol-logic"),d=t("../internals/an-object"),i=t("../internals/to-object"),f=t("../internals/to-length"),g=t("../internals/to-integer"),m=t("../internals/require-object-coercible"),n=t("../internals/advance-string-index"),s=t("../internals/regexp-exec-abstract"),l=Math.max,c=Math.min,a=Math.floor,u=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;h("replace",2,function(p,v,w,C){var T=C.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,j=C.REPLACE_KEEPS_$0,A=T?"$":"$0";return[function(L,M){var k=m(this),O=L==null?void 0:L[p];return O!==void 0?O.call(L,k,M):v.call(String(k),L,M)},function(L,M){if(!T&&j||typeof M=="string"&&M.indexOf(A)===-1){var k=w(v,L,this,M);if(k.done)return k.value}for(var O,N=d(L),U=String(this),V=typeof M=="function",G=(V||(M=String(M)),N.global),z=(G&&(O=N.unicode,N.lastIndex=0),[]);(D=s(N,U))!==null&&(z.push(D),G);)String(D[0])===""&&(N.lastIndex=n(U,f(N.lastIndex),O));for(var W,Z="",I=0,q=0;q<z.length;q++){for(var D=z[q],F=String(D[0]),H=l(c(g(D.index),U.length),0),Y=[],te=1;te<D.length;te++)Y.push((W=D[te])===void 0?W:String(W));var ie=D.groups,de=V?(de=[F].concat(Y,H,U),ie!==void 0&&de.push(ie),String(M.apply(void 0,de))):function(_e,le,re,pe,Q,ce){var be=re+_e.length,Re=pe.length,xe=y;return Q!==void 0&&(Q=i(Q),xe=u),v.call(ce,xe,function(Te,Le){var Je;switch(Le.charAt(0)){case"$":return"$";case"&":return _e;case"`":return le.slice(0,re);case"'":return le.slice(be);case"<":Je=Q[Le.slice(1,-1)];break;default:var ke,ue=+Le;if(ue==0)return Te;if(Re<ue)return(ke=a(ue/10))!==0&&ke<=Re?pe[ke-1]===void 0?Le.charAt(1):pe[ke-1]+Le.charAt(1):Te;Je=pe[ue-1]}return Je===void 0?"":Je})}(F,U,H,Y,ie,M);I<=H&&(Z+=U.slice(I,H)+de,I=H+F.length)}return Z+U.slice(I)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],197:[function(t,x,b){var h=t("../internals/fix-regexp-well-known-symbol-logic"),d=t("../internals/an-object"),i=t("../internals/require-object-coercible"),f=t("../internals/same-value"),g=t("../internals/regexp-exec-abstract");h("search",1,function(m,n,s){return[function(l){var c=i(this),a=l==null?void 0:l[m];return a!==void 0?a.call(l,c):new RegExp(l)[m](String(c))},function(l){var c,a=s(n,l,this);return a.done?a.value:(a=d(l),l=String(this),c=a.lastIndex,f(c,0)||(a.lastIndex=0),l=g(a,l),f(a.lastIndex,c)||(a.lastIndex=c),l===null?-1:l.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],198:[function(c,x,b){var h=c("../internals/fix-regexp-well-known-symbol-logic"),d=c("../internals/is-regexp"),i=c("../internals/an-object"),f=c("../internals/require-object-coercible"),g=c("../internals/species-constructor"),m=c("../internals/advance-string-index"),n=c("../internals/to-length"),s=c("../internals/regexp-exec-abstract"),l=c("../internals/regexp-exec"),c=c("../internals/fails"),a=[].push,u=Math.min,y=4294967295,p=!c(function(){return!RegExp(y,"y")});h("split",2,function(v,w,C){var T="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(j,A){var L=String(f(this)),M=A===void 0?y:A>>>0;if(M==0)return[];if(j===void 0)return[L];if(!d(j))return w.call(L,j,M);for(var k,O,N,U=[],A=(j.ignoreCase?"i":"")+(j.multiline?"m":"")+(j.unicode?"u":"")+(j.sticky?"y":""),V=0,G=new RegExp(j.source,A+"g");(k=l.call(G,L))&&!(V<(O=G.lastIndex)&&(U.push(L.slice(V,k.index)),1<k.length&&k.index<L.length&&a.apply(U,k.slice(1)),N=k[0].length,V=O,U.length>=M));)G.lastIndex===k.index&&G.lastIndex++;return V===L.length?!N&&G.test("")||U.push(""):U.push(L.slice(V)),U.length>M?U.slice(0,M):U}:"0".split(void 0,0).length?function(j,A){return j===void 0&&A===0?[]:w.call(this,j,A)}:w;return[function(j,A){var L=f(this),M=j==null?void 0:j[v];return M!==void 0?M.call(j,L,A):T.call(String(L),j,A)},function(k,A){var L=C(T,k,this,A,T!==w);if(L.done)return L.value;var L=i(k),M=String(this),k=g(L,RegExp),O=L.unicode,N=(L.ignoreCase?"i":"")+(L.multiline?"m":"")+(L.unicode?"u":"")+(p?"y":"g"),U=new k(p?L:"^(?:"+L.source+")",N),V=A===void 0?y:A>>>0;if(V==0)return[];if(M.length===0)return s(U,M)===null?[M]:[];for(var G=0,z=0,W=[];z<M.length;){U.lastIndex=p?z:0;var Z,I=s(U,p?M:M.slice(z));if(I===null||(Z=u(n(U.lastIndex+(p?0:z)),M.length))===G)z=m(M,z,O);else{if(W.push(M.slice(G,z)),W.length===V)return W;for(var q=1;q<=I.length-1;q++)if(W.push(I[q]),W.length===V)return W;z=G=Z}}return W.push(M.slice(G)),W}]},!p)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],199:[function(m,x,b){var h=m("../internals/export"),d=m("../internals/object-get-own-property-descriptor").f,i=m("../internals/to-length"),f=m("../internals/not-a-regexp"),g=m("../internals/require-object-coercible"),l=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),n="".startsWith,s=Math.min,l=l("startsWith");h({target:"String",proto:!0,forced:!!(m||l||!(h=d(String.prototype,"startsWith"))||h.writable)&&!l},{startsWith:function(y){var a=String(g(this)),u=(f(y),i(s(1<arguments.length?arguments[1]:void 0,a.length))),y=String(y);return n?n.call(a,y,u):a.slice(u,u+y.length)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],200:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/create-html");h({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return d(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],201:[function(t,x,b){var h=t("../internals/export"),d=t("../internals/string-trim").trim;h({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return d(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],202:[function(u,x,b){var h,d,i,f,g,m=u("../internals/export"),n=u("../internals/descriptors"),s=u("../internals/global"),l=u("../internals/has"),c=u("../internals/is-object"),a=u("../internals/object-define-property").f,u=u("../internals/copy-constructor-properties"),y=s.Symbol;!n||typeof y!="function"||"description"in y.prototype&&y().description===void 0||(h={},u(d=function(){var p=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),v=this instanceof d?new y(p):p===void 0?y():y(p);return p===""&&(h[v]=!0),v},y),(s=d.prototype=y.prototype).constructor=d,i=s.toString,f=String(y("test"))=="Symbol(test)",g=/^Symbol\((.*)\)[^)]+$/,a(s,"description",{configurable:!0,get:function(){var p=c(this)?this.valueOf():this,v=i.call(p);return l(h,p)?"":(p=f?v.slice(7,-1):v.replace(g,"$1"))===""?void 0:p}}),m({global:!0,forced:!0},{Symbol:d}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],203:[function(t,x,b){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],204:[function(le,x,b){function h(K,ne){var me=Je[K]=L(ce[_e]);return re(me,{type:de,tag:K,description:ne}),l||(me.description=ne),me}function d(K,Ee){w(K);var me=T(Ee),Ee=M(me).concat(ee(me));return te(Ee,function(De){l&&!J.call(me,De)||Me(K,De,me[De])}),K}function i(Ee,De){var me,Ee=T(Ee),De=j(De,!0);if(Ee!==Q||!y(Je,De)||y(ke,De))return!(me=Re(Ee,De))||!y(Je,De)||y(Ee,ie)&&Ee[ie][De]||(me.enumerable=!0),me}function f(ne){var ne=Te(T(ne)),me=[];return te(ne,function(Ee){y(Je,Ee)||y(I,Ee)||me.push(Ee)}),me}var g=le("../internals/export"),m=le("../internals/global"),n=le("../internals/get-built-in"),s=le("../internals/is-pure"),l=le("../internals/descriptors"),c=le("../internals/native-symbol"),a=le("../internals/use-symbol-as-uid"),u=le("../internals/fails"),y=le("../internals/has"),p=le("../internals/is-array"),v=le("../internals/is-object"),w=le("../internals/an-object"),C=le("../internals/to-object"),T=le("../internals/to-indexed-object"),j=le("../internals/to-primitive"),A=le("../internals/create-property-descriptor"),L=le("../internals/object-create"),M=le("../internals/object-keys"),k=le("../internals/object-get-own-property-names"),O=le("../internals/object-get-own-property-names-external"),N=le("../internals/object-get-own-property-symbols"),U=le("../internals/object-get-own-property-descriptor"),V=le("../internals/object-define-property"),G=le("../internals/object-property-is-enumerable"),z=le("../internals/create-non-enumerable-property"),W=le("../internals/redefine"),Z=le("../internals/shared"),Ce=le("../internals/shared-key"),I=le("../internals/hidden-keys"),q=le("../internals/uid"),D=le("../internals/well-known-symbol"),F=le("../internals/well-known-symbol-wrapped"),H=le("../internals/define-well-known-symbol"),Y=le("../internals/set-to-string-tag"),He=le("../internals/internal-state"),te=le("../internals/array-iteration").forEach,ie=Ce("hidden"),de="Symbol",_e="prototype",le=D("toPrimitive"),re=He.set,pe=He.getterFor(de),Q=Object[_e],ce=m.Symbol,be=n("JSON","stringify"),Re=U.f,xe=V.f,Te=O.f,Le=G.f,Je=Z("symbols"),ke=Z("op-symbols"),ue=Z("string-to-symbol-registry"),oe=Z("symbol-to-string-registry"),Ce=Z("wks"),He=m.QObject,Ge=!He||!He[_e]||!He[_e].findChild,ve=l&&u(function(){return L(xe({},"a",{get:function(){return xe(this,"a",{value:7}).a}})).a!=7})?function(K,ne,me){var Ee=Re(Q,ne);Ee&&delete Q[ne],xe(K,ne,me),Ee&&K!==Q&&xe(Q,ne,Ee)}:xe,Ie=a?function(K){return typeof K=="symbol"}:function(K){return Object(K)instanceof ce},Me=function(K,ne,me){return K===Q&&Me(ke,ne,me),w(K),ne=j(ne,!0),w(me),(y(Je,ne)?(me.enumerable?(y(K,ie)&&K[ie][ne]&&(K[ie][ne]=!1),me=L(me,{enumerable:A(0,!1)})):(y(K,ie)||xe(K,ie,A(1,{})),K[ie][ne]=!0),ve):xe)(K,ne,me)},J=function(ne){var ne=j(ne,!0),me=Le.call(this,ne);return!(this===Q&&y(Je,ne)&&!y(ke,ne))&&(!(me||!y(this,ne)||!y(Je,ne)||y(this,ie)&&this[ie][ne])||me)},ee=function(me){var ne=me===Q,me=Te(ne?ke:T(me)),Ee=[];return te(me,function(De){!y(Je,De)||ne&&!y(Q,De)||Ee.push(Je[De])}),Ee};c||(W((ce=function(){if(this instanceof ce)throw TypeError("Symbol is not a constructor");var K=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,ne=q(K),me=function(Ee){this===Q&&me.call(ke,Ee),y(this,ie)&&y(this[ie],ne)&&(this[ie][ne]=!1),ve(this,ne,A(1,Ee))};return l&&Ge&&ve(Q,ne,{configurable:!0,set:me}),h(ne,K)})[_e],"toString",function(){return pe(this).tag}),W(ce,"withoutSetter",function(K){return h(q(K),K)}),G.f=J,V.f=Me,U.f=i,k.f=O.f=f,N.f=ee,F.f=function(K){return h(D(K),K)},l&&(xe(ce[_e],"description",{configurable:!0,get:function(){return pe(this).description}}),s||W(Q,"propertyIsEnumerable",J,{unsafe:!0}))),g({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:ce}),te(M(Ce),function(K){H(K)}),g({target:de,stat:!0,forced:!c},{for:function(me){var ne,me=String(me);return y(ue,me)?ue[me]:(ne=ce(me),ue[me]=ne,oe[ne]=me,ne)},keyFor:function(K){if(!Ie(K))throw TypeError(K+" is not a symbol");if(y(oe,K))return oe[K]},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),g({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(K,ne){return ne===void 0?L(K):d(L(K),ne)},defineProperty:Me,defineProperties:d,getOwnPropertyDescriptor:i}),g({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:f,getOwnPropertySymbols:ee}),g({target:"Object",stat:!0,forced:u(function(){N.f(1)})},{getOwnPropertySymbols:function(K){return N.f(C(K))}}),be&&g({target:"JSON",stat:!0,forced:!c||u(function(){var K=ce();return be([K])!="[null]"||be({a:K})!="{}"||be(Object(K))!="{}"})},{stringify:function(K,ne,me){for(var Ee,De=[K],$e=1;$e<arguments.length;)De.push(arguments[$e++]);if((v(Ee=ne)||K!==void 0)&&!Ie(K))return p(ne)||(ne=function(ge,ze){if(typeof Ee=="function"&&(ze=Ee.call(this,ge,ze)),!Ie(ze))return ze}),De[1]=ne,be.apply(null,De)}}),ce[_e][le]||z(ce[_e],le,ce[_e].valueOf),Y(ce,de),I[ie]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],205:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-copy-within"),i=h.aTypedArray;(0,h.exportTypedArrayMethod)("copyWithin",function(f,g){return d.call(i(this),f,g,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],206:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").every,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("every",function(f){return d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],207:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-fill"),i=h.aTypedArray;(0,h.exportTypedArrayMethod)("fill",function(f){return d.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],208:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").filter,i=t("../internals/species-constructor"),f=h.aTypedArray,g=h.aTypedArrayConstructor;(0,h.exportTypedArrayMethod)("filter",function(m){for(var n=d(f(this),m,1<arguments.length?arguments[1]:void 0),m=i(this,this.constructor),s=0,l=n.length,c=new(g(m))(l);s<l;)c[s]=n[s++];return c})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],209:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").findIndex,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("findIndex",function(f){return d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],210:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").find,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("find",function(f){return d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],211:[function(t,x,b){t("../internals/typed-array-constructor")("Float32",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],212:[function(t,x,b){t("../internals/typed-array-constructor")("Float64",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],213:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").forEach,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("forEach",function(f){d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],214:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-includes").includes,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("includes",function(f){return d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],215:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-includes").indexOf,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("indexOf",function(f){return d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],216:[function(t,x,b){t("../internals/typed-array-constructor")("Int16",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],217:[function(t,x,b){t("../internals/typed-array-constructor")("Int32",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],218:[function(d,x,b){function h(){return i.call(m(this))}var l=d("../internals/global"),s=d("../internals/array-buffer-view-core"),n=d("../modules/es.array.iterator"),d=d("../internals/well-known-symbol")("iterator"),l=l.Uint8Array,i=n.values,f=n.keys,g=n.entries,m=s.aTypedArray,n=s.exportTypedArrayMethod,s=l&&l.prototype[d],l=!!s&&(s.name=="values"||s.name==null);n("entries",function(){return g.call(m(this))}),n("keys",function(){return f.call(m(this))}),n("values",h,!l),n(d,h,!l)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],219:[function(d,x,b){var d=d("../internals/array-buffer-view-core"),h=d.aTypedArray,d=d.exportTypedArrayMethod,i=[].join;d("join",function(f){return i.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12}],220:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-last-index-of"),i=h.aTypedArray;(0,h.exportTypedArrayMethod)("lastIndexOf",function(f){return d.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],221:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").map,i=t("../internals/species-constructor"),f=h.aTypedArray,g=h.aTypedArrayConstructor;(0,h.exportTypedArrayMethod)("map",function(m){return d(f(this),m,1<arguments.length?arguments[1]:void 0,function(n,s){return new(g(i(n,n.constructor)))(s)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],222:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-reduce").right,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("reduceRight",function(f){return d(i(this),f,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],223:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-reduce").left,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("reduce",function(f){return d(i(this),f,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],224:[function(d,x,b){var d=d("../internals/array-buffer-view-core"),h=d.aTypedArray,d=d.exportTypedArrayMethod,i=Math.floor;d("reverse",function(){for(var f,g=h(this).length,m=i(g/2),n=0;n<m;)f=this[n],this[n++]=this[--g],this[g]=f;return this})},{"../internals/array-buffer-view-core":12}],225:[function(g,x,b){var h=g("../internals/array-buffer-view-core"),d=g("../internals/to-length"),i=g("../internals/to-offset"),f=g("../internals/to-object"),g=g("../internals/fails"),m=h.aTypedArray;(0,h.exportTypedArrayMethod)("set",function(n){m(this);var s=i(1<arguments.length?arguments[1]:void 0,1),l=this.length,c=f(n),a=d(c.length),u=0;if(l<a+s)throw RangeError("Wrong length");for(;u<a;)this[s+u]=c[u++]},g(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],226:[function(d,x,b){var g=d("../internals/array-buffer-view-core"),h=d("../internals/species-constructor"),d=d("../internals/fails"),i=g.aTypedArray,f=g.aTypedArrayConstructor,g=g.exportTypedArrayMethod,m=[].slice;g("slice",function(n,s){for(var l=m.call(i(this),n,s),n=h(this,this.constructor),c=0,a=l.length,u=new(f(n))(a);c<a;)u[c]=l[c++];return u},d(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],227:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/array-iteration").some,i=h.aTypedArray;(0,h.exportTypedArrayMethod)("some",function(f){return d(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],228:[function(d,x,b){var d=d("../internals/array-buffer-view-core"),h=d.aTypedArray,d=d.exportTypedArrayMethod,i=[].sort;d("sort",function(f){return i.call(h(this),f)})},{"../internals/array-buffer-view-core":12}],229:[function(t,x,b){var h=t("../internals/array-buffer-view-core"),d=t("../internals/to-length"),i=t("../internals/to-absolute-index"),f=t("../internals/species-constructor"),g=h.aTypedArray;(0,h.exportTypedArrayMethod)("subarray",function(c,n){var s=g(this),l=s.length,c=i(c,l);return new(f(s,s.constructor))(s.buffer,s.byteOffset+c*s.BYTES_PER_ELEMENT,d((n===void 0?l:i(n,l))-c))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],230:[function(d,x,b){var g=d("../internals/global"),h=d("../internals/array-buffer-view-core"),d=d("../internals/fails"),i=g.Int8Array,f=h.aTypedArray,g=h.exportTypedArrayMethod,m=[].toLocaleString,n=[].slice,s=!!i&&d(function(){m.call(new i(1))});g("toLocaleString",function(){return m.apply(s?n.call(f(this)):f(this),arguments)},d(function(){return[1,2].toLocaleString()!=new i([1,2]).toLocaleString()})||!d(function(){i.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],231:[function(d,x,b){var h=d("../internals/array-buffer-view-core").exportTypedArrayMethod,g=d("../internals/fails"),d=d("../internals/global").Uint8Array,d=d&&d.prototype||{},i=[].toString,f=[].join,g=(g(function(){i.call({})})&&(i=function(){return f.call(this)}),d.toString!=i);h("toString",i,g)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],232:[function(t,x,b){t("../internals/typed-array-constructor")("Uint16",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],233:[function(t,x,b){t("../internals/typed-array-constructor")("Uint32",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],234:[function(t,x,b){t("../internals/typed-array-constructor")("Uint8",function(h){return function(d,i,f){return h(this,d,i,f)}})},{"../internals/typed-array-constructor":142}],235:[function(t,x,b){t("../internals/typed-array-constructor")("Uint8",function(h){return function(d,i,f){return h(this,d,i,f)}},!0)},{"../internals/typed-array-constructor":142}],236:[function(y,w,b){function h(C){return function(){return C(this,arguments.length?arguments[0]:void 0)}}var d,i,f,g,m,p=y("../internals/global"),n=y("../internals/redefine-all"),s=y("../internals/internal-metadata"),l=y("../internals/collection"),c=y("../internals/collection-weak"),a=y("../internals/is-object"),u=y("../internals/internal-state").enforce,y=y("../internals/native-weak-map"),p=!p.ActiveXObject&&"ActiveXObject"in p,v=Object.isExtensible,w=w.exports=l("WeakMap",h,c);y&&p&&(d=c.getConstructor(h,"WeakMap",!0),s.REQUIRED=!0,l=w.prototype,i=l.delete,f=l.has,g=l.get,m=l.set,n(l,{delete:function(C){var T;return a(C)&&!v(C)?((T=u(this)).frozen||(T.frozen=new d),i.call(this,C)||T.frozen.delete(C)):i.call(this,C)},has:function(C){var T;return a(C)&&!v(C)?((T=u(this)).frozen||(T.frozen=new d),f.call(this,C)||T.frozen.has(C)):f.call(this,C)},get:function(C){var T;return!a(C)||v(C)||((T=u(this)).frozen||(T.frozen=new d),f.call(this,C))?g.call(this,C):T.frozen.get(C)},set:function(C,T){var j;return!a(C)||v(C)||((j=u(this)).frozen||(j.frozen=new d),f.call(this,C))?m.call(this,C,T):j.frozen.set(C,T),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],237:[function(t,x,b){var h,d=t("../internals/global"),i=t("../internals/dom-iterables"),f=t("../internals/array-for-each"),g=t("../internals/create-non-enumerable-property");for(h in i){var m=d[h],m=m&&m.prototype;if(m&&m.forEach!==f)try{g(m,"forEach",f)}catch{m.forEach=f}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],238:[function(m,x,b){var h,d=m("../internals/global"),i=m("../internals/dom-iterables"),f=m("../modules/es.array.iterator"),g=m("../internals/create-non-enumerable-property"),m=m("../internals/well-known-symbol"),n=m("iterator"),s=m("toStringTag"),l=f.values;for(h in i){var c=d[h],a=c&&c.prototype;if(a){if(a[n]!==l)try{g(a,n,l)}catch{a[n]=l}if(a[s]||g(a,s,h),i[h]){for(var u in f)if(a[u]!==f[u])try{g(a,u,f[u])}catch{a[u]=f[u]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],239:[function(ie,x,b){ie("../modules/es.array.iterator");function h(de){try{return decodeURIComponent(de)}catch{return de}}function d(de){return H[de]}function i(de){return encodeURIComponent(de).replace(F,d)}function f(de){this.entries.length=0,Y(this.entries,de)}function g(de,_e){if(de<_e)throw TypeError("Not enough arguments")}function m(){p(this,m,V);var de,_e,le,re,pe,Q,ce,be,Re=0<arguments.length?arguments[0]:void 0,xe=[];if(z(this,{type:V,entries:xe,updateURL:function(){},updateSearchParams:f}),Re!==void 0)if(j(Re))if(typeof(de=k(Re))=="function")for(le=(_e=de.call(Re)).next;!(re=le.call(_e)).done;){if((Q=(pe=(re=M(T(re.value))).next).call(re)).done||(ce=pe.call(re)).done||!pe.call(re).done)throw TypeError("Expected sequence with length 2");xe.push({key:Q.value+"",value:ce.value+""})}else for(be in Re)v(Re,be)&&xe.push({key:be,value:Re[be]+""});else Y(xe,typeof Re=="string"?Re.charAt(0)==="?"?Re.slice(1):Re:Re+"")}var n=ie("../internals/export"),U=ie("../internals/get-built-in"),s=ie("../internals/native-url"),l=ie("../internals/redefine"),c=ie("../internals/redefine-all"),a=ie("../internals/set-to-string-tag"),u=ie("../internals/create-iterator-constructor"),y=ie("../internals/internal-state"),p=ie("../internals/an-instance"),v=ie("../internals/has"),w=ie("../internals/function-bind-context"),C=ie("../internals/classof"),T=ie("../internals/an-object"),j=ie("../internals/is-object"),A=ie("../internals/object-create"),L=ie("../internals/create-property-descriptor"),M=ie("../internals/get-iterator"),k=ie("../internals/get-iterator-method"),ie=ie("../internals/well-known-symbol"),O=U("fetch"),N=U("Headers"),U=ie("iterator"),V="URLSearchParams",G=V+"Iterator",z=y.set,W=y.getterFor(V),Z=y.getterFor(G),I=/\+/g,q=Array(4),D=function(de){var _e,le=de.replace(I," "),re=4;try{return decodeURIComponent(le)}catch{for(;re;)le=le.replace((_e=re--,q[_e-1]||(q[_e-1]=RegExp("((?:%[\\da-f]{2}){"+_e+"})","gi"))),h);return le}},F=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Y=function(de,_e){if(_e)for(var le,re=_e.split("&"),pe=0;pe<re.length;)(le=re[pe++]).length&&(le=le.split("="),de.push({key:D(le.shift()),value:D(le.join("="))}))},te=u(function(de,_e){z(this,{type:G,iterator:M(W(de).entries),kind:_e})},"Iterator",function(){var _e=Z(this),de=_e.kind,_e=_e.iterator.next(),le=_e.value;return _e.done||(_e.value=de==="keys"?le.key:de==="values"?le.value:[le.key,le.value]),_e}),ie=m.prototype;c(ie,{append:function(de,_e){g(arguments.length,2);var le=W(this);le.entries.push({key:de+"",value:_e+""}),le.updateURL()},delete:function(de){g(arguments.length,1);for(var _e=W(this),le=_e.entries,re=de+"",pe=0;pe<le.length;)le[pe].key===re?le.splice(pe,1):pe++;_e.updateURL()},get:function(de){g(arguments.length,1);for(var _e=W(this).entries,le=de+"",re=0;re<_e.length;re++)if(_e[re].key===le)return _e[re].value;return null},getAll:function(de){g(arguments.length,1);for(var _e=W(this).entries,le=de+"",re=[],pe=0;pe<_e.length;pe++)_e[pe].key===le&&re.push(_e[pe].value);return re},has:function(de){g(arguments.length,1);for(var _e=W(this).entries,le=de+"",re=0;re<_e.length;)if(_e[re++].key===le)return!0;return!1},set:function(de,_e){g(arguments.length,1);for(var le,re=W(this),pe=re.entries,Q=!1,ce=de+"",be=_e+"",Re=0;Re<pe.length;Re++)(le=pe[Re]).key===ce&&(Q?pe.splice(Re--,1):(Q=!0,le.value=be));Q||pe.push({key:ce,value:be}),re.updateURL()},sort:function(){for(var de,_e,le=W(this),re=le.entries,pe=re.slice(),Q=re.length=0;Q<pe.length;Q++){for(de=pe[Q],_e=0;_e<Q;_e++)if(re[_e].key>de.key){re.splice(_e,0,de);break}_e===Q&&re.push(de)}le.updateURL()},forEach:function(de){for(var _e,le=W(this).entries,re=w(de,1<arguments.length?arguments[1]:void 0,3),pe=0;pe<le.length;)re((_e=le[pe++]).value,_e.key,this)},keys:function(){return new te(this,"keys")},values:function(){return new te(this,"values")},entries:function(){return new te(this,"entries")}},{enumerable:!0}),l(ie,U,ie.entries),l(ie,"toString",function(){for(var de,_e=W(this).entries,le=[],re=0;re<_e.length;)de=_e[re++],le.push(i(de.key)+"="+i(de.value));return le.join("&")},{enumerable:!0}),a(m,V),n({global:!0,forced:!s},{URLSearchParams:m}),s||typeof O!="function"||typeof N!="function"||n({global:!0,enumerable:!0,forced:!0},{fetch:function(pe){var _e,le,re,pe=[pe];return 1<arguments.length&&(j(_e=arguments[1])&&(le=_e.body,C(le)===V&&((re=_e.headers?new N(_e.headers):new N).has("content-type")||re.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),_e=A(_e,{body:L(0,String(le)),headers:L(0,re)}))),pe.push(_e)),O.apply(this,pe)}}),x.exports={URLSearchParams:m,getState:W}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],240:[function(M,x,b){M("../modules/es.string.iterator");function h(ae){var we,Pe,Fe,nt;if(typeof ae=="number"){for(we=[],Pe=0;Pe<4;Pe++)we.unshift(ae%256),ae=G(ae/256);return we.join(".")}if(typeof ae!="object")return ae;for(we="",Fe=ce(ae),Pe=0;Pe<8;Pe++)nt&&ae[Pe]===0||(nt=nt&&!1,Fe===Pe?(we+=Pe?":":"::",nt=!0):(we+=ae[Pe].toString(16),Pe<7&&(we+=":")));return"["+we+"]"}function d(ae){return!ae.host||ae.cannotBeABaseURL||ae.scheme=="file"}function i(ae,we,Pe,Fe){var nt,Ve,it,tt=Pe||Ie,st=0,et="",pt=!1,yt=!1,Tt=!1;for(Pe||(ae.scheme="",ae.username="",ae.password="",ae.host=null,ae.port=null,ae.path=[],ae.query=null,ae.fragment=null,ae.cannotBeABaseURL=!1,we=we.replace(re,"")),we=we.replace(pe,""),nt=C(we);st<=nt.length;){switch(Ve=nt[st],tt){case Ie:if(!Ve||!D.test(Ve)){if(Pe)return Z;tt=J;continue}et+=Ve.toLowerCase(),tt=Me;break;case Me:if(Ve&&(F.test(Ve)||Ve=="+"||Ve=="-"||Ve=="."))et+=Ve.toLowerCase();else{if(Ve!=":"){if(Pe)return Z;et="",tt=J,st=0;continue}if(Pe&&(ke(ae)!=v(Je,et)||et=="file"&&(ue(ae)||ae.port!==null)||ae.scheme=="file"&&!ae.host))return;if(ae.scheme=et,Pe)return void(ke(ae)&&Je[ae.scheme]==ae.port&&(ae.port=null));et="",ae.scheme=="file"?tt=Ze:ke(ae)&&Fe&&Fe.scheme==ae.scheme?tt=ee:ke(ae)?tt=Ee:nt[st+1]=="/"?(tt=K,st++):(ae.cannotBeABaseURL=!0,ae.path.push(""),tt=Et)}break;case J:if(!Fe||Fe.cannotBeABaseURL&&Ve!="#")return Z;if(Fe.cannotBeABaseURL&&Ve=="#"){ae.scheme=Fe.scheme,ae.path=Fe.path.slice(),ae.query=Fe.query,ae.fragment="",ae.cannotBeABaseURL=!0,tt=At;break}tt=Fe.scheme=="file"?Ze:ne;continue;case ee:if(Ve!="/"||nt[st+1]!="/"){tt=ne;continue}tt=De,st++;break;case K:if(Ve=="/"){tt=$e;break}tt=at;continue;case ne:if(ae.scheme=Fe.scheme,Ve==m)ae.username=Fe.username,ae.password=Fe.password,ae.host=Fe.host,ae.port=Fe.port,ae.path=Fe.path.slice(),ae.query=Fe.query;else if(Ve=="/"||Ve=="\\"&&ke(ae))tt=me;else if(Ve=="?")ae.username=Fe.username,ae.password=Fe.password,ae.host=Fe.host,ae.port=Fe.port,ae.path=Fe.path.slice(),ae.query="",tt=_t;else{if(Ve!="#"){ae.username=Fe.username,ae.password=Fe.password,ae.host=Fe.host,ae.port=Fe.port,ae.path=Fe.path.slice(),ae.path.pop(),tt=at;continue}ae.username=Fe.username,ae.password=Fe.password,ae.host=Fe.host,ae.port=Fe.port,ae.path=Fe.path.slice(),ae.query=Fe.query,ae.fragment="",tt=At}break;case me:if(!ke(ae)||Ve!="/"&&Ve!="\\"){if(Ve!="/"){ae.username=Fe.username,ae.password=Fe.password,ae.host=Fe.host,ae.port=Fe.port,tt=at;continue}tt=$e}else tt=De;break;case Ee:if(tt=De,Ve!="/"||et.charAt(st+1)!="/")continue;st++;break;case De:if(Ve=="/"||Ve=="\\")break;tt=$e;continue;case $e:if(Ve=="@"){pt&&(et="%40"+et);for(var pt=!0,Pt=C(et),Ct=0;Ct<Pt.length;Ct++){var ft=Pt[Ct];ft!=":"||Tt?(ft=Le(ft,Te),Tt?ae.password+=ft:ae.username+=ft):Tt=!0}et=""}else if(Ve==m||Ve=="/"||Ve=="?"||Ve=="#"||Ve=="\\"&&ke(ae)){if(pt&&et=="")return W;st-=C(et).length+1,et="",tt=ge}else et+=Ve;break;case ge:case ze:if(Pe&&ae.scheme=="file"){tt=rt;continue}if(Ve!=":"||yt){if(Ve==m||Ve=="/"||Ve=="?"||Ve=="#"||Ve=="\\"&&ke(ae)){if(ke(ae)&&et=="")return I;if(Pe&&et==""&&(ue(ae)||ae.port!==null))return;if(it=Q(ae,et))return it;if(et="",tt=lt,Pe)return;continue}Ve=="["?yt=!0:Ve=="]"&&(yt=!1),et+=Ve}else{if(et=="")return I;if(it=Q(ae,et))return it;if(et="",tt=je,Pe==ze)return}break;case je:if(!H.test(Ve)){if(Ve==m||Ve=="/"||Ve=="?"||Ve=="#"||Ve=="\\"&&ke(ae)||Pe){if(et!=""){var hr=parseInt(et,10);if(65535<hr)return q;ae.port=ke(ae)&&hr===Je[ae.scheme]?null:hr,et=""}if(Pe)return;tt=lt;continue}return q}et+=Ve;break;case Ze:if(ae.scheme="file",Ve=="/"||Ve=="\\")tt=Ke;else{if(!Fe||Fe.scheme!="file"){tt=at;continue}if(Ve==m)ae.host=Fe.host,ae.path=Fe.path.slice(),ae.query=Fe.query;else if(Ve=="?")ae.host=Fe.host,ae.path=Fe.path.slice(),ae.query="",tt=_t;else{if(Ve!="#"){Ce(nt.slice(st).join(""))||(ae.host=Fe.host,ae.path=Fe.path.slice(),He(ae)),tt=at;continue}ae.host=Fe.host,ae.path=Fe.path.slice(),ae.query=Fe.query,ae.fragment="",tt=At}}break;case Ke:if(Ve=="/"||Ve=="\\"){tt=rt;break}Fe&&Fe.scheme=="file"&&!Ce(nt.slice(st).join(""))&&(oe(Fe.path[0],!0)?ae.path.push(Fe.path[0]):ae.host=Fe.host),tt=at;continue;case rt:if(Ve==m||Ve=="/"||Ve=="\\"||Ve=="?"||Ve=="#"){if(!Pe&&oe(et))tt=at;else{if(et==""){if(ae.host="",Pe)return}else{if(it=Q(ae,et))return it;if(ae.host=="localhost"&&(ae.host=""),Pe)return;et=""}tt=lt}continue}et+=Ve;break;case lt:if(ke(ae)){if(tt=at,Ve!="/"&&Ve!="\\")continue}else if(Pe||Ve!="?")if(Pe||Ve!="#"){if(Ve!=m&&(tt=at,Ve!="/"))continue}else ae.fragment="",tt=At;else ae.query="",tt=_t;break;case at:if(Ve==m||Ve=="/"||Ve=="\\"&&ke(ae)||!Pe&&(Ve=="?"||Ve=="#")){if(ve(et)?(He(ae),Ve=="/"||Ve=="\\"&&ke(ae)||ae.path.push("")):Ge(et)?Ve=="/"||Ve=="\\"&&ke(ae)||ae.path.push(""):(ae.scheme=="file"&&!ae.path.length&&oe(et)&&(ae.host&&(ae.host=""),et=et.charAt(0)+":"),ae.path.push(et)),et="",ae.scheme=="file"&&(Ve==m||Ve=="?"||Ve=="#"))for(;1<ae.path.length&&ae.path[0]==="";)ae.path.shift();Ve=="?"?(ae.query="",tt=_t):Ve=="#"&&(ae.fragment="",tt=At)}else et+=Le(Ve,xe);break;case Et:Ve=="?"?(ae.query="",tt=_t):Ve=="#"?(ae.fragment="",tt=At):Ve!=m&&(ae.path[0]+=Le(Ve,be));break;case _t:Pe||Ve!="#"?Ve!=m&&(Ve=="'"&&ke(ae)?ae.query+="%27":ae.query+=Ve=="#"?"%23":Le(Ve,be)):(ae.fragment="",tt=At);break;case At:Ve!=m&&(ae.fragment+=Le(Ve,Re))}st++}}function f(Ve){var we,Pe,Fe=p(this,f,"URL"),nt=1<arguments.length?arguments[1]:void 0,Ve=String(Ve),it=U(Fe,{type:"URL"});if(nt!==void 0){if(nt instanceof f)we=V(nt);else if(Pe=i(we={},String(nt)))throw TypeError(Pe)}if(Pe=i(it,Ve,null,we))throw TypeError(Pe);var tt=it.searchParams=new O;(nt=N(tt)).updateSearchParams(it.query),nt.updateURL=function(){it.query=String(tt)||null},c||(Fe.href=Lt.call(Fe),Fe.origin=Mt.call(Fe),Fe.protocol=qt.call(Fe),Fe.username=Bt.call(Fe),Fe.password=jt.call(Fe),Fe.host=zt.call(Fe),Fe.hostname=tn.call(Fe),Fe.port=vn.call(Fe),Fe.pathname=bn.call(Fe),Fe.search=kn.call(Fe),Fe.searchParams=ye.call(Fe),Fe.hash=Xe.call(Fe))}function g(ae,we){return{get:ae,set:we,configurable:!0,enumerable:!0}}var m,n,s,l=M("../internals/export"),c=M("../internals/descriptors"),a=M("../internals/native-url"),mt=M("../internals/global"),u=M("../internals/object-define-properties"),y=M("../internals/redefine"),p=M("../internals/an-instance"),v=M("../internals/has"),w=M("../internals/object-assign"),C=M("../internals/array-from"),T=M("../internals/string-multibyte").codeAt,j=M("../internals/string-punycode-to-ascii"),A=M("../internals/set-to-string-tag"),L=M("../modules/web.url-search-params"),M=M("../internals/internal-state"),k=mt.URL,O=L.URLSearchParams,N=L.getState,U=M.set,V=M.getterFor("URL"),G=Math.floor,z=Math.pow,W="Invalid authority",Z="Invalid scheme",I="Invalid host",q="Invalid port",D=/[A-Za-z]/,F=/[\d+-.A-Za-z]/,H=/\d/,Y=/^(0x|0X)/,te=/^[0-7]+$/,ie=/^\d+$/,de=/^[\dA-Fa-f]+$/,_e=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,le=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,re=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,pe=/[\u0009\u000A\u000D]/g,Q=function(ae,we){var Pe,Fe,nt;if(we.charAt(0)=="[")return we.charAt(we.length-1)=="]"&&(Pe=function(Ve){var it=[0,0,0,0,0,0,0,0],tt=0,st=null,et=0,pt,yt,Tt,Pt,Ct,ft,hr,St=function(){return Ve.charAt(et)};if(St()==":"){if(Ve.charAt(1)!=":")return;et+=2,tt++,st=tt}for(;St();){if(tt==8)return;if(St()==":"){if(st!==null)return;et++,tt++,st=tt;continue}for(pt=yt=0;yt<4&&de.test(St());)pt=pt*16+parseInt(St(),16),et++,yt++;if(St()=="."){if(yt==0||(et-=yt,tt>6))return;for(Tt=0;St();){if(Pt=null,Tt>0)if(St()=="."&&Tt<4)et++;else return;if(!H.test(St()))return;for(;H.test(St());){if(Ct=parseInt(St(),10),Pt===null)Pt=Ct;else{if(Pt==0)return;Pt=Pt*10+Ct}if(Pt>255)return;et++}it[tt]=it[tt]*256+Pt,Tt++,(Tt==2||Tt==4)&&tt++}if(Tt!=4)return;break}else if(St()==":"){if(et++,!St())return}else if(St())return;it[tt++]=pt}if(st!==null)for(ft=tt-st,tt=7;tt!=0&&ft>0;)hr=it[tt],it[tt--]=it[st+ft-1],it[st+--ft]=hr;else if(tt!=8)return;return it}(we.slice(1,-1)))?void(ae.host=Pe):I;if(ke(ae))return we=j(we),_e.test(we)||(Pe=function(Ve){var it=Ve.split("."),tt,st,et,pt,yt,Tt,Pt;if(it.length&&it[it.length-1]==""&&it.pop(),(tt=it.length)>4)return Ve;for(st=[],et=0;et<tt;et++){if(pt=it[et],pt=="")return Ve;if(yt=10,pt.length>1&&pt.charAt(0)=="0"&&(yt=Y.test(pt)?16:8,pt=pt.slice(yt==8?1:2)),pt==="")Tt=0;else{if(!(yt==10?ie:yt==8?te:de).test(pt))return Ve;Tt=parseInt(pt,yt)}st.push(Tt)}for(et=0;et<tt;et++)if(Tt=st[et],et==tt-1){if(Tt>=z(256,5-tt))return null}else if(Tt>255)return null;for(Pt=st.pop(),et=0;et<st.length;et++)Pt+=st[et]*z(256,3-et);return Pt}(we))===null?I:void(ae.host=Pe);if(le.test(we))return I;for(Pe="",Fe=C(we),nt=0;nt<Fe.length;nt++)Pe+=Le(Fe[nt],be);ae.host=Pe},ce=function(ae){for(var we=null,Pe=1,Fe=null,nt=0,Ve=0;Ve<8;Ve++)ae[Ve]!==0?(Pe<nt&&(we=Fe,Pe=nt),Fe=null,nt=0):(Fe===null&&(Fe=Ve),++nt);return Pe<nt&&(we=Fe,Pe=nt),we},be={},Re=w({},be,{" ":1,'"':1,"<":1,">":1,"`":1}),xe=w({},Re,{"#":1,"?":1,"{":1,"}":1}),Te=w({},xe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Le=function(ae,we){var Pe=T(ae,0);return 32<Pe&&Pe<127&&!v(we,ae)?ae:encodeURIComponent(ae)},Je={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ke=function(ae){return v(Je,ae.scheme)},ue=function(ae){return ae.username!=""||ae.password!=""},oe=function(ae,we){return ae.length==2&&D.test(ae.charAt(0))&&((ae=ae.charAt(1))==":"||!we&&ae=="|")},Ce=function(ae){return 1<ae.length&&oe(ae.slice(0,2))&&(ae.length==2||(ae=ae.charAt(2))==="/"||ae==="\\"||ae==="?"||ae==="#")},He=function(ae){var we=ae.path,Pe=we.length;!Pe||ae.scheme=="file"&&Pe==1&&oe(we[0],!0)||we.pop()},Ge=function(ae){return ae==="."||ae.toLowerCase()==="%2e"},ve=function(ae){return(ae=ae.toLowerCase())===".."||ae==="%2e."||ae===".%2e"||ae==="%2e%2e"},Ie={},Me={},J={},ee={},K={},ne={},me={},Ee={},De={},$e={},ge={},ze={},je={},Ze={},Ke={},rt={},lt={},at={},Et={},_t={},At={},mt=f.prototype,Lt=function(){var ae=V(this),we=ae.scheme,Pe=ae.username,Fe=ae.password,nt=ae.host,Ve=ae.port,it=ae.path,tt=ae.query,st=ae.fragment,et=we+":";return nt!==null?(et+="//",ue(ae)&&(et+=Pe+(Fe?":"+Fe:"")+"@"),et+=h(nt),Ve!==null&&(et+=":"+Ve)):we=="file"&&(et+="//"),et+=ae.cannotBeABaseURL?it[0]:it.length?"/"+it.join("/"):"",tt!==null&&(et+="?"+tt),st!==null&&(et+="#"+st),et},Mt=function(){var ae=V(this),we=ae.scheme,Pe=ae.port;if(we=="blob")try{return new URL(we.path[0]).origin}catch{return"null"}return we!="file"&&ke(ae)?we+"://"+h(ae.host)+(Pe!==null?":"+Pe:""):"null"},qt=function(){return V(this).scheme+":"},Bt=function(){return V(this).username},jt=function(){return V(this).password},zt=function(){var we=V(this),ae=we.host,we=we.port;return ae===null?"":we===null?h(ae):h(ae)+":"+we},tn=function(){var ae=V(this).host;return ae===null?"":h(ae)},vn=function(){var ae=V(this).port;return ae===null?"":String(ae)},bn=function(){var ae=V(this),we=ae.path;return ae.cannotBeABaseURL?we[0]:we.length?"/"+we.join("/"):""},kn=function(){var ae=V(this).query;return ae?"?"+ae:""},ye=function(){return V(this).searchParams},Xe=function(){var ae=V(this).fragment;return ae?"#"+ae:""};c&&u(mt,{href:g(Lt,function(Pe){var we=V(this),Pe=String(Pe),Pe=i(we,Pe);if(Pe)throw TypeError(Pe);N(we.searchParams).updateSearchParams(we.query)}),origin:g(Mt),protocol:g(qt,function(ae){var we=V(this);i(we,String(ae)+":",Ie)}),username:g(Bt,function(ae){var we=V(this),Pe=C(String(ae));if(!d(we)){we.username="";for(var Fe=0;Fe<Pe.length;Fe++)we.username+=Le(Pe[Fe],Te)}}),password:g(jt,function(ae){var we=V(this),Pe=C(String(ae));if(!d(we)){we.password="";for(var Fe=0;Fe<Pe.length;Fe++)we.password+=Le(Pe[Fe],Te)}}),host:g(zt,function(ae){var we=V(this);we.cannotBeABaseURL||i(we,String(ae),ge)}),hostname:g(tn,function(ae){var we=V(this);we.cannotBeABaseURL||i(we,String(ae),ze)}),port:g(vn,function(ae){var we=V(this);d(we)||((ae=String(ae))==""?we.port=null:i(we,ae,je))}),pathname:g(bn,function(ae){var we=V(this);we.cannotBeABaseURL||(we.path=[],i(we,ae+"",lt))}),search:g(kn,function(ae){var we=V(this);(ae=String(ae))==""?we.query=null:(ae.charAt(0)=="?"&&(ae=ae.slice(1)),we.query="",i(we,ae,_t)),N(we.searchParams).updateSearchParams(we.query)}),searchParams:g(ye),hash:g(Xe,function(ae){var we=V(this);(ae=String(ae))==""?we.fragment=null:(ae.charAt(0)=="#"&&(ae=ae.slice(1)),we.fragment="",i(we,ae,At))})}),y(mt,"toJSON",function(){return Lt.call(this)},{enumerable:!0}),y(mt,"toString",function(){return Lt.call(this)},{enumerable:!0}),k&&(n=k.createObjectURL,s=k.revokeObjectURL,n&&y(f,"createObjectURL",function(ae){return n.apply(k,arguments)}),s&&y(f,"revokeObjectURL",function(ae){return s.apply(k,arguments)})),A(f,"URL"),l({global:!0,forced:!a,sham:!c},{URL:f})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":192,"../modules/web.url-search-params":239}],241:[function(t,x,b){x.exports=t("./").polyfill()},{"./":242}],242:[function(t,x,b){(function(h,d){var i,f;i=this,f=function(){function g(Q){return typeof Q=="function"}var m=Array.isArray||function(Q){return Object.prototype.toString.call(Q)==="[object Array]"},n=0,s=void 0,l=void 0,c=function(Q,ce){w[n]=Q,w[n+1]=ce,(n+=2)===2&&(l?l(C):O())},a=typeof window<"u"?window:void 0,u=a||{},u=u.MutationObserver||u.WebKitMutationObserver,y=typeof self>"u"&&h!==void 0&&{}.toString.call(h)==="[object process]",p=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function v(){var Q=setTimeout;return function(){return Q(C,1)}}var w=new Array(1e3);function C(){for(var Q=0;Q<n;Q+=2)(0,w[Q])(w[Q+1]),w[Q]=void 0,w[Q+1]=void 0;n=0}function T(){try{var Q=Function("return this")().require("vertx");return(s=Q.runOnLoop||Q.runOnContext)!==void 0?function(){s(C)}:v()}catch{return v()}}var j,A,L,O=void 0;function M(Q,ce){var be,Re=this,xe=new this.constructor(U),Te=(xe[N]===void 0&&de(xe),Re._state);return Te?(be=arguments[Te-1],c(function(){return te(Te,xe,be,Re._result)})):H(Re,xe,Q,ce),xe}function k(Q){var ce;return Q&&typeof Q=="object"&&Q.constructor===this?Q:(I(ce=new this(U),Q),ce)}var O=y?function(){return h.nextTick(C)}:u?(A=0,y=new u(C),L=document.createTextNode(""),y.observe(L,{characterData:!0}),function(){L.data=A=++A%2}):p?((j=new MessageChannel).port1.onmessage=C,function(){return j.port2.postMessage(0)}):(a===void 0&&typeof t=="function"?T:v)(),N=Math.random().toString(36).substring(2);function U(){}var V=void 0,G=1,z=2;function W(Q,ce,be){c(function(Re){var xe=!1,Te=function(Le,Je,ke,ue){try{Le.call(Je,ke,ue)}catch(oe){return oe}}(be,ce,function(Le){xe||(xe=!0,(ce!==Le?I:D)(Re,Le))},function(Le){xe||(xe=!0,F(Re,Le))},Re._label);!xe&&Te&&(xe=!0,F(Re,Te))},Q)}function Z(Q,ce,be){var Re,xe;ce.constructor===Q.constructor&&be===M&&ce.constructor.resolve===k?(Re=Q,(xe=ce)._state===G?D(Re,xe._result):xe._state===z?F(Re,xe._result):H(xe,void 0,function(Te){return I(Re,Te)},function(Te){return F(Re,Te)})):be!==void 0&&g(be)?W(Q,ce,be):D(Q,ce)}function I(Q,ce){if(Q===ce)F(Q,new TypeError("You cannot resolve a promise with itself"));else if(be=typeof ce,ce===null||be!="object"&&be!="function")D(Q,ce);else{be=void 0;try{be=ce.then}catch(Re){return void F(Q,Re)}Z(Q,ce,be)}var be}function q(Q){Q._onerror&&Q._onerror(Q._result),Y(Q)}function D(Q,ce){Q._state===V&&(Q._result=ce,Q._state=G,Q._subscribers.length!==0&&c(Y,Q))}function F(Q,ce){Q._state===V&&(Q._state=z,Q._result=ce,c(q,Q))}function H(Q,ce,be,Re){var xe=Q._subscribers,Te=xe.length;Q._onerror=null,xe[Te]=ce,xe[Te+G]=be,xe[Te+z]=Re,Te===0&&Q._state&&c(Y,Q)}function Y(Q){var ce=Q._subscribers,be=Q._state;if(ce.length!==0){for(var Re,xe=void 0,Te=Q._result,Le=0;Le<ce.length;Le+=3)Re=ce[Le],xe=ce[Le+be],Re?te(be,Re,xe,Te):xe(Te);Q._subscribers.length=0}}function te(Q,ce,be,Re){var xe=g(be),Te=void 0,Le=void 0,Je=!0;if(xe){try{Te=be(Re)}catch(ke){Je=!1,Le=ke}if(ce===Te)return void F(ce,new TypeError("A promises callback cannot return that same promise."))}else Te=Re;ce._state===V&&(xe&&Je?I(ce,Te):Je===!1?F(ce,Le):Q===G?D(ce,Te):Q===z&&F(ce,Te))}var ie=0;function de(Q){Q[N]=ie++,Q._state=void 0,Q._result=void 0,Q._subscribers=[]}le.prototype._enumerate=function(Q){for(var ce=0;this._state===V&&ce<Q.length;ce++)this._eachEntry(Q[ce],ce)},le.prototype._eachEntry=function(Q,ce){var be=this._instanceConstructor,Re=be.resolve;if(Re===k){var xe,Te=void 0,Le=void 0,Je=!1;try{Te=Q.then}catch(ke){Je=!0,Le=ke}Te===M&&Q._state!==V?this._settledAt(Q._state,ce,Q._result):typeof Te!="function"?(this._remaining--,this._result[ce]=Q):be===re?(xe=new be(U),Je?F(xe,Le):Z(xe,Q,Te),this._willSettleAt(xe,ce)):this._willSettleAt(new be(function(ke){return ke(Q)}),ce)}else this._willSettleAt(Re(Q),ce)},le.prototype._settledAt=function(Q,ce,be){var Re=this.promise;Re._state===V&&(this._remaining--,Q===z?F(Re,be):this._result[ce]=be),this._remaining===0&&D(Re,this._result)},le.prototype._willSettleAt=function(Q,ce){var be=this;H(Q,void 0,function(Re){return be._settledAt(G,ce,Re)},function(Re){return be._settledAt(z,ce,Re)})};var _e=le;function le(Q,ce){this._instanceConstructor=Q,this.promise=new Q(U),this.promise[N]||de(this.promise),m(ce)?(this.length=ce.length,this._remaining=ce.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ce),this._remaining!==0)||D(this.promise,this._result)):F(this.promise,new Error("Array Methods must be provided an Array"))}pe.prototype.catch=function(Q){return this.then(null,Q)},pe.prototype.finally=function(Q){var ce=this.constructor;return g(Q)?this.then(function(be){return ce.resolve(Q()).then(function(){return be})},function(be){return ce.resolve(Q()).then(function(){throw be})}):this.then(Q,Q)};var re=pe;function pe(Q){if(this[N]=ie++,this._result=this._state=void 0,this._subscribers=[],U!==Q){if(typeof Q!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof pe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ce=this;try{Q(function(be){I(ce,be)},function(be){F(ce,be)})}catch(be){F(ce,be)}}}return re.prototype.then=M,re.all=function(Q){return new _e(this,Q).promise},re.race=function(Q){var ce=this;return m(Q)?new ce(function(be,Re){for(var xe=Q.length,Te=0;Te<xe;Te++)ce.resolve(Q[Te]).then(be,Re)}):new ce(function(be,Re){return Re(new TypeError("You must pass an array to race."))})},re.resolve=k,re.reject=function(Q){var ce=new this(U);return F(ce,Q),ce},re._setScheduler=function(Q){l=Q},re._setAsap=function(Q){c=Q},re._asap=c,re.polyfill=function(){var Q=void 0;if(d!==void 0)Q=d;else if(typeof self<"u")Q=self;else try{Q=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ce=Q.Promise;if(ce){var be=null;try{be=Object.prototype.toString.call(ce.resolve())}catch{}if(be==="[object Promise]"&&!ce.cast)return}Q.Promise=re},re.Promise=re},typeof b=="object"&&x!==void 0?x.exports=f():i.ES6Promise=f()}).call(this,t("_process"),typeof os<"u"?os:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:251}],243:[function(t,x,b){var h,d;h=this,d=function(i,f){var g=5e3,m="callback";function n(l){try{delete window[l]}catch{window[l]=void 0}}function s(l){l=document.getElementById(l),l&&document.getElementsByTagName("head")[0].removeChild(l)}f.exports=function(l){var c=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],a=l,u=c.timeout||g,y=c.jsonpCallback||m,p=void 0;return new Promise(function(v,w){var C=c.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),T=y+"_"+C,j=(window[C]=function(A){v({ok:!0,json:function(){return Promise.resolve(A)}}),p&&clearTimeout(p),s(T),n(C)},a+=a.indexOf("?")===-1?"?":"&",document.createElement("script"));j.setAttribute("src",""+a+y+"="+C),c.charset&&j.setAttribute("charset",c.charset),j.id=T,document.getElementsByTagName("head")[0].appendChild(j),p=setTimeout(function(){w(new Error("JSONP request to "+l+" timed out")),n(C),s(T),window[C]=function(){n(C)}},u),j.onerror=function(){w(new Error("JSONP request to "+l+" failed")),n(C),s(T),p&&clearTimeout(p)}})}},b!==void 0&&x!==void 0?d(0,x):(d(d={exports:{}},d),h.fetchJsonp=d.exports)},{}],244:[function(t,x,b){var h=function(d){var i,f,g,m,n,s,l,c,a,u,y;if(!(d===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return y=d.document,i=function(){return d.URL||d.webkitURL||d},f=y.createElementNS("http://www.w3.org/1999/xhtml","a"),g="download"in f,m=/constructor/i.test(d.HTMLElement)||d.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(p){(d.setImmediate||d.setTimeout)(function(){throw p},0)},l=4e4,c=function(p){setTimeout(function(){typeof p=="string"?i().revokeObjectURL(p):p.remove()},l)},a=function(p){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob([String.fromCharCode(65279),p],{type:p.type}):p},y=(u=function(p,v,A){A||(p=a(p));var C,T,j=this,A=p.type==="application/octet-stream",L=function(){for(var M=j,k="writestart progress write writeend".split(" "),O=void 0,N=(k=[].concat(k)).length;N--;){var U=M["on"+k[N]];if(typeof U=="function")try{U.call(M,O||M)}catch(V){s(V)}}};j.readyState=j.INIT,g?(C=i().createObjectURL(p),setTimeout(function(){var M,k;f.href=C,f.download=v,M=f,k=new MouseEvent("click"),M.dispatchEvent(k),L(),c(C),j.readyState=j.DONE})):(n||A&&m)&&d.FileReader?((T=new FileReader).onloadend=function(){var M=n?T.result:T.result.replace(/^data:[^;]*;/,"data:attachment/file;");d.open(M,"_blank")||(d.location.href=M),M=void 0,j.readyState=j.DONE,L()},T.readAsDataURL(p),j.readyState=j.INIT):(C=C||i().createObjectURL(p),!A&&d.open(C,"_blank")||(d.location.href=C),j.readyState=j.DONE,L(),c(C))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(p,v,w){return v=v||p.name||"download",w||(p=a(p)),navigator.msSaveOrOpenBlob(p,v)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,function(p,v,w){return new u(p,v||p.name||"download",w)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);x!==void 0&&x.exports?x.exports.saveAs=h:o!=null},{}],245:[function(t,x,b){var h,d=Object.defineProperty,i=(d(b,"__esModule",{value:!0}),b),f={GIFEncoder:()=>L,applyPalette:()=>function(V,G,z="rgb565"){if(!V||!V.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(V instanceof Uint8Array||V instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<G.length)throw new Error("applyPalette() only works with 256 colors or less");const W=new Uint32Array(V.buffer),Z=W.length,I=z==="rgb444"?4096:65536,q=new Uint8Array(Z),D=new Array(I);if(z==="rgba4444")for(let pe=0;pe<Z;pe++){var te=W[pe],F=te>>24&255,H=te>>16&255,Y=te>>8&255,te=255&te,ie=c(te,Y,H,F),ie=ie in D?D[ie]:D[ie]=function(Q,ce,be,Re,xe){let Te=0,Le=1e100;for(let oe=0;oe<xe.length;oe++){var Je,ke=xe[oe],ue=T(ke[3]-Re);ue>Le||(Je=ke[0],(ue+=T(Je-Q))>Le||(Je=ke[1],(ue+=T(Je-ce))>Le||(Je=ke[2],(ue+=T(Je-be))>Le||(Le=ue,Te=oe))))}return Te}(te,Y,H,F,G);q[pe]=ie}else{const pe=z==="rgb444"?a:l;for(let Q=0;Q<Z;Q++){var le=W[Q],de=le>>16&255,_e=le>>8&255,le=255&le,re=pe(le,_e,de),re=re in D?D[re]:D[re]=function(ce,be,Re,xe){let Te=0,Le=1e100;for(let oe=0;oe<xe.length;oe++){var Je,ke=xe[oe],ue=T(ke[0]-ce);ue>Le||(Je=ke[1],(ue+=T(Je-be))>Le||(Je=ke[2],(ue+=T(Je-Re))>Le||(Le=ue,Te=oe)))}return Te}(le,_e,de,G);q[Q]=re}}return q},default:()=>U,nearestColor:()=>function(V,G,z=w){return V[j(V,G,z)]},nearestColorIndex:()=>j,nearestColorIndexWithDistance:()=>A,prequantize:()=>function(V,{roundRGB:G=5,roundAlpha:z=10,oneBitAlpha:W=null}={}){const Z=new Uint32Array(V.buffer);for(let H=0;H<Z.length;H++){var F=Z[H];let Y=F>>24&255;var I,q=F>>16&255,D=F>>8&255,F=255&F;Y=C(Y,z),W&&(I=typeof W=="number"?W:127,Y=Y<=I?0:255),F=C(F,G),D=C(D,G),q=C(q,G),Z[H]=Y<<24|q<<16|D<<8|F<<0}},quantize:()=>function(V,G,z={}){var{format:W="rgb565",clearAlpha:Z=!0,clearAlphaColor:I=0,clearAlphaThreshold:q=0,oneBitAlpha:D=!1}=z;if(!V||!V.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(V instanceof Uint8Array||V instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");V=new Uint32Array(V.buffer);let F=z.useSqrt!==!1;const H=W==="rgba4444",Y=function(Ce,He){const Ge=He==="rgb444"?4096:65536,ve=new Array(Ge),Ie=Ce.length;if(He==="rgba4444")for(let Ke=0;Ke<Ie;++Ke){var K=Ce[Ke],Me=K>>24&255,J=K>>16&255,ee=K>>8&255,K=255&K,ne=c(K,ee,J,Me);let rt=ne in ve?ve[ne]:ve[ne]=v();rt.rc+=K,rt.gc+=ee,rt.bc+=J,rt.ac+=Me,rt.cnt++}else if(He==="rgb444")for(let Ke=0;Ke<Ie;++Ke){var De=Ce[Ke],me=De>>16&255,Ee=De>>8&255,De=255&De,$e=a(De,Ee,me);let rt=$e in ve?ve[$e]:ve[$e]=v();rt.rc+=De,rt.gc+=Ee,rt.bc+=me,rt.cnt++}else for(let Ke=0;Ke<Ie;++Ke){var je=Ce[Ke],ge=je>>16&255,ze=je>>8&255,je=255&je,Ze=l(je,ze,ge);let rt=Ze in ve?ve[Ze]:ve[Ze]=v();rt.rc+=je,rt.gc+=ze,rt.bc+=ge,rt.cnt++}return ve}(V,W),te=Y.length,ie=te-1,de=new Uint32Array(te+1);for(var _e=0,le=0;le<te;++le){const Ce=Y[le];Ce!=null&&(ke=1/Ce.cnt,H&&(Ce.ac*=ke),Ce.rc*=ke,Ce.gc*=ke,Ce.bc*=ke,Y[_e++]=Ce)}y(G)/_e<.022&&(F=!1);for(var re,pe,Q,le=0;le<_e-1;++le)Y[le].fw=le+1,Y[le+1].bk=le,F&&(Y[le].cnt=Math.sqrt(Y[le].cnt));for(F&&(Y[le].cnt=Math.sqrt(Y[le].cnt)),le=0;le<_e;++le){p(Y,le,!1);var ce=Y[le].err;for(pe=++de[0];1<pe&&(Q=pe>>1,!(Y[re=de[Q]].err<=ce));pe=Q)de[pe]=re;de[pe]=le}var be,Re=_e-G;for(le=0;le<Re;){for(;;){var xe=de[1];if((be=Y[xe]).tm>=be.mtm&&Y[be.nn].mtm<=be.tm)break;for(be.mtm==ie?xe=de[1]=de[de[0]--]:(p(Y,xe,!1),be.tm=le),ce=Y[xe].err,pe=1;(Q=pe+pe)<=de[0]&&(Q<de[0]&&Y[de[Q]].err>Y[de[Q+1]].err&&Q++,!(ce<=Y[re=de[Q]].err));pe=Q)de[pe]=re;de[pe]=xe}var Te=Y[be.nn],Le=be.cnt,Je=Te.cnt,ke=1/(Le+Je);H&&(be.ac=ke*(Le*be.ac+Je*Te.ac)),be.rc=ke*(Le*be.rc+Je*Te.rc),be.gc=ke*(Le*be.gc+Je*Te.gc),be.bc=ke*(Le*be.bc+Je*Te.bc),be.cnt+=Te.cnt,be.mtm=++le,Y[Te.bk].fw=Te.fw,Y[Te.fw].bk=Te.bk,Te.mtm=ie}let ue=[];for(le=0;;0){let Ce=u(Math.round(Y[le].rc),0,255),He=u(Math.round(Y[le].gc),0,255),Ge=u(Math.round(Y[le].bc),0,255),ve=255;H&&(ve=u(Math.round(Y[le].ac),0,255),D&&(oe=typeof D=="number"?D:127,ve=ve<=oe?0:255),Z&&ve<=q&&(Ce=He=Ge=I,ve=0));var oe=H?[Ce,He,Ge,ve]:[Ce,He,Ge];if(function(Ie,Me){for(let K=0;K<Ie.length;K++){var ee=Ie[K],J=ee[0]===Me[0]&&ee[1]===Me[1]&&ee[2]===Me[2],ee=!(4<=ee.length&&4<=Me.length)||ee[3]===Me[3];if(J&&ee)return!0}return!1}(ue,oe)||ue.push(oe),(le=Y[le].fw)==0)break}return ue},snapColorsToPalette:()=>function(V,G,z=5){if(V.length&&G.length){var W=V.map(F=>F.slice(0,3)),Z=z*z,I=V[0].length;for(let F=0;F<G.length;F++){let H=G[F];H=H.length<I?[H[0],H[1],H[2],255]:H.length>I?H.slice(0,3):H.slice();var D=A(W,H.slice(0,3),w),q=D[0],D=D[1];0<D&&D<=Z&&(V[q]=H)}}}};for(h in f)d(i,h,{get:f[h],enumerable:!0});var g={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function m(V=256){let G=0,z=new Uint8Array(V);return{get buffer(){return z.buffer},reset(){G=0},bytesView(){return z.subarray(0,G)},bytes(){return z.slice(0,G)},writeByte(Z){W(G+1),z[G]=Z,G++},writeBytes(Z,I=0,q=Z.length){W(G+q);for(let D=0;D<q;D++)z[G++]=Z[D+I]},writeBytesView(Z,I=0,q=Z.byteLength){W(G+q),z.set(Z.subarray(I,I+q),G),G+=q}};function W(Z){var I=z.length;if(!(Z<=I)){Z=Math.max(Z,I*(I<1048576?2:1.125)>>>0),I!=0&&(Z=Math.max(Z,256));const q=z;z=new Uint8Array(Z),0<G&&z.set(q.subarray(0,G),0)}}}var n=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],s=function(V,G,z,H,Z=m(512),I=new Uint8Array(256),q=new Int32Array(5003),D=new Int32Array(5003)){var F=q.length,H=Math.max(2,H);I.fill(0),D.fill(0),q.fill(-1);let Y=0,te=0;var ie=H+1;const de=ie;let _e=!1,le=de,re=(1<<le)-1;var pe=1<<ie-1;const Q=1+pe;let ce=2+pe,be=0,Re=z[0],xe=0;for(let oe=F;oe<65536;oe*=2)++xe;xe=8-xe,Z.writeByte(H),ue(pe);var Te=z.length;for(let oe=1;oe<Te;oe++)e:{var Le=z[oe],Je=(Le<<12)+Re;let Ce=Le<<xe^Re;if(q[Ce]===Je)Re=D[Ce];else{for(var ke=Ce===0?1:F-Ce;0<=q[Ce];)if((Ce-=ke)<0&&(Ce+=F),q[Ce]===Je){Re=D[Ce];break e}ue(Re),Re=Le,ce<4096?(D[Ce]=ce++,q[Ce]=Je):(q.fill(-1),ce=2+pe,_e=!0,ue(pe))}}return ue(Re),ue(Q),Z.writeByte(0),Z.bytesView();function ue(oe){for(Y&=n[te],0<te?Y|=oe<<te:Y=oe,te+=le;8<=te;)I[be++]=255&Y,254<=be&&(Z.writeByte(be),Z.writeBytesView(I,0,be),be=0),Y>>=8,te-=8;if((ce>re||_e)&&(_e?(le=de,re=(1<<le)-1,_e=!1):(++le,re=le===12?1<<le:(1<<le)-1)),oe==Q){for(;0<te;)I[be++]=255&Y,254<=be&&(Z.writeByte(be),Z.writeBytesView(I,0,be),be=0),Y>>=8,te-=8;0<be&&(Z.writeByte(be),Z.writeBytesView(I,0,be),be=0)}}};function l(V,G,z){return V<<8&63488|G<<2&992|z>>3}function c(V,G,z,W){return V>>4|240&G|(240&z)<<4|(240&W)<<8}function a(V,G,z){return V>>4<<8|240&G|z>>4}function u(V,G,z){return V<G?G:z<V?z:V}function y(V){return V*V}function p(V,G,z){var W=0,Z=1e100;const I=V[G];for(var q=I.cnt,D=I.ac,F=I.rc,H=I.gc,Y=I.bc,te=I.fw;te!=0;te=V[te].fw){var ie,de=V[te],_e=de.cnt,_e=q*_e/(q+_e);Z<=_e||(ie=0,z&&Z<=(ie+=_e*y(de.ac-D))||Z<=(ie+=_e*y(de.rc-F))||Z<=(ie+=_e*y(de.gc-H))||Z<=(ie+=_e*y(de.bc-Y))||(Z=ie,W=te))}I.err=Z,I.nn=W}function v(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function w(V,G){for(var z=0,W=0;W<V.length;W++){var Z=V[W]-G[W];z+=Z*Z}return z}function C(V,G){return 1<G?Math.round(V/G)*G:V}function T(V){return V*V}function j(V,G,z=w){let W=1/0,Z=-1;for(let q=0;q<V.length;q++){var I=z(G,V[q]);I<W&&(W=I,Z=q)}return Z}function A(V,G,z=w){let W=1/0,Z=-1;for(let q=0;q<V.length;q++){var I=z(G,V[q]);I<W&&(W=I,Z=q)}return[Z,W]}function L(V={}){const{initialCapacity:G=4096,auto:z=!0}=V,W=m(G),Z=new Uint8Array(256),I=new Int32Array(5003),q=new Int32Array(5003);let D=!1;return{reset(){W.reset(),D=!1},finish(){W.writeByte(g.trailer)},bytes(){return W.bytes()},bytesView(){return W.bytesView()},get buffer(){return W.buffer},get stream(){return W},writeHeader:F,writeFrame(H,Y,te,Re={}){var{transparent:de=!1,transparentIndex:_e=0,delay:ke=0,palette:le=null,repeat:Te=0,colorDepth:re=8,dispose:pe=-1}=Re;let Q=!1;if(z?D||(Q=!0,F(),D=!0):Q=!!Re.first,Y=Math.max(0,Math.floor(Y)),te=Math.max(0,Math.floor(te)),Q){if(!le)throw new Error("First frame must include a { palette } option");var[Re,Le,be,Je,xe=8]=[W,Y,te,le,re];Je=N(Je.length)-1,xe=128|xe-1<<4|Je,k(Re,Le),k(Re,be),Re.writeBytes([xe,0,0]),M(W,le),0<=Te&&(Je=W,Le=Te,Je.writeByte(33),Je.writeByte(255),Je.writeByte(11),O(Je,"NETSCAPE2.0"),Je.writeByte(3),Je.writeByte(1),k(Je,Le),Je.writeByte(0))}var ce,be=Math.round(ke/10),Re=W,xe=pe,Te=be,Le=de,Je=_e,ke=(Re.writeByte(33),Re.writeByte(249),Re.writeByte(4),Je<0&&(Je=0,Le=!1),Le=Le?(ce=1,2):ce=0,0<=xe&&(Le=7&xe),Le<<=2,Re.writeByte(0|Le|ce),k(Re,Te),Re.writeByte(Je||0),Re.writeByte(0),!!le&&!Q);pe=W,de=Y,_e=te,ce=ke?le:null,pe.writeByte(44),k(pe,0),k(pe,0),k(pe,de),k(pe,_e),ce?(de=N(ce.length)-1,pe.writeByte(128|de)):pe.writeByte(0),ke&&M(W,le),[Te,Re,_e,de,pe=8,ke,le,H]=[W,H,Y,te,re,Z,I,q],s(_e,de,Re,pe,Te,ke,le,H)}};function F(){O(W,"GIF89a")}}function M(V,G){var z=1<<N(G.length);for(let W=0;W<z;W++){let Z=[0,0,0];W<G.length&&(Z=G[W]),V.writeByte(Z[0]),V.writeByte(Z[1]),V.writeByte(Z[2])}}function k(V,G){V.writeByte(255&G),V.writeByte(G>>8&255)}function O(V,G){for(var z=0;z<G.length;z++)V.writeByte(G.charCodeAt(z))}function N(V){return Math.max(Math.ceil(Math.log2(V)),1)}var U=L},{}],246:[function(t,x,b){b.read=function(h,d,i,f,p){var m,n,s=8*p-f-1,l=(1<<s)-1,c=l>>1,a=-7,u=i?p-1:0,y=i?-1:1,p=h[d+u];for(u+=y,m=p&(1<<-a)-1,p>>=-a,a+=s;0<a;m=256*m+h[d+u],u+=y,a-=8);for(n=m&(1<<-a)-1,m>>=-a,a+=f;0<a;n=256*n+h[d+u],u+=y,a-=8);if(m===0)m=1-c;else{if(m===l)return n?NaN:1/0*(p?-1:1);n+=Math.pow(2,f),m-=c}return(p?-1:1)*n*Math.pow(2,m-f)},b.write=function(h,d,i,f,g,v){var n,s,l=8*v-g-1,c=(1<<l)-1,a=c>>1,u=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=f?0:v-1,p=f?1:-1,v=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(s=isNaN(d)?1:0,n=c):(n=Math.floor(Math.log(d)/Math.LN2),d*(f=Math.pow(2,-n))<1&&(n--,f*=2),2<=(d+=1<=n+a?u/f:u*Math.pow(2,1-a))*f&&(n++,f/=2),c<=n+a?(s=0,n=c):1<=n+a?(s=(d*f-1)*Math.pow(2,g),n+=a):(s=d*Math.pow(2,a-1)*Math.pow(2,g),n=0));8<=g;h[i+y]=255&s,y+=p,s/=256,g-=8);for(n=n<<g|s,l+=g;0<l;h[i+y]=255&n,y+=p,n/=256,l-=8);h[i+y-p]|=128*v}},{}],247:[function(t,x,b){var h;function d(J,ee){return J.b===ee.b&&J.a===ee.a}function i(J,ee){return J.b<ee.b||J.b===ee.b&&J.a<=ee.a}function f(J,ee,K){var ne=ee.b-J.b,me=K.b-ee.b;return 0<ne+me?ne<me?ee.a-J.a+ne/(ne+me)*(J.a-K.a):ee.a-K.a+me/(ne+me)*(K.a-J.a):0}function g(J,ee,K){var ne=ee.b-J.b,me=K.b-ee.b;return 0<ne+me?(ee.a-K.a)*ne+(ee.a-J.a)*me:0}function m(J,ee){return J.a<ee.a||J.a===ee.a&&J.b<=ee.b}function n(J,ee,K){var ne=ee.a-J.a,me=K.a-ee.a;return 0<ne+me?ne<me?ee.b-J.b+ne/(ne+me)*(J.b-K.b):ee.b-K.b+me/(ne+me)*(K.b-J.b):0}function s(J,ee,K){var ne=ee.a-J.a,me=K.a-ee.a;return 0<ne+me?(ee.b-K.b)*ne+(ee.b-J.b)*me:0}function l(J,ee,K,ne){return(J=J<0?0:J)<=(K=K<0?0:K)?K===0?(ee+ne)/2:ee+J/(J+K)*(ne-ee):ne+K/(J+K)*(ee-ne)}function c(J){var ee=v(J.b);return C(ee,J.c),C(ee.b,J.c),T(ee,J.a),ee}function a(J,ee){var K=!1,ne=!1;J!==ee&&(ee.a!==J.a&&(ne=!0,A(ee.a,J.a)),ee.d!==J.d&&(K=!0,L(ee.d,J.d)),w(ee,J),ne||(C(ee,J.a),J.a.c=J),K||(T(ee,J.d),J.d.a=J))}function u(J){var ee=J.b,K=!1;J.d!==J.b.d&&(K=!0,L(J.d,J.b.d)),J.c===J?A(J.a,null):(J.b.d.a=J.b.e,J.a.c=J.c,w(J,J.b.e),K||T(J,J.d)),ee.c===ee?(A(ee.a,null),L(ee.d,null)):(J.d.a=ee.b.e,ee.a.c=ee.c,w(ee,ee.b.e)),j(J)}function y(J){var ee=v(J),K=ee.b;return w(ee,J.e),ee.a=J.b.a,C(K,ee.a),ee.d=K.d=J.d,ee=ee.b,w(J.b,J.b.b.e),w(J.b,ee),J.b.a=ee.a,ee.b.a.c=ee.b,ee.b.d=J.b.d,ee.f=J.f,ee.b.f=J.b.f,ee}function p(J,ee){var K=!1,ne=v(J),me=ne.b;return ee.d!==J.d&&(K=!0,L(ee.d,J.d)),w(ne,J.e),w(me,ee),ne.a=J.b.a,me.a=ee.a,ne.d=me.d=J.d,J.d.a=me,K||T(ne,J.d),ne}function v(J){var ee=new be,K=new be,ne=J.b.h;return(((K.h=ne).b.h=ee).h=J).b.h=K,ee.b=K,((ee.c=ee).e=K).b=ee,(K.c=K).e=ee}function w(J,ee){var K=J.c,ne=ee.c;K.b.e=ee,(ne.b.e=J).c=ne,ee.c=K}function C(J,ee){var K=ee.f,ne=new xe(ee,K);for(K.e=ne,K=(ee.f=ne).c=J;K.a=ne,(K=K.c)!==J;);}function T(J,ee){var K=ee.d,ne=new ce(ee,K);for(K.b=ne,(ee.d=ne).a=J,ne.c=ee.c,K=J;K.d=ne,(K=K.e)!==J;);}function j(J){var ee=J.h;J=J.b.h,(ee.b.h=J).b.h=ee}function A(J,ee){for(var K=J.c,ne=K;ne.a=ee,(ne=ne.c)!==K;);K=J.f,((ne=J.e).f=K).e=ne}function L(J,ee){for(var K=J.a,ne=K;ne.d=ee,(ne=ne.e)!==K;);K=J.d,((ne=J.b).d=K).b=ne}function M(J){var ee=0;return Math.abs(J[1])>Math.abs(J[0])&&(ee=1),ee=Math.abs(J[2])>Math.abs(J[ee])?2:ee}function k(J,ee){J.f+=ee.f,J.b.f+=ee.b.f}function O(J,ee,K){return J=J.a,ee=ee.a,K=K.a,ee.b.a===J?K.b.a===J?i(ee.a,K.a)?g(K.b.a,ee.a,K.a)<=0:0<=g(ee.b.a,K.a,ee.a):g(K.b.a,J,K.a)<=0:K.b.a===J?0<=g(ee.b.a,J,ee.a):(ee=f(ee.b.a,J,ee.a),(J=f(K.b.a,J,K.a))<=ee)}function N(J){J.a.i=null;var ee=J.e;ee.a.c=ee.c,ee.c.a=ee.a,J.e=null}function U(J,ee){u(J.a),J.c=!1,(J.a=ee).i=J}function V(J){for(var ee=J.a.a;(J=Me(J)).a.a===ee;);return J.c&&(U(J,ee=p(Ie(J).a.b,J.a.e)),J=Me(J)),J}function G(J,ee,K){var ne=new ve;return ne.a=K,ne.e=_e(J.f,ee.e,ne),K.i=ne}function z(J,ee){switch(J.s){case 100130:return(1&ee)!=0;case 100131:return ee!==0;case 100132:return 0<ee;case 100133:return ee<0;case 100134:return 2<=ee||ee<=-2}return!1}function W(J){var ee=J.a,K=ee.d;K.c=J.d,K.a=ee,N(J)}function Z(J,ee,K){for(ee=(J=ee).a;J!==K;){J.c=!1;var ne=Ie(J),me=ne.a;if(me.a!==ee.a){if(!ne.c){W(J);break}U(ne,me=p(ee.c.b,me.b))}ee.c!==me&&(a(me.b.e,me),a(ee,me)),W(J),ee=ne.a,J=ne}return ee}function I(J,ee,K,ne,me,Ee){for(var De=!0;G(J,ee,K.b),(K=K.c)!==ne;);for(me===null&&(me=Ie(ee).a.b.c);(K=(ne=Ie(ee)).a.b).a===me.a;)K.c!==me&&(a(K.b.e,K),a(me.b.e,K)),ne.f=ee.f-K.f,ne.d=z(J,ne.f),ee.b=!0,!De&&H(J,ee)&&(k(K,me),N(ee),u(me)),De=!1,ee=ne,me=K;ee.b=!0,Ee&&te(J,ee)}function q(J,ee,K,ne,me){var Ee=[ee.g[0],ee.g[1],ee.g[2]];ee.d=null,ee.d=J.o&&J.o(Ee,K,ne,J.c)||null,ee.d===null&&(me?J.n||(Q(J,100156),J.n=!0):ee.d=K[0])}function D(J,ee,K){var ne=[null,null,null,null];ne[0]=ee.a.d,ne[1]=K.a.d,q(J,ee.a,ne,[.5,.5,0,0],!1),a(ee,K)}function F(J,ee,K,ne,me){var Ee=Math.abs(ee.b-J.b)+Math.abs(ee.a-J.a),De=Math.abs(K.b-J.b)+Math.abs(K.a-J.a),$e=me+1;ne[me]=.5*De/(Ee+De),ne[$e]=.5*Ee/(Ee+De),J.g[0]+=ne[me]*ee.g[0]+ne[$e]*K.g[0],J.g[1]+=ne[me]*ee.g[1]+ne[$e]*K.g[1],J.g[2]+=ne[me]*ee.g[2]+ne[$e]*K.g[2]}function H(J,ee){var K=Ie(ee),ne=ee.a,me=K.a;if(i(ne.a,me.a)){if(0<g(me.b.a,ne.a,me.a))return;if(d(ne.a,me.a)){if(ne.a!==me.a){var K=J.e,Ee=ne.a.h;if(0<=Ee){var De=(K=K.b).d,$e=K.e,ge=K.c,ze=ge[Ee];De[ze]=De[K.a],(ge[De[ze]]=ze)<=--K.a&&(ze<=1||i($e[De[ze>>1]],$e[De[ze]])?He:Ge)(K,ze),$e[Ee]=null,ge[Ee]=K.b,K.b=Ee}else for(K.c[-(Ee+1)]=null;0<K.a&&K.c[K.d[K.a-1]]===null;)--K.a;D(J,me.b.e,ne)}}else y(me.b),a(ne,me.b.e),ee.b=K.b=!0}else{if(g(ne.b.a,me.a,ne.a)<0)return;Me(ee).b=ee.b=!0,y(ne.b),a(me.b.e,ne)}return 1}function Y(J,ee){var K=Ie(ee),ne=ee.a,me=K.a,Ee=ne.a,De=me.a,$e=ne.b.a,ge=me.b.a,ze=new xe;if(g($e,J.a,Ee),g(ge,J.a,De),!(Ee===De||Math.min(Ee.a,$e.a)>Math.max(De.a,ge.a))){if(i(Ee,De)){if(0<g(ge,Ee,De))return}else if(g($e,De,Ee)<0)return;var je,Ze,Ke=$e,rt=Ee,lt=ge,at=De;if(i(Ke,rt)||(je=Ke,Ke=rt,rt=je),i(lt,at)||(je=lt,lt=at,at=je),i(Ke,lt)||(je=Ke,Ke=lt,lt=je,je=rt,rt=at,at=je),i(lt,rt)?i(rt,at)?((je=f(Ke,lt,rt))+(Ze=f(lt,rt,at))<0&&(je=-je,Ze=-Ze),ze.b=l(je,lt.b,Ze,rt.b)):((je=g(Ke,lt,rt))+(Ze=-g(Ke,at,rt))<0&&(je=-je,Ze=-Ze),ze.b=l(je,lt.b,Ze,at.b)):ze.b=(lt.b+rt.b)/2,m(Ke,rt)||(je=Ke,Ke=rt,rt=je),m(lt,at)||(je=lt,lt=at,at=je),m(Ke,lt)||(je=Ke,Ke=lt,lt=je,je=rt,rt=at,at=je),m(lt,rt)?m(rt,at)?((je=n(Ke,lt,rt))+(Ze=n(lt,rt,at))<0&&(je=-je,Ze=-Ze),ze.a=l(je,lt.a,Ze,rt.a)):((je=s(Ke,lt,rt))+(Ze=-s(Ke,at,rt))<0&&(je=-je,Ze=-Ze),ze.a=l(je,lt.a,Ze,at.a)):ze.a=(lt.a+rt.a)/2,i(ze,J.a)&&(ze.b=J.a.b,ze.a=J.a.a),Ke=i(Ee,De)?Ee:De,i(Ke,ze)&&(ze.b=Ke.b,ze.a=Ke.a),d(ze,Ee)||d(ze,De))return H(J,ee),0;if(!d($e,J.a)&&0<=g($e,J.a,ze)||!d(ge,J.a)&&g(ge,J.a,ze)<=0){if(ge===J.a)y(ne.b),a(me.b,ne),ne=Ie(ee=V(ee)).a,Z(J,Ie(ee),K),I(J,ee,ne.b.e,ne,ne,!0);else{if($e!==J.a)return 0<=g($e,J.a,ze)&&(Me(ee).b=ee.b=!0,y(ne.b),ne.a.b=J.a.b,ne.a.a=J.a.a),void(g(ge,J.a,ze)<=0&&(ee.b=K.b=!0,y(me.b),me.a.b=J.a.b,me.a.a=J.a.a));for(y(me.b),a(ne.e,me.b.e),De=(Ee=K=ee).a.b.a;(Ee=Me(Ee)).a.b.a===De;);Ee=Ie(ee=Ee).a.b.c,K.a=me.b.e,I(J,ee,(me=Z(J,K,null)).c,ne.b.c,Ee,!0)}return 1}y(ne.b),y(me.b),a(me.b.e,ne),ne.a.b=ze.b,ne.a.a=ze.a,ne.a.h=Le(J.e,ne.a),ne=ne.a,me=[0,0,0,0],ze=[Ee.d,$e.d,De.d,ge.d],ne.g[0]=ne.g[1]=ne.g[2]=0,F(ne,Ee,$e,me,0),F(ne,De,ge,me,2),q(J,ne,ze,me,!0),Me(ee).b=ee.b=K.b=!0}}function te(J,ee){for(var K=Ie(ee);;){for(;K.b;)K=Ie(ee=K);if(!ee.b&&((ee=Me(K=ee))===null||!ee.b))break;ee.b=!1;var ne=ee.a,me=K.a;if(Ee=ne.b.a!==me.b.a)e:{var Ee,De=Ie(Ee=ee),$e=Ee.a,ge=De.a,ze=void 0;if(i($e.b.a,ge.b.a)){if(g($e.b.a,ge.b.a,$e.a)<0){Ee=!1;break e}Me(Ee).b=Ee.b=!0,ze=y($e),a(ge.b,ze),ze.d.c=Ee.d}else{if(0<g(ge.b.a,$e.b.a,ge.a)){Ee=!1;break e}Ee.b=De.b=!0,ze=y(ge),a($e.e,ge.b),ze.b.d.c=Ee.d}Ee=!0}if(Ee&&(K.c?(N(K),u(me),me=(K=Ie(ee)).a):ee.c&&(N(ee),u(ne),ne=(ee=Me(K)).a)),ne.a!==me.a){if(ne.b.a===me.b.a||ee.c||K.c||ne.b.a!==J.a&&me.b.a!==J.a)H(J,ee);else if(Y(J,ee))break}ne.a===me.a&&ne.b.a===me.b.a&&(k(me,ne),N(ee),u(ne),ee=Me(K))}}function ie(J,ee){var K=new ve,ne=c(J.b);ne.a.b=4e150,ne.a.a=ee,ne.b.a.b=-4e150,ne.b.a.a=ee,J.a=ne.b.a,K.a=ne,K.f=0,K.d=!1,K.c=!1,K.h=!0,K.b=!1,ne=_e(ne=J.f,ne.a,K),K.e=ne}function de(J){this.a=new le,this.b=J,this.c=O}function _e(J,ee,K){for(;(ee=ee.c).b!==null&&!J.c(J.b,ee.b,K););return J=new le(K,ee.a,ee),ee.a.c=J,ee.a=J}function le(J,ee,K){this.b=J||null,this.a=ee||this,this.c=K||this}function re(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function pe(J,ee){if(J.d!==ee)for(;J.d!==ee;)if(J.d<ee)switch(J.d){case 0:Q(J,100151),J.u(null);break;case 1:Q(J,100152),J.t()}else switch(J.d){case 2:Q(J,100154),J.v();break;case 1:Q(J,100153),J.w()}}function Q(J,ee){J.p&&J.p(ee,J.c)}function ce(J,ee){this.b=J||this,this.d=ee||this,this.a=null,this.c=!1}function be(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Re(){this.c=new xe,this.a=new ce,this.b=new be,this.d=new be,this.b.b=this.d,this.d.b=this.b}function xe(J,ee){this.e=J||this,this.f=ee||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ke}function Le(J,ee){var K,ne,me;return J.e?(2*(ne=++(K=J.b).a)>K.f&&(K.f*=2,K.c=ue(K.c,K.f+1)),K.b===0?me=ne:(me=K.b,K.b=K.c[K.b]),K.e[me]=ee,K.c[me]=ne,K.d[ne]=me,K.h&&Ge(K,ne),me):(K=J.a++,J.c[K]=ee,-(K+1))}function Je(J){if(J.a===0)return Ce(J.b);var ee=J.c[J.d[J.a-1]];if(J.b.a!==0&&i(oe(J.b),ee))return Ce(J.b);for(;--J.a,0<J.a&&J.c[J.d[J.a-1]]===null;);return ee}function ke(){this.d=ue([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ue(J,ee){for(var K=Array(ee),ne=0;ne<J.length;ne++)K[ne]=J[ne];for(;ne<ee;ne++)K[ne]=0;return K}function oe(J){return J.e[J.d[1]]}function Ce(J){var ee=J.d,K=J.e,ne=J.c,me=ee[1],Ee=K[me];return 0<J.a&&(ee[1]=ee[J.a],ne[ee[1]]=1,K[me]=null,ne[me]=J.b,J.b=me,0<--J.a&&He(J,1)),Ee}function He(J,ee){for(var K=J.d,ne=J.e,me=J.c,Ee=ee,De=K[Ee];;){var $e=Ee<<1,ge=($e<J.a&&i(ne[K[$e+1]],ne[K[$e]])&&($e+=1),K[$e]);if($e>J.a||i(ne[De],ne[ge])){me[K[Ee]=De]=Ee;break}me[K[Ee]=ge]=Ee,Ee=$e}}function Ge(J,ee){for(var K=J.d,ne=J.e,me=J.c,Ee=ee,De=K[Ee];;){var $e=Ee>>1,ge=K[$e];if($e==0||i(ne[ge],ne[De])){me[K[Ee]=De]=Ee;break}me[K[Ee]=ge]=Ee,Ee=$e}}function ve(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ie(J){return J.e.c.b}function Me(J){return J.e.a.b}(h=re.prototype).x=function(){pe(this,0)},h.B=function(J,ee){switch(J){case 100142:return;case 100140:switch(ee){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ee)}break;case 100141:return void(this.m=!!ee);default:return void Q(this,100900)}Q(this,100901)},h.y=function(J){switch(J){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Q(this,100900)}return!1},h.A=function(J,ee,K){this.j[0]=J,this.j[1]=ee,this.j[2]=K},h.z=function(J,ee){var K=ee||null;switch(J){case 100100:case 100106:this.h=K;break;case 100104:case 100110:this.l=K;break;case 100101:case 100107:this.k=K;break;case 100102:case 100108:this.i=K;break;case 100103:case 100109:this.p=K;break;case 100105:case 100111:this.o=K;break;case 100112:this.r=K;break;default:Q(this,100900)}},h.C=function(J,ee){var K=!1,ne=[0,0,0];pe(this,2);for(var me=0;me<3;++me){var Ee=J[me];Ee<-1e150&&(Ee=-1e150,K=!0),1e150<Ee&&(Ee=1e150,K=!0),ne[me]=Ee}K&&Q(this,100155),(K=this.q)===null?a(K=c(this.b),K.b):(y(K),K=K.e),K.a.d=ee,K.a.g[0]=ne[0],K.a.g[1]=ne[1],K.a.g[2]=ne[2],K.f=1,K.b.f=-1,this.q=K},h.u=function(J){pe(this,0),this.d=1,this.b=new Re,this.c=J},h.t=function(){pe(this,1),this.d=2,this.q=null},h.v=function(){pe(this,2),this.d=1},h.w=function(){pe(this,1),this.d=0;var J,ee,K=this.j[0],ne=this.j[1],me=this.j[2],Ee=!1,De=[K,ne,me];if(K===0&&ne===0&&me===0){for(var ne=[-2e150,-2e150,-2e150],$e=[2e150,2e150,2e150],me=[],ge=[],K=(Ee=this.b.c).e;K!==Ee;K=K.e)for(var ze=0;ze<3;++ze){var je=K.g[ze];je<$e[ze]&&($e[ze]=je,ge[ze]=K),je>ne[ze]&&(ne[ze]=je,me[ze]=K)}if(ne[1]-$e[1]>ne[K=0]-$e[0]&&(K=1),$e[K=ne[2]-$e[2]>ne[K]-$e[K]?2:K]>=ne[K])De[0]=0,De[1]=0,De[2]=1;else{for($e=ge[K],me=me[K],ge=[ne=0,0,0],$e=[$e.g[0]-me.g[0],$e.g[1]-me.g[1],$e.g[2]-me.g[2]],ze=[0,0,0],K=Ee.e;K!==Ee;K=K.e)ze[0]=K.g[0]-me.g[0],ze[1]=K.g[1]-me.g[1],ze[2]=K.g[2]-me.g[2],ge[0]=$e[1]*ze[2]-$e[2]*ze[1],ge[1]=$e[2]*ze[0]-$e[0]*ze[2],ge[2]=$e[0]*ze[1]-$e[1]*ze[0],ne<(je=ge[0]*ge[0]+ge[1]*ge[1]+ge[2]*ge[2])&&(ne=je,De[0]=ge[0],De[1]=ge[1],De[2]=ge[2]);ne<=0&&(De[0]=De[1]=De[2]=0,De[M($e)]=1)}Ee=!0}for(ge=M(De),K=this.b.c,ne=(ge+1)%3,me=(ge+2)%3,ge=0<De[ge]?1:-1,De=K.e;De!==K;De=De.e)De.b=De.g[ne],De.a=ge*De.g[me];if(Ee){for(De=0,K=(Ee=this.b.a).b;K!==Ee;K=K.b)if(!((ne=K.a).f<=0))for(;De+=(ne.a.b-ne.b.a.b)*(ne.a.a+ne.b.a.a),(ne=ne.e)!==K.a;);if(De<0)for(Ee=(De=this.b.c).e;Ee!==De;Ee=Ee.e)Ee.a=-Ee.a}for(this.n=!1,De=this.b.b,K=De.h;K!==De;K=Ee)Ee=K.h,ne=K.e,d(K.a,K.b.a)&&K.e.e!==K&&(D(this,ne,K),u(K),ne=(K=ne).e),ne.e===K&&(ne!==K&&(ne!==Ee&&ne!==Ee.b||(Ee=Ee.h),u(ne)),K!==Ee&&K!==Ee.b||(Ee=Ee.h),u(K));for(this.e=De=new Te,Ee=this.b.c,K=Ee.e;K!==Ee;K=K.e)K.h=Le(De,K);var Ze=De;Ze.d=[];for(var Ke=0;Ke<Ze.a;Ke++)Ze.d[Ke]=Ke;Ze.d.sort(function(at){return function(Et,_t){return i(at[Et],at[_t])?1:-1}}(Ze.c)),Ze.e=!0;for(var rt=Ze.b,lt=rt.a;1<=lt;--lt)He(rt,lt);for(rt.h=!0,this.f=new de(this),ie(this,-4e150),ie(this,4e150);(De=Je(this.e))!==null;){for(;;){e:if((K=this.e).a===0)Ee=oe(K.b);else if(Ee=K.c[K.d[K.a-1]],K.b.a!==0&&i(K=oe(K.b),Ee)){Ee=K;break e}if(Ee===null||!d(Ee,De))break;Ee=Je(this.e),D(this,De.c,Ee.c)}(function at(Et,_t){for(var At,mt=(Et.a=_t).c;mt.i===null;)if((mt=mt.c)===_t.c){var mt=Et,Lt=_t;(jt=new ve).a=Lt.c.b;for(var zt=(Mt=mt.f).a;(zt=zt.a).b!==null&&!Mt.c(Mt.b,jt,zt.b););var Mt,qt,Bt=Ie(Mt=zt.b),jt=Mt.a,zt=Bt.a;return void(g(jt.b.a,Lt,jt.a)===0?d((jt=Mt.a).a,Lt)||d(jt.b.a,Lt)||(y(jt.b),Mt.c&&(u(jt.c),Mt.c=!1),a(Lt.c,jt),at(mt,Lt)):(qt=i(zt.b.a,jt.b.a)?Mt:Bt,Bt=void 0,Mt.d||qt.c?(Bt=qt===Mt?p(Lt.c.b,jt.e):p(zt.b.c.b,Lt.c).b,qt.c?U(qt,Bt):((Mt=G(jt=mt,Mt,Bt)).f=Me(Mt).f+Mt.a.f,Mt.d=z(jt,Mt.f)),at(mt,Lt)):I(mt,Mt,Lt.c,Lt.c,null,!0)))}Mt=(jt=Ie(mt=V(mt.i))).a,(jt=Z(Et,jt,null)).c===Mt?(jt=(Mt=jt).c,zt=Ie(mt),Bt=mt.a,qt=zt.a,At=!1,Bt.b.a!==qt.b.a&&Y(Et,mt),d(Bt.a,Et.a)&&(a(jt.b.e,Bt),jt=Ie(mt=V(mt)).a,Z(Et,Ie(mt),zt),At=!0),d(qt.a,Et.a)&&(a(Mt,qt.b.e),Mt=Z(Et,zt,null),At=!0),At?I(Et,mt,Mt.c,jt,jt,!0):(Lt=i(qt.a,Bt.a)?qt.b.e:Bt,I(Et,mt,Lt=p(Mt.c.b,Lt),Lt.c,Lt.c,!1),Lt.b.i.c=!0,te(Et,mt))):I(Et,mt,jt.c,Mt,Mt,!0)})(this,De)}for(this.a=this.f.a.a.b.a.a,De=0;(Ee=this.f.a.a.b)!==null;)Ee.h||++De,N(Ee);for(this.f=null,(De=this.e).b=null,De.d=null,this.e=De.c=null,De=this.b,K=De.a.b;K!==De.a;K=Ee)Ee=K.b,(K=K.a).e.e===K&&(k(K.c,K),u(K));if(!this.n){if(De=this.b,this.m)for(K=De.b.h;K!==De.b;K=Ee)Ee=K.h,K.b.d.c!==K.d.c?K.f=K.d.c?1:-1:u(K);else for(K=De.a.b;K!==De.a;K=Ee)if(Ee=K.b,K.c){for(K=K.a;i(K.b.a,K.a);K=K.c.b);for(;i(K.a,K.b.a);K=K.e);for(ne=K.c.b,me=void 0;K.e!==ne;)if(i(K.b.a,ne.a)){for(;ne.e!==K&&(i((ee=ne.e).b.a,ee.a)||g(ne.a,ne.b.a,ne.e.b.a)<=0);)ne=(me=p(ne.e,ne)).b;ne=ne.c.b}else{for(;ne.e!==K&&(i((J=K.c.b).a,J.b.a)||0<=g(K.b.a,K.a,K.c.b.a));)K=(me=p(K,K.c.b)).b;K=K.e}for(;ne.e.e!==K;)me=p(ne.e,ne),ne=me.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ee=(De=this.b).a.b;Ee!==De.a;Ee=Ee.b)if(Ee.c){for(this.h&&this.h(2,this.c),K=Ee.a;this.k&&this.k(K.a.d,this.c),(K=K.e)!==Ee.a;);this.i&&this.i(this.c)}}else{for(De=this.b,Ee=!!this.l,K=!1,ne=-1,me=De.a.d;me!==De.a;me=me.d)if(me.c)for(K||(this.h&&this.h(4,this.c),K=!0),ge=me.a;Ee&&($e=ge.b.d.c?0:1,ne!==$e&&(ne=$e,this.l&&this.l(!!ne,this.c))),this.k&&this.k(ge.a.d,this.c),(ge=ge.e)!==me.a;);K&&this.i&&this.i(this.c)}if(this.r){for(De=this.b,K=De.a.b;K!==De.a;K=Ee)if(Ee=K.b,!K.c){for(me=(ne=K.a).e,ge=void 0;me=(ge=me).e,(ge.d=null)===ge.b.d&&(ge.c===ge?A(ge.a,null):(ge.a.c=ge.c,w(ge,ge.b.e)),($e=ge.b).c===$e?A($e.a,null):($e.a.c=$e.c,w($e,$e.b.e)),j(ge)),ge!==ne;);ne=K.d,((K=K.b).d=ne).b=K}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:re,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},re.prototype.gluDeleteTess=re.prototype.x,re.prototype.gluTessProperty=re.prototype.B,re.prototype.gluGetTessProperty=re.prototype.y,re.prototype.gluTessNormal=re.prototype.A,re.prototype.gluTessCallback=re.prototype.z,re.prototype.gluTessVertex=re.prototype.C,re.prototype.gluTessBeginPolygon=re.prototype.u,re.prototype.gluTessBeginContour=re.prototype.t,re.prototype.gluTessEndContour=re.prototype.v,re.prototype.gluTessEndPolygon=re.prototype.w,x!==void 0&&(x.exports=this.libtess)},{}],248:[function(t,x,b){function h(i,f,g,m){var n=0,s=(m=m===void 0?{}:m).loop===void 0?null:m.loop,l=m.palette===void 0?null:m.palette;if(f<=0||g<=0||65535<f||65535<g)throw new Error("Width/Height invalid.");function c(T){if(T=T.length,T<2||256<T||T&T-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return T}i[n++]=71,i[n++]=73,i[n++]=70,i[n++]=56,i[n++]=57,i[n++]=97;var a=0,u=0;if(l!==null){for(var y=c(l);y>>=1;)++a;if(y=1<<a,--a,m.background!==void 0){if(y<=(u=m.background))throw new Error("Background index out of range.");if(u===0)throw new Error("Background index explicitly passed as 0.")}}if(i[n++]=255&f,i[n++]=f>>8&255,i[n++]=255&g,i[n++]=g>>8&255,i[n++]=(l!==null?128:0)|a,i[n++]=u,i[n++]=0,l!==null)for(var p=0,v=l.length;p<v;++p){var w=l[p];i[n++]=w>>16&255,i[n++]=w>>8&255,i[n++]=255&w}if(s!==null){if(s<0||65535<s)throw new Error("Loop count invalid.");i[n++]=33,i[n++]=255,i[n++]=11,i[n++]=78,i[n++]=69,i[n++]=84,i[n++]=83,i[n++]=67,i[n++]=65,i[n++]=80,i[n++]=69,i[n++]=50,i[n++]=46,i[n++]=48,i[n++]=3,i[n++]=1,i[n++]=255&s,i[n++]=s>>8&255,i[n++]=0}var C=!1;this.addFrame=function(T,j,A,L,M,k){if(C===!0&&(--n,C=!1),k=k===void 0?{}:k,T<0||j<0||65535<T||65535<j)throw new Error("x/y invalid.");if(A<=0||L<=0||65535<A||65535<L)throw new Error("Width/Height invalid.");if(M.length<A*L)throw new Error("Not enough pixels for the frame size.");var O=!0,N=k.palette;if(N==null&&(O=!1,N=l),N==null)throw new Error("Must supply either a local or global palette.");for(var V=c(N),U=0;V>>=1;)++U;var V=1<<U,G=k.delay===void 0?0:k.delay,z=k.disposal===void 0?0:k.disposal;if(z<0||3<z)throw new Error("Disposal out of range.");var W=!1,Z=0;if(k.transparent!==void 0&&k.transparent!==null&&(W=!0,(Z=k.transparent)<0||V<=Z))throw new Error("Transparent color index.");if(z===0&&!W&&G===0||(i[n++]=33,i[n++]=249,i[n++]=4,i[n++]=z<<2|(W===!0?1:0),i[n++]=255&G,i[n++]=G>>8&255,i[n++]=Z,i[n++]=0),i[n++]=44,i[n++]=255&T,i[n++]=T>>8&255,i[n++]=255&j,i[n++]=j>>8&255,i[n++]=255&A,i[n++]=A>>8&255,i[n++]=255&L,i[n++]=L>>8&255,i[n++]=O===!0?128|U-1:0,O===!0)for(var I=0,q=N.length;I<q;++I){var D=N[I];i[n++]=D>>16&255,i[n++]=D>>8&255,i[n++]=255&D}return n=function(F,H,Y,te){F[H++]=Y;var ie=H++,de=1<<Y,_e=de-1,le=1+de,re=1+le,pe=Y+1,Q=0,ce=0;function be(Ce){for(;Ce<=Q;)F[H++]=255&ce,ce>>=8,Q-=8,H===ie+256&&(F[ie]=255,ie=H++)}function Re(Ce){ce|=Ce<<Q,Q+=pe,be(8)}var xe=te[0]&_e,Te={};Re(de);for(var Le=1,Je=te.length;Le<Je;++Le){var ke=te[Le]&_e,ue=xe<<8|ke,oe=Te[ue];if(oe===void 0){for(ce|=xe<<Q,Q+=pe;8<=Q;)F[H++]=255&ce,ce>>=8,Q-=8,H===ie+256&&(F[ie]=255,ie=H++);re===4096?(Re(de),re=1+le,pe=Y+1,Te={}):(1<<pe<=re&&++pe,Te[ue]=re++),xe=ke}else xe=oe}return Re(xe),Re(le),be(1),ie+1===H?F[ie]=0:(F[ie]=H-ie-1,F[H++]=0),H}(i,n,U<2?2:U,M)},this.end=function(){return C===!1&&(i[n++]=59,C=!0),n},this.getOutputBuffer=function(){return i},this.setOutputBuffer=function(T){i=T},this.getOutputBufferPosition=function(){return n},this.setOutputBufferPosition=function(T){n=T}}function d(i,f,g,m){for(var n=i[f++],s=1<<n,l=1+s,c=1+l,a=n+1,u=(1<<a)-1,y=0,p=0,v=0,w=i[f++],C=new Int32Array(4096),T=null;;){for(;y<16&&w!==0;)p|=i[f++]<<y,y+=8,w===1?w=i[f++]:--w;if(y<a)break;var j=p&u;if(p>>=a,y-=a,j==s)c=1+l,u=(1<<(a=n+1))-1,T=null;else{if(j==l)break;for(var A=j<c?j:T,L=0,M=A;s<M;)M=C[M]>>8,++L;var k=M;if(m<v+L+(A!==j?1:0))return void console.log("Warning, gif stream longer than expected.");g[v++]=k;var O=v+=L;for(A!==j&&(g[v++]=k),M=A;L--;)M=C[M],g[--O]=255&M,M>>=8;T!==null&&c<4096&&(C[c++]=T<<8|k,u+1<=c&&a<12&&(++a,u=u<<1|1)),T=j}}v!==m&&console.log("Warning, gif stream shorter than expected.")}try{b.GifWriter=h,b.GifReader=function(i){var f=0;if(i[f++]!==71||i[f++]!==73||i[f++]!==70||i[f++]!==56||(i[f++]+1&253)!=56||i[f++]!==97)throw new Error("Invalid GIF 87a/89a header.");var g=i[f++]|i[f++]<<8,m=i[f++]|i[f++]<<8,n=i[f++],s=1<<1+(7&n),l=(i[f++],i[f++],null),c=null,a=(n>>7&&(l=f,f+=3*(c=s)),!0),u=[],y=0,p=null,v=0,w=null;for(this.width=g,this.height=m;a&&f<i.length;)switch(i[f++]){case 33:switch(i[f++]){case 255:if(i[f]!==11||i[f+1]==78&&i[f+2]==69&&i[f+3]==84&&i[f+4]==83&&i[f+5]==67&&i[f+6]==65&&i[f+7]==80&&i[f+8]==69&&i[f+9]==50&&i[f+10]==46&&i[f+11]==48&&i[f+12]==3&&i[f+13]==1&&i[f+16]==0)f+=14,w=i[f++]|i[f++]<<8,f++;else for(f+=12;;){if(!(0<=(T=i[f++])))throw Error("Invalid block size");if(T===0)break;f+=T}break;case 249:if(i[f++]!==4||i[f+4]!==0)throw new Error("Invalid graphics extension block.");var C=i[f++],y=i[f++]|i[f++]<<8,p=i[f++];!(1&C)&&(p=null),v=C>>2&7,f++;break;case 254:for(;;){if(!(0<=(T=i[f++])))throw Error("Invalid block size");if(T===0)break;f+=T}break;default:throw new Error("Unknown graphic control label: 0x"+i[f-1].toString(16))}break;case 44:var T,j=i[f++]|i[f++]<<8,A=i[f++]|i[f++]<<8,L=i[f++]|i[f++]<<8,M=i[f++]|i[f++]<<8,G=i[f++],k=G>>6&1,O=1<<1+(7&G),N=l,U=c,V=!1,G=(G>>7&&(V=!0,N=f,f+=3*(U=O)),f);for(f++;;){if(!(0<=(T=i[f++])))throw Error("Invalid block size");if(T===0)break;f+=T}u.push({x:j,y:A,width:L,height:M,has_local_palette:V,palette_offset:N,palette_size:U,data_offset:G,data_length:f-G,transparent_index:p,interlaced:!!k,delay:y,disposal:v});break;case 59:a=!1;break;default:throw new Error("Unknown gif block: 0x"+i[f-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return w},this.frameInfo=function(z){if(z<0||z>=u.length)throw new Error("Frame index out of range.");return u[z]},this.decodeAndBlitFrameBGRA=function(z,W){for(var z=this.frameInfo(z),Z=z.width*z.height,I=new Uint8Array(Z),q=(d(i,z.data_offset,I,Z),z.palette_offset),D=z.transparent_index,F=(D===null&&(D=256),z.width),H=g-F,Y=F,te=4*(z.y*g+z.x),ie=4*((z.y+z.height)*g+z.x),de=te,_e=4*H,le=(z.interlaced===!0&&(_e+=4*g*7),8),re=0,pe=I.length;re<pe;++re){var Q,ce,be=I[re];Y===0&&(Y=F,ie<=(de+=_e)&&(_e=4*H+4*g*(le-1),de=te+(F+H)*(le<<1),le>>=1)),be===D?de+=4:(Q=i[q+3*be],ce=i[q+3*be+1],be=i[q+3*be+2],W[de++]=be,W[de++]=ce,W[de++]=Q,W[de++]=255),--Y}},this.decodeAndBlitFrameRGBA=function(z,W){for(var z=this.frameInfo(z),Z=z.width*z.height,I=new Uint8Array(Z),q=(d(i,z.data_offset,I,Z),z.palette_offset),D=z.transparent_index,F=(D===null&&(D=256),z.width),H=g-F,Y=F,te=4*(z.y*g+z.x),ie=4*((z.y+z.height)*g+z.x),de=te,_e=4*H,le=(z.interlaced===!0&&(_e+=4*g*7),8),re=0,pe=I.length;re<pe;++re){var Q,ce,be=I[re];Y===0&&(Y=F,ie<=(de+=_e)&&(_e=4*H+4*g*(le-1),de=te+(F+H)*(le<<1),le>>=1)),be===D?de+=4:(Q=i[q+3*be],ce=i[q+3*be+1],be=i[q+3*be+2],W[de++]=Q,W[de++]=ce,W[de++]=be,W[de++]=255),--Y}}}}catch{}},{}],249:[function(t,x,b){(function(h){var d,i;d=this,i=function(f){function g(B){if(this==null)throw TypeError();var E,R=String(this),P=R.length,B=B?Number(B):0;if(!((B=B!=B?0:B)<0||P<=B))return 55296<=(E=R.charCodeAt(B))&&E<=56319&&B+1<P&&56320<=(P=R.charCodeAt(B+1))&&P<=57343?1024*(E-55296)+P-56320+65536:E}String.prototype.codePointAt||((m=function(){try{var _={},E=Object.defineProperty,R=E(_,_,_)&&E}catch{}return R}())?m(String.prototype,"codePointAt",{value:g,configurable:!0,writable:!0}):String.prototype.codePointAt=g);var m,n=0,s=-3;function l(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function c(_,E){this.source=_,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=E,this.destLen=0,this.ltree=new l,this.dtree=new l}var a=new l,u=new l,y=new Uint8Array(30),p=new Uint16Array(30),v=new Uint8Array(30),w=new Uint16Array(30),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=new l,j=new Uint8Array(320);function A(_,E,R,P){for(var B,X=0;X<R;++X)_[X]=0;for(X=0;X<30-R;++X)_[X+R]=X/R|0;for(B=P,X=0;X<30;++X)E[X]=B,B+=1<<_[X]}var L=new Uint16Array(16);function M(_,E,R,P){for(var B,X=0;X<16;++X)_.table[X]=0;for(X=0;X<P;++X)_.table[E[R+X]]++;for(X=B=_.table[0]=0;X<16;++X)L[X]=B,B+=_.table[X];for(X=0;X<P;++X)E[R+X]&&(_.trans[L[E[R+X]]++]=X)}function k(_,E,R){if(!E)return R;for(;_.bitcount<24;)_.tag|=_.source[_.sourceIndex++]<<_.bitcount,_.bitcount+=8;var P=_.tag&65535>>>16-E;return _.tag>>>=E,_.bitcount-=E,P+R}function O(_,E){for(;_.bitcount<24;)_.tag|=_.source[_.sourceIndex++]<<_.bitcount,_.bitcount+=8;for(var R=0,P=0,B=0,X=_.tag;P=2*P+(1&X),X>>>=1,R+=E.table[++B],0<=(P-=E.table[B]););return _.tag=X,_.bitcount-=B,E.trans[R+P]}function N(_,E,R){for(;;){var P=O(_,E);if(P===256)return n;if(P<256)_.dest[_.destLen++]=P;else for(var B,X=k(_,y[P-=257],p[P]),P=O(_,R),$=B=_.destLen-k(_,v[P],w[P]);$<B+X;++$)_.dest[_.destLen++]=_.dest[$]}}for(var U=a,V=u,G=0;G<7;++G)U.table[G]=0;for(U.table[7]=24,U.table[8]=152,U.table[9]=112,G=0;G<24;++G)U.trans[G]=256+G;for(G=0;G<144;++G)U.trans[24+G]=G;for(G=0;G<8;++G)U.trans[168+G]=280+G;for(G=0;G<112;++G)U.trans[176+G]=144+G;for(G=0;G<5;++G)V.table[G]=0;for(V.table[5]=32,G=0;G<32;++G)V.trans[G]=G;A(y,p,4,3),A(v,w,2,1),y[28]=0,p[28]=258;var z=function(_,E){var R,P,B,X=new c(_,E);do{switch(B=void 0,(P=X).bitcount--||(P.tag=P.source[P.sourceIndex++],P.bitcount=7),B=1&P.tag,P.tag>>>=1,P=B,k(X,2,0)){case 0:R=function(Be){for(var ut,gt;8<Be.bitcount;)Be.sourceIndex--,Be.bitcount-=8;if((ut=256*Be.source[Be.sourceIndex+1]+Be.source[Be.sourceIndex])!==(65535&~(256*Be.source[Be.sourceIndex+3]+Be.source[Be.sourceIndex+2])))return s;for(Be.sourceIndex+=4,gt=ut;gt;--gt)Be.dest[Be.destLen++]=Be.source[Be.sourceIndex++];return Be.bitcount=0,n}(X);break;case 1:R=N(X,a,u);break;case 2:Ye=We=Qe=Ne=$=Se=Oe=Ue=Ae=he=fe=se=void 0;for(var $,se=X,fe=X.ltree,he=X.dtree,Ae=k(se,5,257),Ue=k(se,5,1),Oe=k(se,4,4),Se=0;Se<19;++Se)j[Se]=0;for(Se=0;Se<Oe;++Se){var Qe=k(se,3,0);j[C[Se]]=Qe}for(M(T,j,0,19),$=0;$<Ae+Ue;){var We=O(se,T);switch(We){case 16:for(var Ye=j[$-1],Ne=k(se,2,3);Ne;--Ne)j[$++]=Ye;break;case 17:for(Ne=k(se,3,3);Ne;--Ne)j[$++]=0;break;case 18:for(Ne=k(se,7,11);Ne;--Ne)j[$++]=0;break;default:j[$++]=We}}M(fe,j,0,Ae),M(he,j,Ae,Ue),R=N(X,X.ltree,X.dtree);break;default:R=s}if(R!==n)throw new Error("Data error")}while(!P);return X.destLen<X.dest.length?typeof X.dest.slice=="function"?X.dest.slice(0,X.destLen):X.dest.subarray(0,X.destLen):X.dest};function W(_,E,R,P,B){return Math.pow(1-B,3)*_+3*Math.pow(1-B,2)*B*E+3*(1-B)*Math.pow(B,2)*R+Math.pow(B,3)*P}function Z(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function I(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function q(_){throw new Error(_)}function D(_,E){_||q(E)}Z.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Z.prototype.addPoint=function(_,E){typeof _=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=_,this.x2=_),_<this.x1&&(this.x1=_),_>this.x2&&(this.x2=_)),typeof E=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=E,this.y2=E),E<this.y1&&(this.y1=E),E>this.y2&&(this.y2=E))},Z.prototype.addX=function(_){this.addPoint(_,null)},Z.prototype.addY=function(_){this.addPoint(null,_)},Z.prototype.addBezier=function(_,E,R,P,B,X,$,se){var fe=[_,E],he=[R,P],Ae=[B,X],Ue=[$,se];this.addPoint(_,E),this.addPoint($,se);for(var Oe=0;Oe<=1;Oe++){var Se,Qe=6*fe[Oe]-12*he[Oe]+6*Ae[Oe],We=-3*fe[Oe]+9*he[Oe]-9*Ae[Oe]+3*Ue[Oe],Ye=3*he[Oe]-3*fe[Oe];We==0?Qe==0||0<(Se=-Ye/Qe)&&Se<1&&(Oe===0&&this.addX(W(fe[Oe],he[Oe],Ae[Oe],Ue[Oe],Se)),Oe===1&&this.addY(W(fe[Oe],he[Oe],Ae[Oe],Ue[Oe],Se))):(Se=Math.pow(Qe,2)-4*Ye*We)<0||(0<(Ye=(-Qe+Math.sqrt(Se))/(2*We))&&Ye<1&&(Oe===0&&this.addX(W(fe[Oe],he[Oe],Ae[Oe],Ue[Oe],Ye)),Oe===1&&this.addY(W(fe[Oe],he[Oe],Ae[Oe],Ue[Oe],Ye))),0<(Ye=(-Qe-Math.sqrt(Se))/(2*We))&&Ye<1&&(Oe===0&&this.addX(W(fe[Oe],he[Oe],Ae[Oe],Ue[Oe],Ye)),Oe===1&&this.addY(W(fe[Oe],he[Oe],Ae[Oe],Ue[Oe],Ye))))}},Z.prototype.addQuad=function(_,E,R,P,B,X){R=_+2/3*(R-_),P=E+2/3*(P-E),this.addBezier(_,E,R,P,R+1/3*(B-_),P+1/3*(X-E),B,X)},I.prototype.moveTo=function(_,E){this.commands.push({type:"M",x:_,y:E})},I.prototype.lineTo=function(_,E){this.commands.push({type:"L",x:_,y:E})},I.prototype.curveTo=I.prototype.bezierCurveTo=function(_,E,R,P,B,X){this.commands.push({type:"C",x1:_,y1:E,x2:R,y2:P,x:B,y:X})},I.prototype.quadTo=I.prototype.quadraticCurveTo=function(_,E,R,P){this.commands.push({type:"Q",x1:_,y1:E,x:R,y:P})},I.prototype.close=I.prototype.closePath=function(){this.commands.push({type:"Z"})},I.prototype.extend=function(_){var E;if(_.commands)_=_.commands;else if(_ instanceof Z)return E=_,this.moveTo(E.x1,E.y1),this.lineTo(E.x2,E.y1),this.lineTo(E.x2,E.y2),this.lineTo(E.x1,E.y2),void this.close();Array.prototype.push.apply(this.commands,_)},I.prototype.getBoundingBox=function(){for(var _=new Z,E=0,R=0,P=0,B=0,X=0;X<this.commands.length;X++){var $=this.commands[X];switch($.type){case"M":_.addPoint($.x,$.y),E=P=$.x,R=B=$.y;break;case"L":_.addPoint($.x,$.y),P=$.x,B=$.y;break;case"Q":_.addQuad(P,B,$.x1,$.y1,$.x,$.y),P=$.x,B=$.y;break;case"C":_.addBezier(P,B,$.x1,$.y1,$.x2,$.y2,$.x,$.y),P=$.x,B=$.y;break;case"Z":P=E,B=R;break;default:throw new Error("Unexpected path command "+$.type)}}return _.isEmpty()&&_.addPoint(0,0),_},I.prototype.draw=function(_){_.beginPath();for(var E=0;E<this.commands.length;E+=1){var R=this.commands[E];R.type==="M"?_.moveTo(R.x,R.y):R.type==="L"?_.lineTo(R.x,R.y):R.type==="C"?_.bezierCurveTo(R.x1,R.y1,R.x2,R.y2,R.x,R.y):R.type==="Q"?_.quadraticCurveTo(R.x1,R.y1,R.x,R.y):R.type==="Z"&&_.closePath()}this.fill&&(_.fillStyle=this.fill,_.fill()),this.stroke&&(_.strokeStyle=this.stroke,_.lineWidth=this.strokeWidth,_.stroke())},I.prototype.toPathData=function(_){function E(){for(var X=arguments,$="",se=0;se<arguments.length;se+=1){var fe=X[se];0<=fe&&0<se&&($+=" "),$+=(fe=fe,Math.round(fe)===fe?""+Math.round(fe):fe.toFixed(_))}return $}_=_!==void 0?_:2;for(var R="",P=0;P<this.commands.length;P+=1){var B=this.commands[P];B.type==="M"?R+="M"+E(B.x,B.y):B.type==="L"?R+="L"+E(B.x,B.y):B.type==="C"?R+="C"+E(B.x1,B.y1,B.x2,B.y2,B.x,B.y):B.type==="Q"?R+="Q"+E(B.x1,B.y1,B.x,B.y):B.type==="Z"&&(R+="Z")}return R},I.prototype.toSVG=function(_){var E=(E='<path d="')+this.toPathData(_)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?E+=' fill="none"':E+=' fill="'+this.fill+'"'),this.stroke&&(E+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),E+="/>"},I.prototype.toDOMElement=function(E){var E=this.toPathData(E),R=document.createElementNS("http://www.w3.org/2000/svg","path");return R.setAttribute("d",E),R};var F={fail:q,argument:D,assert:D},H={},Y={},te={};function ie(_){return function(){return _}}Y.BYTE=function(_){return F.argument(0<=_&&_<=255,"Byte value should be between 0 and 255."),[_]},te.BYTE=ie(1),Y.CHAR=function(_){return[_.charCodeAt(0)]},te.CHAR=ie(1),Y.CHARARRAY=function(_){for(var E=[],R=0;R<_.length;R+=1)E[R]=_.charCodeAt(R);return E},te.CHARARRAY=function(_){return _.length},Y.USHORT=function(_){return[_>>8&255,255&_]},te.USHORT=ie(2),Y.SHORT=function(_){return[(_=32768<=_?-(65536-_):_)>>8&255,255&_]},te.SHORT=ie(2),Y.UINT24=function(_){return[_>>16&255,_>>8&255,255&_]},te.UINT24=ie(3),Y.ULONG=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},te.ULONG=ie(4),Y.LONG=function(_){return[(_=2147483648<=_?-(4294967296-_):_)>>24&255,_>>16&255,_>>8&255,255&_]},te.LONG=ie(4),Y.FIXED=Y.ULONG,te.FIXED=te.ULONG,Y.FWORD=Y.SHORT,te.FWORD=te.SHORT,Y.UFWORD=Y.USHORT,te.UFWORD=te.USHORT,Y.LONGDATETIME=function(_){return[0,0,0,0,_>>24&255,_>>16&255,_>>8&255,255&_]},te.LONGDATETIME=ie(8),Y.TAG=function(_){return F.argument(_.length===4,"Tag should be exactly 4 ASCII characters."),[_.charCodeAt(0),_.charCodeAt(1),_.charCodeAt(2),_.charCodeAt(3)]},te.TAG=ie(4),Y.Card8=Y.BYTE,te.Card8=te.BYTE,Y.Card16=Y.USHORT,te.Card16=te.USHORT,Y.OffSize=Y.BYTE,te.OffSize=te.BYTE,Y.SID=Y.USHORT,te.SID=te.USHORT,Y.NUMBER=function(_){return-107<=_&&_<=107?[_+139]:108<=_&&_<=1131?[247+((_-=108)>>8),255&_]:-1131<=_&&_<=-108?[251+((_=-_-108)>>8),255&_]:-32768<=_&&_<=32767?Y.NUMBER16(_):Y.NUMBER32(_)},te.NUMBER=function(_){return Y.NUMBER(_).length},Y.NUMBER16=function(_){return[28,_>>8&255,255&_]},te.NUMBER16=ie(3),Y.NUMBER32=function(_){return[29,_>>24&255,_>>16&255,_>>8&255,255&_]},te.NUMBER32=ie(5),Y.REAL=function(_){for(var E=_.toString(),R=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(E),P=(R&&(R=parseFloat("1e"+((R[2]?+R[2]:0)+R[1].length)),E=(Math.round(_*R)/R).toString()),""),B=0,X=E.length;B<X;B+=1){var $=E[B];P+=$==="e"?E[++B]==="-"?"c":"b":$==="."?"a":$==="-"?"e":$}for(var se=[30],fe=0,he=(P+=1&P.length?"f":"ff").length;fe<he;fe+=2)se.push(parseInt(P.substr(fe,2),16));return se},te.REAL=function(_){return Y.REAL(_).length},Y.NAME=Y.CHARARRAY,te.NAME=te.CHARARRAY,Y.STRING=Y.CHARARRAY,te.STRING=te.CHARARRAY,H.UTF8=function(_,E,R){for(var P=[],B=R,X=0;X<B;X++,E+=1)P[X]=_.getUint8(E);return String.fromCharCode.apply(null,P)},H.UTF16=function(_,E,R){for(var P=[],B=R/2,X=0;X<B;X++,E+=2)P[X]=_.getUint16(E);return String.fromCharCode.apply(null,P)},Y.UTF16=function(_){for(var E=[],R=0;R<_.length;R+=1){var P=_.charCodeAt(R);E[E.length]=P>>8&255,E[E.length]=255&P}return E},te.UTF16=function(_){return 2*_.length};var de,_e={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},le=(H.MACSTRING=function(_,E,R,P){var B=_e[P];if(B!==void 0){for(var X="",$=0;$<R;$++){var se=_.getUint8(E+$);X+=se<=127?String.fromCharCode(se):B[127&se]}return X}},typeof WeakMap=="function"&&new WeakMap);function re(_){return-128<=_&&_<=127}Y.MACSTRING=function(_,E){var R=function($){if(!de)for(var se in de={},_e)de[se]=new String(se);var fe=de[$];if(fe!==void 0){if(le){var he=le.get(fe);if(he!==void 0)return he}var Ae=_e[$];if(Ae!==void 0){for(var Ue={},Oe=0;Oe<Ae.length;Oe++)Ue[Ae.charCodeAt(Oe)]=Oe+128;return le&&le.set(fe,Ue),Ue}}}(E);if(R!==void 0){for(var P=[],B=0;B<_.length;B++){var X=_.charCodeAt(B);if(128<=X&&(X=R[X])===void 0)return;P[B]=X}return P}},te.MACSTRING=function(_,E){return _=Y.MACSTRING(_,E),_!==void 0?_.length:0},Y.VARDELTAS=function(_){for(var P=0,E=[];P<_.length;)var R=_[P],P=(R===0?function(B,X,$){for(var se=0,fe=B.length;X<fe&&se<64&&B[X]===0;)++X,++se;return $.push(128|se-1),X}:-128<=R&&R<=127?function(B,X,$){for(var se=0,fe=B.length,he=X;he<fe&&se<64;){var Ae=B[he];if(!re(Ae)||Ae===0&&he+1<fe&&B[he+1]===0)break;++he,++se}$.push(se-1);for(var Ue=X;Ue<he;++Ue)$.push(B[Ue]+256&255);return he}:function(B,X,$){for(var se=0,fe=B.length,he=X;he<fe&&se<64;){var Ae=B[he];if(Ae===0||re(Ae)&&he+1<fe&&re(B[he+1]))break;++he,++se}$.push(64|se-1);for(var Ue=X;Ue<he;++Ue){var Oe=B[Ue];$.push(Oe+65536>>8&255,Oe+256&255)}return he})(_,P,E);return E},Y.INDEX=function(_){for(var E=1,R=[E],P=[],B=0;B<_.length;B+=1){var X=Y.OBJECT(_[B]);Array.prototype.push.apply(P,X),E+=X.length,R.push(E)}if(P.length===0)return[0,0];for(var $=[],se=1+Math.floor(Math.log(E)/Math.log(2))/8|0,fe=[void 0,Y.BYTE,Y.USHORT,Y.UINT24,Y.ULONG][se],he=0;he<R.length;he+=1){var Ae=fe(R[he]);Array.prototype.push.apply($,Ae)}return Array.prototype.concat(Y.Card16(_.length),Y.OffSize(se),$,P)},te.INDEX=function(_){return Y.INDEX(_).length},Y.DICT=function(_){for(var E=[],R=Object.keys(_),P=R.length,B=0;B<P;B+=1){var X=parseInt(R[B],0),$=_[X];E=(E=E.concat(Y.OPERAND($.value,$.type))).concat(Y.OPERATOR(X))}return E},te.DICT=function(_){return Y.DICT(_).length},Y.OPERATOR=function(_){return _<1200?[_]:[12,_-1200]},Y.OPERAND=function(_,E){var R=[];if(Array.isArray(E))for(var P=0;P<E.length;P+=1)F.argument(_.length===E.length,"Not enough arguments given for type"+E),R=R.concat(Y.OPERAND(_[P],E[P]));else if(E==="SID")R=R.concat(Y.NUMBER(_));else if(E==="offset")R=R.concat(Y.NUMBER32(_));else if(E==="number")R=R.concat(Y.NUMBER(_));else{if(E!=="real")throw new Error("Unknown operand type "+E);R=R.concat(Y.REAL(_))}return R},Y.OP=Y.BYTE,te.OP=te.BYTE;var pe=typeof WeakMap=="function"&&new WeakMap;function Q(_,E,R){for(var P=0;P<E.length;P+=1){var B=E[P];this[B.name]=B.value}if(this.tableName=_,this.fields=E,R)for(var X=Object.keys(R),$=0;$<X.length;$+=1){var se=X[$],fe=R[se];this[se]!==void 0&&(this[se]=fe)}}function ce(_,E,R){R===void 0&&(R=E.length);var P=new Array(E.length+1);P[0]={name:_+"Count",type:"USHORT",value:R};for(var B=0;B<E.length;B++)P[B+1]={name:_+B,type:"USHORT",value:E[B]};return P}function be(_,E,R){var P=E.length,B=new Array(P+1);B[0]={name:_+"Count",type:"USHORT",value:P};for(var X=0;X<P;X++)B[X+1]={name:_+X,type:"TABLE",value:R(E[X],X)};return B}function Re(_,E,R){var P=E.length,B=[];B[0]={name:_+"Count",type:"USHORT",value:P};for(var X=0;X<P;X++)B=B.concat(R(E[X],X));return B}function xe(_){_.format===1?Q.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ce("glyph",_.glyphs))):F.assert(!1,"Can't create coverage table format 2 yet.")}function Te(_){Q.call(this,"scriptListTable",Re("scriptRecord",_,function(E,R){var P=E.script,B=P.defaultLangSys;return F.assert(!!B,"Unable to write GSUB: script "+E.tag+" has no default language system."),[{name:"scriptTag"+R,type:"TAG",value:E.tag},{name:"script"+R,type:"TABLE",value:new Q("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Q("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:B.reqFeatureIndex}].concat(ce("featureIndex",B.featureIndexes)))}].concat(Re("langSys",P.langSysRecords,function(X,$){var se=X.langSys;return[{name:"langSysTag"+$,type:"TAG",value:X.tag},{name:"langSys"+$,type:"TABLE",value:new Q("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:se.reqFeatureIndex}].concat(ce("featureIndex",se.featureIndexes)))}]})))}]}))}function Le(_){Q.call(this,"featureListTable",Re("featureRecord",_,function(E,R){var P=E.feature;return[{name:"featureTag"+R,type:"TAG",value:E.tag},{name:"feature"+R,type:"TABLE",value:new Q("featureTable",[{name:"featureParams",type:"USHORT",value:P.featureParams}].concat(ce("lookupListIndex",P.lookupListIndexes)))}]}))}function Je(_,E){Q.call(this,"lookupListTable",be("lookup",_,function(R){var P=E[R.lookupType];return F.assert(!!P,"Unable to write GSUB lookup type "+R.lookupType+" tables."),new Q("lookupTable",[{name:"lookupType",type:"USHORT",value:R.lookupType},{name:"lookupFlag",type:"USHORT",value:R.lookupFlag}].concat(be("subtable",R.subtables,P)))}))}Y.CHARSTRING=function(_){if(pe){var E=pe.get(_);if(E!==void 0)return E}for(var X=[],R=_.length,P=0;P<R;P+=1)var B=_[P],X=X.concat(Y[B.type](B.value));return pe&&pe.set(_,X),X},te.CHARSTRING=function(_){return Y.CHARSTRING(_).length},Y.OBJECT=function(_){var E=Y[_.type];return F.argument(E!==void 0,"No encoding function for type "+_.type),E(_.value)},te.OBJECT=function(_){var E=te[_.type];return F.argument(E!==void 0,"No sizeOf function for type "+_.type),E(_.value)},Y.TABLE=function(_){for(var E=[],R=_.fields.length,P=[],B=[],X=0;X<R;X+=1){var $=_.fields[X],fe=Y[$.type],se=(F.argument(fe!==void 0,"No encoding function for field type "+$.type+" ("+$.name+")"),_[$.name]),fe=fe(se=se===void 0?$.value:se);$.type==="TABLE"?(B.push(E.length),E=E.concat([0,0]),P.push(fe)):E=E.concat(fe)}for(var he=0;he<P.length;he+=1){var Ae=B[he],Ue=E.length;F.argument(Ue<65536,"Table "+_.tableName+" too big."),E[Ae]=Ue>>8,E[Ae+1]=255&Ue,E=E.concat(P[he])}return E},te.TABLE=function(_){for(var E=0,R=_.fields.length,P=0;P<R;P+=1){var B=_.fields[P],X=te[B.type],$=(F.argument(X!==void 0,"No sizeOf function for field type "+B.type+" ("+B.name+")"),_[B.name]);E+=X($=$===void 0?B.value:$),B.type==="TABLE"&&(E+=2)}return E},Y.RECORD=Y.TABLE,te.RECORD=te.TABLE,Y.LITERAL=function(_){return _},te.LITERAL=function(_){return _.length},Q.prototype.encode=function(){return Y.TABLE(this)},Q.prototype.sizeOf=function(){return te.TABLE(this)};var ke={Table:Q,Record:Q,Coverage:(xe.prototype=Object.create(Q.prototype)).constructor=xe,ScriptList:(Te.prototype=Object.create(Q.prototype)).constructor=Te,FeatureList:(Le.prototype=Object.create(Q.prototype)).constructor=Le,LookupList:(Je.prototype=Object.create(Q.prototype)).constructor=Je,ushortList:ce,tableList:be,recordList:Re};function ue(_,E){return _.getUint8(E)}function oe(_,E){return _.getUint16(E,!1)}function Ce(_,E){return _.getUint32(E,!1)}function He(_,E){return _.getInt16(E,!1)+_.getUint16(E+2,!1)/65535}var Ge={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ve(_,E){this.data=_,this.offset=E,this.relativeOffset=0}ve.prototype.parseByte=function(){var _=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,_},ve.prototype.parseChar=function(){var _=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,_},ve.prototype.parseCard8=ve.prototype.parseByte,ve.prototype.parseCard16=ve.prototype.parseUShort=function(){var _=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,_},ve.prototype.parseSID=ve.prototype.parseUShort,ve.prototype.parseOffset16=ve.prototype.parseUShort,ve.prototype.parseShort=function(){var _=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,_},ve.prototype.parseF2Dot14=function(){var _=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,_},ve.prototype.parseOffset32=ve.prototype.parseULong=function(){var _=Ce(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,_},ve.prototype.parseFixed=function(){var _=He(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,_},ve.prototype.parseString=function(_){var E=this.data,R=this.offset+this.relativeOffset,P="";this.relativeOffset+=_;for(var B=0;B<_;B++)P+=String.fromCharCode(E.getUint8(R+B));return P},ve.prototype.parseTag=function(){return this.parseString(4)},ve.prototype.parseLongDateTime=function(){var _=Ce(this.data,this.offset+this.relativeOffset+4);return _-=2082844800,this.relativeOffset+=8,_},ve.prototype.parseVersion=function(_){var E=oe(this.data,this.offset+this.relativeOffset),R=oe(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,E+R/(_=_===void 0?4096:_)/10},ve.prototype.skip=function(_,E){this.relativeOffset+=Ge[_]*(E=E===void 0?1:E)},ve.prototype.parseULongList=function(_){_===void 0&&(_=this.parseULong());for(var E=new Array(_),R=this.data,P=this.offset+this.relativeOffset,B=0;B<_;B++)E[B]=R.getUint32(P),P+=4;return this.relativeOffset+=4*_,E},ve.prototype.parseOffset16List=ve.prototype.parseUShortList=function(_){_===void 0&&(_=this.parseUShort());for(var E=new Array(_),R=this.data,P=this.offset+this.relativeOffset,B=0;B<_;B++)E[B]=R.getUint16(P),P+=2;return this.relativeOffset+=2*_,E},ve.prototype.parseShortList=function(_){for(var E=new Array(_),R=this.data,P=this.offset+this.relativeOffset,B=0;B<_;B++)E[B]=R.getInt16(P),P+=2;return this.relativeOffset+=2*_,E},ve.prototype.parseByteList=function(_){for(var E=new Array(_),R=this.data,P=this.offset+this.relativeOffset,B=0;B<_;B++)E[B]=R.getUint8(P++);return this.relativeOffset+=_,E},ve.prototype.parseList=function(_,E){E||(E=_,_=this.parseUShort());for(var R=new Array(_),P=0;P<_;P++)R[P]=E.call(this);return R},ve.prototype.parseList32=function(_,E){E||(E=_,_=this.parseULong());for(var R=new Array(_),P=0;P<_;P++)R[P]=E.call(this);return R},ve.prototype.parseRecordList=function(_,E){E||(E=_,_=this.parseUShort());for(var R=new Array(_),P=Object.keys(E),B=0;B<_;B++){for(var X={},$=0;$<P.length;$++){var se=P[$],fe=E[se];X[se]=fe.call(this)}R[B]=X}return R},ve.prototype.parseRecordList32=function(_,E){E||(E=_,_=this.parseULong());for(var R=new Array(_),P=Object.keys(E),B=0;B<_;B++){for(var X={},$=0;$<P.length;$++){var se=P[$],fe=E[se];X[se]=fe.call(this)}R[B]=X}return R},ve.prototype.parseStruct=function(_){if(typeof _=="function")return _.call(this);for(var E=Object.keys(_),R={},P=0;P<E.length;P++){var B=E[P],X=_[B];R[B]=X.call(this)}return R},ve.prototype.parseValueRecord=function(_){var E;if((_=_===void 0?this.parseUShort():_)!==0)return E={},1&_&&(E.xPlacement=this.parseShort()),2&_&&(E.yPlacement=this.parseShort()),4&_&&(E.xAdvance=this.parseShort()),8&_&&(E.yAdvance=this.parseShort()),16&_&&(E.xPlaDevice=void 0,this.parseShort()),32&_&&(E.yPlaDevice=void 0,this.parseShort()),64&_&&(E.xAdvDevice=void 0,this.parseShort()),128&_&&(E.yAdvDevice=void 0,this.parseShort()),E},ve.prototype.parseValueRecordList=function(){for(var _=this.parseUShort(),E=this.parseUShort(),R=new Array(E),P=0;P<E;P++)R[P]=this.parseValueRecord(_);return R},ve.prototype.parsePointer=function(_){var E=this.parseOffset16();if(0<E)return new ve(this.data,this.offset+E).parseStruct(_)},ve.prototype.parsePointer32=function(_){var E=this.parseOffset32();if(0<E)return new ve(this.data,this.offset+E).parseStruct(_)},ve.prototype.parseListOfLists=function(_){for(var E=this.parseOffset16List(),R=E.length,P=this.relativeOffset,B=new Array(R),X=0;X<R;X++){var $=E[X];if($===0)B[X]=void 0;else if(this.relativeOffset=$,_){for(var se=this.parseOffset16List(),fe=new Array(se.length),he=0;he<se.length;he++)this.relativeOffset=$+se[he],fe[he]=_.call(this);B[X]=fe}else B[X]=this.parseUShortList()}return this.relativeOffset=P,B},ve.prototype.parseCoverage=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort(),R=this.parseUShort();if(E===1)return{format:1,glyphs:this.parseUShortList(R)};if(E!==2)throw new Error("0x"+_.toString(16)+": Coverage format must be 1 or 2.");for(var P=new Array(R),B=0;B<R;B++)P[B]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:P}},ve.prototype.parseClassDef=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();if(E===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(E===2)return{format:2,ranges:this.parseRecordList({start:ve.uShort,end:ve.uShort,classId:ve.uShort})};throw new Error("0x"+_.toString(16)+": ClassDef format must be 1 or 2.")},ve.list=function(_,E){return function(){return this.parseList(_,E)}},ve.list32=function(_,E){return function(){return this.parseList32(_,E)}},ve.recordList=function(_,E){return function(){return this.parseRecordList(_,E)}},ve.recordList32=function(_,E){return function(){return this.parseRecordList32(_,E)}},ve.pointer=function(_){return function(){return this.parsePointer(_)}},ve.pointer32=function(_){return function(){return this.parsePointer32(_)}},ve.tag=ve.prototype.parseTag,ve.byte=ve.prototype.parseByte,ve.uShort=ve.offset16=ve.prototype.parseUShort,ve.uShortList=ve.prototype.parseUShortList,ve.uLong=ve.offset32=ve.prototype.parseULong,ve.uLongList=ve.prototype.parseULongList,ve.struct=ve.prototype.parseStruct,ve.coverage=ve.prototype.parseCoverage,ve.classDef=ve.prototype.parseClassDef;var Ie={reserved:ve.uShort,reqFeatureIndex:ve.uShort,featureIndexes:ve.uShortList},Me=(ve.prototype.parseScriptList=function(){return this.parsePointer(ve.recordList({tag:ve.tag,script:ve.pointer({defaultLangSys:ve.pointer(Ie),langSysRecords:ve.recordList({tag:ve.tag,langSys:ve.pointer(Ie)})})}))||[]},ve.prototype.parseFeatureList=function(){return this.parsePointer(ve.recordList({tag:ve.tag,feature:ve.pointer({featureParams:ve.offset16,lookupListIndexes:ve.uShortList})}))||[]},ve.prototype.parseLookupList=function(_){return this.parsePointer(ve.list(ve.pointer(function(){var E=this.parseUShort(),R=(F.argument(1<=E&&E<=9,"GPOS/GSUB lookup type "+E+" unknown."),this.parseUShort()),P=16&R;return{lookupType:E,lookupFlag:R,subtables:this.parseList(ve.pointer(_[E])),markFilteringSet:P?this.parseUShort():void 0}})))||[]},ve.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var _=this.parseUShort(),E=this.parseUShort();return F.argument(_===1&&E<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ve.offset32,featureTableSubstitutionOffset:ve.offset32})})||[]},{getByte:ue,getCard8:ue,getUShort:oe,getCard16:oe,getShort:function(_,E){return _.getInt16(E,!1)},getULong:Ce,getFixed:He,getTag:function(_,E){for(var R="",P=E;P<E+4;P+=1)R+=String.fromCharCode(_.getInt8(P));return R},getOffset:function(_,E,R){for(var P=0,B=0;B<R;B+=1)P=(P<<=8)+_.getUint8(E+B);return P},getBytes:function(_,E,R){for(var P=[],B=E;B<R;B+=1)P.push(_.getUint8(B));return P},bytesToString:function(_){for(var E="",R=0;R<_.length;R+=1)E+=String.fromCharCode(_[R]);return E},Parser:ve}),J={parse:function(_,E){for(var R={},P=(R.version=Me.getUShort(_,E),F.argument(R.version===0,"cmap table version should be 0."),R.numTables=Me.getUShort(_,E+2),-1),B=R.numTables-1;0<=B;--B){var X=Me.getUShort(_,E+4+8*B),$=Me.getUShort(_,E+4+8*B+2);if(X===3&&($===0||$===1||$===10)||X===0&&($===0||$===1||$===2||$===3||$===4)){P=Me.getULong(_,E+4+8*B+4);break}}if(P===-1)throw new Error("No valid cmap sub-tables found.");var se=new Me.Parser(_,E+P);if(R.format=se.parseUShort(),R.format===12){var fe,he=R,Ae=se;Ae.parseUShort(),he.length=Ae.parseULong(),he.language=Ae.parseULong(),he.groupCount=fe=Ae.parseULong(),he.glyphIndexMap={};for(var Ue=0;Ue<fe;Ue+=1)for(var Oe=Ae.parseULong(),Se=Ae.parseULong(),Qe=Ae.parseULong(),We=Oe;We<=Se;We+=1)he.glyphIndexMap[We]=Qe,Qe++}else{if(R.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+R.format+").");var Ye=R,Ne=_,Be=E,ut=P;Ye.length=se.parseUShort(),Ye.language=se.parseUShort(),Ye.segCount=gt=se.parseUShort()>>1,se.skip("uShort",3),Ye.glyphIndexMap={};for(var gt,dt=new Me.Parser(Ne,Be+ut+14),ht=new Me.Parser(Ne,Be+ut+16+2*gt),vt=new Me.Parser(Ne,Be+ut+16+4*gt),kt=new Me.Parser(Ne,Be+ut+16+6*gt),Vt=Be+ut+16+8*gt,Wt=0;Wt<gt-1;Wt+=1)for(var nr=void 0,ir=dt.parseUShort(),Er=ht.parseUShort(),Dt=vt.parseShort(),Ft=kt.parseUShort(),Rt=Er;Rt<=ir;Rt+=1)Ft!==0?(Vt=(Vt=kt.offset+kt.relativeOffset-2)+Ft+2*(Rt-Er),(nr=Me.getUShort(Ne,Vt))!==0&&(nr=nr+Dt&65535)):nr=Rt+Dt&65535,Ye.glyphIndexMap[Rt]=nr}return R},make:function(_){for(var E=!0,R=_.length-1;0<R;--R)if(65535<_.get(R).unicode){console.log("Adding CMAP format 12 (needed!)"),E=!1;break}var P,B,X=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:E?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:E?12:20}],$=(X=(X=E?X:X.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new ke.Table("cmap",X));for($.segments=[],R=0;R<_.length;R+=1){for(var se=_.get(R),fe=0;fe<se.unicodes.length;fe+=1)P=se.unicodes[fe],B=R,$.segments.push({end:P,start:P,delta:-(P-B),offset:0,glyphIndex:B});$.segments=$.segments.sort(function(Be,ut){return Be.start-ut.start})}$.segments.push({end:65535,start:65535,delta:1,offset:0});var he=$.segments.length,Ae=0,Ue=[],Oe=[],Se=[],Qe=[],We=[],Ye=[];for(R=0;R<he;R+=1){var Ne=$.segments[R];Ne.end<=65535&&Ne.start<=65535?(Ue=Ue.concat({name:"end_"+R,type:"USHORT",value:Ne.end}),Oe=Oe.concat({name:"start_"+R,type:"USHORT",value:Ne.start}),Se=Se.concat({name:"idDelta_"+R,type:"SHORT",value:Ne.delta}),Qe=Qe.concat({name:"idRangeOffset_"+R,type:"USHORT",value:Ne.offset}),Ne.glyphId!==void 0&&(We=We.concat({name:"glyph_"+R,type:"USHORT",value:Ne.glyphId}))):Ae+=1,E||Ne.glyphIndex===void 0||(Ye=(Ye=(Ye=Ye.concat({name:"cmap12Start_"+R,type:"ULONG",value:Ne.start})).concat({name:"cmap12End_"+R,type:"ULONG",value:Ne.end})).concat({name:"cmap12Glyph_"+R,type:"ULONG",value:Ne.glyphIndex}))}return $.segCountX2=2*(he-Ae),$.searchRange=2*Math.pow(2,Math.floor(Math.log(he-Ae)/Math.log(2))),$.entrySelector=Math.log($.searchRange/2)/Math.log(2),$.rangeShift=$.segCountX2-$.searchRange,$.fields=$.fields.concat(Ue),$.fields.push({name:"reservedPad",type:"USHORT",value:0}),$.fields=$.fields.concat(Oe),$.fields=$.fields.concat(Se),$.fields=$.fields.concat(Qe),$.fields=$.fields.concat(We),$.cmap4Length=14+2*Ue.length+2+2*Oe.length+2*Se.length+2*Qe.length+2*We.length,E||(X=16+4*Ye.length,$.cmap12Offset=20+$.cmap4Length,$.fields=$.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:X},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ye.length/3}]),$.fields=$.fields.concat(Ye)),$}},ee=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],K=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ne=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],me=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ee(_){this.font=_}function De(_){this.cmap=_}function $e(_,E){this.encoding=_,this.charset=E}function ge(_){switch(_.version){case 1:this.names=me.slice();break;case 2:this.names=new Array(_.numberOfGlyphs);for(var E=0;E<_.numberOfGlyphs;E++)_.glyphNameIndex[E]<me.length?this.names[E]=me[_.glyphNameIndex[E]]:this.names[E]=_.names[_.glyphNameIndex[E]-me.length];break;case 2.5:this.names=new Array(_.numberOfGlyphs);for(var R=0;R<_.numberOfGlyphs;R++)this.names[R]=me[R+_.glyphNameIndex[R]];break;default:this.names=[]}}Ee.prototype.charToGlyphIndex=function(_){var E=_.codePointAt(0),R=this.font.glyphs;if(R){for(var P=0;P<R.length;P+=1)for(var B=R.get(P),X=0;X<B.unicodes.length;X+=1)if(B.unicodes[X]===E)return P}return null},De.prototype.charToGlyphIndex=function(_){return this.cmap.glyphIndexMap[_.codePointAt(0)]||0},$e.prototype.charToGlyphIndex=function(_){return _=_.codePointAt(0),_=this.encoding[_],this.charset.indexOf(_)},ge.prototype.nameToGlyphIndex=function(_){return this.names.indexOf(_)},ge.prototype.glyphIndexToName=function(_){return this.names[_]};var ze={line:function(_,E,R,P,B){_.beginPath(),_.moveTo(E,R),_.lineTo(P,B),_.stroke()}};function je(_){this.bindConstructorValues(_)}function Ze(_,E,R){Object.defineProperty(_,E,{get:function(){return _.path,_[R]},set:function(P){_[R]=P},enumerable:!0,configurable:!0})}function Ke(_,E){if(this.font=_,this.glyphs={},Array.isArray(E))for(var R=0;R<E.length;R++)this.glyphs[R]=E[R];this.length=E&&E.length||0}je.prototype.bindConstructorValues=function(_){var E;this.index=_.index||0,this.name=_.name||null,this.unicode=_.unicode||void 0,this.unicodes=_.unicodes||_.unicode!==void 0?[_.unicode]:[],_.xMin&&(this.xMin=_.xMin),_.yMin&&(this.yMin=_.yMin),_.xMax&&(this.xMax=_.xMax),_.yMax&&(this.yMax=_.yMax),_.advanceWidth&&(this.advanceWidth=_.advanceWidth),Object.defineProperty(this,"path",(_=_.path,E=_||new I,{configurable:!0,get:function(){return E=typeof E=="function"?E():E},set:function(R){E=R}}))},je.prototype.addUnicode=function(_){this.unicodes.length===0&&(this.unicode=_),this.unicodes.push(_)},je.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},je.prototype.getPath=function(_,E,R,P,B){_=_!==void 0?_:0,E=E!==void 0?E:0,R=R!==void 0?R:72;for(var X,$,se=(P=P||{}).xScale,fe=P.yScale,he=((X=P.hinting&&B&&B.hinting?this.path&&B.hinting.exec(this,R):X)?($=B.hinting.getCommands(X),_=Math.round(_),E=Math.round(E),se=fe=1):($=this.path.commands,P=1/this.path.unitsPerEm*R,se===void 0&&(se=P),fe===void 0&&(fe=P)),new I),Ae=0;Ae<$.length;Ae+=1){var Ue=$[Ae];Ue.type==="M"?he.moveTo(_+Ue.x*se,E+-Ue.y*fe):Ue.type==="L"?he.lineTo(_+Ue.x*se,E+-Ue.y*fe):Ue.type==="Q"?he.quadraticCurveTo(_+Ue.x1*se,E+-Ue.y1*fe,_+Ue.x*se,E+-Ue.y*fe):Ue.type==="C"?he.curveTo(_+Ue.x1*se,E+-Ue.y1*fe,_+Ue.x2*se,E+-Ue.y2*fe,_+Ue.x*se,E+-Ue.y*fe):Ue.type==="Z"&&he.closePath()}return he},je.prototype.getContours=function(){if(this.points===void 0)return[];for(var _=[],E=[],R=0;R<this.points.length;R+=1){var P=this.points[R];E.push(P),P.lastPointOfContour&&(_.push(E),E=[])}return F.argument(E.length===0,"There are still points left in the current contour."),_},je.prototype.getMetrics=function(){for(var _=this.path.commands,E=[],R=[],P=0;P<_.length;P+=1){var B=_[P];B.type!=="Z"&&(E.push(B.x),R.push(B.y)),B.type!=="Q"&&B.type!=="C"||(E.push(B.x1),R.push(B.y1)),B.type==="C"&&(E.push(B.x2),R.push(B.y2))}var X={xMin:Math.min.apply(null,E),yMin:Math.min.apply(null,R),xMax:Math.max.apply(null,E),yMax:Math.max.apply(null,R),leftSideBearing:this.leftSideBearing};return isFinite(X.xMin)||(X.xMin=0),isFinite(X.xMax)||(X.xMax=this.advanceWidth),isFinite(X.yMin)||(X.yMin=0),isFinite(X.yMax)||(X.yMax=0),X.rightSideBearing=this.advanceWidth-X.leftSideBearing-(X.xMax-X.xMin),X},je.prototype.draw=function(_,E,R,P,B){this.getPath(E,R,P,B).draw(_)},je.prototype.drawPoints=function(_,E,R,P){function B(Ae,Ue,Oe,Se){var Qe=2*Math.PI;_.beginPath();for(var We=0;We<Ae.length;We+=1)_.moveTo(Ue+Ae[We].x*Se,Oe+Ae[We].y*Se),_.arc(Ue+Ae[We].x*Se,Oe+Ae[We].y*Se,2,0,Qe,!1);_.closePath(),_.fill()}E=E!==void 0?E:0,R=R!==void 0?R:0;for(var P=1/this.path.unitsPerEm*(P=P!==void 0?P:24),X=[],$=[],se=this.path,fe=0;fe<se.commands.length;fe+=1){var he=se.commands[fe];he.x!==void 0&&X.push({x:he.x,y:-he.y}),he.x1!==void 0&&$.push({x:he.x1,y:-he.y1}),he.x2!==void 0&&$.push({x:he.x2,y:-he.y2})}_.fillStyle="blue",B(X,E,R,P),_.fillStyle="red",B($,E,R,P)},je.prototype.drawMetrics=function(_,E,R,P){E=E!==void 0?E:0,R=R!==void 0?R:0,P=1/this.path.unitsPerEm*(P=P!==void 0?P:24),_.lineWidth=1,_.strokeStyle="black",ze.line(_,E,-1e4,E,1e4),ze.line(_,-1e4,R,1e4,R);var B=this.xMin||0,X=this.yMin||0,$=this.xMax||0,se=this.yMax||0,fe=this.advanceWidth||0;_.strokeStyle="blue",ze.line(_,E+B*P,-1e4,E+B*P,1e4),ze.line(_,E+$*P,-1e4,E+$*P,1e4),ze.line(_,-1e4,R+-X*P,1e4,R+-X*P),ze.line(_,-1e4,R+-se*P,1e4,R+-se*P),_.strokeStyle="green",ze.line(_,E+fe*P,-1e4,E+fe*P,1e4)},Ke.prototype.get=function(_){return typeof this.glyphs[_]=="function"&&(this.glyphs[_]=this.glyphs[_]()),this.glyphs[_]},Ke.prototype.push=function(_,E){this.glyphs[_]=E,this.length++};var rt={GlyphSet:Ke,glyphLoader:function(_,E){return new je({index:E,font:_})},ttfGlyphLoader:function(_,E,R,P,B,X){return function(){var $=new je({index:E,font:_});return $.path=function(){R($,P,B);var se=X(_.glyphs,$);return se.unitsPerEm=_.unitsPerEm,se},Ze($,"xMin","_xMin"),Ze($,"xMax","_xMax"),Ze($,"yMin","_yMin"),Ze($,"yMax","_yMax"),$}},cffGlyphLoader:function(_,E,R,P){return function(){var B=new je({index:E,font:_});return B.path=function(){var X=R(_,B,P);return X.unitsPerEm=_.unitsPerEm,X},B}}};function lt(_){return _=_.length<1240?107:_.length<33900?1131:32768,_}function at(_,E,R){var P,B=[],X=[],$=Me.getCard16(_,E);if($!==0){for(var se=Me.getByte(_,E+2),fe=E+($+1)*se+2,he=E+3,Ae=0;Ae<$+1;Ae+=1)B.push(Me.getOffset(_,he,se)),he+=se;P=fe+B[$]}else P=E+2;for(var Ue=0;Ue<B.length-1;Ue+=1){var Oe=Me.getBytes(_,fe+B[Ue],fe+B[Ue+1]);R&&(Oe=R(Oe)),X.push(Oe)}return{objects:X,startOffset:E,endOffset:P}}function Et(_,E){if(E===28)return _.parseByte()<<8|_.parseByte();if(E===29)return _.parseByte()<<24|_.parseByte()<<16|_.parseByte()<<8|_.parseByte();if(E===30){for(var R=_,P="",B=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var $=R.parseByte(),X=$>>4,$=15&$;if(X==15||(P+=B[X],$==15))break;P+=B[$]}return parseFloat(P)}if(32<=E&&E<=246)return E-139;if(247<=E&&E<=250)return 256*(E-247)+_.parseByte()+108;if(251<=E&&E<=254)return 256*-(E-251)-_.parseByte()-108;throw new Error("Invalid b0 "+E)}function _t(_,E,R){var P=new Me.Parser(_,E=E!==void 0?E:0),B=[],X=[];for(R=R!==void 0?R:_.length;P.relativeOffset<R;){var $=P.parseByte();$<=21?($===12&&($=1200+P.parseByte()),B.push([$,X]),X=[]):X.push(Et(P,$))}for(var se=B,fe={},he=0;he<se.length;he+=1){var Ae=se[he][0],Ue=se[he][1],Oe=void 0,Oe=Ue.length===1?Ue[0]:Ue;if(fe.hasOwnProperty(Ae)&&!isNaN(fe[Ae]))throw new Error("Object "+fe+" already has key "+Ae);fe[Ae]=Oe}return fe}function At(_,E){return E=E<=390?ee[E]:_[E-391]}function mt(_,E,R){for(var P,B={},X=0;X<E.length;X+=1){var $=E[X];if(Array.isArray($.type)){var se=[];se.length=$.type.length;for(var fe=0;fe<$.type.length;fe++)(P=_[$.op]!==void 0?_[$.op][fe]:void 0)===void 0&&(P=$.value!==void 0&&$.value[fe]!==void 0?$.value[fe]:null),$.type[fe]==="SID"&&(P=At(R,P)),se[fe]=P;B[$.name]=se}else(P=_[$.op])===void 0&&(P=$.value!==void 0?$.value:null),$.type==="SID"&&(P=At(R,P)),B[$.name]=P}return B}var Lt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Mt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function qt(_,E,R,P){return mt(_t(_,E,R),Mt,P)}function Bt(_,E,R,P){for(var B=[],X=0;X<R.length;X+=1){var $=new DataView(new Uint8Array(R[X]).buffer),$=(se=P,mt(_t($,0,$.byteLength),Lt,se)),se=($._subrs=[],$._subrsBias=0,$.private[0]),fe=$.private[1];se!==0&&fe!==0&&(se=qt(_,fe+E,se,P),$._defaultWidthX=se.defaultWidthX,$._nominalWidthX=se.nominalWidthX,se.subrs!==0&&(fe=at(_,fe+se.subrs+E),$._subrs=fe.objects,$._subrsBias=lt($._subrs)),$._privateDict=se),B.push($)}return B}function jt(_,E,R){var P,B,X,$,se,fe,he,Ae,Ue,Oe=new I,Se=[],Qe=0,We=!1,Ye=!1,Ne=0,Be=0,ut=(Ue=(_.isCIDFont?(se=_.tables.cff.topDict._fdSelect[E.index],se=_.tables.cff.topDict._fdArray[se],fe=se._subrs,he=se._subrsBias,Ae=se._defaultWidthX,se):(fe=_.tables.cff.topDict._subrs,he=_.tables.cff.topDict._subrsBias,Ae=_.tables.cff.topDict._defaultWidthX,_.tables.cff.topDict))._nominalWidthX,Ae);function gt(ht,vt){Ye&&Oe.closePath(),Oe.moveTo(ht,vt),Ye=!0}function dt(){Se.length%2==0||We||(ut=Se.shift()+Ue),Qe+=Se.length>>1,Se.length=0,We=!0}return function ht(vt){for(var kt,Vt,Wt,nr,ir,Er,Dt,Ft,Rt,sr,Gt,er,Nt=0;Nt<vt.length;){var Kt=vt[Nt];switch(Nt+=1,Kt){case 1:case 3:dt();break;case 4:1<Se.length&&!We&&(ut=Se.shift()+Ue,We=!0),Be+=Se.pop(),gt(Ne,Be);break;case 5:for(;0<Se.length;)Ne+=Se.shift(),Be+=Se.shift(),Oe.lineTo(Ne,Be);break;case 6:for(;0<Se.length&&(Ne+=Se.shift(),Oe.lineTo(Ne,Be),Se.length!==0);)Be+=Se.shift(),Oe.lineTo(Ne,Be);break;case 7:for(;0<Se.length&&(Be+=Se.shift(),Oe.lineTo(Ne,Be),Se.length!==0);)Ne+=Se.shift(),Oe.lineTo(Ne,Be);break;case 8:for(;0<Se.length;)P=Ne+Se.shift(),B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Ne=X+Se.shift(),Be=$+Se.shift(),Oe.curveTo(P,B,X,$,Ne,Be);break;case 10:ir=Se.pop()+he,(Er=fe[ir])&&ht(Er);break;case 11:return;case 12:switch(Kt=vt[Nt],Nt+=1,Kt){case 35:P=Ne+Se.shift(),B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Dt=X+Se.shift(),Ft=$+Se.shift(),Rt=Dt+Se.shift(),sr=Ft+Se.shift(),Gt=Rt+Se.shift(),er=sr+Se.shift(),Ne=Gt+Se.shift(),Be=er+Se.shift(),Se.shift(),Oe.curveTo(P,B,X,$,Dt,Ft),Oe.curveTo(Rt,sr,Gt,er,Ne,Be);break;case 34:P=Ne+Se.shift(),B=Be,X=P+Se.shift(),$=B+Se.shift(),Dt=X+Se.shift(),Ft=$,Rt=Dt+Se.shift(),sr=$,Gt=Rt+Se.shift(),er=Be,Ne=Gt+Se.shift(),Oe.curveTo(P,B,X,$,Dt,Ft),Oe.curveTo(Rt,sr,Gt,er,Ne,Be);break;case 36:P=Ne+Se.shift(),B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Dt=X+Se.shift(),Ft=$,Rt=Dt+Se.shift(),sr=$,Gt=Rt+Se.shift(),er=sr+Se.shift(),Ne=Gt+Se.shift(),Oe.curveTo(P,B,X,$,Dt,Ft),Oe.curveTo(Rt,sr,Gt,er,Ne,Be);break;case 37:P=Ne+Se.shift(),B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Dt=X+Se.shift(),Ft=$+Se.shift(),Rt=Dt+Se.shift(),sr=Ft+Se.shift(),Gt=Rt+Se.shift(),er=sr+Se.shift(),Math.abs(Gt-Ne)>Math.abs(er-Be)?Ne=Gt+Se.shift():Be=er+Se.shift(),Oe.curveTo(P,B,X,$,Dt,Ft),Oe.curveTo(Rt,sr,Gt,er,Ne,Be);break;default:console.log("Glyph "+E.index+": unknown operator 1200"+Kt),Se.length=0}break;case 14:0<Se.length&&!We&&(ut=Se.shift()+Ue,We=!0),Ye&&(Oe.closePath(),Ye=!1);break;case 18:dt();break;case 19:case 20:dt(),Nt+=Qe+7>>3;break;case 21:2<Se.length&&!We&&(ut=Se.shift()+Ue,We=!0),Be+=Se.pop(),gt(Ne+=Se.pop(),Be);break;case 22:1<Se.length&&!We&&(ut=Se.shift()+Ue,We=!0),gt(Ne+=Se.pop(),Be);break;case 23:dt();break;case 24:for(;2<Se.length;)P=Ne+Se.shift(),B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Ne=X+Se.shift(),Be=$+Se.shift(),Oe.curveTo(P,B,X,$,Ne,Be);Ne+=Se.shift(),Be+=Se.shift(),Oe.lineTo(Ne,Be);break;case 25:for(;6<Se.length;)Ne+=Se.shift(),Be+=Se.shift(),Oe.lineTo(Ne,Be);P=Ne+Se.shift(),B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Ne=X+Se.shift(),Be=$+Se.shift(),Oe.curveTo(P,B,X,$,Ne,Be);break;case 26:for(Se.length%2&&(Ne+=Se.shift());0<Se.length;)P=Ne,B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Ne=X,Be=$+Se.shift(),Oe.curveTo(P,B,X,$,Ne,Be);break;case 27:for(Se.length%2&&(Be+=Se.shift());0<Se.length;)P=Ne+Se.shift(),B=Be,X=P+Se.shift(),$=B+Se.shift(),Ne=X+Se.shift(),Be=$,Oe.curveTo(P,B,X,$,Ne,Be);break;case 28:kt=vt[Nt],Vt=vt[Nt+1],Se.push((kt<<24|Vt<<16)>>16),Nt+=2;break;case 29:ir=Se.pop()+_.gsubrsBias,(Er=_.gsubrs[ir])&&ht(Er);break;case 30:for(;0<Se.length&&(P=Ne,B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Ne=X+Se.shift(),Be=$+(Se.length===1?Se.shift():0),Oe.curveTo(P,B,X,$,Ne,Be),Se.length!==0);)P=Ne+Se.shift(),B=Be,X=P+Se.shift(),$=B+Se.shift(),Be=$+Se.shift(),Ne=X+(Se.length===1?Se.shift():0),Oe.curveTo(P,B,X,$,Ne,Be);break;case 31:for(;0<Se.length&&(P=Ne+Se.shift(),B=Be,X=P+Se.shift(),$=B+Se.shift(),Be=$+Se.shift(),Ne=X+(Se.length===1?Se.shift():0),Oe.curveTo(P,B,X,$,Ne,Be),Se.length!==0);)P=Ne,B=Be+Se.shift(),X=P+Se.shift(),$=B+Se.shift(),Ne=X+Se.shift(),Be=$+(Se.length===1?Se.shift():0),Oe.curveTo(P,B,X,$,Ne,Be);break;default:Kt<32?console.log("Glyph "+E.index+": unknown operator "+Kt):Kt<247?Se.push(Kt-139):Kt<251?(kt=vt[Nt],Nt+=1,Se.push(256*(Kt-247)+kt+108)):Kt<255?(kt=vt[Nt],Nt+=1,Se.push(256*-(Kt-251)-kt-108)):(kt=vt[Nt],Vt=vt[Nt+1],Wt=vt[Nt+2],nr=vt[Nt+3],Nt+=4,Se.push((kt<<24|Vt<<16|Wt<<8|nr)/65536))}}}(R),E.advanceWidth=ut,Oe}function zt(_,E){var R,P=ee.indexOf(_);return 0<=P&&(R=P),0<=(P=E.indexOf(_))?R=P+ee.length:(R=ee.length+E.length,E.push(_)),R}function tn(_,E,R){for(var P={},B=0;B<_.length;B+=1){var X=_[B],$=E[X.name];$===void 0||function se(fe,he){if(fe===he)return 1;if(Array.isArray(fe)&&Array.isArray(he)&&fe.length===he.length){for(var Ae=0;Ae<fe.length;Ae+=1)if(!se(fe[Ae],he[Ae]))return;return 1}}($,X.value)||(X.type==="SID"&&($=zt($,R)),P[X.op]={name:X.name,type:X.type,value:$})}return P}function vn(_,E){var R=new ke.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return R.dict=tn(Lt,_,E),R}function bn(_){var E=new ke.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return E.topDicts=[{name:"topDict_0",type:"TABLE",value:_}],E}function kn(_){for(var E=new ke.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),R=0;R<_.length;R+=1){var P=_.get(R),B=function(X){for(var $=[],se=X.path,fe=($.push({name:"width",type:"NUMBER",value:X.advanceWidth}),0),he=0,Ae=0;Ae<se.commands.length;Ae+=1){var Ue,Oe,Se,Qe,We=void 0,Ye=void 0,Ne=se.commands[Ae];(Ne=Ne.type==="Q"?{type:"C",x:Ne.x,y:Ne.y,x1:1/3*fe+2/3*Ne.x1,y1:1/3*he+2/3*Ne.y1,x2:1/3*Ne.x+2/3*Ne.x1,y2:1/3*Ne.y+2/3*Ne.y1}:Ne).type==="M"?(We=Math.round(Ne.x-fe),Ye=Math.round(Ne.y-he),$.push({name:"dx",type:"NUMBER",value:We}),$.push({name:"dy",type:"NUMBER",value:Ye}),$.push({name:"rmoveto",type:"OP",value:21}),fe=Math.round(Ne.x),he=Math.round(Ne.y)):Ne.type==="L"?(We=Math.round(Ne.x-fe),Ye=Math.round(Ne.y-he),$.push({name:"dx",type:"NUMBER",value:We}),$.push({name:"dy",type:"NUMBER",value:Ye}),$.push({name:"rlineto",type:"OP",value:5}),fe=Math.round(Ne.x),he=Math.round(Ne.y)):Ne.type==="C"&&(Ue=Math.round(Ne.x1-fe),Oe=Math.round(Ne.y1-he),Se=Math.round(Ne.x2-Ne.x1),Qe=Math.round(Ne.y2-Ne.y1),We=Math.round(Ne.x-Ne.x2),Ye=Math.round(Ne.y-Ne.y2),$.push({name:"dx1",type:"NUMBER",value:Ue}),$.push({name:"dy1",type:"NUMBER",value:Oe}),$.push({name:"dx2",type:"NUMBER",value:Se}),$.push({name:"dy2",type:"NUMBER",value:Qe}),$.push({name:"dx",type:"NUMBER",value:We}),$.push({name:"dy",type:"NUMBER",value:Ye}),$.push({name:"rrcurveto",type:"OP",value:8}),fe=Math.round(Ne.x),he=Math.round(Ne.y))}return $.push({name:"endchar",type:"OP",value:14}),$}(P);E.charStrings.push({name:P.name,type:"CHARSTRING",value:B})}return E}var ye={parse:function(_,E,R){R.tables.cff={},se=_,P=E,(B={}).formatMajor=Me.getCard8(se,P),B.formatMinor=Me.getCard8(se,P+1),B.size=Me.getCard8(se,P+2),B.offsetSize=Me.getCard8(se,P+3),B.startOffset=P,B.endOffset=P+4;var se=at(_,B.endOffset,Me.bytesToString),P=at(_,se.endOffset),B=at(_,P.endOffset,Me.bytesToString),se=at(_,B.endOffset);if(R.gsubrs=se.objects,R.gsubrsBias=lt(R.gsubrs),(se=Bt(_,E,P.objects,B.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+se.length);if(P=se[0],(R.tables.cff.topDict=P)._privateDict&&(R.defaultWidthX=P._privateDict.defaultWidthX,R.nominalWidthX=P._privateDict.nominalWidthX),P.ros[0]!==void 0&&P.ros[1]!==void 0&&(R.isCIDFont=!0),R.isCIDFont){var se=P.fdArray,X=P.fdSelect;if(se===0||X===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");se=Bt(_,E,at(_,se+=E).objects,B.objects),P._fdArray=se,P._fdSelect=function(Oe,Se,Qe,We){var Ye,Ne=[],Be=new Me.Parser(Oe,Se);if((Oe=Be.parseCard8())===0)for(var ut=0;ut<Qe;ut++){if(We<=(Ye=Be.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ye+" (FD count "+We+")");Ne.push(Ye)}else{if(Oe!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Oe);var gt,dt=Be.parseCard16(),ht=Be.parseCard16();if(ht!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ht);for(var vt=0;vt<dt;vt++){if(Ye=Be.parseCard8(),gt=Be.parseCard16(),We<=Ye)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ye+" (FD count "+We+")");if(Qe<gt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+gt);for(;ht<gt;ht++)Ne.push(Ye);ht=gt}if(gt!==Qe)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+gt)}return Ne}(_,X+=E,R.numGlyphs,se.length)}var X=E+P.private[1],se=qt(_,X,P.private[0],B.objects),$=(R.defaultWidthX=se.defaultWidthX,R.nominalWidthX=se.nominalWidthX,se.subrs!==0?(X=at(_,X+se.subrs),R.subrs=X.objects,R.subrsBias=lt(R.subrs)):(R.subrs=[],R.subrsBias=0),at(_,E+P.charStrings)),se=(R.nGlyphs=$.objects.length,function(Ae,Ue,Oe,Se){var Qe=new Me.Parser(Ae,Ue),We=(--Oe,[".notdef"]);if((Ae=Qe.parseCard8())===0)for(var Ye=0;Ye<Oe;Ye+=1)Ne=Qe.parseSID(),We.push(At(Se,Ne));else if(Ae===1)for(;We.length<=Oe;)for(var Ne=Qe.parseSID(),Be=Qe.parseCard8(),ut=0;ut<=Be;ut+=1)We.push(At(Se,Ne)),Ne+=1;else{if(Ae!==2)throw new Error("Unknown charset format "+Ae);for(;We.length<=Oe;){Ne=Qe.parseSID(),Be=Qe.parseCard16();for(var gt=0;gt<=Be;gt+=1)We.push(At(Se,Ne)),Ne+=1}}return We}(_,E+P.charset,R.nGlyphs,B.objects));P.encoding===0?R.cffEncoding=new $e(K,se):P.encoding===1?R.cffEncoding=new $e(ne,se):R.cffEncoding=function(Ae,Ue,Oe){var Se={},Qe=new Me.Parser(Ae,Ue);if((Ae=Qe.parseCard8())===0)for(var We=Qe.parseCard8(),Ye=0;Ye<We;Ye+=1)Se[Be=Qe.parseCard8()]=Ye;else{if(Ae!==1)throw new Error("Unknown encoding format "+Ae);for(var Ne=Qe.parseCard8(),Be=1,ut=0;ut<Ne;ut+=1)for(var gt=Qe.parseCard8(),dt=Qe.parseCard8(),ht=gt;ht<=gt+dt;ht+=1)Se[ht]=Be,Be+=1}return new $e(Se,Oe)}(_,E+P.encoding,se),R.encoding=R.encoding||R.cffEncoding,R.glyphs=new rt.GlyphSet(R);for(var fe=0;fe<R.nGlyphs;fe+=1){var he=$.objects[fe];R.glyphs.push(fe,rt.cffGlyphLoader(R,fe,jt,he))}},make:function(_,Ae){for(var R,P=new ke.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),B=1/Ae.unitsPerEm,B={version:Ae.version,fullName:Ae.fullName,familyName:Ae.familyName,weight:Ae.weightName,fontBBox:Ae.fontBBox||[0,0,0,0],fontMatrix:[B,0,0,B,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},X=[],$=1;$<_.length;$+=1)R=_.get($),X.push(R.name);var se,fe,he=[],Ae=(P.header=new ke.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),P.nameIndex=function(Oe){var Se=new ke.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Se.names=[];for(var Qe=0;Qe<Oe.length;Qe+=1)Se.names.push({name:"name_"+Qe,type:"NAME",value:Oe[Qe]});return Se}([Ae.postScriptName]),vn(B,he)),Ue=(P.topDictIndex=bn(Ae),P.globalSubrIndex=new ke.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),P.charsets=function(Oe,Se){for(var Qe=new ke.Record("Charsets",[{name:"format",type:"Card8",value:0}]),We=0;We<Oe.length;We+=1){var Ye=zt(Oe[We],Se);Qe.fields.push({name:"glyph_"+We,type:"SID",value:Ye})}return Qe}(X,he),P.charStringsIndex=kn(_),P.privateDict=(Ue={},se=he,(fe=new ke.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=tn(Mt,Ue,se),fe),P.stringIndex=function(Oe){var Se=new ke.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Se.strings=[];for(var Qe=0;Qe<Oe.length;Qe+=1)Se.strings.push({name:"string_"+Qe,type:"STRING",value:Oe[Qe]});return Se}(he),P.header.sizeOf()+P.nameIndex.sizeOf()+P.topDictIndex.sizeOf()+P.stringIndex.sizeOf()+P.globalSubrIndex.sizeOf());return B.charset=Ue,B.encoding=0,B.charStrings=B.charset+P.charsets.sizeOf(),B.private[1]=B.charStrings+P.charStringsIndex.sizeOf(),Ae=vn(B,he),P.topDictIndex=bn(Ae),P}},Xe={parse:function(P,E){var R={},P=new Me.Parser(P,E);return R.version=P.parseVersion(),R.fontRevision=Math.round(1e3*P.parseFixed())/1e3,R.checkSumAdjustment=P.parseULong(),R.magicNumber=P.parseULong(),F.argument(R.magicNumber===1594834165,"Font header has wrong magic number."),R.flags=P.parseUShort(),R.unitsPerEm=P.parseUShort(),R.created=P.parseLongDateTime(),R.modified=P.parseLongDateTime(),R.xMin=P.parseShort(),R.yMin=P.parseShort(),R.xMax=P.parseShort(),R.yMax=P.parseShort(),R.macStyle=P.parseUShort(),R.lowestRecPPEM=P.parseUShort(),R.fontDirectionHint=P.parseShort(),R.indexToLocFormat=P.parseShort(),R.glyphDataFormat=P.parseShort(),R},make:function(_){var E=Math.round(new Date().getTime()/1e3)+2082844800,R=E;return _.createdTimestamp&&(R=_.createdTimestamp+2082844800),new ke.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:R},{name:"modified",type:"LONGDATETIME",value:E},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],_)}},ae={parse:function(P,E){var R={},P=new Me.Parser(P,E);return R.version=P.parseVersion(),R.ascender=P.parseShort(),R.descender=P.parseShort(),R.lineGap=P.parseShort(),R.advanceWidthMax=P.parseUShort(),R.minLeftSideBearing=P.parseShort(),R.minRightSideBearing=P.parseShort(),R.xMaxExtent=P.parseShort(),R.caretSlopeRise=P.parseShort(),R.caretSlopeRun=P.parseShort(),R.caretOffset=P.parseShort(),P.relativeOffset+=8,R.metricDataFormat=P.parseShort(),R.numberOfHMetrics=P.parseUShort(),R},make:function(_){return new ke.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],_)}},we={parse:function(_,E,R,P,B){for(var X,$,se=new Me.Parser(_,E),fe=0;fe<P;fe+=1){fe<R&&(X=se.parseUShort(),$=se.parseShort());var he=B.get(fe);he.advanceWidth=X,he.leftSideBearing=$}},make:function(_){for(var E=new ke.Table("hmtx",[]),R=0;R<_.length;R+=1){var B=_.get(R),P=B.advanceWidth||0,B=B.leftSideBearing||0;E.fields.push({name:"advanceWidth_"+R,type:"USHORT",value:P}),E.fields.push({name:"leftSideBearing_"+R,type:"SHORT",value:B})}return E}},Pe={make:function(_){for(var E=new ke.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:_.length}]),R="",P=12+4*_.length,B=0;B<_.length;++B){var X=R.indexOf(_[B]);X<0&&(X=R.length,R+=_[B]),E.fields.push({name:"offset "+B,type:"USHORT",value:P+X}),E.fields.push({name:"length "+B,type:"USHORT",value:_[B].length})}return E.fields.push({name:"stringPool",type:"CHARARRAY",value:R}),E},parse:function(_,E){for(var R=new Me.Parser(_,E),P=R.parseULong(),B=(F.argument(P===1,"Unsupported ltag table version."),R.skip("uLong",1),R.parseULong()),X=[],$=0;$<B;$++){for(var se="",fe=E+R.parseUShort(),he=R.parseUShort(),Ae=fe;Ae<fe+he;++Ae)se+=String.fromCharCode(_.getInt8(Ae));X.push(se)}return X}},Fe={parse:function(P,E){var R={},P=new Me.Parser(P,E);return R.version=P.parseVersion(),R.numGlyphs=P.parseUShort(),R.version===1&&(R.maxPoints=P.parseUShort(),R.maxContours=P.parseUShort(),R.maxCompositePoints=P.parseUShort(),R.maxCompositeContours=P.parseUShort(),R.maxZones=P.parseUShort(),R.maxTwilightPoints=P.parseUShort(),R.maxStorage=P.parseUShort(),R.maxFunctionDefs=P.parseUShort(),R.maxInstructionDefs=P.parseUShort(),R.maxStackElements=P.parseUShort(),R.maxSizeOfInstructions=P.parseUShort(),R.maxComponentElements=P.parseUShort(),R.maxComponentDepth=P.parseUShort()),R},make:function(_){return new ke.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:_}])}},nt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ve={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},it={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},tt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},st="utf-16",et={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},pt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function yt(_,E,R){switch(_){case 0:return st;case 1:return pt[R]||et[E];case 3:if(E===1||E===10)return st}}function Tt(_){var E,R={};for(E in _)R[_[E]]=parseInt(E);return R}function Pt(_,E,R,P,B,X){return new ke.Record("NameRecord",[{name:"platformID",type:"USHORT",value:_},{name:"encodingID",type:"USHORT",value:E},{name:"languageID",type:"USHORT",value:R},{name:"nameID",type:"USHORT",value:P},{name:"length",type:"USHORT",value:B},{name:"offset",type:"USHORT",value:X}])}function Ct(_,E){if((R=function(X,$){var se=X.length,fe=$.length-se+1;e:for(var he=0;he<fe;he++)for(;he<fe;he++){for(var Ae=0;Ae<se;Ae++)if($[he+Ae]!==X[Ae])continue e;return he}return-1}(_,E))<0)for(var R=E.length,P=0,B=_.length;P<B;++P)E.push(_[P]);return R}var ft={parse:function(_,E,R){for(var P={},B=new Me.Parser(_,E),E=B.parseUShort(),X=B.parseUShort(),$=B.offset+B.parseUShort(),se=0;se<X;se++){var Qe=B.parseUShort(),fe=B.parseUShort(),he=B.parseUShort(),Ae=B.parseUShort(),Ae=nt[Ae]||Ae,Ue=B.parseUShort(),Oe=B.parseUShort(),Se=function(Ye,Ne,Be){switch(Ye){case 0:if(Ne===65535)return"und";if(Be)return Be[Ne];break;case 1:return Ve[Ne];case 3:return tt[Ne]}}(Qe,he,R),Qe=yt(Qe,fe,he);Qe!==void 0&&Se!==void 0&&(fe=void 0,(fe=Qe===st?H.UTF16(_,$+Oe,Ue):H.MACSTRING(_,$+Oe,Ue,Qe))&&((he=(he=P[Ae])===void 0?P[Ae]={}:he)[Se]=fe))}return E===1&&B.parseUShort(),P},make:function(_,E){var R,P=[],B={},X=Tt(nt);for(R in _){var $=X[R];if($===void 0&&($=R),Oe=parseInt($),isNaN(Oe))throw new Error('Name table entry "'+R+'" does not exist, see nameTableNames for complete list.');B[Oe]=_[R],P.push(Oe)}for(var se=Tt(Ve),fe=Tt(tt),he=[],Ae=[],Ue=0;Ue<P.length;Ue++){var Oe,Se,Qe=B[Oe=P[Ue]];for(Se in Qe){var We=Qe[Se],gt=1,Ye=se[Se],Ne=it[Ye],Be=yt(gt,Ne,Ye),Be=Y.MACSTRING(We,Be),ut=(Be===void 0&&(gt=0,(Ye=E.indexOf(Se))<0&&(Ye=E.length,E.push(Se)),Ne=4,Be=Y.UTF16(We)),Ct(Be,Ae)),gt=(he.push(Pt(gt,Ne,Ye,Oe,Be.length,ut)),fe[Se]);gt!==void 0&&(Ye=Ct(Ne=Y.UTF16(We),Ae),he.push(Pt(3,1,gt,Oe,Ne.length,Ye)))}}he.sort(function(vt,kt){return vt.platformID-kt.platformID||vt.encodingID-kt.encodingID||vt.languageID-kt.languageID||vt.nameID-kt.nameID});for(var dt=new ke.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:he.length},{name:"stringOffset",type:"USHORT",value:6+12*he.length}]),ht=0;ht<he.length;ht++)dt.fields.push({name:"record_"+ht,type:"RECORD",value:he[ht]});return dt.fields.push({name:"strings",type:"LITERAL",value:Ae}),dt}},hr=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],St={parse:function(_,E){var R={},P=new Me.Parser(_,E);R.version=P.parseUShort(),R.xAvgCharWidth=P.parseShort(),R.usWeightClass=P.parseUShort(),R.usWidthClass=P.parseUShort(),R.fsType=P.parseUShort(),R.ySubscriptXSize=P.parseShort(),R.ySubscriptYSize=P.parseShort(),R.ySubscriptXOffset=P.parseShort(),R.ySubscriptYOffset=P.parseShort(),R.ySuperscriptXSize=P.parseShort(),R.ySuperscriptYSize=P.parseShort(),R.ySuperscriptXOffset=P.parseShort(),R.ySuperscriptYOffset=P.parseShort(),R.yStrikeoutSize=P.parseShort(),R.yStrikeoutPosition=P.parseShort(),R.sFamilyClass=P.parseShort(),R.panose=[];for(var B=0;B<10;B++)R.panose[B]=P.parseByte();return R.ulUnicodeRange1=P.parseULong(),R.ulUnicodeRange2=P.parseULong(),R.ulUnicodeRange3=P.parseULong(),R.ulUnicodeRange4=P.parseULong(),R.achVendID=String.fromCharCode(P.parseByte(),P.parseByte(),P.parseByte(),P.parseByte()),R.fsSelection=P.parseUShort(),R.usFirstCharIndex=P.parseUShort(),R.usLastCharIndex=P.parseUShort(),R.sTypoAscender=P.parseShort(),R.sTypoDescender=P.parseShort(),R.sTypoLineGap=P.parseShort(),R.usWinAscent=P.parseUShort(),R.usWinDescent=P.parseUShort(),1<=R.version&&(R.ulCodePageRange1=P.parseULong(),R.ulCodePageRange2=P.parseULong()),2<=R.version&&(R.sxHeight=P.parseShort(),R.sCapHeight=P.parseShort(),R.usDefaultChar=P.parseUShort(),R.usBreakChar=P.parseUShort(),R.usMaxContent=P.parseUShort()),R},make:function(_){return new ke.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],_)},unicodeRanges:hr,getUnicodeRange:function(_){for(var E=0;E<hr.length;E+=1){var R=hr[E];if(_>=R.begin&&_<R.end)return E}return-1}},Dr={parse:function(_,E){var R={},P=new Me.Parser(_,E);switch(R.version=P.parseVersion(),R.italicAngle=P.parseFixed(),R.underlinePosition=P.parseShort(),R.underlineThickness=P.parseShort(),R.isFixedPitch=P.parseULong(),R.minMemType42=P.parseULong(),R.maxMemType42=P.parseULong(),R.minMemType1=P.parseULong(),R.maxMemType1=P.parseULong(),R.version){case 1:R.names=me.slice();break;case 2:R.numberOfGlyphs=P.parseUShort(),R.glyphNameIndex=new Array(R.numberOfGlyphs);for(var B=0;B<R.numberOfGlyphs;B++)R.glyphNameIndex[B]=P.parseUShort();R.names=[];for(var X,$=0;$<R.numberOfGlyphs;$++)R.glyphNameIndex[$]>=me.length&&(X=P.parseChar(),R.names.push(P.parseString(X)));break;case 2.5:R.numberOfGlyphs=P.parseUShort(),R.offset=new Array(R.numberOfGlyphs);for(var se=0;se<R.numberOfGlyphs;se++)R.offset[se]=P.parseChar()}return R},make:function(){return new ke.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},fr=new Array(9),xr=(fr[1]=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{substFormat:1,coverage:this.parsePointer(ve.coverage),deltaGlyphId:this.parseUShort()}:E===2?{substFormat:2,coverage:this.parsePointer(ve.coverage),substitute:this.parseOffset16List()}:void F.assert(!1,"0x"+_.toString(16)+": lookup type 1 format must be 1 or 2.")},fr[2]=function(){var _=this.parseUShort();return F.argument(_===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(ve.coverage),sequences:this.parseListOfLists()}},fr[3]=function(){var _=this.parseUShort();return F.argument(_===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(ve.coverage),alternateSets:this.parseListOfLists()}},fr[4]=function(){var _=this.parseUShort();return F.argument(_===1,"GSUB ligature table identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(ve.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:ve.uShort,lookupListIndex:ve.uShort});fr[5]=function(){var _,E,R=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{substFormat:P,coverage:this.parsePointer(ve.coverage),ruleSets:this.parseListOfLists(function(){var B=this.parseUShort(),X=this.parseUShort();return{input:this.parseUShortList(B-1),lookupRecords:this.parseRecordList(X,xr)}})}:P===2?{substFormat:P,coverage:this.parsePointer(ve.coverage),classDef:this.parsePointer(ve.classDef),classSets:this.parseListOfLists(function(){var B=this.parseUShort(),X=this.parseUShort();return{classes:this.parseUShortList(B-1),lookupRecords:this.parseRecordList(X,xr)}})}:P===3?(_=this.parseUShort(),E=this.parseUShort(),{substFormat:P,coverages:this.parseList(_,ve.pointer(ve.coverage)),lookupRecords:this.parseRecordList(E,xr)}):void F.assert(!1,"0x"+R.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},fr[6]=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{substFormat:1,coverage:this.parsePointer(ve.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(xr)}})}:E===2?{substFormat:2,coverage:this.parsePointer(ve.coverage),backtrackClassDef:this.parsePointer(ve.classDef),inputClassDef:this.parsePointer(ve.classDef),lookaheadClassDef:this.parsePointer(ve.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(xr)}})}:E===3?{substFormat:3,backtrackCoverage:this.parseList(ve.pointer(ve.coverage)),inputCoverage:this.parseList(ve.pointer(ve.coverage)),lookaheadCoverage:this.parseList(ve.pointer(ve.coverage)),lookupRecords:this.parseRecordList(xr)}:void F.assert(!1,"0x"+_.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},fr[7]=function(){var _=this.parseUShort(),_=(F.argument(_===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),E=new ve(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:_,extension:fr[_].call(E)}},fr[8]=function(){var _=this.parseUShort();return F.argument(_===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(ve.coverage),backtrackCoverage:this.parseList(ve.pointer(ve.coverage)),lookaheadCoverage:this.parseList(ve.pointer(ve.coverage)),substitutes:this.parseUShortList()}};var rn=new Array(9);rn[1]=function(_){return _.substFormat===1?new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(_.coverage)},{name:"deltaGlyphID",type:"USHORT",value:_.deltaGlyphId}]):new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ke.Coverage(_.coverage)}].concat(ke.ushortList("substitute",_.substitute)))},rn[3]=function(_){return F.assert(_.substFormat===1,"Lookup type 3 substFormat must be 1."),new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(_.coverage)}].concat(ke.tableList("altSet",_.alternateSets,function(E){return new ke.Table("alternateSetTable",ke.ushortList("alternate",E))})))},rn[4]=function(_){return F.assert(_.substFormat===1,"Lookup type 4 substFormat must be 1."),new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(_.coverage)}].concat(ke.tableList("ligSet",_.ligatureSets,function(E){return new ke.Table("ligatureSetTable",ke.tableList("ligature",E,function(R){return new ke.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:R.ligGlyph}].concat(ke.ushortList("component",R.components,R.components.length+1)))}))})))};var Zt={parse:function(_,E){return E=(_=new ve(_,E=E||0)).parseVersion(1),F.argument(E===1||E===1.1,"Unsupported GSUB table version."),E===1?{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(fr)}:{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(fr),variations:_.parseFeatureVariationsList()}},make:function(_){return new ke.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ke.ScriptList(_.scripts)},{name:"features",type:"TABLE",value:new ke.FeatureList(_.features)},{name:"lookups",type:"TABLE",value:new ke.LookupList(_.lookups,rn)}])}},Ir={parse:function(_,E){for(var R=new Me.Parser(_,E),P=R.parseULong(),B=(F.argument(P===1,"Unsupported META table version."),R.parseULong(),R.parseULong(),R.parseULong()),X={},$=0;$<B;$++){var se=R.parseTag(),he=R.parseULong(),fe=R.parseULong(),he=H.UTF8(_,E+he,fe);X[se]=he}return X},make:function(_){var E,R=Object.keys(_).length,P="",B=16+12*R,X=new ke.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:B},{name:"numTags",type:"ULONG",value:R}]);for(E in _){var $=P.length;P+=_[E],X.fields.push({name:"tag "+E,type:"TAG",value:E}),X.fields.push({name:"offset "+E,type:"ULONG",value:B+$}),X.fields.push({name:"length "+E,type:"ULONG",value:_[E].length})}return X.fields.push({name:"stringPool",type:"CHARARRAY",value:P}),X}};function Un(_){return Math.log(_)/Math.log(2)|0}function Qt(_){for(;_.length%4!=0;)_.push(0);for(var E=0,R=0;R<_.length;R+=4)E+=(_[R]<<24)+(_[R+1]<<16)+(_[R+2]<<8)+_[R+3];return E%=Math.pow(2,32)}function Fn(_,E,R,P){return new ke.Record("Table Record",[{name:"tag",type:"TAG",value:_!==void 0?_:""},{name:"checkSum",type:"ULONG",value:E!==void 0?E:0},{name:"offset",type:"ULONG",value:R!==void 0?R:0},{name:"length",type:"ULONG",value:P!==void 0?P:0}])}function Oi(_){for(var E=new ke.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),R=(E.tables=_,E.numTables=_.length,Math.pow(2,Un(E.numTables))),P=(E.searchRange=16*R,E.entrySelector=Un(R),E.rangeShift=16*E.numTables-E.searchRange,[]),B=[],X=E.sizeOf()+Fn().sizeOf()*E.numTables;X%4!=0;)X+=1,B.push({name:"padding",type:"BYTE",value:0});for(var $=0;$<_.length;$+=1){var se=_[$],fe=(F.argument(se.tableName.length===4,"Table name"+se.tableName+" is invalid."),se.sizeOf()),he=Fn(se.tableName,Qt(se.encode()),X,fe);for(P.push({name:he.tag+" Table Record",type:"RECORD",value:he}),B.push({name:se.tableName+" table",type:"RECORD",value:se}),X+=fe,F.argument(!isNaN(X),"Something went wrong calculating the offset.");X%4!=0;)X+=1,B.push({name:"padding",type:"BYTE",value:0})}return P.sort(function(Ae,Ue){return Ae.value.tag>Ue.value.tag?1:-1}),E.fields=E.fields.concat(P),E.fields=E.fields.concat(B),E}function mi(_,E,R){for(var P=0;P<E.length;P+=1){var B=_.charToGlyphIndex(E[P]);if(0<B)return _.glyphs.get(B).getMetrics()}return R}var Ql={make:Oi,fontToTable:function(_){for(var E,R=[],P=[],B=[],X=[],$=[],se=[],fe=[],he=0,Ae=0,Ue=0,Oe=0,Se=0,Qe=0;Qe<_.glyphs.length;Qe+=1){var We=_.glyphs.get(Qe),Ye=0|We.unicode;if(isNaN(We.advanceWidth))throw new Error("Glyph "+We.name+" ("+Qe+"): advanceWidth is not a number.");(Ye<E||E===void 0)&&0<Ye&&(E=Ye),he<Ye&&(he=Ye);var Ye=St.getUnicodeRange(Ye);if(Ye<32)Ae|=1<<Ye;else if(Ye<64)Ue|=1<<Ye-32;else if(Ye<96)Oe|=1<<Ye-64;else{if(!(Ye<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Se|=1<<Ye-96}We.name!==".notdef"&&(Ye=We.getMetrics(),R.push(Ye.xMin),P.push(Ye.yMin),B.push(Ye.xMax),X.push(Ye.yMax),se.push(Ye.leftSideBearing),fe.push(Ye.rightSideBearing),$.push(We.advanceWidth))}var Ne,Be={xMin:Math.min.apply(null,R),yMin:Math.min.apply(null,P),xMax:Math.max.apply(null,B),yMax:Math.max.apply(null,X),advanceWidthMax:Math.max.apply(null,$),advanceWidthAvg:function(Kt){for(var bi=0,Gn=0;Gn<Kt.length;Gn+=1)bi+=Kt[Gn];return bi/Kt.length}($),minLeftSideBearing:Math.min.apply(null,se),maxLeftSideBearing:Math.max.apply(null,se),minRightSideBearing:Math.min.apply(null,fe)},ut=(Be.ascender=_.ascender,Be.descender=_.descender,Xe.make({flags:3,unitsPerEm:_.unitsPerEm,xMin:Be.xMin,yMin:Be.yMin,xMax:Be.xMax,yMax:Be.yMax,lowestRecPPEM:3,createdTimestamp:_.createdTimestamp})),gt=ae.make({ascender:Be.ascender,descender:Be.descender,advanceWidthMax:Be.advanceWidthMax,minLeftSideBearing:Be.minLeftSideBearing,minRightSideBearing:Be.minRightSideBearing,xMaxExtent:Be.maxLeftSideBearing+(Be.xMax-Be.xMin),numberOfHMetrics:_.glyphs.length}),dt=Fe.make(_.glyphs.length),ht=St.make({xAvgCharWidth:Math.round(Be.advanceWidthAvg),usWeightClass:_.tables.os2.usWeightClass,usWidthClass:_.tables.os2.usWidthClass,usFirstCharIndex:E,usLastCharIndex:he,ulUnicodeRange1:Ae,ulUnicodeRange2:Ue,ulUnicodeRange3:Oe,ulUnicodeRange4:Se,fsSelection:_.tables.os2.fsSelection,sTypoAscender:Be.ascender,sTypoDescender:Be.descender,sTypoLineGap:0,usWinAscent:Be.yMax,usWinDescent:Math.abs(Be.yMin),ulCodePageRange1:1,sxHeight:mi(_,"xyvw",{yMax:Math.round(Be.ascender/2)}).yMax,sCapHeight:mi(_,"HIKLEFJMNTZBDPRAGOQSUVWXY",Be).yMax,usDefaultChar:_.hasChar(" ")?32:0,usBreakChar:_.hasChar(" ")?32:0}),vt=we.make(_.glyphs),kt=J.make(_.glyphs),Ft=_.getEnglishName("fontFamily"),Rt=_.getEnglishName("fontSubfamily"),Dt=Ft+" "+Rt,Vt=(Vt=_.getEnglishName("postScriptName"))||Ft.replace(/\s/g,"")+"-"+Rt,Wt={};for(Ne in _.names)Wt[Ne]=_.names[Ne];Wt.uniqueID||(Wt.uniqueID={en:_.getEnglishName("manufacturer")+":"+Dt}),Wt.postScriptName||(Wt.postScriptName={en:Vt}),Wt.preferredFamily||(Wt.preferredFamily=_.names.fontFamily),Wt.preferredSubfamily||(Wt.preferredSubfamily=_.names.fontSubfamily);var ir=[],nr=ft.make(Wt,ir),ir=0<ir.length?Pe.make(ir):void 0,Er=Dr.make(),Dt=ye.make(_.glyphs,{version:_.getEnglishName("version"),fullName:Dt,familyName:Ft,weightName:Rt,postScriptName:Vt,unitsPerEm:_.unitsPerEm,fontBBox:[0,Be.yMin,Be.ascender,Be.advanceWidthMax]}),Ft=_.metas&&0<Object.keys(_.metas).length?Ir.make(_.metas):void 0,Rt=[ut,gt,dt,ht,nr,kt,Er,Dt,vt];ir&&Rt.push(ir),_.tables.gsub&&Rt.push(Zt.make(_.tables.gsub)),Ft&&Rt.push(Ft);for(var sr=Qt((Vt=Oi(Rt)).encode()),Gt=Vt.fields,er=!1,Nt=0;Nt<Gt.length;Nt+=1)if(Gt[Nt].name==="head table"){Gt[Nt].value.checkSumAdjustment=2981146554-sr,er=!0;break}if(er)return Vt;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Qt};function ms(_,E){for(var R=0,P=_.length-1;R<=P;){var B=R+P>>>1,X=_[B].tag;if(X===E)return B;X<E?R=1+B:P=B-1}return-R-1}function vo(_,E){for(var R=0,P=_.length-1;R<=P;){var B=R+P>>>1,X=_[B];if(X===E)return B;X<E?R=1+B:P=B-1}return-R-1}function bo(_,E){for(var R=0,P=_.length-1;R<=P;){var B,X=R+P>>>1,$=(B=_[X]).start;if($===E)return B;$<E?R=1+X:P=X-1}if(0<R)return E>(B=_[R-1]).end?0:B}function Di(_,E){this.font=_,this.tableName=E}function Ii(_){Di.call(this,_,"gpos")}function kr(_){Di.call(this,_,"gsub")}function _o(_,E,R){for(var P=_.subtables,B=0;B<P.length;B++){var X=P[B];if(X.substFormat===E)return X}if(R)return P.push(R),R}function xo(_){for(var E=new ArrayBuffer(_.length),R=new Uint8Array(E),P=0;P<_.length;++P)R[P]=_[P];return E}function Nn(_,E){if(!_)throw E}function wo(_,E,R,P,B){var X=0<(E&P)?(X=_.parseByte(),R+(X=E&B?X:-X)):0<(E&B)?R:R+_.parseShort();return X}function ec(_,E,R){var P,B=new Me.Parser(E,R);if(_.numberOfContours=B.parseShort(),_._xMin=B.parseShort(),_._yMin=B.parseShort(),_._xMax=B.parseShort(),_._yMax=B.parseShort(),0<_.numberOfContours){for(var X=_.endPointIndices=[],$=0;$<_.numberOfContours;$+=1)X.push(B.parseUShort());_.instructionLength=B.parseUShort(),_.instructions=[];for(var se=0;se<_.instructionLength;se+=1)_.instructions.push(B.parseByte());for(var fe=X[X.length-1]+1,he=[],Ae=0;Ae<fe;Ae+=1)if(P=B.parseByte(),he.push(P),0<(8&P))for(var Ue=B.parseByte(),Oe=0;Oe<Ue;Oe+=1)he.push(P),Ae+=1;if(F.argument(he.length===fe,"Bad flags."),0<X.length){var Se,Qe=[];if(0<fe){for(var We=0;We<fe;We+=1)P=he[We],(Se={}).onCurve=!!(1&P),Se.lastPointOfContour=0<=X.indexOf(We),Qe.push(Se);for(var Ye=0,Ne=0;Ne<fe;Ne+=1)P=he[Ne],(Se=Qe[Ne]).x=wo(B,P,Ye,2,16),Ye=Se.x;for(var Be=0,ut=0;ut<fe;ut+=1)P=he[ut],(Se=Qe[ut]).y=wo(B,P,Be,4,32),Be=Se.y}_.points=Qe}else _.points=[]}else if(_.numberOfContours===0)_.points=[];else{_.isComposite=!0,_.points=[],_.components=[];for(var gt=!0;gt;){he=B.parseUShort();var dt={glyphIndex:B.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&he)?0<(2&he)?(dt.dx=B.parseShort(),dt.dy=B.parseShort()):dt.matchedPoints=[B.parseUShort(),B.parseUShort()]:0<(2&he)?(dt.dx=B.parseChar(),dt.dy=B.parseChar()):dt.matchedPoints=[B.parseByte(),B.parseByte()],0<(8&he)?dt.xScale=dt.yScale=B.parseF2Dot14():0<(64&he)?(dt.xScale=B.parseF2Dot14(),dt.yScale=B.parseF2Dot14()):0<(128&he)&&(dt.xScale=B.parseF2Dot14(),dt.scale01=B.parseF2Dot14(),dt.scale10=B.parseF2Dot14(),dt.yScale=B.parseF2Dot14()),_.components.push(dt),gt=!!(32&he)}if(256&he){_.instructionLength=B.parseUShort(),_.instructions=[];for(var ht=0;ht<_.instructionLength;ht+=1)_.instructions.push(B.parseByte())}}}function gs(_,E){for(var R=[],P=0;P<_.length;P+=1){var B=_[P],B={x:E.xScale*B.x+E.scale01*B.y+E.dx,y:E.scale10*B.x+E.yScale*B.y+E.dy,onCurve:B.onCurve,lastPointOfContour:B.lastPointOfContour};R.push(B)}return R}function So(_){var E=new I;if(_)for(var R=function(Ue){for(var Oe=[],Se=[],Qe=0;Qe<Ue.length;Qe+=1){var We=Ue[Qe];Se.push(We),We.lastPointOfContour&&(Oe.push(Se),Se=[])}return F.argument(Se.length===0,"There are still points left in the current contour."),Oe}(_),P=0;P<R.length;++P){var B,X=R[P],$=X[X.length-1],se=X[0];$.onCurve?E.moveTo($.x,$.y):se.onCurve?E.moveTo(se.x,se.y):(B={x:.5*($.x+se.x),y:.5*($.y+se.y)},E.moveTo(B.x,B.y));for(var fe=0;fe<X.length;++fe){var he,Ae=$,$=se,se=X[(fe+1)%X.length];$.onCurve?E.lineTo($.x,$.y):(he=se,Ae.onCurve||($.x,Ae.x,$.y,Ae.y),se.onCurve||(he={x:.5*($.x+se.x),y:.5*($.y+se.y)}),E.quadraticCurveTo($.x,$.y,he.x,he.y))}E.closePath()}return E}function tc(_,E){if(E.isComposite)for(var R=0;R<E.components.length;R+=1){var P=E.components[R],B=_.get(P.glyphIndex);if(B.getPath(),B.points){var X=void 0;if(P.matchedPoints===void 0)X=gs(B.points,P);else{if(P.matchedPoints[0]>E.points.length-1||P.matchedPoints[1]>B.points.length-1)throw Error("Matched points out of range in "+E.name);var $=E.points[P.matchedPoints[0]],se=B.points[P.matchedPoints[1]],P={xScale:P.xScale,scale01:P.scale01,scale10:P.scale10,yScale:P.yScale,dx:0,dy:0},se=gs([se],P)[0];P.dx=$.x-se.x,P.dy=$.y-se.y,X=gs(B.points,P)}E.points=E.points.concat(X)}}return So(E.points)}(Ii.prototype=Di.prototype={searchTag:ms,binSearch:vo,getTable:function(_){var E=this.font.tables[this.tableName];return E=!E&&_?this.font.tables[this.tableName]=this.createDefaultTable():E},getScriptNames:function(){var _=this.getTable();return _?_.scripts.map(function(E){return E.tag}):[]},getDefaultScriptName:function(){var _=this.getTable();if(_){for(var E=!1,R=0;R<_.scripts.length;R++){var P=_.scripts[R].tag;if(P==="DFLT")return P;P==="latn"&&(E=!0)}return E?"latn":void 0}},getScriptTable:function(_,E){var R,P=this.getTable(E);if(P)return R=P.scripts,0<=(P=ms(P.scripts,_=_||"DFLT"))?R[P].script:E?(R.splice(-1-P,0,E={tag:_,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),E.script):void 0},getLangSysTable:function(B,E,R){var P,B=this.getScriptTable(B,R);if(B)return E&&E!=="dflt"&&E!=="DFLT"?0<=(P=ms(B.langSysRecords,E))?B.langSysRecords[P].langSys:R?(B.langSysRecords.splice(-1-P,0,R={tag:E,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),R.langSys):void 0:B.defaultLangSys},getFeatureTable:function(_,E,R,P){if(_=this.getLangSysTable(_,E,P),_){for(var B,X=_.featureIndexes,$=this.font.tables[this.tableName].features,se=0;se<X.length;se++)if((B=$[X[se]]).tag===R)return B.feature;if(P)return E=$.length,F.assert(E===0||R>=$[E-1].tag,"Features must be added in alphabetical order."),$.push(B={tag:R,feature:{params:0,lookupListIndexes:[]}}),X.push(E),B.feature}},getLookupTables:function(X,E,R,P,B){var X=this.getFeatureTable(X,E,R,B),$=[];if(X){for(var se,fe=X.lookupListIndexes,he=this.font.tables[this.tableName].lookups,Ae=0;Ae<fe.length;Ae++)(se=he[fe[Ae]]).lookupType===P&&$.push(se);if($.length===0&&B)return E=he.length,he.push(se={lookupType:P,lookupFlag:0,subtables:[],markFilteringSet:void 0}),fe.push(E),[se]}return $},getGlyphClass:function(_,E){switch(_.format){case 1:return _.startGlyph<=E&&E<_.startGlyph+_.classes.length?_.classes[E-_.startGlyph]:0;case 2:var R=bo(_.ranges,E);return R?R.classId:0}},getCoverageIndex:function(_,E){switch(_.format){case 1:var R=vo(_.glyphs,E);return 0<=R?R:-1;case 2:return R=bo(_.ranges,E),R?R.index+E-R.start:-1}},expandCoverage:function(_){if(_.format===1)return _.glyphs;for(var E=[],R=_.ranges,P=0;P<R.length;P++)for(var B=R[P],X=B.start,$=B.end,se=X;se<=$;se++)E.push(se);return E}}).init=function(){var _=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(_)},Ii.prototype.getKerningValue=function(_,E,R){for(var P=0;P<_.length;P++)for(var B=_[P].subtables,X=0;X<B.length;X++){var $=B[X],se=this.getCoverageIndex($.coverage,E);if(!(se<0))switch($.posFormat){case 1:for(var fe=$.pairSets[se],he=0;he<fe.length;he++){var Ae=fe[he];if(Ae.secondGlyph===R)return Ae.value1&&Ae.value1.xAdvance||0}break;case 2:var Oe=this.getGlyphClass($.classDef1,E),Ue=this.getGlyphClass($.classDef2,R),Oe=$.classRecords[Oe][Ue];return Oe.value1&&Oe.value1.xAdvance||0}}return 0},Ii.prototype.getKerningTables=function(_,E){if(this.font.tables.gpos)return this.getLookupTables(_,E,"kern",2)},(kr.prototype=Di.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},kr.prototype.getSingle=function(_,E,R){for(var P=[],B=this.getLookupTables(E,R,_,1),X=0;X<B.length;X++)for(var $=B[X].subtables,se=0;se<$.length;se++){var fe=$[se],he=this.expandCoverage(fe.coverage),Ae=void 0;if(fe.substFormat===1)for(var Ue=fe.deltaGlyphId,Ae=0;Ae<he.length;Ae++){var Oe=he[Ae];P.push({sub:Oe,by:Oe+Ue})}else{var Se=fe.substitute;for(Ae=0;Ae<he.length;Ae++)P.push({sub:he[Ae],by:Se[Ae]})}}return P},kr.prototype.getAlternates=function(_,E,R){for(var P=[],B=this.getLookupTables(E,R,_,3),X=0;X<B.length;X++)for(var $=B[X].subtables,se=0;se<$.length;se++)for(var fe=$[se],he=this.expandCoverage(fe.coverage),Ae=fe.alternateSets,Ue=0;Ue<he.length;Ue++)P.push({sub:he[Ue],by:Ae[Ue]});return P},kr.prototype.getLigatures=function(_,E,R){for(var P=[],B=this.getLookupTables(E,R,_,4),X=0;X<B.length;X++)for(var $=B[X].subtables,se=0;se<$.length;se++)for(var fe=$[se],he=this.expandCoverage(fe.coverage),Ae=fe.ligatureSets,Ue=0;Ue<he.length;Ue++)for(var Oe=he[Ue],Se=Ae[Ue],Qe=0;Qe<Se.length;Qe++){var We=Se[Qe];P.push({sub:[Oe].concat(We.components),by:We.ligGlyph})}return P},kr.prototype.addSingle=function(_,E,R,P){R=_o(this.getLookupTables(R,P,_,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),F.assert(R.coverage.format===1,"Ligature: unable to modify coverage table format "+R.coverage.format),P=E.sub,_=this.binSearch(R.coverage.glyphs,P),_<0&&(R.coverage.glyphs.splice(_=-1-_,0,P),R.substitute.splice(_,0,0)),R.substitute[_]=E.by},kr.prototype.addAlternate=function(_,E,R,P){R=_o(this.getLookupTables(R,P,_,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),F.assert(R.coverage.format===1,"Ligature: unable to modify coverage table format "+R.coverage.format),P=E.sub,_=this.binSearch(R.coverage.glyphs,P),_<0&&(R.coverage.glyphs.splice(_=-1-_,0,P),R.alternateSets.splice(_,0,0)),R.alternateSets[_]=E.by},kr.prototype.addLigature=function(X,fe,se,B){var se=this.getLookupTables(se,B,X,4,!0)[0],B=se.subtables[0],X=(B||(se.subtables[0]=B={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),F.assert(B.coverage.format===1,"Ligature: unable to modify coverage table format "+B.coverage.format),fe.sub[0]),$=fe.sub.slice(1),se={ligGlyph:fe.by,components:$},fe=this.binSearch(B.coverage.glyphs,X);if(0<=fe){for(var he=B.ligatureSets[fe],Ae=0;Ae<he.length;Ae++)if(function(Ue,Oe){var Se=Ue.length;if(Se===Oe.length){for(var Qe=0;Qe<Se;Qe++)if(Ue[Qe]!==Oe[Qe])return;return 1}}(he[Ae].components,$))return;he.push(se)}else B.coverage.glyphs.splice(fe=-1-fe,0,X),B.ligatureSets.splice(fe,0,[se])},kr.prototype.getFeature=function(_,E,R){if(/ss\d\d/.test(_))return this.getSingle(_,E,R);switch(_){case"aalt":case"salt":return this.getSingle(_,E,R).concat(this.getAlternates(_,E,R));case"dlig":case"liga":case"rlig":return this.getLigatures(_,E,R)}},kr.prototype.add=function(_,E,R,P){if(/ss\d\d/.test(_))return this.addSingle(_,E,R,P);switch(_){case"aalt":case"salt":return typeof E.by=="number"?this.addSingle(_,E,R,P):this.addAlternate(_,E,R,P);case"dlig":case"liga":case"rlig":return this.addLigature(_,E,R,P)}};var Mo={getPath:So,parse:function(_,E,R,P){for(var B=new rt.GlyphSet(P),X=0;X<R.length-1;X+=1){var $=R[X];$!==R[X+1]?B.push(X,rt.ttfGlyphLoader(P,X,ec,_,E+$,tc)):B.push(X,rt.glyphLoader(P,X))}return B}};function Eo(_){this.font=_,this.getCommands=function(E){return Mo.getPath(E).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function rc(_){return _}function To(_){return Math.sign(_)*Math.round(Math.abs(_))}function nc(_){return Math.sign(_)*Math.round(Math.abs(2*_))/2}function ic(_){return Math.sign(_)*(Math.round(Math.abs(_)+.5)-.5)}function sc(_){return Math.sign(_)*Math.ceil(Math.abs(_))}function oc(_){return Math.sign(_)*Math.floor(Math.abs(_))}function Ao(_){var E=this.srPeriod,R=this.srPhase,P=1;return _<0&&(_=-_,P=-1),_+=this.srThreshold-R,_=Math.trunc(_/E)*E,(_+=R)<0?R*P:_*P}var Ur={x:1,y:0,axis:"x",distance:function(_,E,R,P){return(R?_.xo:_.x)-(P?E.xo:E.x)},interpolate:function(_,E,R,P){var B,X,$,se,fe,he,Ae;if(!P||P===this)return B=_.xo-E.xo,X=_.xo-R.xo,fe=E.x-E.xo,he=R.x-R.xo,(Ae=($=Math.abs(B))+(se=Math.abs(X)))===0?void(_.x=_.xo+(fe+he)/2):void(_.x=_.xo+(fe*se+he*$)/Ae);B=P.distance(_,E,!0,!0),X=P.distance(_,R,!0,!0),fe=P.distance(E,E,!1,!0),he=P.distance(R,R,!1,!0),(Ae=($=Math.abs(B))+(se=Math.abs(X)))===0?Ur.setRelative(_,_,(fe+he)/2,P,!0):Ur.setRelative(_,_,(fe*se+he*$)/Ae,P,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(_,E,R,P,B){var X,$;P&&P!==this?(X=B?E.xo:E.x,$=B?E.yo:E.y,X+=R*P.x,$+=R*P.y,_.x=X+(_.y-$)/P.normalSlope):_.x=(B?E.xo:E.x)+R},slope:0,touch:function(_){_.xTouched=!0},touched:function(_){return _.xTouched},untouch:function(_){_.xTouched=!1}},zr={x:0,y:1,axis:"y",distance:function(_,E,R,P){return(R?_.yo:_.y)-(P?E.yo:E.y)},interpolate:function(_,E,R,P){var B,X,$,se,fe,he,Ae;if(!P||P===this)return B=_.yo-E.yo,X=_.yo-R.yo,fe=E.y-E.yo,he=R.y-R.yo,(Ae=($=Math.abs(B))+(se=Math.abs(X)))===0?void(_.y=_.yo+(fe+he)/2):void(_.y=_.yo+(fe*se+he*$)/Ae);B=P.distance(_,E,!0,!0),X=P.distance(_,R,!0,!0),fe=P.distance(E,E,!1,!0),he=P.distance(R,R,!1,!0),(Ae=($=Math.abs(B))+(se=Math.abs(X)))===0?zr.setRelative(_,_,(fe+he)/2,P,!0):zr.setRelative(_,_,(fe*se+he*$)/Ae,P,!0)},normalSlope:0,setRelative:function(_,E,R,P,B){var X,$;P&&P!==this?(X=B?E.xo:E.x,$=B?E.yo:E.y,X+=R*P.x,$+=R*P.y,_.y=$+P.normalSlope*(_.x-X)):_.y=(B?E.yo:E.y)+R},slope:Number.POSITIVE_INFINITY,touch:function(_){_.yTouched=!0},touched:function(_){return _.yTouched},untouch:function(_){_.yTouched=!1}};function gi(_,E){this.x=_,this.y=E,this.axis=void 0,this.slope=E/_,this.normalSlope=-_/E,Object.freeze(this)}function yi(_,E){var R=Math.sqrt(_*_+E*E);return E/=R,(_/=R)===1&&E===0?Ur:_===0&&E===1?zr:new gi(_,E)}function Vr(_,E,R,P){this.x=this.xo=Math.round(64*_)/64,this.y=this.yo=Math.round(64*E)/64,this.lastPointOfContour=R,this.onCurve=P,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Ur),Object.freeze(zr),gi.prototype.distance=function(_,E,R,P){return this.x*Ur.distance(_,E,R,P)+this.y*zr.distance(_,E,R,P)},gi.prototype.interpolate=function(_,B,X,P){var $=P.distance(_,B,!0,!0),se=P.distance(_,X,!0,!0),B=P.distance(B,B,!1,!0),X=P.distance(X,X,!1,!0),$=Math.abs($),se=Math.abs(se),fe=$+se;fe===0?this.setRelative(_,_,(B+X)/2,P,!0):this.setRelative(_,_,(B*se+X*$)/fe,P,!0)},gi.prototype.setRelative=function(_,X,fe,he,se){var $=se?X.xo:X.x,se=se?X.yo:X.y,X=$+fe*(he=he||this).x,$=se+fe*he.y,se=he.normalSlope,fe=this.slope,he=_.x,Ae=_.y;_.x=(fe*he-se*X+$-Ae)/(fe-se),_.y=fe*(_.x-he)+Ae},gi.prototype.touch=function(_){_.xTouched=!0,_.yTouched=!0},Vr.prototype.nextTouched=function(_){for(var E=this.nextPointOnContour;!_.touched(E)&&E!==this;)E=E.nextPointOnContour;return E},Vr.prototype.prevTouched=function(_){for(var E=this.prevPointOnContour;!_.touched(E)&&E!==this;)E=E.prevPointOnContour;return E};var vi=Object.freeze(new Vr(0,0)),ac={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function nn(_,E){switch(this.env=_,this.stack=[],this.prog=E,_){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Ur,this.round=To}}function ki(_){for(var E=_.tZone=new Array(_.gZone.length),R=0;R<E.length;R++)E[R]=new Vr(0,0)}function jo(_,E){var R,P=_.prog,B=_.ip,X=1;do if((R=P[++B])===88)X++;else if(R===89)X--;else if(R===64)B+=P[B+1]+1;else if(R===65)B+=2*P[B+1]+1;else if(176<=R&&R<=183)B+=R-176+1;else if(184<=R&&R<=191)B+=2*(R-184+1);else if(E&&X===1&&R===27)break;while(0<X);_.ip=B}function Co(_,E){f.DEBUG&&console.log(E.step,"SVTCA["+_.axis+"]"),E.fv=E.pv=E.dpv=_}function Ro(_,E){f.DEBUG&&console.log(E.step,"SPVTCA["+_.axis+"]"),E.pv=E.dpv=_}function Lo(_,E){f.DEBUG&&console.log(E.step,"SFVTCA["+_.axis+"]"),E.fv=_}function Po(_,E){var R,B=E.stack,P=B.pop(),B=B.pop(),X=E.z2[P],$=E.z1[B];f.DEBUG&&console.log("SPVTL["+_+"]",P,B),P=_?(R=X.y-$.y,$.x-X.x):(R=$.x-X.x,$.y-X.y),E.pv=E.dpv=yi(R,P)}function Oo(_,E){var R,B=E.stack,P=B.pop(),B=B.pop(),X=E.z2[P],$=E.z1[B];f.DEBUG&&console.log("SFVTL["+_+"]",P,B),P=_?(R=X.y-$.y,$.x-X.x):(R=$.x-X.x,$.y-X.y),E.fv=yi(R,P)}function ys(_){f.DEBUG&&console.log(_.step,"POP[]"),_.stack.pop()}function Do(_,E){var R=E.stack.pop(),P=E.z0[R],B=E.fv,X=E.pv,$=(f.DEBUG&&console.log(E.step,"MDAP["+_+"]",R),X.distance(P,vi));_&&($=E.round($)),B.setRelative(P,vi,$,X),B.touch(P),E.rp0=E.rp1=R}function Io(_,E){var R,P,B,X=E.z2,$=X.length-2;f.DEBUG&&console.log(E.step,"IUP["+_.axis+"]");for(var se=0;se<$;se++)R=X[se],_.touched(R)||(P=R.prevTouched(_))!==R&&(P===(B=R.nextTouched(_))&&_.setRelative(R,R,_.distance(P,P,!1,!0),_,!0),_.interpolate(R,P,B,_))}function ko(_,E){for(var R=E.stack,P=_?E.rp1:E.rp2,B=(_?E.z0:E.z1)[P],X=E.fv,$=E.pv,se=E.loop,fe=E.z2;se--;){var he=R.pop(),Ae=fe[he],Ue=$.distance(B,B,!1,!0);X.setRelative(Ae,Ae,Ue,$),X.touch(Ae),f.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-se)+": ":"")+"SHP["+(_?"rp1":"rp2")+"]",he)}E.loop=1}function Uo(_,E){for(var R=E.stack,$=_?E.rp1:E.rp2,P=(_?E.z0:E.z1)[$],B=E.fv,X=E.pv,$=R.pop(),se=E.z2[E.contours[$]],fe=se,he=(f.DEBUG&&console.log(E.step,"SHC["+_+"]",$),X.distance(P,P,!1,!0));fe!==P&&B.setRelative(fe,fe,he,X),(fe=fe.nextPointOnContour)!==se;);}function Fo(_,E){var R,P,se=E.stack,B=_?E.rp1:E.rp2,B=(_?E.z0:E.z1)[B],X=E.fv,$=E.pv,se=se.pop();switch(f.DEBUG&&console.log(E.step,"SHZ["+_+"]",se),se){case 0:R=E.tZone;break;case 1:R=E.gZone;break;default:throw new Error("Invalid zone")}for(var fe=$.distance(B,B,!1,!0),he=R.length-2,Ae=0;Ae<he;Ae++)P=R[Ae],X.setRelative(P,P,fe,$)}function No(_,E){var P=E.stack,R=P.pop()/64,P=P.pop(),B=E.z1[P],X=E.z0[E.rp0],$=E.fv,se=E.pv;$.setRelative(B,X,R,se),$.touch(B),f.DEBUG&&console.log(E.step,"MSIRP["+_+"]",R,P),E.rp1=E.rp0,E.rp2=P,_&&(E.rp0=P)}function Bo(_,E){var R=E.stack,se=R.pop(),R=R.pop(),P=E.z0[R],B=E.fv,X=E.pv,$=E.cvt[se],se=(f.DEBUG&&console.log(E.step,"MIAP["+_+"]",se,"(",$,")",R),X.distance(P,vi));_&&(Math.abs(se-$)<E.cvCutIn&&(se=$),se=E.round(se)),B.setRelative(P,vi,se,X),E.zp0===0&&(P.xo=P.x,P.yo=P.y),B.touch(P),E.rp0=E.rp1=R}function Go(_,E){var R=E.stack,P=R.pop(),B=E.z2[P];f.DEBUG&&console.log(E.step,"GC["+_+"]",P),R.push(64*E.dpv.distance(B,vi,_,!1))}function zo(_,E){var P=E.stack,R=P.pop(),P=P.pop(),B=E.z1[R],X=E.z0[P],X=E.dpv.distance(X,B,_,_);f.DEBUG&&console.log(E.step,"MD["+_+"]",R,P,"->",X),E.stack.push(Math.round(64*X))}function vs(_,E){var R=E.stack,P=R.pop(),B=E.fv,X=E.pv,$=E.ppem,se=E.deltaBase+16*(_-1),fe=E.deltaShift,he=E.z0;f.DEBUG&&console.log(E.step,"DELTAP["+_+"]",P,R);for(var Ae=0;Ae<P;Ae++){var Ue=R.pop(),Oe=R.pop();se+((240&Oe)>>4)===$&&(0<=(Oe=(15&Oe)-8)&&Oe++,f.DEBUG&&console.log(E.step,"DELTAPFIX",Ue,"by",Oe*fe),Ue=he[Ue],B.setRelative(Ue,Ue,Oe*fe,X))}}function Ui(_,E){var R=E.stack,P=R.pop();f.DEBUG&&console.log(E.step,"ROUND[]"),R.push(64*E.round(P/64))}function bs(_,E){var R=E.stack,P=R.pop(),B=E.ppem,X=E.deltaBase+16*(_-1),$=E.deltaShift;f.DEBUG&&console.log(E.step,"DELTAC["+_+"]",P,R);for(var se=0;se<P;se++){var fe=R.pop(),he=R.pop();X+((240&he)>>4)===B&&(0<=(he=(15&he)-8)&&he++,he=he*$,f.DEBUG&&console.log(E.step,"DELTACFIX",fe,"by",he),E.cvt[fe]+=he)}}function Vo(_,E){var R,B=E.stack,P=B.pop(),B=B.pop(),X=E.z2[P],$=E.z1[B];f.DEBUG&&console.log(E.step,"SDPVTL["+_+"]",P,B),P=_?(R=X.y-$.y,$.x-X.x):(R=$.x-X.x,$.y-X.y),E.dpv=yi(R,P)}function sn(_,E){var R=E.stack,P=E.prog,B=E.ip;f.DEBUG&&console.log(E.step,"PUSHB["+_+"]");for(var X=0;X<_;X++)R.push(P[++B]);E.ip=B}function on(_,E){var R=E.ip,P=E.prog,B=E.stack;f.DEBUG&&console.log(E.ip,"PUSHW["+_+"]");for(var X=0;X<_;X++){var $=P[++R]<<8|P[++R];32768&$&&($=-(1+(65535^$))),B.push($)}E.ip=R}function ct(_,E,R,P,B,X){var $,se,he=X.stack,fe=_&&he.pop(),he=he.pop(),Ae=X.rp0,Ae=X.z0[Ae],Ue=X.z1[he],Oe=X.minDis,Se=X.fv,Qe=X.dpv,We=$=Qe.distance(Ue,Ae,!0,!0),Ye=0<=We?1:-1;We=Math.abs(We),_&&(se=X.cvt[fe],P&&Math.abs(We-se)<X.cvCutIn&&(We=se)),R&&We<Oe&&(We=Oe),P&&(We=X.round(We)),Se.setRelative(Ue,Ae,Ye*We,Qe),Se.touch(Ue),f.DEBUG&&console.log(X.step,(_?"MIRP[":"MDRP[")+(E?"M":"m")+(R?">":"_")+(P?"R":"_")+(B===0?"Gr":B===1?"Bl":B===2?"Wh":"")+"]",_?fe+"("+X.cvt[fe]+","+se+")":"",he,"(d =",$,"->",Ye*We,")"),X.rp1=X.rp0,X.rp2=he,E&&(X.rp0=he)}Eo.prototype.exec=function(_,E){if(typeof E!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var R=this.font,P=this._prepState;if(!P||P.ppem!==E){var B=this._fpgmState;if(!B){nn.prototype=ac,(B=this._fpgmState=new nn("fpgm",R.tables.fpgm)).funcs=[],B.font=R,f.DEBUG&&(console.log("---EXEC FPGM---"),B.step=-1);try{Bn(B)}catch(he){return console.log("Hinting error in FPGM:"+he),void(this._errorState=3)}}nn.prototype=B,(P=this._prepState=new nn("prep",R.tables.prep)).ppem=E;var X=R.tables.cvt;if(X)for(var $=P.cvt=new Array(X.length),se=E/R.unitsPerEm,fe=0;fe<X.length;fe++)$[fe]=X[fe]*se;else P.cvt=[];f.DEBUG&&(console.log("---EXEC PREP---"),P.step=-1);try{Bn(P)}catch(he){this._errorState<2&&console.log("Hinting error in PREP:"+he),this._errorState=2}}if(!(1<this._errorState))try{return lc(_,P)}catch(he){this._errorState<1&&(console.log("Hinting error:"+he),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var lc=function(_,E){var R=E.ppem/E.font.unitsPerEm,P=R,B=_.components;if(nn.prototype=E,B){for(var X=E.font,$=[],se=[],fe=0;fe<B.length;fe++){var he=B[fe],Ae=X.glyphs.get(he.glyphIndex),Ue=new nn("glyf",Ae.instructions);f.DEBUG&&(console.log("---EXEC COMP "+fe+"---"),Ue.step=-1),Ho(Ae,Ue,R,P);for(var Oe=Math.round(he.dx*R),Se=Math.round(he.dy*P),Qe=Ue.gZone,We=Ue.contours,Ye=0;Ye<Qe.length;Ye++){var Ne=Qe[Ye];Ne.xTouched=Ne.yTouched=!1,Ne.xo=Ne.x=Ne.x+Oe,Ne.yo=Ne.y=Ne.y+Se}var Be=$.length;$.push.apply($,Qe);for(var ut=0;ut<We.length;ut++)se.push(We[ut]+Be)}_.instructions&&!Ue.inhibitGridFit&&((Ue=new nn("glyf",_.instructions)).gZone=Ue.z0=Ue.z1=Ue.z2=$,Ue.contours=se,$.push(new Vr(0,0),new Vr(Math.round(_.advanceWidth*R),0)),f.DEBUG&&(console.log("---EXEC COMPOSITE---"),Ue.step=-1),Bn(Ue),$.length-=2)}else Ue=new nn("glyf",_.instructions),f.DEBUG&&(console.log("---EXEC GLYPH---"),Ue.step=-1),Ho(_,Ue,R,P),$=Ue.gZone;return $},Ho=function(_,E,R,P){for(var B,X,$,se=_.points||[],fe=se.length,he=E.gZone=E.z0=E.z1=E.z2=[],Ae=E.contours=[],Ue=0;Ue<fe;Ue++)B=se[Ue],he[Ue]=new Vr(B.x*R,B.y*P,B.lastPointOfContour,B.onCurve);for(var Oe=0;Oe<fe;Oe++)B=he[Oe],X||(X=B,Ae.push(Oe)),B.lastPointOfContour?((B.nextPointOnContour=X).prevPointOnContour=B,X=void 0):($=he[Oe+1],(B.nextPointOnContour=$).prevPointOnContour=B);if(!E.inhibitGridFit){if(f.DEBUG){console.log("PROCESSING GLYPH",E.stack);for(var Se=0;Se<fe;Se++)console.log(Se,he[Se].x,he[Se].y)}if(he.push(new Vr(0,0),new Vr(Math.round(_.advanceWidth*R),0)),Bn(E),he.length-=2,f.DEBUG){console.log("FINISHED GLYPH",E.stack);for(var Qe=0;Qe<fe;Qe++)console.log(Qe,he[Qe].x,he[Qe].y)}}},Bn=function(_){var E=_.prog;if(E){var R,P=E.length;for(_.ip=0;_.ip<P;_.ip++){if(f.DEBUG&&_.step++,!(R=cc[E[_.ip]]))throw new Error("unknown instruction: 0x"+Number(E[_.ip]).toString(16));R(_)}}},cc=[Co.bind(void 0,zr),Co.bind(void 0,Ur),Ro.bind(void 0,zr),Ro.bind(void 0,Ur),Lo.bind(void 0,zr),Lo.bind(void 0,Ur),Po.bind(void 0,0),Po.bind(void 0,1),Oo.bind(void 0,0),Oo.bind(void 0,1),function(_){var E=(R=_.stack).pop(),R=R.pop();f.DEBUG&&console.log(_.step,"SPVFS[]",E,R),_.pv=_.dpv=yi(R,E)},function(_){var E=(R=_.stack).pop(),R=R.pop();f.DEBUG&&console.log(_.step,"SPVFS[]",E,R),_.fv=yi(R,E)},function(_){var E=_.stack,R=_.pv;f.DEBUG&&console.log(_.step,"GPV[]"),E.push(16384*R.x),E.push(16384*R.y)},function(_){var E=_.stack,R=_.fv;f.DEBUG&&console.log(_.step,"GFV[]"),E.push(16384*R.x),E.push(16384*R.y)},function(_){_.fv=_.pv,f.DEBUG&&console.log(_.step,"SFVTPV[]")},function(E){var R=($=E.stack).pop(),P=$.pop(),B=$.pop(),X=$.pop(),$=$.pop(),fe=E.z0,Ae=E.z1,se=fe[R],fe=fe[P],he=Ae[B],Ae=Ae[X],E=E.z2[$],R=(f.DEBUG&&console.log("ISECT[], ",R,P,B,X,$),se.x),P=se.y,B=fe.x,X=fe.y,$=he.x,se=he.y,fe=Ae.x,he=Ae.y,Ae=(R-B)*(se-he)-(P-X)*($-fe),Ue=R*X-P*B,Oe=$*he-se*fe;E.x=(Ue*($-fe)-Oe*(R-B))/Ae,E.y=(Ue*(se-he)-Oe*(P-X))/Ae},function(_){_.rp0=_.stack.pop(),f.DEBUG&&console.log(_.step,"SRP0[]",_.rp0)},function(_){_.rp1=_.stack.pop(),f.DEBUG&&console.log(_.step,"SRP1[]",_.rp1)},function(_){_.rp2=_.stack.pop(),f.DEBUG&&console.log(_.step,"SRP2[]",_.rp2)},function(_){var E=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"SZP0[]",E),_.zp0=E){case 0:_.tZone||ki(_),_.z0=_.tZone;break;case 1:_.z0=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){var E=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"SZP1[]",E),_.zp1=E){case 0:_.tZone||ki(_),_.z1=_.tZone;break;case 1:_.z1=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){var E=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"SZP2[]",E),_.zp2=E){case 0:_.tZone||ki(_),_.z2=_.tZone;break;case 1:_.z2=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){var E=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"SZPS[]",E),_.zp0=_.zp1=_.zp2=E){case 0:_.tZone||ki(_),_.z0=_.z1=_.z2=_.tZone;break;case 1:_.z0=_.z1=_.z2=_.gZone;break;default:throw new Error("Invalid zone pointer")}},function(_){_.loop=_.stack.pop(),f.DEBUG&&console.log(_.step,"SLOOP[]",_.loop)},function(_){f.DEBUG&&console.log(_.step,"RTG[]"),_.round=To},function(_){f.DEBUG&&console.log(_.step,"RTHG[]"),_.round=ic},function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"SMD[]",E),_.minDis=E/64},function(_){f.DEBUG&&console.log(_.step,"ELSE[]"),jo(_,!1)},function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"JMPR[]",E),_.ip+=E-1},function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"SCVTCI[]",E),_.cvCutIn=E/64},void 0,void 0,function(_){var E=_.stack;f.DEBUG&&console.log(_.step,"DUP[]"),E.push(E[E.length-1])},ys,function(_){f.DEBUG&&console.log(_.step,"CLEAR[]"),_.stack.length=0},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"SWAP[]"),E.push(R),E.push(P)},function(_){var E=_.stack;f.DEBUG&&console.log(_.step,"DEPTH[]"),E.push(E.length)},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"CINDEX[]",R),E.push(E[E.length-R])},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"MINDEX[]",R),E.push(E.splice(E.length-R,1)[0])},void 0,void 0,void 0,function(_){var E=(P=_.stack).pop(),R=P.pop(),P=(f.DEBUG&&console.log(_.step,"LOOPCALL[]",E,R),_.ip),B=_.prog;_.prog=_.funcs[E];for(var X=0;X<R;X++)Bn(_),f.DEBUG&&console.log(++_.step,X+1<R?"next loopcall":"done loopcall",X);_.ip=P,_.prog=B},function(_){var E=_.stack.pop(),R=(f.DEBUG&&console.log(_.step,"CALL[]",E),_.ip),P=_.prog;_.prog=_.funcs[E],Bn(_),_.ip=R,_.prog=P,f.DEBUG&&console.log(++_.step,"returning from",E)},function(_){if(_.env!=="fpgm")throw new Error("FDEF not allowed here");var P=_.stack,E=_.prog,R=_.ip,P=P.pop(),B=R;for(f.DEBUG&&console.log(_.step,"FDEF[]",P);E[++R]!==45;);_.ip=R,_.funcs[P]=E.slice(B+1,R)},void 0,Do.bind(void 0,0),Do.bind(void 0,1),Io.bind(void 0,zr),Io.bind(void 0,Ur),ko.bind(void 0,0),ko.bind(void 0,1),Uo.bind(void 0,0),Uo.bind(void 0,1),Fo.bind(void 0,0),Fo.bind(void 0,1),function(_){for(var E=_.stack,R=_.loop,P=_.fv,B=E.pop()/64,X=_.z2;R--;){var $=E.pop(),se=X[$];f.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-R)+": ":"")+"SHPIX[]",$,B),P.setRelative(se,se,B),P.touch(se)}_.loop=1},function(_){for(var E=_.stack,R=_.rp1,P=_.rp2,B=_.loop,X=_.z0[R],$=_.z1[P],se=_.fv,fe=_.dpv,he=_.z2;B--;){var Ae=E.pop(),Ue=he[Ae];f.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-B)+": ":"")+"IP[]",Ae,R,"<->",P),se.interpolate(Ue,X,$,fe),se.touch(Ue)}_.loop=1},No.bind(void 0,0),No.bind(void 0,1),function(_){for(var E=_.stack,R=_.rp0,P=_.z0[R],B=_.loop,X=_.fv,$=_.pv,se=_.z1;B--;){var fe=E.pop(),he=se[fe];f.DEBUG&&console.log(_.step,(1<_.loop?"loop "+(_.loop-B)+": ":"")+"ALIGNRP[]",fe),X.setRelative(he,P,0,$),X.touch(he)}_.loop=1},function(_){f.DEBUG&&console.log(_.step,"RTDG[]"),_.round=nc},Bo.bind(void 0,0),Bo.bind(void 0,1),function(_){var E=_.prog,R=_.ip,P=_.stack,B=E[++R];f.DEBUG&&console.log(_.step,"NPUSHB[]",B);for(var X=0;X<B;X++)P.push(E[++R]);_.ip=R},function(_){var E=_.ip,R=_.prog,P=_.stack,B=R[++E];f.DEBUG&&console.log(_.step,"NPUSHW[]",B);for(var X=0;X<B;X++){var $=R[++E]<<8|R[++E];32768&$&&($=-(1+(65535^$))),P.push($)}_.ip=E},function(_){var P=_.stack,E=(E=_.store)||(_.store=[]),R=P.pop(),P=P.pop();f.DEBUG&&console.log(_.step,"WS",R,P),E[P]=R},function(B){var E=B.stack,R=B.store,P=E.pop(),B=(f.DEBUG&&console.log(B.step,"RS",P),R&&R[P]||0);E.push(B)},function(_){var E=(R=_.stack).pop(),R=R.pop();f.DEBUG&&console.log(_.step,"WCVTP",E,R),_.cvt[R]=E/64},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"RCVT",R),E.push(64*_.cvt[R])},Go.bind(void 0,0),Go.bind(void 0,1),void 0,zo.bind(void 0,0),zo.bind(void 0,1),function(_){f.DEBUG&&console.log(_.step,"MPPEM[]"),_.stack.push(_.ppem)},void 0,function(_){f.DEBUG&&console.log(_.step,"FLIPON[]"),_.autoFlip=!0},void 0,void 0,function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"LT[]",R,P),E.push(P<R?1:0)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"LTEQ[]",R,P),E.push(P<=R?1:0)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"GT[]",R,P),E.push(R<P?1:0)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"GTEQ[]",R,P),E.push(R<=P?1:0)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"EQ[]",R,P),E.push(R===P?1:0)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"NEQ[]",R,P),E.push(R!==P?1:0)},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"ODD[]",R),E.push(Math.trunc(R)%2?1:0)},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"EVEN[]",R),E.push(Math.trunc(R)%2?0:1)},function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"IF[]",E),E||(jo(_,!0),f.DEBUG&&console.log(_.step,"EIF[]"))},function(_){f.DEBUG&&console.log(_.step,"EIF[]")},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"AND[]",R,P),E.push(R&&P?1:0)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"OR[]",R,P),E.push(R||P?1:0)},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"NOT[]",R),E.push(R?0:1)},vs.bind(void 0,1),function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"SDB[]",E),_.deltaBase=E},function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"SDS[]",E),_.deltaShift=Math.pow(.5,E)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"ADD[]",R,P),E.push(P+R)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"SUB[]",R,P),E.push(P-R)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"DIV[]",R,P),E.push(64*P/R)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"MUL[]",R,P),E.push(P*R/64)},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"ABS[]",R),E.push(Math.abs(R))},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"NEG[]",R),E.push(-R)},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"FLOOR[]",R),E.push(64*Math.floor(R/64))},function(_){var E=_.stack,R=E.pop();f.DEBUG&&console.log(_.step,"CEILING[]",R),E.push(64*Math.ceil(R/64))},Ui.bind(void 0,0),Ui.bind(void 0,1),Ui.bind(void 0,2),Ui.bind(void 0,3),void 0,void 0,void 0,void 0,function(_){var E=(R=_.stack).pop(),R=R.pop();f.DEBUG&&console.log(_.step,"WCVTF[]",E,R),_.cvt[R]=E*_.ppem/_.font.unitsPerEm},vs.bind(void 0,2),vs.bind(void 0,3),bs.bind(void 0,1),bs.bind(void 0,2),bs.bind(void 0,3),function(_){var E,R=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"SROUND[]",R),_.round=Ao,192&R){case 0:E=.5;break;case 64:E=1;break;case 128:E=2;break;default:throw new Error("invalid SROUND value")}switch(_.srPeriod=E,48&R){case 0:_.srPhase=0;break;case 16:_.srPhase=.25*E;break;case 32:_.srPhase=.5*E;break;case 48:_.srPhase=.75*E;break;default:throw new Error("invalid SROUND value")}_.srThreshold=(R&=15)===0?0:(R/8-.5)*E},function(_){var E,R=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"S45ROUND[]",R),_.round=Ao,192&R){case 0:E=Math.sqrt(2)/2;break;case 64:E=Math.sqrt(2);break;case 128:E=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(_.srPeriod=E,48&R){case 0:_.srPhase=0;break;case 16:_.srPhase=.25*E;break;case 32:_.srPhase=.5*E;break;case 48:_.srPhase=.75*E;break;default:throw new Error("invalid S45ROUND value")}_.srThreshold=(R&=15)===0?0:(R/8-.5)*E},void 0,void 0,function(_){f.DEBUG&&console.log(_.step,"ROFF[]"),_.round=rc},void 0,function(_){f.DEBUG&&console.log(_.step,"RUTG[]"),_.round=sc},function(_){f.DEBUG&&console.log(_.step,"RDTG[]"),_.round=oc},ys,ys,void 0,void 0,void 0,void 0,void 0,function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"SCANCTRL[]",E)},Vo.bind(void 0,0),Vo.bind(void 0,1),function(_){var E=_.stack,R=E.pop(),P=0;f.DEBUG&&console.log(_.step,"GETINFO[]",R),1&R&&(P=35),32&R&&(P|=4096),E.push(P)},void 0,function(_){var E=_.stack,R=E.pop(),P=E.pop(),B=E.pop();f.DEBUG&&console.log(_.step,"ROLL[]"),E.push(P),E.push(R),E.push(B)},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"MAX[]",R,P),E.push(Math.max(P,R))},function(_){var E=_.stack,R=E.pop(),P=E.pop();f.DEBUG&&console.log(_.step,"MIN[]",R,P),E.push(Math.min(P,R))},function(_){var E=_.stack.pop();f.DEBUG&&console.log(_.step,"SCANTYPE[]",E)},function(_){var E=_.stack.pop(),R=_.stack.pop();switch(f.DEBUG&&console.log(_.step,"INSTCTRL[]",E,R),E){case 1:return void(_.inhibitGridFit=!!R);case 2:return void(_.ignoreCvt=!!R);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,sn.bind(void 0,1),sn.bind(void 0,2),sn.bind(void 0,3),sn.bind(void 0,4),sn.bind(void 0,5),sn.bind(void 0,6),sn.bind(void 0,7),sn.bind(void 0,8),on.bind(void 0,1),on.bind(void 0,2),on.bind(void 0,3),on.bind(void 0,4),on.bind(void 0,5),on.bind(void 0,6),on.bind(void 0,7),on.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)],uc=Array.from||function(_){return _.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Ot(_){(_=_||{}).empty||(Nn(_.familyName,"When creating a new Font object, familyName is required."),Nn(_.styleName,"When creating a new Font object, styleName is required."),Nn(_.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Nn(_.ascender,"When creating a new Font object, ascender is required."),Nn(_.descender,"When creating a new Font object, descender is required."),Nn(_.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:_.familyName||" "},fontSubfamily:{en:_.styleName||" "},fullName:{en:_.fullName||_.familyName+" "+_.styleName},postScriptName:{en:_.postScriptName||(_.familyName+_.styleName).replace(/\s/g,"")},designer:{en:_.designer||" "},designerURL:{en:_.designerURL||" "},manufacturer:{en:_.manufacturer||" "},manufacturerURL:{en:_.manufacturerURL||" "},license:{en:_.license||" "},licenseURL:{en:_.licenseURL||" "},version:{en:_.version||"Version 0.1"},description:{en:_.description||" "},copyright:{en:_.copyright||" "},trademark:{en:_.trademark||" "}},this.unitsPerEm=_.unitsPerEm||1e3,this.ascender=_.ascender,this.descender=_.descender,this.createdTimestamp=_.createdTimestamp,this.tables={os2:{usWeightClass:_.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:_.widthClass||this.usWidthClasses.MEDIUM,fsSelection:_.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new rt.GlyphSet(this,_.glyphs||[]),this.encoding=new Ee(this),this.position=new Ii(this),this.substitution=new kr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Eo(this):void 0)}})}function Wo(_,E){var R,P=JSON.stringify(_),B=256;for(R in E){var X=parseInt(R);if(X&&!(X<256)){if(JSON.stringify(E[R])===P)return X;B<=X&&(B=X+1)}}return E[B]=_,B}Ot.prototype.hasChar=function(_){return this.encoding.charToGlyphIndex(_)!==null},Ot.prototype.charToGlyphIndex=function(_){return this.encoding.charToGlyphIndex(_)},Ot.prototype.charToGlyph=function(_){return _=this.charToGlyphIndex(_),this.glyphs.get(_)||this.glyphs.get(0)},Ot.prototype.stringToGlyphs=function(_,E){E=E||this.defaultRenderOptions;for(var R=uc(_),P=[],B=0;B<R.length;B+=1){var X=R[B];P.push(this.charToGlyphIndex(X))}var $=P.length;if(E.features){var _=E.script||this.substitution.getDefaultScriptName(),se=[];E.features.liga&&(se=se.concat(this.substitution.getFeature("liga",_,E.language))),E.features.rlig&&(se=se.concat(this.substitution.getFeature("rlig",_,E.language)));for(var fe=0;fe<$;fe+=1)for(var he=0;he<se.length;he++){for(var Ae=se[he],Ue=Ae.sub,Oe=Ue.length,Se=0;Se<Oe&&Ue[Se]===P[fe+Se];)Se++;Se===Oe&&(P.splice(fe,Oe,Ae.by),$=$-Oe+1)}}for(var Qe=new Array($),We=this.glyphs.get(0),Ye=0;Ye<$;Ye+=1)Qe[Ye]=this.glyphs.get(P[Ye])||We;return Qe},Ot.prototype.nameToGlyphIndex=function(_){return this.glyphNames.nameToGlyphIndex(_)},Ot.prototype.nameToGlyph=function(_){return _=this.nameToGlyphIndex(_),this.glyphs.get(_)||this.glyphs.get(0)},Ot.prototype.glyphIndexToName=function(_){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(_):""},Ot.prototype.getKerningValue=function(_,E){_=_.index||_,E=E.index||E;var R=this.position.defaultKerningTables;return R?this.position.getKerningValue(R,_,E):this.kerningPairs[_+","+E]||0},Ot.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Ot.prototype.forEachGlyph=function(_,E,R,P,B,X){E=E!==void 0?E:0,R=R!==void 0?R:0,B=B||this.defaultRenderOptions;var $,se=1/this.unitsPerEm*(P=P!==void 0?P:72),fe=this.stringToGlyphs(_,B);B.kerning&&(_=B.script||this.position.getDefaultScriptName(),$=this.position.getKerningTables(_,B.language));for(var he=0;he<fe.length;he+=1){var Ae=fe[he];X.call(this,Ae,E,R,P,B),Ae.advanceWidth&&(E+=Ae.advanceWidth*se),B.kerning&&he<fe.length-1&&(E+=($?this.position.getKerningValue($,Ae.index,fe[he+1].index):this.getKerningValue(Ae,fe[he+1]))*se),B.letterSpacing?E+=B.letterSpacing*P:B.tracking&&(E+=B.tracking/1e3*P)}return E},Ot.prototype.getPath=function(_,E,R,P,B){var X=new I;return this.forEachGlyph(_,E,R,P,B,function($,se,fe,he){$=$.getPath(se,fe,he,B,this),X.extend($)}),X},Ot.prototype.getPaths=function(_,E,R,P,B){var X=[];return this.forEachGlyph(_,E,R,P,B,function($,se,fe,he){$=$.getPath(se,fe,he,B,this),X.push($)}),X},Ot.prototype.getAdvanceWidth=function(_,E,R){return this.forEachGlyph(_,0,0,E,R,function(){})},Ot.prototype.draw=function(_,E,R,P,B,X){this.getPath(E,R,P,B,X).draw(_)},Ot.prototype.drawPoints=function(_,E,R,P,B,X){this.forEachGlyph(E,R,P,B,X,function($,se,fe,he){$.drawPoints(_,se,fe,he)})},Ot.prototype.drawMetrics=function(_,E,R,P,B,X){this.forEachGlyph(E,R,P,B,X,function($,se,fe,he){$.drawMetrics(_,se,fe,he)})},Ot.prototype.getEnglishName=function(_){if(_=this.names[_],_)return _.en},Ot.prototype.validate=function(){var _=this;function E(R){R=_.getEnglishName(R),R&&R.trim().length}E("fontFamily"),E("weightName"),E("manufacturer"),E("copyright"),E("version"),this.unitsPerEm},Ot.prototype.toTables=function(){return Ql.fontToTable(this)},Ot.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Ot.prototype.toArrayBuffer=function(){for(var _=this.toTables().encode(),E=new ArrayBuffer(_.length),R=new Uint8Array(E),P=0;P<_.length;P++)R[P]=_[P];return E},Ot.prototype.download=function(_){var E=this.getEnglishName("fontFamily"),R=this.getEnglishName("fontSubfamily"),P=(_=_||E.replace(/\s/g,"")+"-"+R+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,P.byteLength,function(B){B.root.getFile(_,{create:!0},function(X){X.createWriter(function($){var se=new DataView(P),se=new Blob([se],{type:"font/opentype"});$.write(se),$.addEventListener("writeend",function(){location.href=X.toURL()},!1)})})},function(B){throw new Error(B.name+": "+B.message)})):(E=t("fs"),R=function(B){for(var X=new h(B.byteLength),$=new Uint8Array(B),se=0;se<X.length;++se)X[se]=$[se];return X}(P),E.writeFileSync(_,R))},Ot.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Ot.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Ot.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var dc={make:function(_,E){var R=new ke.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:_.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:_.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*_.axes.length}]);R.offsetToData=R.sizeOf();for(var P,B,X,$=0;$<_.axes.length;$++)R.fields=R.fields.concat((P=$,B=_.axes[$],X=E,X=Wo(B.name,E),[{name:"tag_"+P,type:"TAG",value:B.tag},{name:"minValue_"+P,type:"FIXED",value:B.minValue<<16},{name:"defaultValue_"+P,type:"FIXED",value:B.defaultValue<<16},{name:"maxValue_"+P,type:"FIXED",value:B.maxValue<<16},{name:"flags_"+P,type:"USHORT",value:0},{name:"nameID_"+P,type:"USHORT",value:X}]));for(var se=0;se<_.instances.length;se++)R.fields=R.fields.concat(function(fe,he,Ae,Ue){for(var Oe=[{name:"nameID_"+fe,type:"USHORT",value:Wo(he.name,Ue)},{name:"flags_"+fe,type:"USHORT",value:0}],Se=0;Se<Ae.length;++Se){var Qe=Ae[Se].tag;Oe.push({name:"axis_"+fe+" "+Qe,type:"FIXED",value:he.coordinates[Qe]<<16})}return Oe}(se,_.instances[se],_.axes,E));return R},parse:function(_,E,R){for(var P,B,X,$,se=new Me.Parser(_,E),fe=se.parseULong(),he=(F.argument(fe===65536,"Unsupported fvar table version."),se.parseOffset16()),Ae=(se.skip("uShort",1),se.parseUShort()),Ue=se.parseUShort(),Oe=se.parseUShort(),Se=se.parseUShort(),Qe=[],We=0;We<Ae;We++)Qe.push((P=_,B=E+he+We*Ue,X=R,$={},P=new Me.Parser(P,B),$.tag=P.parseTag(),$.minValue=P.parseFixed(),$.defaultValue=P.parseFixed(),$.maxValue=P.parseFixed(),P.skip("uShort",1),$.name=X[P.parseUShort()]||{},$));for(var Ye=[],Ne=E+he+Ae*Ue,Be=0;Be<Oe;Be++)Ye.push(function(ut,gt,dt,ht){var vt={},kt=new Me.Parser(ut,gt);vt.name=ht[kt.parseUShort()]||{},kt.skip("uShort",1),vt.coordinates={};for(var Vt=0;Vt<dt.length;++Vt)vt.coordinates[dt[Vt].tag]=kt.parseFixed();return vt}(_,Ne+Be*Se,Qe,R));return{axes:Qe,instances:Ye}}},Mr=new Array(10);Mr[1]=function(){var _=this.offset+this.relativeOffset,E=this.parseUShort();return E===1?{posFormat:1,coverage:this.parsePointer(ve.coverage),value:this.parseValueRecord()}:E===2?{posFormat:2,coverage:this.parsePointer(ve.coverage),values:this.parseValueRecordList()}:void F.assert(!1,"0x"+_.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Mr[2]=function(){var _,E,R,P,X=this.offset+this.relativeOffset,B=this.parseUShort(),X=(F.assert(B===1||B===2,"0x"+X.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(ve.coverage)),$=this.parseUShort(),se=this.parseUShort();return B===1?{posFormat:B,coverage:X,valueFormat1:$,valueFormat2:se,pairSets:this.parseList(ve.pointer(ve.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord($),value2:this.parseValueRecord(se)}})))}:B===2?(_=this.parsePointer(ve.classDef),E=this.parsePointer(ve.classDef),R=this.parseUShort(),P=this.parseUShort(),{posFormat:B,coverage:X,valueFormat1:$,valueFormat2:se,classDef1:_,classDef2:E,class1Count:R,class2Count:P,classRecords:this.parseList(R,ve.list(P,function(){return{value1:this.parseValueRecord($),value2:this.parseValueRecord(se)}}))}):void 0},Mr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Mr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Mr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Mr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Mr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Mr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Mr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var hc=new Array(10),fc={parse:function(_,E){return E=(_=new ve(_,E=E||0)).parseVersion(1),F.argument(E===1||E===1.1,"Unsupported GPOS table version "+E),E===1?{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(Mr)}:{version:E,scripts:_.parseScriptList(),features:_.parseFeatureList(),lookups:_.parseLookupList(Mr),variations:_.parseFeatureVariationsList()}},make:function(_){return new ke.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ke.ScriptList(_.scripts)},{name:"features",type:"TABLE",value:new ke.FeatureList(_.features)},{name:"lookups",type:"TABLE",value:new ke.LookupList(_.lookups,hc)}])}},pc={parse:function(_,E){if(_=new Me.Parser(_,E),(E=_.parseUShort())===0){var R=_,P={},Ue=(R.skip("uShort"),R.parseUShort()),B=(F.argument(Ue===0,"Unsupported kern sub-table version."),R.skip("uShort",2),R.parseUShort());R.skip("uShort",3);for(var X=0;X<B;X+=1){var $=R.parseUShort(),se=R.parseUShort(),fe=R.parseShort();P[$+","+se]=fe}return P}if(E!==1)throw new Error("Unsupported kern table version ("+E+").");var he=_,Ae={},Ue=(he.skip("uShort"),1<he.parseULong()&&console.warn("Only the first kern subtable is supported."),he.skip("uLong"),255&he.parseUShort());if(he.skip("uShort"),Ue==0){var Oe=he.parseUShort();he.skip("uShort",3);for(var Se=0;Se<Oe;Se+=1){var Qe=he.parseUShort(),We=he.parseUShort(),Ye=he.parseShort();Ae[Qe+","+We]=Ye}}return Ae}},mc={parse:function(_,E,R,P){for(var B=new Me.Parser(_,E),X=P?B.parseUShort:B.parseULong,$=[],se=0;se<R+1;se+=1){var fe=X.call(B);P&&(fe*=2),$.push(fe)}return $}};function gc(_,E){t("fs").readFile(_,function(R,P){if(R)return E(R.message);E(null,xo(P))})}function yc(_,E){var R=new XMLHttpRequest;R.open("get",_,!0),R.responseType="arraybuffer",R.onload=function(){return R.response?E(null,R.response):E("Font could not be loaded: "+R.statusText)},R.onerror=function(){E("Font could not be loaded")},R.send()}function Xo(_,E){for(var R=[],P=12,B=0;B<E;B+=1){var X=Me.getTag(_,P),$=Me.getULong(_,P+4),se=Me.getULong(_,P+8),fe=Me.getULong(_,P+12);R.push({tag:X,checksum:$,offset:se,length:fe,compression:!1}),P+=16}return R}function Ht(R,E){if(E.compression!=="WOFF")return{data:R,offset:E.offset};var R=new Uint8Array(R.buffer,E.offset+2,E.compressedLength-2),P=new Uint8Array(E.length);if(z(R,P),P.byteLength!==E.length)throw new Error("Decompression error: "+E.tag+" decompressed length doesn't match recorded length");return{data:new DataView(P.buffer,0),offset:0}}function _s(Be){var E,R,P,B,X,$,se,fe,he,Ae,Ue,Oe,Se,Qe,We=new Ot({empty:!0}),Ye=new DataView(Be,0),Ne=[],Be=Me.getTag(Ye,0);if(Be===String.fromCharCode(0,1,0,0)||Be==="true"||Be==="typ1")We.outlinesFormat="truetype",Ne=Xo(Ye,P=Me.getUShort(Ye,4));else if(Be==="OTTO")We.outlinesFormat="cff",Ne=Xo(Ye,P=Me.getUShort(Ye,4));else{if(Be!=="wOFF")throw new Error("Unsupported OpenType signature "+Be);var ut=Me.getTag(Ye,4);if(ut===String.fromCharCode(0,1,0,0))We.outlinesFormat="truetype";else{if(ut!=="OTTO")throw new Error("Unsupported OpenType flavor "+Be);We.outlinesFormat="cff"}Ne=function(Ft,Rt){for(var sr=[],Gt=44,er=0;er<Rt;er+=1){var Nt=Me.getTag(Ft,Gt),Kt=Me.getULong(Ft,Gt+4),bi=Me.getULong(Ft,Gt+8),Gn=Me.getULong(Ft,Gt+12),qo=void 0,qo=bi<Gn&&"WOFF";sr.push({tag:Nt,offset:Kt,compression:qo,compressedLength:bi,length:Gn}),Gt+=20}return sr}(Ye,P=Me.getUShort(Ye,12))}for(var gt=0;gt<P;gt+=1){var dt=Ne[gt],ht=void 0;switch(dt.tag){case"cmap":ht=Ht(Ye,dt),We.tables.cmap=J.parse(ht.data,ht.offset),We.encoding=new De(We.tables.cmap);break;case"cvt ":ht=Ht(Ye,dt),Qe=new Me.Parser(ht.data,ht.offset),We.tables.cvt=Qe.parseShortList(dt.length/2);break;case"fvar":X=dt;break;case"fpgm":ht=Ht(Ye,dt),Qe=new Me.Parser(ht.data,ht.offset),We.tables.fpgm=Qe.parseByteList(dt.length);break;case"head":ht=Ht(Ye,dt),We.tables.head=Xe.parse(ht.data,ht.offset),We.unitsPerEm=We.tables.head.unitsPerEm,E=We.tables.head.indexToLocFormat;break;case"hhea":ht=Ht(Ye,dt),We.tables.hhea=ae.parse(ht.data,ht.offset),We.ascender=We.tables.hhea.ascender,We.descender=We.tables.hhea.descender,We.numberOfHMetrics=We.tables.hhea.numberOfHMetrics;break;case"hmtx":he=dt;break;case"ltag":ht=Ht(Ye,dt),R=Pe.parse(ht.data,ht.offset);break;case"maxp":ht=Ht(Ye,dt),We.tables.maxp=Fe.parse(ht.data,ht.offset),We.numGlyphs=We.tables.maxp.numGlyphs;break;case"name":Oe=dt;break;case"OS/2":ht=Ht(Ye,dt),We.tables.os2=St.parse(ht.data,ht.offset);break;case"post":ht=Ht(Ye,dt),We.tables.post=Dr.parse(ht.data,ht.offset),We.glyphNames=new ge(We.tables.post);break;case"prep":ht=Ht(Ye,dt),Qe=new Me.Parser(ht.data,ht.offset),We.tables.prep=Qe.parseByteList(dt.length);break;case"glyf":$=dt;break;case"loca":Ue=dt;break;case"CFF ":B=dt;break;case"kern":Ae=dt;break;case"GPOS":se=dt;break;case"GSUB":fe=dt;break;case"meta":Se=dt}}if(ut=Ht(Ye,Oe),We.tables.name=ft.parse(ut.data,ut.offset,R),We.names=We.tables.name,$&&Ue)Be=E===0,ut=Ht(Ye,Ue),ut=mc.parse(ut.data,ut.offset,We.numGlyphs,Be),Be=Ht(Ye,$),We.glyphs=Mo.parse(Be.data,Be.offset,ut,We);else{if(!B)throw new Error("Font doesn't contain TrueType or CFF outlines.");Be=Ht(Ye,B),ye.parse(Be.data,Be.offset,We)}for(var ut=Ht(Ye,he),vt=(we.parse(ut.data,ut.offset,We.numberOfHMetrics,We.numGlyphs,We.glyphs),We),kt=vt.tables.cmap.glyphIndexMap,Vt=Object.keys(kt),Wt=0;Wt<Vt.length;Wt+=1){var nr,ir=Vt[Wt],Er=kt[ir];(nr=vt.glyphs.get(Er)).addUnicode(parseInt(ir))}for(var Dt=0;Dt<vt.glyphs.length;Dt+=1)nr=vt.glyphs.get(Dt),vt.cffEncoding?vt.isCIDFont?nr.name="gid"+Dt:nr.name=vt.cffEncoding.charset[Dt]:vt.glyphNames.names&&(nr.name=vt.glyphNames.glyphIndexToName(Dt));return Ae?(Be=Ht(Ye,Ae),We.kerningPairs=pc.parse(Be.data,Be.offset)):We.kerningPairs={},se&&(ut=Ht(Ye,se),We.tables.gpos=fc.parse(ut.data,ut.offset),We.position.init()),fe&&(Be=Ht(Ye,fe),We.tables.gsub=Zt.parse(Be.data,Be.offset)),X&&(ut=Ht(Ye,X),We.tables.fvar=dc.parse(ut.data,ut.offset,We.names)),Se&&(Be=Ht(Ye,Se),We.tables.meta=Ir.parse(Be.data,Be.offset),We.metas=We.tables.meta),We}f.Font=Ot,f.Glyph=je,f.Path=I,f.BoundingBox=Z,f._parse=Me,f.parse=_s,f.load=function(_,E){(typeof window>"u"?gc:yc)(_,function(R,P){if(R)return E(R);var B;try{B=_s(P)}catch(X){return E(X,null)}return E(null,B)})},f.loadSync=function(_){return _s(xo(t("fs").readFileSync(_)))},Object.defineProperty(f,"__esModule",{value:!0})},i(typeof b=="object"&&x!==void 0?b:d.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],250:[function(t,x,b){(function(h){function d(g,m){for(var n=0,s=g.length-1;0<=s;s--){var l=g[s];l==="."?g.splice(s,1):l===".."?(g.splice(s,1),n++):n&&(g.splice(s,1),n--)}if(m)for(;n--;)g.unshift("..");return g}function i(g,m){if(g.filter)return g.filter(m);for(var n=[],s=0;s<g.length;s++)m(g[s],s,g)&&n.push(g[s]);return n}b.resolve=function(){for(var g="",m=!1,n=arguments.length-1;-1<=n&&!m;n--){var s=0<=n?arguments[n]:h.cwd();if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");s&&(g=s+"/"+g,m=s.charAt(0)==="/")}return(m?"/":"")+(g=d(i(g.split("/"),function(l){return!!l}),!m).join("/"))||"."},b.normalize=function(g){var m=b.isAbsolute(g),n=f(g,-1)==="/";return(g=(g=d(i(g.split("/"),function(s){return!!s}),!m).join("/"))||m?g:".")&&n&&(g+="/"),(m?"/":"")+g},b.isAbsolute=function(g){return g.charAt(0)==="/"},b.join=function(){var g=Array.prototype.slice.call(arguments,0);return b.normalize(i(g,function(m,n){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},b.relative=function(g,m){function n(p){for(var v=0;v<p.length&&p[v]==="";v++);for(var w=p.length-1;0<=w&&p[w]==="";w--);return w<v?[]:p.slice(v,w-v+1)}g=b.resolve(g).substr(1),m=b.resolve(m).substr(1);for(var s=n(g.split("/")),l=n(m.split("/")),c=Math.min(s.length,l.length),a=c,u=0;u<c;u++)if(s[u]!==l[u]){a=u;break}for(var y=[],u=a;u<s.length;u++)y.push("..");return(y=y.concat(l.slice(a))).join("/")},b.sep="/",b.delimiter=":",b.dirname=function(g){if(typeof g!="string"&&(g+=""),g.length===0)return".";for(var m=g.charCodeAt(0)===47,n=-1,s=!0,l=g.length-1;1<=l;--l)if(g.charCodeAt(l)===47){if(!s){n=l;break}}else s=!1;return n===-1?m?"/":".":m&&n===1?"/":g.slice(0,n)},b.basename=function(g,m){return g=function(n){typeof n!="string"&&(n+="");for(var s=0,l=-1,c=!0,a=n.length-1;0<=a;--a)if(n.charCodeAt(a)===47){if(!c){s=a+1;break}}else l===-1&&(c=!1,l=a+1);return l===-1?"":n.slice(s,l)}(g),g=m&&g.substr(-1*m.length)===m?g.substr(0,g.length-m.length):g},b.extname=function(g){typeof g!="string"&&(g+="");for(var m=-1,n=0,s=-1,l=!0,c=0,a=g.length-1;0<=a;--a){var u=g.charCodeAt(a);if(u===47){if(l)continue;n=a+1;break}s===-1&&(l=!1,s=a+1),u===46?m===-1?m=a:c!==1&&(c=1):m!==-1&&(c=-1)}return m===-1||s===-1||c===0||c===1&&m===s-1&&m===n+1?"":g.slice(m,s)};var f="ab".substr(-1)==="b"?function(g,m,n){return g.substr(m,n)}:function(g,m,n){return m<0&&(m=g.length+m),g.substr(m,n)}}).call(this,t("_process"))},{_process:251}],251:[function(t,i,b){var h,d,i=i.exports={};function f(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}try{h=typeof setTimeout=="function"?setTimeout:f}catch{h=f}try{d=typeof clearTimeout=="function"?clearTimeout:g}catch{d=g}function m(v){if(h===setTimeout)return setTimeout(v,0);if((h===f||!h)&&setTimeout)return(h=setTimeout)(v,0);try{return h(v,0)}catch{try{return h.call(null,v,0)}catch{return h.call(this,v,0)}}}var n,s=[],l=!1,c=-1;function a(){l&&n&&(l=!1,n.length?s=n.concat(s):c=-1,s.length&&u())}function u(){if(!l){for(var v=m(a),w=(l=!0,s.length);w;){for(n=s,s=[];++c<w;)n&&n[c].run();c=-1,w=s.length}n=null,l=!1,function(C){if(d===clearTimeout)return clearTimeout(C);if((d===g||!d)&&clearTimeout)return(d=clearTimeout)(C);try{d(C)}catch{try{return d.call(null,C)}catch{return d.call(this,C)}}}(v)}}function y(v,w){this.fun=v,this.array=w}function p(){}i.nextTick=function(v){var w=new Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)w[C-1]=arguments[C];s.push(new y(v,w)),s.length!==1||l||m(u)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(v){return[]},i.binding=function(v){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(v){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],252:[function(t,x,b){x=function(h){var d,i=Object.prototype,f=i.hasOwnProperty,T=typeof Symbol=="function"?Symbol:{},g=T.iterator||"@@iterator",m=T.asyncIterator||"@@asyncIterator",n=T.toStringTag||"@@toStringTag";function s(G,H,W,Y){var I,q,D,F,H=H&&H.prototype instanceof v?H:v,H=Object.create(H.prototype),Y=new N(Y||[]);return H._invoke=(I=G,q=W,D=Y,F=c,function(te,ie){if(F===u)throw new Error("Generator is already running");if(F===y){if(te==="throw")throw ie;return V()}for(D.method=te,D.arg=ie;;){var de=D.delegate;if(de&&(de=function _e(le,re){var pe=le.iterator[re.method];if(pe===d){if(re.delegate=null,re.method==="throw"){if(le.iterator.return&&(re.method="return",re.arg=d,_e(le,re),re.method==="throw"))return p;re.method="throw",re.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}if(pe=l(pe,le.iterator,re.arg),pe.type==="throw")return re.method="throw",re.arg=pe.arg,re.delegate=null,p;if(pe=pe.arg,!pe)return re.method="throw",re.arg=new TypeError("iterator result is not an object"),re.delegate=null,p;{if(!pe.done)return pe;re[le.resultName]=pe.value,re.next=le.nextLoc,re.method!=="return"&&(re.method="next",re.arg=d)}return re.delegate=null,p}(de,D),de)){if(de===p)continue;return de}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(F===c)throw F=y,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);if(F=u,de=l(I,q,D),de.type==="normal"){if(F=D.done?y:a,de.arg!==p)return{value:de.arg,done:D.done}}else de.type==="throw"&&(F=y,D.method="throw",D.arg=de.arg)}}),H}function l(G,z,W){try{return{type:"normal",arg:G.call(z,W)}}catch(Z){return{type:"throw",arg:Z}}}h.wrap=s;var c="suspendedStart",a="suspendedYield",u="executing",y="completed",p={};function v(){}function w(){}function C(){}var T={},j=(T[g]=function(){return this},Object.getPrototypeOf),j=j&&j(j(U([]))),A=(j&&j!==i&&f.call(j,g)&&(T=j),C.prototype=v.prototype=Object.create(T));function L(G){["next","throw","return"].forEach(function(z){G[z]=function(W){return this._invoke(z,W)}})}function M(G){var z;this._invoke=function(W,Z){function I(){return new Promise(function(q,D){(function F(_e,Y,te,ie){var de,_e=l(G[_e],G,Y);if(_e.type!=="throw")return(Y=(de=_e.arg).value)&&typeof Y=="object"&&f.call(Y,"__await")?Promise.resolve(Y.__await).then(function(le){F("next",le,te,ie)},function(le){F("throw",le,te,ie)}):Promise.resolve(Y).then(function(le){de.value=le,te(de)},function(le){return F("throw",le,te,ie)});ie(_e.arg)})(W,Z,q,D)})}return z=z?z.then(I,I):I()}}function k(G){var z={tryLoc:G[0]};1 in G&&(z.catchLoc=G[1]),2 in G&&(z.finallyLoc=G[2],z.afterLoc=G[3]),this.tryEntries.push(z)}function O(G){var z=G.completion||{};z.type="normal",delete z.arg,G.completion=z}function N(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(k,this),this.reset(!0)}function U(G){if(G){var z,W=G[g];if(W)return W.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length))return z=-1,(W=function Z(){for(;++z<G.length;)if(f.call(G,z))return Z.value=G[z],Z.done=!1,Z;return Z.value=d,Z.done=!0,Z}).next=W}return{next:V}}function V(){return{value:d,done:!0}}return(w.prototype=A.constructor=C).constructor=w,C[n]=w.displayName="GeneratorFunction",h.isGeneratorFunction=function(G){return G=typeof G=="function"&&G.constructor,!!G&&(G===w||(G.displayName||G.name)==="GeneratorFunction")},h.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,C):(G.__proto__=C,n in G||(G[n]="GeneratorFunction")),G.prototype=Object.create(A),G},h.awrap=function(G){return{__await:G}},L(M.prototype),M.prototype[m]=function(){return this},h.AsyncIterator=M,h.async=function(G,z,W,Z){var I=new M(s(G,z,W,Z));return h.isGeneratorFunction(z)?I:I.next().then(function(q){return q.done?q.value:I.next()})},L(A),A[n]="Generator",A[g]=function(){return this},A.toString=function(){return"[object Generator]"},h.keys=function(G){var z,W=[];for(z in G)W.push(z);return W.reverse(),function Z(){for(;W.length;){var I=W.pop();if(I in G)return Z.value=I,Z.done=!1,Z}return Z.done=!0,Z}},h.values=U,N.prototype={constructor:N,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(O),!G)for(var z in this)z.charAt(0)==="t"&&f.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=d)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var z=this;function W(H,Y){return q.type="throw",q.arg=G,z.next=H,Y&&(z.method="next",z.arg=d),!!Y}for(var Z=this.tryEntries.length-1;0<=Z;--Z){var I=this.tryEntries[Z],q=I.completion;if(I.tryLoc==="root")return W("end");if(I.tryLoc<=this.prev){var D=f.call(I,"catchLoc"),F=f.call(I,"finallyLoc");if(D&&F){if(this.prev<I.catchLoc)return W(I.catchLoc,!0);if(this.prev<I.finallyLoc)return W(I.finallyLoc)}else if(D){if(this.prev<I.catchLoc)return W(I.catchLoc,!0)}else{if(!F)throw new Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return W(I.finallyLoc)}}}},abrupt:function(G,z){for(var W=this.tryEntries.length-1;0<=W;--W){var Z=this.tryEntries[W];if(Z.tryLoc<=this.prev&&f.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var I=Z;break}}var q=(I=I&&(G==="break"||G==="continue")&&I.tryLoc<=z&&z<=I.finallyLoc?null:I)?I.completion:{};return q.type=G,q.arg=z,I?(this.method="next",this.next=I.finallyLoc,p):this.complete(q)},complete:function(G,z){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&z&&(this.next=z),p},finish:function(G){for(var z=this.tryEntries.length-1;0<=z;--z){var W=this.tryEntries[z];if(W.finallyLoc===G)return this.complete(W.completion,W.afterLoc),O(W),p}},catch:function(G){for(var z=this.tryEntries.length-1;0<=z;--z){var W,Z,I=this.tryEntries[z];if(I.tryLoc===G)return(W=I.completion).type==="throw"&&(Z=W.arg,O(I)),Z}throw new Error("illegal catch attempt")},delegateYield:function(G,z,W){return this.delegate={iterator:U(G),resultName:z,nextLoc:W},this.method==="next"&&(this.arg=d),p}},h}(typeof x=="object"?x.exports:{});try{regeneratorRuntime=x}catch{Function("r","regeneratorRuntime = r")(x)}},{}],253:[function(t,x,b){(function(h){var d,i,f,g,m,n,s,l,c,a;function u(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function y(O){return O=typeof O!="string"?String(O):O}function p(O){var N={next:function(){var U=O.shift();return{done:U===void 0,value:U}}};return i&&(N[Symbol.iterator]=function(){return N}),N}function v(O){this.map={},O instanceof v?O.forEach(function(N,U){this.append(U,N)},this):Array.isArray(O)?O.forEach(function(N){this.append(N[0],N[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(N){this.append(N,O[N])},this)}function w(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function C(O){return new Promise(function(N,U){O.onload=function(){N(O.result)},O.onerror=function(){U(O.error)}})}function T(O){var N=new FileReader,U=C(N);return N.readAsArrayBuffer(O),U}function j(O){var N;return O.slice?O.slice(0):((N=new Uint8Array(O.byteLength)).set(new Uint8Array(O)),N.buffer)}function A(){return this.bodyUsed=!1,this._initBody=function(O){if(this._bodyInit=O)if(typeof O=="string")this._bodyText=O;else if(f&&Blob.prototype.isPrototypeOf(O))this._bodyBlob=O;else if(g&&FormData.prototype.isPrototypeOf(O))this._bodyFormData=O;else if(d&&URLSearchParams.prototype.isPrototypeOf(O))this._bodyText=O.toString();else if(m&&f&&s(O))this._bodyArrayBuffer=j(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(O)&&!l(O))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=j(O)}else this._bodyText="";this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f&&(this.blob=function(){var O=w(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(T)}),this.text=function(){var O,N,U=w(this);if(U)return U;if(this._bodyBlob)return U=this._bodyBlob,O=new FileReader,N=C(O),O.readAsText(U),N;if(this._bodyArrayBuffer)return Promise.resolve(function(V){for(var G=new Uint8Array(V),z=new Array(G.length),W=0;W<G.length;W++)z[W]=String.fromCharCode(G[W]);return z.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}function L(O,N){var U,V=(N=N||{}).body;if(O instanceof L){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,N.headers||(this.headers=new v(O.headers)),this.method=O.method,this.mode=O.mode,V||O._bodyInit==null||(V=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=N.credentials||this.credentials||"omit",!N.headers&&this.headers||(this.headers=new v(N.headers)),this.method=(O=N.method||this.method||"GET",U=O.toUpperCase(),-1<c.indexOf(U)?U:O),this.mode=N.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}function M(O){var N=new FormData;return O.trim().split("&").forEach(function(U){var V;U&&(V=(U=U.split("=")).shift().replace(/\+/g," "),U=U.join("=").replace(/\+/g," "),N.append(decodeURIComponent(V),decodeURIComponent(U)))}),N}function k(O,N){N=N||{},this.type="default",this.status=N.status===void 0?200:N.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new v(N.headers),this.url=N.url||"",this._initBody(O)}h.fetch||(d="URLSearchParams"in h,i="Symbol"in h&&"iterator"in Symbol,f="FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch{return!1}}(),g="FormData"in h,(m="ArrayBuffer"in h)&&(n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(O){return O&&DataView.prototype.isPrototypeOf(O)},l=ArrayBuffer.isView||function(O){return O&&-1<n.indexOf(Object.prototype.toString.call(O))}),v.prototype.append=function(O,N){O=u(O),N=y(N);var U=this.map[O];this.map[O]=U?U+","+N:N},v.prototype.delete=function(O){delete this.map[u(O)]},v.prototype.get=function(O){return O=u(O),this.has(O)?this.map[O]:null},v.prototype.has=function(O){return this.map.hasOwnProperty(u(O))},v.prototype.set=function(O,N){this.map[u(O)]=y(N)},v.prototype.forEach=function(O,N){for(var U in this.map)this.map.hasOwnProperty(U)&&O.call(N,this.map[U],U,this)},v.prototype.keys=function(){var O=[];return this.forEach(function(N,U){O.push(U)}),p(O)},v.prototype.values=function(){var O=[];return this.forEach(function(N){O.push(N)}),p(O)},v.prototype.entries=function(){var O=[];return this.forEach(function(N,U){O.push([U,N])}),p(O)},i&&(v.prototype[Symbol.iterator]=v.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],L.prototype.clone=function(){return new L(this,{body:this._bodyInit})},A.call(L.prototype),A.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},k.error=function(){var O=new k(null,{status:0,statusText:""});return O.type="error",O},a=[301,302,303,307,308],k.redirect=function(O,N){if(a.indexOf(N)===-1)throw new RangeError("Invalid status code");return new k(null,{status:N,headers:{location:O}})},h.Headers=v,h.Request=L,h.Response=k,h.fetch=function(O,N){return new Promise(function(U,V){var G=new L(O,N),z=new XMLHttpRequest;z.onload=function(){var W,Z={status:z.status,statusText:z.statusText,headers:(Z=z.getAllResponseHeaders()||"",W=new v,Z.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(D){var D=D.split(":"),F=D.shift().trim();F&&(D=D.join(":").trim(),W.append(F,D))}),W)},I=(Z.url="responseURL"in z?z.responseURL:Z.headers.get("X-Request-URL"),"response"in z?z.response:z.responseText);U(new k(I,Z))},z.onerror=function(){V(new TypeError("Network request failed"))},z.ontimeout=function(){V(new TypeError("Network request failed"))},z.open(G.method,G.url,!0),G.credentials==="include"?z.withCredentials=!0:G.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&f&&(z.responseType="blob"),G.headers.forEach(function(W,Z){z.setRequestHeader(Z,W)}),z.send(G._bodyInit===void 0?null:G._bodyInit)})},h.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],254:[function(t,x,b){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h,d=f(t("../core/main")),i=f(t("../color/color_conversion"));function f(n){return n&&n.__esModule?n:{default:n}}var g=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];d.default.prototype._rgbColorName=function(c){var s,l,c=i.default._rgbaToHSBA(c),a=[(h=c)[0],c[1],c[2]];a[0]!==0&&(a[0]=Math.round(100*a[0]),(c=a[0].toString().split(""))[l=c.length-1]=parseInt(c[l]),c[l]<2.5?c[l]=0:2.5<=c[l]&&c[l]<7.5&&(c[l]=5),c.length===2?(c[0]=parseInt(c[0]),7.5<=c[l]&&(c[l]=0,c[0]=c[0]+1),a[0]=10*c[0]+c[1]):7.5<=c[l]?a[0]=10:a[0]=c[l]),a[2]=a[2]/255;for(var u=a.length-1;1<=u;u--)a[u]<=.25?a[u]=0:.25<a[u]&&a[u]<.75?a[u]=.5:a[u]=1;if(a[0]===0&&a[1]===0&&a[2]===1){for(var y=2;0<=y;y--)h[y]=Math.round(1e4*h[y])/1e4;for(var p=0;p<g.length;p++){if(g[p].h===h[0]&&g[p].s===h[1]&&g[p].b===h[2]){s=g[p].name;break}s="white"}}else for(var v=0;v<m.length;v++)if(m[v].h===a[0]&&m[v].s===a[1]&&m[v].b===a[2]){s=m[v].name;break}return s},t=d.default,b.default=t},{"../color/color_conversion":260,"../core/main":275,"core-js/modules/es.function.name":168,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198}],255:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t},d="_Description",i="_fallbackDesc",f="_fallbackTable",g="_Label",m="_labelDesc",n="_labelTable";function s(l){if(l==="label"||l==="fallback")throw new Error("description should not be LABEL or FALLBACK");return l.endsWith(".")||l.endsWith(";")||l.endsWith(",")||l.endsWith("?")||l.endsWith("!")||(l+="."),l}h.default.prototype.describe=function(l,c){var a;h.default._validateParameters("describe",arguments),typeof l=="string"&&(a=this.canvas.id,l=s(l),this.dummyDOM||(this.dummyDOM=document.getElementById(a).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==l&&(this.descriptions.fallback.innerHTML=l):this._describeHTML("fallback",l),c===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==l&&(this.descriptions.label.innerHTML=l):this._describeHTML("label",l)))},h.default.prototype.describeElement=function(l,c,a){var u,y;h.default._validateParameters("describeElement",arguments),typeof c=="string"&&typeof l=="string"&&(u=this.canvas.id,c=s(c),y=function(p){if(p==="label"||p==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return p.endsWith(".")||p.endsWith(";")||p.endsWith(",")?p=p.replace(/.$/,":"):p.endsWith(":")||(p+=":"),p}(l),l=l.replace(/[^a-zA-Z0-9]/g,""),y='<th scope="row">'.concat(y,"</th><td>").concat(c,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(u).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[l]?this.descriptions.fallbackElements[l].innerHTML!==y&&(this.descriptions.fallbackElements[l].innerHTML=y):this._describeElementHTML("fallback",l,y),a===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[l]?this.descriptions.labelElements[l].innerHTML!==y&&(this.descriptions.labelElements[l].innerHTML=y):this._describeElementHTML("label",l,y)))},h.default.prototype._describeHTML=function(l,c){var a,u=this.canvas.id;l==="fallback"?(this.dummyDOM.querySelector("#".concat(u+d))?this.dummyDOM.querySelector("#"+u+f).insertAdjacentHTML("beforebegin",'<p id="'.concat(u+i,'"></p>')):(a='<div id="'.concat(u).concat(d,'" role="region" aria-label="Canvas Description"><p id="').concat(u).concat(i,'"></p></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutput")).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#".concat(u)).innerHTML=a),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(u).concat(i)),this.descriptions.fallback.innerHTML=c):l==="label"&&(this.dummyDOM.querySelector("#".concat(u+g))?this.dummyDOM.querySelector("#".concat(u+n))&&this.dummyDOM.querySelector("#".concat(u+n)).insertAdjacentHTML("beforebegin",'<p id="'.concat(u).concat(m,'"></p>')):(a='<div id="'.concat(u).concat(g,'" class="p5Label"><p id="').concat(u).concat(m,'"></p></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#"+u).insertAdjacentHTML("afterend",a)),this.descriptions.label=this.dummyDOM.querySelector("#"+u+m),this.descriptions.label.innerHTML=c)},h.default.prototype._describeElementHTML=function(l,c,a){var u,y=this.canvas.id;l==="fallback"?(this.dummyDOM.querySelector("#".concat(y+d))?this.dummyDOM.querySelector("#"+y+f)||this.dummyDOM.querySelector("#"+y+i).insertAdjacentHTML("afterend",'<table id="'.concat(y).concat(f,'"><caption>Canvas elements and their descriptions</caption></table>')):(u='<div id="'.concat(y).concat(d,'" role="region" aria-label="Canvas Description"><table id="').concat(y).concat(f,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",u):this.dummyDOM.querySelector("#"+y).innerHTML=u),(u=document.createElement("tr")).id=y+"_fte_"+c,this.dummyDOM.querySelector("#"+y+f).appendChild(u),this.descriptions.fallbackElements[c]=this.dummyDOM.querySelector("#".concat(y).concat("_fte_").concat(c)),this.descriptions.fallbackElements[c].innerHTML=a):l==="label"&&(this.dummyDOM.querySelector("#".concat(y+g))?this.dummyDOM.querySelector("#".concat(y+n))||this.dummyDOM.querySelector("#"+y+m).insertAdjacentHTML("afterend",'<table id="'.concat(y+n,'"></table>')):(u='<div id="'.concat(y).concat(g,'" class="p5Label"><table id="').concat(y).concat(n,'"></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",u):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",u)),(l=document.createElement("tr")).id=y+"_lte_"+c,this.dummyDOM.querySelector("#"+y+n).appendChild(l),this.descriptions.labelElements[c]=this.dummyDOM.querySelector("#".concat(y).concat("_lte_").concat(c)),this.descriptions.labelElements[c].innerHTML=a)},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.replace":196}],256:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(h){var d,i,f,g;this.dummyDOM.querySelector("#".concat(h,"_summary"))&&(d=this._accessibleOutputs[h],f=function(m,n,s,l){return n="".concat(n," canvas, ").concat(s," by ").concat(l," pixels, contains ").concat(m[0]),n=(m[0]===1?"".concat(n," shape: "):"".concat(n," shapes: ")).concat(m[1]),n}((i=function(m,n){var s,l="",c="",a=0;for(s in n){var u,y=0;for(u in n[s]){var p='<li id="'.concat(m,"shape").concat(a,'">').concat(n[s][u].color," ").concat(s,",");s==="line"?p+=" location = ".concat(n[s][u].pos,", length = ").concat(n[s][u].length," pixels"):(p+=" location = ".concat(n[s][u].pos),s!=="point"&&(p+=", area = ".concat(n[s][u].area," %")),p+="</li>"),l+=p,y++,a++}c=1<y?"".concat(c," ").concat(y," ").concat(s,"s"):"".concat(c," ").concat(y," ").concat(s)}return{numShapes:[a,c],details:l}}(h,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),g=function(m,n){var s,l,c=0,a="",u=Array.from(Array(10),function(){return Array(10)});for(s in n)for(var y in n[s]){var p=void 0;p=s!=="line"?'<a href="#'.concat(m,"shape").concat(c,'">').concat(n[s][y].color," ").concat(s,"</a>"):'<a href="#'.concat(m,"shape").concat(c,'">').concat(n[s][y].color," ").concat(s," midpoint</a>"),u[n[s][y].loc.locY][n[s][y].loc.locX]?u[n[s][y].loc.locY][n[s][y].loc.locX]=u[n[s][y].loc.locY][n[s][y].loc.locX]+"  "+p:u[n[s][y].loc.locY][n[s][y].loc.locX]=p,c++}for(l in u){var v,w="<tr>";for(v in u[l])w+="<td>",u[l][v]!==void 0&&(w+=u[l][v]),w+="</td>";a=a+w+"</tr>"}return a}(h,this.ingredients.shapes),f!==d.summary.innerHTML&&(d.summary.innerHTML=f),g!==d.map.innerHTML&&(d.map.innerHTML=g),i.details!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=i.details),this._accessibleOutputs[h]=d)},t=t.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":158,"core-js/modules/es.array.map":164,"core-js/modules/es.string.iterator":192}],257:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(f){return function(g){if(Array.isArray(g)){for(var m=0,n=new Array(g.length);m<g.length;m++)n[m]=g[m];return n}}(f)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(f,g,m){return g=Math.floor(f[0]/g*10),f=Math.floor(f[1]/m*10),g===10&&(g-=1),f===10&&(f-=1),{locX:g,locY:f}}h.default.prototype.textOutput=function(f){h.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),f===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},h.default.prototype.gridOutput=function(f){h.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),f===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},h.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},h.default.prototype._createOutput=function(f,g){var m,n,s,l=this.canvas.id,c=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(l).parentNode),"");g==="Fallback"?(m=l+f,this.dummyDOM.querySelector("#".concat(n=l+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(l,"_Description"))?this.dummyDOM.querySelector("#".concat(l,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(l)).innerHTML='<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>'))):g==="Label"&&(m=l+f+(c=g),this.dummyDOM.querySelector("#".concat(n=l+"accessibleOutput"+g))||(this.dummyDOM.querySelector("#".concat(l,"_Label"))?this.dummyDOM.querySelector("#".concat(l,"_Label")):this.dummyDOM.querySelector("#".concat(l))).insertAdjacentHTML("afterend",'<div id="'.concat(n,'"></div>'))),this._accessibleOutputs[m]={},f==="textOutput"?(c="#".concat(l,"gridOutput").concat(c),s='<div id="'.concat(m,'">Text Output<div id="').concat(m,'Summary" aria-label="text output summary"><p id="').concat(m,'_summary"></p><ul id="').concat(m,'_list"></ul></div><table id="').concat(m,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(c)?this.dummyDOM.querySelector(c).insertAdjacentHTML("beforebegin",s):this.dummyDOM.querySelector("#".concat(n)).innerHTML=s,this._accessibleOutputs[m].list=this.dummyDOM.querySelector("#".concat(m,"_list"))):f==="gridOutput"&&(c="#".concat(l,"textOutput").concat(c),s='<div id="'.concat(m,'">Grid Output<p id="').concat(m,'_summary" aria-label="grid output summary"><table id="').concat(m,'_map" summary="grid output content"></table><ul id="').concat(m,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(c)?this.dummyDOM.querySelector(c).insertAdjacentHTML("afterend",s):this.dummyDOM.querySelector("#".concat(n)).innerHTML=s,this._accessibleOutputs[m].map=this.dummyDOM.querySelector("#".concat(m,"_map"))),this._accessibleOutputs[m].shapeDetails=this.dummyDOM.querySelector("#".concat(m,"_shapeDetails")),this._accessibleOutputs[m].summary=this.dummyDOM.querySelector("#".concat(m,"_summary"))},h.default.prototype._updateAccsOutput=function(){var f=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(f+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(f+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(f+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(f+"gridOutputLabel"))},h.default.prototype._accsBackground=function(f){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==f&&(this.ingredients.colors.backgroundRGBA=f,this.ingredients.colors.background=this._rgbColorName(f))},h.default.prototype._accsCanvasColors=function(f,g){f==="fill"?this.ingredients.colors.fillRGBA!==g&&(this.ingredients.colors.fillRGBA=g,this.ingredients.colors.fill=this._rgbColorName(g)):f==="stroke"&&this.ingredients.colors.strokeRGBA!==g&&(this.ingredients.colors.strokeRGBA=g,this.ingredients.colors.stroke=this._rgbColorName(g))},h.default.prototype._accsOutput=function(f,g){f==="ellipse"&&g[2]===g[3]?f="circle":f==="rectangle"&&g[2]===g[3]&&(f="square");var m,n,s={},l=!0,c=function(u,y){var p;return u=u==="rectangle"||u==="ellipse"||u==="arc"||u==="circle"||u==="square"?(p=Math.round(y[0]+y[2]/2),Math.round(y[1]+y[3]/2)):u==="triangle"?(p=(y[0]+y[2]+y[4])/3,(y[1]+y[3]+y[5])/3):u==="quadrilateral"?(p=(y[0]+y[2]+y[4]+y[6])/4,(y[1]+y[3]+y[5]+y[7])/4):u==="line"?(p=(y[0]+y[2])/2,(y[1]+y[3])/2):(p=y[0],y[1]),[p,u]}(f,g);if(f==="line"?(s.color=this.ingredients.colors.stroke,s.length=Math.round(this.dist(g[0],g[1],g[2],g[3])),m=this._getPos(g[0],[1]),n=this._getPos(g[2],[3]),s.loc=i(c,this.width,this.height),s.pos=m===n?"at ".concat(m):"from ".concat(m," to ").concat(n)):(f==="point"?s.color=this.ingredients.colors.stroke:(s.color=this.ingredients.colors.fill,s.area=this._getArea(f,g)),s.pos=this._getPos.apply(this,d(c)),s.loc=i(c,this.width,this.height)),this.ingredients.shapes[f]){if(this.ingredients.shapes[f]!==[s]){for(var a in this.ingredients.shapes[f])JSON.stringify(this.ingredients.shapes[f][a])===JSON.stringify(s)&&(l=!1);l===!0&&this.ingredients.shapes[f].push(s)}}else this.ingredients.shapes[f]=[s]},h.default.prototype._getPos=function(n,m){var n=new DOMPointReadOnly(n,m),m=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),n=n.matrixTransform(m),m=n.x,n=n.y,s=this.width,l=this.height;return m<.4*s?n<.4*l?"top left":.6*l<n?"bottom left":"mid left":.6*s<m?n<.4*l?"top right":.6*l<n?"bottom right":"mid right":n<.4*l?"top middle":.6*l<n?"bottom middle":"middle"},h.default.prototype._getArea=function(f,g){var m,n,s=0,l=(f==="arc"?(s=(m=((g[5]-g[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*g[2]*g[3]/8,g[6]!=="open"&&g[6]!=="chord"||(n=g[0],y=g[1],l=g[0]+g[2]/2*Math.cos(g[4]).toFixed(2),p=g[1]+g[3]/2*Math.sin(g[4]).toFixed(2),a=g[0]+g[2]/2*Math.cos(g[5]).toFixed(2),c=g[1]+g[3]/2*Math.sin(g[5]).toFixed(2),n=Math.abs(n*(p-c)+l*(c-y)+a*(y-p))/2,m>Math.PI?s+=n:s-=n)):f==="ellipse"||f==="circle"?s=3.14*g[2]/2*g[3]/2:f==="line"||f==="point"?s=0:f==="quadrilateral"?s=Math.abs((g[6]+g[0])*(g[7]-g[1])+(g[0]+g[2])*(g[1]-g[3])+(g[2]+g[4])*(g[3]-g[5])+(g[4]+g[6])*(g[5]-g[7]))/2:f==="rectangle"||f==="square"?s=g[2]*g[3]:f==="triangle"&&(s=Math.abs(g[0]*(g[3]-g[5])+g[2]*(g[5]-g[1])+g[4]*(g[1]-g[3]))/2),this.width*this._pixelDensity),c=this.height*this._pixelDensity,a=[new DOMPoint(0,0),new DOMPoint(l,0),new DOMPoint(l,c),new DOMPoint(0,c)],u=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),y=a.map(function(v){return v.matrixTransform(u)}),p=Math.abs((y[3].x+y[0].x)*(y[3].y-y[0].y)+(y[0].x+y[1].x)*(y[0].y-y[1].y)+(y[1].x+y[2].x)*(y[1].y-y[2].y)+(y[2].x+y[3].x)*(y[2].y-y[3].y))/2;return Math.round(100*s/p)},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],258:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(h){var d,i,f,g;this.dummyDOM.querySelector("#".concat(h,"_summary"))&&(d=this._accessibleOutputs[h],f=function(m,n,s,l){return s="Your output is a, ".concat(s," by ").concat(l," pixels, ").concat(n," canvas containing the following"),s=m===1?"".concat(s," shape:"):"".concat(s," ").concat(m," shapes:"),s}((i=function(m,n){var s,l="",c=0;for(s in n)for(var a in n[s]){var u='<li><a href="#'.concat(m,"shape").concat(c,'">').concat(n[s][a].color," ").concat(s,"</a>");s==="line"?u+=", ".concat(n[s][a].pos,", ").concat(n[s][a].length," pixels long.</li>"):(u+=", at ".concat(n[s][a].pos),s!=="point"&&(u+=", covering ".concat(n[s][a].area,"% of the canvas")),u+=".</li>"),l+=u,c++}return{numShapes:c,listShapes:l}}(h,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),g=function(m,n){var s,l="",c=0;for(s in n)for(var a in n[s]){var u='<tr id="'.concat(m,"shape").concat(c,'"><th>').concat(n[s][a].color," ").concat(s,"</th>");s==="line"?u+="<td>location = ".concat(n[s][a].pos,"</td><td>length = ").concat(n[s][a].length," pixels</td></tr>"):(u+="<td>location = ".concat(n[s][a].pos,"</td>"),s!=="point"&&(u+="<td> area = ".concat(n[s][a].area,"%</td>")),u+="</tr>"),l+=u,c++}return l}(h,this.ingredients.shapes),f!==d.summary.innerHTML&&(d.summary.innerHTML=f),i.listShapes!==d.list.innerHTML&&(d.list.innerHTML=i.listShapes),g!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=g),this._accessibleOutputs[h]=d)},t=t.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151}],259:[function(t,x,b){var h=(h=t("./core/main"))&&h.__esModule?h:{default:h};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),x.exports=h.default},{"./accessibility/color_namer":254,"./accessibility/describe":255,"./accessibility/gridOutput":256,"./accessibility/outputs":257,"./accessibility/textOutput":258,"./color/color_conversion":260,"./color/creating_reading":261,"./color/p5.Color":262,"./color/setting":263,"./core/constants":264,"./core/environment":265,"./core/friendly_errors/fes_core":266,"./core/friendly_errors/file_errors":267,"./core/friendly_errors/sketch_reader":268,"./core/friendly_errors/stacktrace":269,"./core/friendly_errors/validate_params":270,"./core/helpers":271,"./core/init":272,"./core/legacy":274,"./core/main":275,"./core/p5.Element":276,"./core/p5.Graphics":277,"./core/p5.Renderer":278,"./core/p5.Renderer2D":279,"./core/preload":280,"./core/rendering":281,"./core/shape/2d_primitives":282,"./core/shape/attributes":283,"./core/shape/curves":284,"./core/shape/vertex":285,"./core/shim":286,"./core/structure":287,"./core/transform":288,"./data/local_storage.js":289,"./data/p5.TypedDict":290,"./dom/dom":291,"./events/acceleration":292,"./events/keyboard":293,"./events/mouse":294,"./events/touch":295,"./image/filters":296,"./image/image":297,"./image/loading_displaying":298,"./image/p5.Image":299,"./image/pixels":300,"./io/files":301,"./io/p5.Table":302,"./io/p5.TableRow":303,"./io/p5.XML":304,"./math/calculation":305,"./math/math":306,"./math/noise":307,"./math/p5.Vector":308,"./math/random":309,"./math/trigonometry":310,"./typography/attributes":311,"./typography/loading_displaying":312,"./typography/p5.Font":313,"./utilities/array_functions":314,"./utilities/conversion":315,"./utilities/string_functions":316,"./utilities/time_date":317,"./webgl/3d_primitives":318,"./webgl/interaction":320,"./webgl/light":321,"./webgl/loading":322,"./webgl/material":323,"./webgl/p5.Camera":324,"./webgl/p5.DataArray":325,"./webgl/p5.Framebuffer":326,"./webgl/p5.Geometry":327,"./webgl/p5.Matrix":328,"./webgl/p5.RenderBuffer":329,"./webgl/p5.RendererGL":332,"./webgl/p5.RendererGL.Immediate":330,"./webgl/p5.RendererGL.Retained":331,"./webgl/p5.Shader":333,"./webgl/p5.Texture":334,"./webgl/text":335}],260:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(h){var d=h[0],i=h[1],f=h[2],g=(2-i)*f/2;return g!=0&&(g==1?i=0:g<.5?i/=2-i:i=i*f/(2-2*g)),[d,i,g,h[3]]},_hsbaToRGBA:function(h){var d,i,f,g,m,n=6*h[0],s=h[1],l=h[2];return s===0?[l,l,l,h[3]]:(i=l*(1-s),f=l*(1-s*(n-(d=Math.floor(n)))),s=l*(1-s*(1+d-n)),n=d===1?(g=f,m=l,i):d===2?(g=i,m=l,s):d===3?(g=i,m=f,l):d===4?(g=s,m=i,l):d===5?(g=l,m=i,f):(g=l,m=s,i),[g,m,n,h[3]])},_hslaToHSBA:function(h){var d=h[0],i=h[1],f=h[2],g=f<.5?(1+i)*f:f+i-f*i;return[d,i=2*(g-f)/g,g,h[3]]},_hslaToRGBA:function(h){var d,i=6*h[0],f=h[1],g=h[2];return f===0?[g,g,g,h[3]]:[(d=function(m,n,s){return m<0?m+=6:6<=m&&(m-=6),m<1?n+(s-n)*m:m<3?s:m<4?n+(s-n)*(4-m):n})(2+i,f=2*g-(g=g<.5?(1+f)*g:g+f-g*f),g),d(i,f,g),d(i-2,f,g),h[3]]},_rgbaToHSBA:function(h){var d,i,f=h[0],g=h[1],m=h[2],n=Math.max(f,g,m),s=n-Math.min(f,g,m);return s==0?i=d=0:(i=s/n,f===n?d=(g-m)/s:g===n?d=2+(m-f)/s:m===n&&(d=4+(f-g)/s),d<0?d+=6:6<=d&&(d-=6)),[d/6,i,n,h[3]]},_rgbaToHSLA:function(h){var d,i,f=h[0],g=h[1],m=h[2],n=Math.max(f,g,m),l=Math.min(f,g,m),s=n+l,l=n-l;return l==0?i=d=0:(i=s<1?l/s:l/(2-s),f===n?d=(g-m)/l:g===n?d=2+(m-f)/l:m===n&&(d=4+(f-g)/l),d<0?d+=6:6<=d&&(d-=6)),[d/6,i,s/2,h[3]]}},t=t.default.ColorConversion,b.default=t},{"../core/main":275}],261:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var s=g();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../core/constants"));function g(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,g=function(){return n},n)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(n){return i.default._validateParameters("alpha",arguments),this.color(n)._getAlpha()},i.default.prototype.blue=function(n){return i.default._validateParameters("blue",arguments),this.color(n)._getBlue()},i.default.prototype.brightness=function(n){return i.default._validateParameters("brightness",arguments),this.color(n)._getBrightness()},i.default.prototype.color=function(){var n;return i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color?arguments[0]:(n=arguments[0]instanceof Array?arguments[0]:arguments,new i.default.Color(this,n))},i.default.prototype.green=function(n){return i.default._validateParameters("green",arguments),this.color(n)._getGreen()},i.default.prototype.hue=function(n){return i.default._validateParameters("hue",arguments),this.color(n)._getHue()},i.default.prototype.lerpColor=function(n,s,l){i.default._validateParameters("lerpColor",arguments);var c,a,u,y=this._colorMode,p=this._colorMaxes;if(y===f.RGB)a=n.levels.map(function(v){return v/255}),u=s.levels.map(function(v){return v/255});else if(y===f.HSB)n._getBrightness(),s._getBrightness(),a=n.hsba,u=s.hsba;else{if(y!==f.HSL)throw new Error("".concat(y,"cannot be used for interpolation."));n._getLightness(),s._getLightness(),a=n.hsla,u=s.hsla}return l=Math.max(Math.min(l,1),0),this.lerp===void 0&&(this.lerp=function(v,w,C){return C*(w-v)+v}),n=this.lerp(a[0],u[0],l),s=this.lerp(a[1],u[1],l),c=this.lerp(a[2],u[2],l),a=this.lerp(a[3],u[3],l),n*=p[y][0],s*=p[y][1],c*=p[y][2],a*=p[y][3],this.color(n,s,c,a)},i.default.prototype.lightness=function(n){return i.default._validateParameters("lightness",arguments),this.color(n)._getLightness()},i.default.prototype.red=function(n){return i.default._validateParameters("red",arguments),this.color(n)._getRed()},i.default.prototype.saturation=function(n){return i.default._validateParameters("saturation",arguments),this.color(n)._getSaturation()};var m=i.default;b.default=m},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],262:[function(c,x,b){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function d(v){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(w){return h(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":h(w)})(v)}c("core-js/modules/es.symbol"),c("core-js/modules/es.symbol.description"),c("core-js/modules/es.symbol.iterator"),c("core-js/modules/es.array.includes"),c("core-js/modules/es.array.iterator"),c("core-js/modules/es.array.join"),c("core-js/modules/es.array.map"),c("core-js/modules/es.array.slice"),c("core-js/modules/es.object.get-own-property-descriptor"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.regexp.constructor"),c("core-js/modules/es.regexp.exec"),c("core-js/modules/es.regexp.to-string"),c("core-js/modules/es.string.includes"),c("core-js/modules/es.string.iterator"),c("core-js/modules/es.string.trim"),c("core-js/modules/es.weak-map"),c("core-js/modules/web.dom-collections.iterator"),c("core-js/modules/es.array.includes"),c("core-js/modules/es.array.join"),c("core-js/modules/es.array.map"),c("core-js/modules/es.array.slice"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.regexp.constructor"),c("core-js/modules/es.regexp.exec"),c("core-js/modules/es.regexp.to-string"),c("core-js/modules/es.string.includes"),c("core-js/modules/es.string.trim"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=n(c("../core/main")),f=function(v){if(v&&v.__esModule)return v;if(v===null||d(v)!=="object"&&typeof v!="function")return{default:v};var w=m();if(w&&w.has(v))return w.get(v);var C,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in v){var A;Object.prototype.hasOwnProperty.call(v,C)&&((A=j?Object.getOwnPropertyDescriptor(v,C):null)&&(A.get||A.set)?Object.defineProperty(T,C,A):T[C]=v[C])}return T.default=v,w&&w.set(v,T),T}(c("../core/constants")),g=n(c("./color_conversion"));function m(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,m=function(){return v},v)}function n(v){return v&&v.__esModule?v:{default:v}}function s(v,w){for(var C=0;C<w.length;C++){var T=w[C];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},c=/\s*/,p=/(\d{1,3})/,a=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,u=new RegExp("".concat(a.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(c.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(c.source),"i"),RGBA:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",a.source,"\\)$"].join(c.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",a.source,"\\)$"].join(c.source),"i"),HSL:new RegExp(["^hsl\\(",p.source,",",u.source,",",u.source,"\\)$"].join(c.source),"i"),HSLA:new RegExp(["^hsla\\(",p.source,",",u.source,",",u.source,",",a.source,"\\)$"].join(c.source),"i"),HSB:new RegExp(["^hsb\\(",p.source,",",u.source,",",u.source,"\\)$"].join(c.source),"i"),HSBA:new RegExp(["^hsba\\(",p.source,",",u.source,",",u.source,",",a.source,"\\)$"].join(c.source),"i")},p=(i.default.Color=function(){function v(j,A){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(j._colorMode,j._colorMaxes),![f.RGB,f.HSL,f.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=v._parseInputs.apply(this,A),this._calculateLevels()}var w,C,T;return w=v,T=[{key:"_parseInputs",value:function(j,A,L,M){var k,O=arguments.length,N=this.mode,U=this.maxes[N],V=[];if(3<=O){for(V[0]=j/U[0],V[1]=A/U[1],V[2]=L/U[2],V[3]=typeof M=="number"?M/U[3]:1,k=V.length-1;0<=k;--k){var G=V[k];G<0?V[k]=0:1<G&&(V[k]=1)}return N===f.HSL?g.default._hslaToRGBA(V):N===f.HSB?g.default._hsbaToRGBA(V):V}if(O===1&&typeof j=="string"){if(L=j.trim().toLowerCase(),l[L])return v._parseInputs.call(this,l[L]);if(y.HEX3.test(L))return(V=y.HEX3.exec(L).slice(1).map(function(z){return parseInt(z+z,16)/255}))[3]=1,V;if(y.HEX6.test(L))return(V=y.HEX6.exec(L).slice(1).map(function(z){return parseInt(z,16)/255}))[3]=1,V;if(y.HEX4.test(L))return V=y.HEX4.exec(L).slice(1).map(function(z){return parseInt(z+z,16)/255});if(y.HEX8.test(L))return V=y.HEX8.exec(L).slice(1).map(function(z){return parseInt(z,16)/255});if(y.RGB.test(L))return(V=y.RGB.exec(L).slice(1).map(function(z){return z/255}))[3]=1,V;if(y.RGB_PERCENT.test(L))return(V=y.RGB_PERCENT.exec(L).slice(1).map(function(z){return parseFloat(z)/100}))[3]=1,V;if(y.RGBA.test(L))return V=y.RGBA.exec(L).slice(1).map(function(z,W){return W===3?parseFloat(z):z/255});if(y.RGBA_PERCENT.test(L))return V=y.RGBA_PERCENT.exec(L).slice(1).map(function(z,W){return W===3?parseFloat(z):parseFloat(z)/100});if(y.HSL.test(L)?(V=y.HSL.exec(L).slice(1).map(function(z,W){return W===0?parseInt(z,10)/360:parseInt(z,10)/100}))[3]=1:y.HSLA.test(L)&&(V=y.HSLA.exec(L).slice(1).map(function(z,W){return W===0?parseInt(z,10)/360:W===3?parseFloat(z):parseInt(z,10)/100})),(V=V.map(function(z){return Math.max(Math.min(z,1),0)})).length)return g.default._hslaToRGBA(V);if(y.HSB.test(L)?(V=y.HSB.exec(L).slice(1).map(function(z,W){return W===0?parseInt(z,10)/360:parseInt(z,10)/100}))[3]=1:y.HSBA.test(L)&&(V=y.HSBA.exec(L).slice(1).map(function(z,W){return W===0?parseInt(z,10)/360:W===3?parseFloat(z):parseInt(z,10)/100})),V.length){for(k=V.length-1;0<=k;--k)V[k]=Math.max(Math.min(V[k],1),0);return g.default._hsbaToRGBA(V)}V=[1,1,1,1]}else{if(O!==1&&O!==2||typeof j!="number")throw new Error("".concat(arguments,"is not a valid color representation."));V[0]=j/U[2],V[1]=j/U[2],V[2]=j/U[2],V[3]=typeof A=="number"?A/U[3]:1,V=V.map(function(z){return Math.max(Math.min(z,1),0)})}return V}}],(C=[{key:"toString",value:function(j){var A=this.levels,L=this._array,M=L[3];switch(j){case"#rrggbb":return"#".concat(A[0]<16?"0".concat(A[0].toString(16)):A[0].toString(16),A[1]<16?"0".concat(A[1].toString(16)):A[1].toString(16),A[2]<16?"0".concat(A[2].toString(16)):A[2].toString(16));case"#rrggbbaa":return"#".concat(A[0]<16?"0".concat(A[0].toString(16)):A[0].toString(16),A[1]<16?"0".concat(A[1].toString(16)):A[1].toString(16),A[2]<16?"0".concat(A[2].toString(16)):A[2].toString(16),A[3]<16?"0".concat(A[3].toString(16)):A[3].toString(16));case"#rgb":return"#".concat(Math.round(15*L[0]).toString(16),Math.round(15*L[1]).toString(16),Math.round(15*L[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*L[0]).toString(16),Math.round(15*L[1]).toString(16),Math.round(15*L[2]).toString(16),Math.round(15*L[3]).toString(16));case"rgb":return"rgb(".concat(A[0],", ",A[1],", ",A[2],")");case"rgb%":return"rgb(".concat((100*L[0]).toPrecision(3),"%, ",(100*L[1]).toPrecision(3),"%, ",(100*L[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*L[0]).toPrecision(3),"%, ",(100*L[1]).toPrecision(3),"%, ",(100*L[2]).toPrecision(3),"%, ",(100*L[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],", ",M,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],", ",M,")");case"hsla%":return this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");default:return"rgba(".concat(A[0],",",A[1],",",A[2],",",M,")")}}},{key:"setRed",value:function(j){this._array[0]=j/this.maxes[f.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(j){this._array[1]=j/this.maxes[f.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(j){this._array[2]=j/this.maxes[f.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(j){this._array[3]=j/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var j=this._array,A=this.levels=new Array(j.length),L=j.length-1;0<=L;--L)A[L]=Math.round(255*j[L]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(j,A){this.mode=j,this.maxes=A}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[f.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[f.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[f.RGB][1]}},{key:"_getHue",value:function(){return this.mode===f.HSB?(this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[f.HSB][0]):(this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[f.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[f.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[f.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===f.HSB?(this.hsba||(this.hsba=g.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[f.HSB][1]):(this.hsla||(this.hsla=g.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[f.HSL][1])}}])&&s(w.prototype,C),T&&s(w,T),v}(),i.default.Color);b.default=p},{"../core/constants":264,"../core/main":275,"./color_conversion":260,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],263:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var s=g();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../core/constants"));function g(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,g=function(){return n},n)}t("./p5.Color"),i.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},i.default.prototype.endClip=function(){this._renderer.endClip()},i.default.prototype.clip=function(n,s){this._renderer.beginClip(s),n(),this._renderer.endClip(s)},i.default.prototype.background=function(){var n;return(n=this._renderer).background.apply(n,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},i.default.prototype.colorMode=function(n,s,l,c,a){return i.default._validateParameters("colorMode",arguments),n!==f.RGB&&n!==f.HSB&&n!==f.HSL||(this._colorMode=n,n=this._colorMaxes[n],arguments.length===2?(n[0]=s,n[1]=s,n[2]=s,n[3]=s):arguments.length===4?(n[0]=s,n[1]=l,n[2]=c):arguments.length===5&&(n[0]=s,n[1]=l,n[2]=c,n[3]=a)),this},i.default.prototype.fill=function(){var n;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(n=this._renderer).fill.apply(n,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var n;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(n=this._renderer).stroke.apply(n,arguments),this},i.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var m=i.default;b.default=m},{"../core/constants":264,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],264:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.QUADRATIC=b.LINEAR=b._CTX_MIDDLE=b._DEFAULT_LEADMULT=b._DEFAULT_TEXT_FILL=b.WORD=b.CHAR=b.BOLDITALIC=b.BOLD=b.ITALIC=b.NORMAL=b.BLUR=b.ERODE=b.DILATE=b.POSTERIZE=b.INVERT=b.OPAQUE=b.GRAY=b.THRESHOLD=b.BURN=b.DODGE=b.SOFT_LIGHT=b.HARD_LIGHT=b.OVERLAY=b.REPLACE=b.SCREEN=b.MULTIPLY=b.EXCLUSION=b.SUBTRACT=b.DIFFERENCE=b.LIGHTEST=b.DARKEST=b.ADD=b.REMOVE=b.BLEND=b.UP_ARROW=b.TAB=b.SHIFT=b.RIGHT_ARROW=b.RETURN=b.OPTION=b.LEFT_ARROW=b.ESCAPE=b.ENTER=b.DOWN_ARROW=b.DELETE=b.CONTROL=b.BACKSPACE=b.ALT=b.AUTO=b.HSL=b.HSB=b.RGB=b.MITER=b.BEVEL=b.ROUND=b.SQUARE=b.PROJECT=b.PIE=b.CHORD=b.OPEN=b.CLOSE=b.TESS=b.QUAD_STRIP=b.QUADS=b.TRIANGLE_STRIP=b.TRIANGLE_FAN=b.TRIANGLES=b.LINE_LOOP=b.LINE_STRIP=b.LINES=b.POINTS=b.BASELINE=b.BOTTOM=b.TOP=b.CENTER=b.LEFT=b.RIGHT=b.RADIUS=b.CORNERS=b.CORNER=b.RAD_TO_DEG=b.DEG_TO_RAD=b.RADIANS=b.DEGREES=b.TWO_PI=b.TAU=b.QUARTER_PI=b.PI=b.HALF_PI=b.WAIT=b.TEXT=b.MOVE=b.HAND=b.CROSS=b.ARROW=b.WEBGL2=b.WEBGL=b.P2D=b.VERSION=void 0,b.RGBA=b.HALF_FLOAT=b.FLOAT=b.UNSIGNED_INT=b.UNSIGNED_BYTE=b.COVER=b.CONTAIN=b.FALLBACK=b.LABEL=b.AXES=b.GRID=b._DEFAULT_FILL=b._DEFAULT_STROKE=b.PORTRAIT=b.LANDSCAPE=b.MIRROR=b.CLAMP=b.REPEAT=b.NEAREST=b.IMAGE=b.IMMEDIATE=b.TEXTURE=b.FILL=b.STROKE=b.CURVE=b.BEZIER=void 0;var h=Math.PI,d=(b.VERSION="1.8.0",b.P2D="p2d",b.WEBGL="webgl",b.WEBGL2="webgl2",b.ARROW="default",b.CROSS="crosshair",b.HAND="pointer",b.MOVE="move",b.TEXT="text",b.WAIT="wait",h/2),d=(b.HALF_PI=d,h),d=(b.PI=d,h/4),d=(b.QUARTER_PI=d,2*h),d=(b.TAU=d,2*h),d=(b.TWO_PI=d,b.DEGREES="degrees",b.RADIANS="radians",h/180),d=(b.DEG_TO_RAD=d,180/h);b.RAD_TO_DEG=d,b.CORNER="corner",b.CORNERS="corners",b.RADIUS="radius",b.RIGHT="right",b.LEFT="left",b.CENTER="center",b.TOP="top",b.BOTTOM="bottom",b.BASELINE="alphabetic",b.POINTS=0,b.LINES=1,b.LINE_STRIP=3,b.LINE_LOOP=2,b.TRIANGLES=4,b.TRIANGLE_FAN=6,b.TRIANGLE_STRIP=5,b.QUADS="quads",b.QUAD_STRIP="quad_strip",b.TESS="tess",b.CLOSE="close",b.OPEN="open",b.CHORD="chord",b.PIE="pie",b.PROJECT="square",b.SQUARE="butt",b.ROUND="round",b.BEVEL="bevel",b.MITER="miter",b.RGB="rgb",b.HSB="hsb",b.HSL="hsl",b.AUTO="auto",b.ALT=18,b.BACKSPACE=8,b.CONTROL=17,b.DELETE=46,b.DOWN_ARROW=40,b.ENTER=13,b.ESCAPE=27,b.LEFT_ARROW=37,b.OPTION=18,b.RETURN=13,b.RIGHT_ARROW=39,b.SHIFT=16,b.TAB=9,b.UP_ARROW=38,b.BLEND="source-over",b.REMOVE="destination-out",b.ADD="lighter",b.DARKEST="darken",b.LIGHTEST="lighten",b.DIFFERENCE="difference",b.SUBTRACT="subtract",b.EXCLUSION="exclusion",b.MULTIPLY="multiply",b.SCREEN="screen",b.REPLACE="copy",b.OVERLAY="overlay",b.HARD_LIGHT="hard-light",b.SOFT_LIGHT="soft-light",b.DODGE="color-dodge",b.BURN="color-burn",b.THRESHOLD="threshold",b.GRAY="gray",b.OPAQUE="opaque",b.INVERT="invert",b.POSTERIZE="posterize",b.DILATE="dilate",b.ERODE="erode",b.BLUR="blur",b.NORMAL="normal",b.ITALIC="italic",b.BOLD="bold",b.BOLDITALIC="bold italic",b.CHAR="CHAR",b.WORD="WORD",b._DEFAULT_TEXT_FILL="#000000",b._DEFAULT_LEADMULT=1.25,b._CTX_MIDDLE="middle",b.LINEAR="linear",b.QUADRATIC="quadratic",b.BEZIER="bezier",b.CURVE="curve",b.STROKE="stroke",b.FILL="fill",b.TEXTURE="texture",b.IMMEDIATE="immediate",b.IMAGE="image",b.NEAREST="nearest",b.REPEAT="repeat",b.CLAMP="clamp",b.MIRROR="mirror",b.LANDSCAPE="landscape",b.PORTRAIT="portrait",b._DEFAULT_STROKE="#000000",b._DEFAULT_FILL="#FFFFFF",b.GRID="grid",b.AXES="axes",b.LABEL="label",b.FALLBACK="fallback",b.CONTAIN="contain",b.COVER="cover",b.UNSIGNED_BYTE="unsigned-byte",b.UNSIGNED_INT="unsigned-int",b.FLOAT="float",b.HALF_FLOAT="half-float",b.RGBA="rgba"},{}],265:[function(t,x,b){function h(a){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(a)}function d(a){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(f=t("./main"))&&f.__esModule?f:{default:f},f=function(a){if(a&&a.__esModule)return a;if(a===null||d(a)!=="object"&&typeof a!="function")return{default:a};var u=g();if(u&&u.has(a))return u.get(a);var y,p={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in a){var w;Object.prototype.hasOwnProperty.call(a,y)&&((w=v?Object.getOwnPropertyDescriptor(a,y):null)&&(w.get||w.set)?Object.defineProperty(p,y,w):p[y]=a[y])}return p.default=a,u&&u.set(a,p),p}(t("./constants"));function g(){var a;return typeof WeakMap!="function"?null:(a=new WeakMap,g=function(){return a},a)}var m=[f.ARROW,f.CROSS,f.HAND,f.MOVE,f.TEXT,f.WAIT],n=(i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60,window.print),s=!1;function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function c(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var a;arguments.length?(a=console).log.apply(a,arguments):s||(n(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(s=!0))},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(a,u,y){var p,v="auto",w=this._curElement.elt;m.includes(a)?v=a:typeof a=="string"&&(p="",u&&y&&typeof u=="number"&&typeof y=="number"&&(p="".concat(u," ").concat(y)),v=a.substring(0,7)==="http://"||a.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(a)?"url(".concat(a,") ").concat(p,", auto"):a),w.style.cursor=v},i.default.prototype.frameRate=function(a){return i.default._validateParameters("frameRate",arguments),typeof a!="number"||a<0?this._frameRate:(this._setProperty("_targetFrameRate",a),a===0&&this._setProperty("_frameRate",a),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(a){return this.frameRate(a)},i.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.webglVersion=f.P2D,i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=l(),i.default.prototype.windowHeight=c(),i.default.prototype._onresize=function(a){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",c());var u=this._isGlobal?window:this;typeof u.windowResized!="function"||(u=u.windowResized(a))===void 0||u||a.preventDefault()},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(a){if(i.default._validateParameters("fullscreen",arguments),a===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(a){if(a=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(a){var u;return i.default._validateParameters("pixelDensity",arguments),typeof a=="number"?(a!==this._pixelDensity&&(this._pixelDensity=a),(u=this).resizeCanvas(this.width,this.height,!0)):u=this._pixelDensity,u},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(a){return a!==""})},i.default.prototype.getURLParams=function(){for(var a,u=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,y={};(a=u.exec(location.search))!=null;)a.index===u.lastIndex&&u.lastIndex++,y[a[1]]=a[2];return y},t=i.default,b.default=t},{"./constants":264,"./main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.search":197,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],266:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(m=t("../main"))&&m.__esModule?m:{default:m};t("../internationalization");function d(n,s){s=s||console.log.bind(console),i||g(),i.some(function(l){var c;if(n.message&&n.message.match("\\W?".concat(l.name,"\\W"))!==null)return c=l.type==="function"?"".concat(l.name,"()"):l.name,s("Did you just try to use p5.js's ".concat(c," ").concat(l.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(f)),!0})}var i=null,g=null,f=(h.default._friendlyError=h.default._checkForUserDefinedFunctions=h.default._fesErrorMonitor=function(){},i=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),g=function(){function n(l){return Object.getOwnPropertyNames(l).filter(function(c){return c[0]!=="_"&&!(c in s)&&(s[c]=!0)}).map(function(c){var a=typeof l[c]=="function"?"function":c===c.toUpperCase()?"constant":"variable";return{name:c,type:a}})}var s={};(i=[].concat(n(h.default.prototype),n(t("../constants")))).sort(function(l,c){return c.name.length-l.name.length})},m=(h.default.prototype._helpForMisusedAtTopLevelCode=d,document.readyState!=="complete"&&(window.addEventListener("error",d,!1),window.addEventListener("load",function(){window.removeEventListener("error",d,!1)})),h.default);b.default=m},{"../constants":264,"../internationalization":273,"../main":275,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.starts-with":199,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],267:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(h=t("../main"))&&h.__esModule?h:{default:h};t("../internationalization"),h.default._friendlyFileLoadError=function(){},t=h.default,b.default=t},{"../internationalization":273,"../main":275}],268:[function(t,x,b){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function d(s){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(l){return h(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":h(l)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=m(t("../main"));t("../internationalization"),g(t("../constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}function g(s){if(s&&s.__esModule)return s;if(s===null||d(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,a,u={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&((a=y?Object.getOwnPropertyDescriptor(s,c):null)&&(a.get||a.set)?Object.defineProperty(u,c,a):u[c]=s[c]);return u.default=s,l&&l.set(s,u),u}function m(s){return s&&s.__esModule?s:{default:s}}i.default._fesCodeReader=function(){};var n=i.default;b.default=n},{"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],269:[function(t,x,b){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function h(){var d=/(^|@)\S+:\d+/,i=/^\s*at .*(\S+:\d+|\(native\))/m,f=/^(eval@)?(\[native code])?$/;return{parse:function(g){return g.stacktrace!==void 0||g["opera#sourceloc"]!==void 0?this.parseOpera(g):g.stack&&g.stack.match(i)?this.parseV8OrIE(g):g.stack?this.parseFFOrSafari(g):void 0},extractLocation:function(g){return g.indexOf(":")===-1?[g]:[(g=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(g.replace(/[()]/g,"")))[1],g[2]||void 0,g[3]||void 0]},parseV8OrIE:function(g){return g.stack.split(`
`).filter(function(m){return!!m.match(i)},this).map(function(m){var n=(m=-1<m.indexOf("(eval ")?m.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):m).replace(/^\s+/,"").replace(/\(eval code/g,"("),s=n.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(n=s?n.replace(s[0],""):n).split(/\s+/).slice(1),s=this.extractLocation(s?s[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(s[0])?void 0:s[0],lineNumber:s[1],columnNumber:s[2],source:m}},this)},parseFFOrSafari:function(g){return g.stack.split(`
`).filter(function(m){return!m.match(f)},this).map(function(m){var n,s;return(m=-1<m.indexOf(" > eval")?m.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):m).indexOf("@")===-1&&m.indexOf(":")===-1?{functionName:m}:{functionName:(s=m.match(n=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&s[1]?s[1]:void 0,fileName:(s=this.extractLocation(m.replace(n,"")))[0],lineNumber:s[1],columnNumber:s[2],source:m}},this)},parseOpera:function(g){return!g.stacktrace||-1<g.message.indexOf(`
`)&&g.message.split(`
`).length>g.stacktrace.split(`
`).length?this.parseOpera9(g):g.stack?this.parseOpera11(g):this.parseOpera10(g)},parseOpera9:function(g){for(var m=/Line (\d+).*script (?:in )?(\S+)/i,n=g.message.split(`
`),s=[],l=2,c=n.length;l<c;l+=2){var a=m.exec(n[l]);a&&s.push({fileName:a[2],lineNumber:a[1],source:n[l]})}return s},parseOpera10:function(g){for(var m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=g.stacktrace.split(`
`),s=[],l=0,c=n.length;l<c;l+=2){var a=m.exec(n[l]);a&&s.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[l]})}return s},parseOpera11:function(g){return g.stack.split(`
`).filter(function(m){return!!m.match(d)&&!m.match(/^Error created at/)},this).map(function(m){var n,l=m.split("@"),s=this.extractLocation(l.pop()),l=l.shift()||"";return{functionName:l.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(n=l.match(/\(([^)]*)\)/)?l.replace(/^[^(]+\(([^)]*)\)$/,"$1"):n)===void 0||n==="[arguments not available]"?void 0:n.split(","),fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:m}},this)}}}t.default._getErrorStackParser=function(){return new h},t=t.default,b.default=t},{"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],270:[function(t,x,b){function h(g){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=(d=t("../main"))&&d.__esModule?d:{default:d};(function(g){if(!(g&&g.__esModule)&&!(g===null||f(g)!=="object"&&typeof g!="function")){var m=i();if(m&&m.has(g))return m.get(g);var n,s={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in g){var c;Object.prototype.hasOwnProperty.call(g,n)&&((c=l?Object.getOwnPropertyDescriptor(g,n):null)&&(c.get||c.set)?Object.defineProperty(s,n,c):s[n]=g[n])}s.default=g,m&&m.set(g,s)}})(t("../constants")),t("../internationalization");function i(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,i=function(){return g},g)}function f(g){return(f=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(g)}d.default._validateParameters=d.default._clearValidateParamsCache=function(){},t=d.default,b.default=t},{"../../../docs/parameterData.json":void 0,"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.map":169,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],271:[function(t,x,b){function h(g){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}function d(g){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=function(g){if(g&&g.__esModule)return g;if(g===null||d(g)!=="object"&&typeof g!="function")return{default:g};var m=f();if(m&&m.has(g))return m.get(g);var n,s={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in g){var c;Object.prototype.hasOwnProperty.call(g,n)&&((c=l?Object.getOwnPropertyDescriptor(g,n):null)&&(c.get||c.set)?Object.defineProperty(s,n,c):s[n]=g[n])}return s.default=g,m&&m.set(g,s),s}(t("./constants"));function f(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,f=function(){return g},g)}b.default={modeAdjust:function(g,m,n,s,l){return l===i.CORNER?{x:g,y:m,w:n,h:s}:l===i.CORNERS?{x:g,y:m,w:n-g,h:s-m}:l===i.RADIUS?{x:g-n,y:m-s,w:2*n,h:2*s}:l===i.CENTER?{x:g-.5*n,y:m-.5*s,w:n,h:s}:void 0}}},{"./constants":264,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],272:[function(t,x,b){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var h=(d=t("../core/main"))&&d.__esModule?d:{default:d};t("./internationalization");var d=Promise.resolve();Promise.all([new Promise(function(i,f){document.readyState==="complete"?i():window.addEventListener("load",i,!1)}),d]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!h.default.instance&&new h.default})},{"../core/main":275,"./internationalization":273,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/web.dom-collections.iterator":238}],273:[function(t,x,b){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.setTranslatorLanguage=b.currentTranslatorLanguage=b.availableTranslatorLanguages=b.initialize=b.translator=void 0;var h,d,i=g(t("i18next")),f=g(t("i18next-browser-languagedetector"));function g(s){return s&&s.__esModule?s:{default:s}}function m(s,l){for(var c=0;c<l.length;c++){var a=l[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}var n=function(){function s(a,u){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.init(a,u)}var l,c;return l=s,(c=[{key:"fetchWithTimeout",value:function(a,u){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(a,u),new Promise(function(p,v){return setTimeout(function(){return v(new Error("timeout"))},y)})])}},{key:"init",value:function(a){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=a,this.options=u}},{key:"read",value:function(a,u,y){var p=this.options.loadPath;a===this.options.fallback?y(null,h[a][u]):d.includes(a)?(p=this.services.interpolator.interpolate(p,{lng:a,ns:u}),this.loadUrl(p,y)):y("Not found",!1)}},{key:"loadUrl",value:function(a,u){this.fetchWithTimeout(a).then(function(y){if(y.ok)return y.json();throw new Error("failed loading ".concat(a))},function(){throw new Error("failed loading ".concat(a))}).then(function(y){return u(null,y)}).catch(u)}}])&&m(l.prototype,c),s}();n.type="backend",b.translator=function(s,l){console.debug("p5.js translator called before translations were loaded"),i.default.t(s,l)},b.initialize=function(){return i.default.use(f.default).use(n).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:h}).then(function(s){b.translator=s},function(s){return console.debug("Translations failed to load (".concat(s,")"))})},b.availableTranslatorLanguages=function(){return i.default.languages},b.currentTranslatorLanguage=function(s){return i.default.language},b.setTranslatorLanguage=function(s){return i.default.changeLanguage(s||void 0,function(l){return console.debug("Translations failed to load (".concat(l,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238,i18next:3,"i18next-browser-languagedetector":3}],274:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,b.default=t},{"./main":275}],275:[function(t,x,b){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function d(s){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(l){return h(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":h(l)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t("./shim");var i=function(s){if(s&&s.__esModule)return s;if(s===null||d(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var y;Object.prototype.hasOwnProperty.call(s,c)&&((y=u?Object.getOwnPropertyDescriptor(s,c):null)&&(y.get||y.set)?Object.defineProperty(a,c,y):a[c]=s[c])}return a.default=s,l&&l.set(s,a),a}(t("./constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}function g(s,l){for(var c=0;c<l.length;c++){var a=l[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}var m,n=function(){function s(a,p){var y=this;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=p,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var p=Object.getOwnPropertyNames(s.prototype._registeredMethods),v=!0,w=!1,C=void 0;try{for(var T,j=p[Symbol.iterator]();!(v=(T=j.next()).done);v=!0){var A=T.value;this._registeredMethods[A]=s.prototype._registeredMethods[A].slice()}}catch(z){w=!0,C=z}finally{try{v||j.return==null||j.return()}finally{if(w)throw C}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),s.prototype.callRegisteredHooksFor=function(z){var W=this||s.prototype,Z=this._isGlobal?window:this;if(W._registeredMethods.hasOwnProperty(z)){var W=W._registeredMethods[z],I=!0,z=!1,q=void 0;try{for(var D,F=W[Symbol.iterator]();!(I=(D=F.next()).done);I=!0){var H=D.value;typeof H=="function"&&H.call(Z)}}catch(ie){z=!0,q=ie}finally{try{I||F.return==null||F.return()}finally{if(z)throw q}}}},this._start=function(){y._userNode&&typeof y._userNode=="string"&&(y._userNode=document.getElementById(y._userNode));var z=y._isGlobal?window:y;if(z.preload){y.callRegisteredHooksFor("beforePreload");var W,Z=document.getElementById(y._loadingScreenId),I=(Z||((Z=document.createElement("div")).innerHTML="Loading...",Z.style.position="absolute",Z.id=y._loadingScreenId,(y._userNode||document.body).appendChild(Z)),y._preloadMethods);for(W in I){I[W]=I[W]||s;var q=I[W];q!==s.prototype&&q!==s||(y._isGlobal&&(window[W]=y._wrapPreload(y,W)),q=y),y._registeredPreloadMethods[W]=q[W],q[W]=y._wrapPreload(q,W)}z.preload(),y._runIfPreloadsAreDone()}else y._setup(),y._recording||y._draw()},this._runIfPreloadsAreDone=function(){var z,W=this._isGlobal?window:this;W._preloadCount===0&&((z=document.getElementById(W._loadingScreenId))&&z.parentNode.removeChild(z),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),W._setup(),this._recording||W._draw()))},this._decrementPreload=function(){var z=this._isGlobal?window:this;z._preloadDone||typeof z.preload!="function"||(z._setProperty("_preloadCount",z._preloadCount-1),z._runIfPreloadsAreDone())},this._wrapPreload=function(z,W){var Z=this;return function(){Z._incrementPreload();for(var I=arguments.length,q=new Array(I),D=0;D<I;D++)q[D]=arguments[D];return Z._registeredPreloadMethods[W].apply(z,q)}},this._incrementPreload=function(){var z=this._isGlobal?window:this;z._preloadDone||z._setProperty("_preloadCount",z._preloadCount+1)},this._setup=function(){y.callRegisteredHooksFor("beforeSetup"),y.createCanvas(y._defaultCanvasSize.width,y._defaultCanvasSize.height,"p2d");var z=y._isGlobal?window:y;if(typeof z.preload=="function")for(var W in y._preloadMethods)z[W]=y._preloadMethods[W][W],z[W]&&y&&(z[W]=z[W].bind(y));y._millisStart=window.performance.now(),z._preloadDone=!0,typeof z.setup=="function"&&z.setup();var Z=document.getElementsByTagName("canvas"),I=!0,q=!1,D=void 0;try{for(var F,H=Z[Symbol.iterator]();!(I=(F=H.next()).done);I=!0){var Y=F.value;Y.dataset.hidden==="true"&&(Y.style.visibility="",delete Y.dataset.hidden)}}catch(te){q=!0,D=te}finally{try{I||H.return==null||H.return()}finally{if(q)throw D}}y._lastTargetFrameTime=window.performance.now(),y._lastRealFrameTime=window.performance.now(),y._setupDone=!0,(y._accessibleOutputs.grid||y._accessibleOutputs.text)&&y._updateAccsOutput(),y.callRegisteredHooksFor("afterSetup")},this._draw=function(){var z=window.performance.now(),W=z-y._lastTargetFrameTime,Z=1e3/y._targetFrameRate;(!y._loop||Z-5<=W)&&(y.deltaTime=z-y._lastRealFrameTime,y._setProperty("deltaTime",y.deltaTime),y._frameRate=1e3/y.deltaTime,y.redraw(),y._lastTargetFrameTime=Math.max(y._lastTargetFrameTime+Z,z),y._lastRealFrameTime=z,y._updateMouseCoords!==void 0&&(y._updateMouseCoords(),y._setProperty("movedX",0),y._setProperty("movedY",0))),y._loop&&(y._requestAnimId=window.requestAnimationFrame(y._draw))},this._setProperty=function(z,W){y[z]=W,y._isGlobal&&(window[z]=W)},this.remove=function(){y._startListener&&window.removeEventListener("load",y._startListener,!1);var z=document.getElementById(y._loadingScreenId);if(z&&(z.parentNode.removeChild(z),y._incrementPreload()),y._curElement){for(var W in y._loop=!1,y._requestAnimId&&window.cancelAnimationFrame(y._requestAnimId),y._events)window.removeEventListener(W,y._events[W]);var Z=!0,z=!1,I=void 0;try{for(var q,D=y._elements[Symbol.iterator]();!(Z=(q=D.next()).done);Z=!0){var F,H=q.value;for(F in H.elt&&H.elt.parentNode&&H.elt.parentNode.removeChild(H.elt),H._events)H.elt.removeEventListener(F,H._events[F])}}catch(_e){z=!0,I=_e}finally{try{Z||D.return==null||D.return()}finally{if(z)throw I}}var Y=y;y._registeredMethods.remove.forEach(function(_e){_e!==void 0&&_e.call(Y)})}if(y._isGlobal){for(var te in s.prototype)try{delete window[te]}catch{window[te]=void 0}for(var ie in y)if(y.hasOwnProperty(ie))try{delete window[ie]}catch{window[ie]=void 0}s.instance=null}},this._registeredMethods.init.forEach(function(z){z!==void 0&&z.call(this)},this),this._setupPromisePreloads();var L,M,k=this._createFriendlyGlobalFunctionBinder();if(a)a(this),s._checkForUserDefinedFunctions(this);else{for(var O in this._isGlobal=!0,s.instance=this,s.prototype)typeof s.prototype[O]=="function"?(L=O.substring(2),this._events.hasOwnProperty(L)||(Math.hasOwnProperty(O)&&Math[O]===s.prototype[O]?k(O,s.prototype[O]):k(O,s.prototype[O].bind(this)))):k(O,s.prototype[O]);for(var N in this)this.hasOwnProperty(N)&&k(N,this[N])}for(M in this._events){var U=this["_on".concat(M)];U&&(U=U.bind(this),window.addEventListener(M,U,{passive:!1}),this._events[M]=U)}function V(){y._setProperty("focused",!0)}function G(){y._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",G),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",G)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var l,c;return l=s,(c=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=i.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(a,u){s.prototype._preloadMethods.hasOwnProperty(a)||(s.prototype._preloadMethods[a]=u)}},{key:"registerMethod",value:function(a,u){var y=this||s.prototype;y._registeredMethods.hasOwnProperty(a)||(y._registeredMethods[a]=[]),y._registeredMethods[a].push(u)}},{key:"unregisterMethod",value:function(a,u){var y=this||s.prototype;if(y._registeredMethods.hasOwnProperty(a)){for(var p=y._registeredMethods[a],v=[],w=0;w<p.length;w++)p[w]===u&&v.push(w);for(var C=v.length-1;0<=C;C--)p.splice(v[C],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=a.globalObject||window;return a.log||console.log.bind(console),function(y,p){s.disableFriendlyErrors,u[y]=p}}}])&&g(l.prototype,c),s}();for(m in n.instance=null,n.disableFriendlyErrors=!1,i)n.prototype[m]=i[m];n.VERSION=i.VERSION,n.prototype._preloadMethods={loadJSON:n.prototype,loadImage:n.prototype,loadStrings:n.prototype,loadXML:n.prototype,loadBytes:n.prototype,loadTable:n.prototype,loadFont:n.prototype,loadModel:n.prototype,loadShader:n.prototype},n.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},n.prototype._registeredPreloadMethods={},b.default=n},{"./constants":264,"./shim":286,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],276:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("./main"))&&t.__esModule?t:{default:t};function d(i,f){for(var g=0;g<f.length;g++){var m=f[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(i,m.key,m)}}h.default.Element=function(){function i(n,s){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.elt=n,this._pInst=this._pixelsState=s,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var f,g,m;return f=i,m=[{key:"_adjustListener",value:function(n,s,l){return s===!1?h.default.Element._detachListener(n,l):h.default.Element._attachListener(n,s,l),this}},{key:"_attachListener",value:function(n,s,l){l._events[n]&&h.default.Element._detachListener(n,l),s=s.bind(l),l.elt.addEventListener(n,s,!1),l._events[n]=s}},{key:"_detachListener",value:function(n,s){var l=s._events[n];s.elt.removeEventListener(n,l,!1),s._events[n]=null}}],(g=[{key:"parent",value:function(n){return n===void 0?this.elt.parentNode:(typeof n=="string"?(n[0]==="#"&&(n=n.substring(1)),n=document.getElementById(n)):n instanceof h.default.Element&&(n=n.elt),n.appendChild(this.elt),this)}},{key:"id",value:function(n){return n===void 0?this.elt.id:(this.elt.id=n,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(n){return n===void 0?this.elt.className:(this.elt.className=n,this)}},{key:"mousePressed",value:function(n){return h.default.Element._adjustListener("mousedown",function(s){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(s),n.call(this,s)},this),this}},{key:"doubleClicked",value:function(n){return h.default.Element._adjustListener("dblclick",n,this),this}},{key:"mouseWheel",value:function(n){return h.default.Element._adjustListener("wheel",n,this),this}},{key:"mouseReleased",value:function(n){return h.default.Element._adjustListener("mouseup",n,this),this}},{key:"mouseClicked",value:function(n){return h.default.Element._adjustListener("click",n,this),this}},{key:"mouseMoved",value:function(n){return h.default.Element._adjustListener("mousemove",n,this),this}},{key:"mouseOver",value:function(n){return h.default.Element._adjustListener("mouseover",n,this),this}},{key:"mouseOut",value:function(n){return h.default.Element._adjustListener("mouseout",n,this),this}},{key:"touchStarted",value:function(n){return h.default.Element._adjustListener("touchstart",n,this),this}},{key:"touchMoved",value:function(n){return h.default.Element._adjustListener("touchmove",n,this),this}},{key:"touchEnded",value:function(n){return h.default.Element._adjustListener("touchend",n,this),this}},{key:"dragOver",value:function(n){return h.default.Element._adjustListener("dragover",n,this),this}},{key:"dragLeave",value:function(n){return h.default.Element._adjustListener("dragleave",n,this),this}},{key:"_setProperty",value:function(n,s){this[n]=s}}])&&d(f.prototype,g),m&&d(f,m),i}(),t=h.default.Element,b.default=t},{"./main":275}],277:[function(t,x,b){function h(y){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function d(y){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(u=t("./main"))&&u.__esModule?u:{default:u},f=function(y){if(y&&y.__esModule)return y;if(y===null||d(y)!=="object"&&typeof y!="function")return{default:y};var p=g();if(p&&p.has(y))return p.get(y);var v,w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in y){var T;Object.prototype.hasOwnProperty.call(y,v)&&((T=C?Object.getOwnPropertyDescriptor(y,v):null)&&(T.get||T.set)?Object.defineProperty(w,v,T):w[v]=y[v])}return w.default=y,p&&p.set(y,w),w}(t("./constants"));function g(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,g=function(){return y},y)}function m(y,p){for(var v=0;v<p.length;v++){var w=p[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}function n(y,p){return(n=Object.setPrototypeOf||function(v,w){return v.__proto__=w,v})(y,p)}function s(y){return function(){var p,v=a(y);return l(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=a(this).constructor,Reflect.construct(v,arguments,p)):v.apply(this,arguments))}}function l(y,p){return!p||d(p)!=="object"&&typeof p!="function"?c(y):p}function c(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function a(y){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(y)}i.default.Graphics=function(y){var p=w;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&n(p,y);var v=s(w);function w(C,T,N,A,L){var M;if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");O=L||document.createElement("canvas"),(M=v.call(this,O,A)).canvas=O;var k,O=N||f.P2D,N=A._userNode||document.body;for(k in L||N.appendChild(M.canvas),i.default.prototype)M[k]||(typeof i.default.prototype[k]=="function"?M[k]=i.default.prototype[k].bind(c(M)):M[k]=i.default.prototype[k]);return i.default.prototype._initializeInstanceVariables.apply(c(M)),M.width=C,M.height=T,M._pixelDensity=A._pixelDensity,O===f.WEBGL?M._renderer=new i.default.RendererGL(M.canvas,c(M),!1):M._renderer=new i.default.Renderer2D(M.canvas,c(M),!1),A._elements.push(c(M)),Object.defineProperty(c(M),"deltaTime",{get:function(){return this._pInst.deltaTime}}),M._renderer.resize(C,T),M._renderer._applyDefaults(),l(M,c(M))}return p=w,(y=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var C,T=this._pInst._elements.indexOf(this);for(C in T!==-1&&this._pInst._elements.splice(T,1),this._events)this.elt.removeEventListener(C,this._events[C])}},{key:"createFramebuffer",value:function(C){return new i.default.Framebuffer(this,C)}}])&&m(p.prototype,y),w}(i.default.Element);var u=i.default.Graphics;b.default=u},{"./constants":264,"./main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],278:[function(t,x,b){function h(y){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=(a=t("./main"))&&a.__esModule?a:{default:a},i=function(y){if(y&&y.__esModule)return y;if(y===null||g(y)!=="object"&&typeof y!="function")return{default:y};var p=f();if(p&&p.has(y))return p.get(y);var v,w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in y){var T;Object.prototype.hasOwnProperty.call(y,v)&&((T=C?Object.getOwnPropertyDescriptor(y,v):null)&&(T.get||T.set)?Object.defineProperty(w,v,T):w[v]=y[v])}return w.default=y,p&&p.set(y,w),w}(t("../core/constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}function g(y){return(g=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(y)}function m(y,p){for(var v=0;v<p.length;v++){var w=p[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}function n(y,p){return(n=Object.setPrototypeOf||function(v,w){return v.__proto__=w,v})(y,p)}function s(y){return function(){var p,v,w=c(y);return p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=c(this).constructor,Reflect.construct(w,arguments,p)):w.apply(this,arguments),w=this,!(v=p)||g(v)!=="object"&&typeof v!="function"?l(w):v}}function l(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function c(y){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(y)}var a=function(y){var p=w;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&n(p,y);var v=s(w);function w(C,T,j){var A;if(this instanceof w)return(A=v.call(this,C,T)).canvas=C,A._pixelsState=T,j?(A._isMainCanvas=!0,A._pInst._setProperty("_curElement",l(A)),A._pInst._setProperty("canvas",A.canvas),A._pInst._setProperty("width",A.width),A._pInst._setProperty("height",A.height)):(A.canvas.style.display="none",A._styles=[]),A._clipping=!1,A._clipInvert=!1,A._textSize=12,A._textLeading=15,A._textFont="sans-serif",A._textStyle=i.NORMAL,A._textAscent=null,A._textDescent=null,A._textAlign=i.LEFT,A._textBaseline=i.BASELINE,A._textWrap=i.WORD,A._rectMode=i.CORNER,A._ellipseMode=i.CENTER,A._curveTightness=0,A._imageMode=i.CORNER,A._tint=null,A._doStroke=!0,A._doFill=!0,A._strokeSet=!1,A._fillSet=!1,A._leadingSet=!1,A._pushPopDepth=0,A;throw new TypeError("Cannot call a class as a function")}return p=w,(y=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(C){this._pushPopDepth--,C.properties&&Object.assign(this,C.properties)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=C.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(C,T){this.width=C,this.height=T,this.elt.width=C*this._pInst._pixelDensity,this.elt.height=T*this._pInst._pixelDensity,this.elt.style.width="".concat(C,"px"),this.elt.style.height="".concat(T,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(C,T,j,A){var L=this._pixelsState,M=L._pixelDensity,k=this.canvas;if(C===void 0&&T===void 0)C=T=0,j=L.width,A=L.height;else if(C*=M,T*=M,j===void 0&&A===void 0)return C<0||T<0||C>=k.width||T>=k.height?[0,0,0,0]:this._getPixel(C,T);return L=new d.default.Image(j*M,A*M),L._pixelDensity=M,L.canvas.getContext("2d").drawImage(k,C,T,j*M,A*M,0,0,j*M,A*M),L}},{key:"textLeading",value:function(C){return typeof C=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",C),this._pInst):this._textLeading}},{key:"textStyle",value:function(C){return C?(C!==i.NORMAL&&C!==i.ITALIC&&C!==i.BOLD&&C!==i.BOLDITALIC||this._setProperty("_textStyle",C),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(C,T){return C!==void 0?(this._setProperty("_textAlign",C),T!==void 0&&this._setProperty("_textBaseline",T),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(C){return this._setProperty("_textWrap",C),this._textWrap}},{key:"text",value:function(C,T,j,A,L){var M,k,O,N,U=this._pInst,V=this._textWrap,G=Number.MAX_VALUE,z=j;if((this._doFill||this._doStroke)&&C!==void 0){if(M=(C=(C=typeof C!="string"?C.toString():C).replace(/(\t)/g,"  ")).split(`
`),A!==void 0){switch(this._rectMode===i.CENTER&&(T-=A/2),this._textAlign){case i.CENTER:T+=A/2;break;case i.RIGHT:T+=A}if(L!==void 0){this._rectMode===i.CENTER&&(j-=L/2,z-=L/2);var C=j,W=U.textAscent();switch(this._textBaseline){case i.BOTTOM:N=j+L,j=Math.max(N,j),z+=W;break;case i.CENTER:N=j+L/2,j=Math.max(N,j),z+=W/2}G=j+L-W,this._textBaseline===i.CENTER&&(G=C+L-W/2)}else this._textBaseline!==i.BOTTOM&&this._textBaseline!==i.CENTER||(z=j-(C=U.textSize()*this._textLeading)/2,G=j+C/2);if(V===i.WORD){for(var Z=[],I=0;I<M.length;I++){for(var q="",D=M[I].split(" "),F=0;F<D.length;F++)k="".concat(q+D[F])+" ",q=A<(O=this.textWidth(k))&&0<q.length?(Z.push(q),"".concat(D[F])+" "):k;Z.push(q)}var H=0;this._textBaseline===i.CENTER?H=(Z.length-1)*U.textLeading()/2:this._textBaseline===i.BOTTOM&&(H=(Z.length-1)*U.textLeading());for(var Y=0;Y<M.length;Y++){q="",D=M[Y].split(" ");for(var te=0;te<D.length;te++)k="".concat(q+D[te])+" ",A<(O=this.textWidth(k))&&0<q.length?(this._renderText(U,q.trim(),T,j-H,G,z),q="".concat(D[te])+" ",j+=U.textLeading()):q=k;this._renderText(U,q.trim(),T,j-H,G,z),j+=U.textLeading()}}else{for(var ie=[],de=0;de<M.length;de++)for(var _e=M[de].split(q=""),le=0;le<_e.length;le++)k="".concat(q+_e[le]),(O=this.textWidth(k))<=A?q+=_e[le]:A<O&&0<q.length&&(ie.push(q),q="".concat(_e[le]));ie.push(q);var re=0;this._textBaseline===i.CENTER?re=(ie.length-1)*U.textLeading()/2:this._textBaseline===i.BOTTOM&&(re=(ie.length-1)*U.textLeading());for(var pe=0;pe<M.length;pe++){_e=M[pe].split(q="");for(var Q=0;Q<_e.length;Q++)k="".concat(q+_e[Q]),(O=this.textWidth(k))<=A?q+=_e[Q]:A<O&&0<q.length&&(this._renderText(U,q.trim(),T,j-re,G,z),j+=U.textLeading(),q="".concat(_e[Q]))}this._renderText(U,q.trim(),T,j-re,G,z),j+=U.textLeading()}}else{var ce=0;this._textBaseline===i.CENTER?ce=(M.length-1)*U.textLeading()/2:this._textBaseline===i.BOTTOM&&(ce=(M.length-1)*U.textLeading());for(var be=0;be<M.length;be++)this._renderText(U,M[be],T,j-ce,G,z-ce),j+=U.textLeading()}return U}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return g(C)==="object"&&C.font&&C.font.supported}},{key:"_updateTextMetrics",value:function(){var C,T,j,A,L,M;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((C=document.createElement("span")).style.fontFamily=this._textFont,C.style.fontSize="".concat(this._textSize,"px"),C.innerHTML="ABCjgq|",(M=document.createElement("div")).style.display="inline-block",M.style.width="1px",M.style.height="0px",A=((T=document.createElement("div")).appendChild(C),T.appendChild(M),T.style.height="0px",T.style.overflow="hidden",document.body.appendChild(T),M.style.verticalAlign="baseline",u(M)),L=u(C),j=A[1]-L[1],A=(M.style.verticalAlign="bottom",u(M)),L=u(C),M=A[1]-L[1]-j,document.body.removeChild(T),this._setProperty("_textAscent",j),this._setProperty("_textDescent",M)),this}}])&&m(p.prototype,y),w}(d.default.Element);function u(y){var p=0,v=0;if(y.offsetParent)for(;p+=y.offsetLeft,v+=y.offsetTop,y=y.offsetParent;);else p+=y.offsetLeft,v+=y.offsetTop;return[p,v]}a.prototype.textSize=function(y){return typeof y=="number"?(this._setProperty("_textSize",y),this._leadingSet||this._setProperty("_textLeading",y*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},d.default.Renderer=a,t=d.default.Renderer,b.default=t},{"../core/constants":264,"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],279:[function(y,x,b){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(p)}function d(p){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(v){return h(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":h(v)})(p)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.for-each"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.number.to-fixed"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.reflect.construct"),y("core-js/modules/es.reflect.get"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.for-each"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.number.to-fixed"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(u=y("./main"))&&u.__esModule?u:{default:u},f=function(p){if(p&&p.__esModule)return p;if(p===null||d(p)!=="object"&&typeof p!="function")return{default:p};var v=g();if(v&&v.has(p))return v.get(p);var w,C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in p){var j;Object.prototype.hasOwnProperty.call(p,w)&&((j=T?Object.getOwnPropertyDescriptor(p,w):null)&&(j.get||j.set)?Object.defineProperty(C,w,j):C[w]=p[w])}return C.default=p,v&&v.set(p,C),C}(y("./constants"));function g(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,g=function(){return p},p)}function m(p,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(p,C.key,C)}}function n(p,v,w){return(n=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(A,T,j){var A=function(L,M){for(;!Object.prototype.hasOwnProperty.call(L,M)&&(L=c(L))!==null;);return L}(A,T);if(A)return(A=Object.getOwnPropertyDescriptor(A,T)).get?A.get.call(j):A.value})(p,v,w||p)}function s(p,v){return(s=Object.setPrototypeOf||function(w,C){return w.__proto__=C,w})(p,v)}function l(p){return function(){var v,w=c(p),w=(v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=c(this).constructor,Reflect.construct(w,arguments,v)):w.apply(this,arguments),this);if(!v||d(v)!=="object"&&typeof v!="function"){if(w!==void 0)return w;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return v}}function c(p){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(p)}y("./p5.Renderer");var a="rgba(0,0,0,0)",u=function(p){var v=C;if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(p&&p.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),p&&s(v,p);var w=l(C);function C(T,j,A){if(this instanceof C)return(T=w.call(this,T,j,A)).drawingContext=T.canvas.getContext("2d"),T._pInst._setProperty("drawingContext",T.drawingContext),T;throw new TypeError("Cannot call a class as a function")}return v=C,(p=[{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=f.BLEND,this._setFill(f._DEFAULT_FILL),this._setStroke(f._DEFAULT_STROKE),this.drawingContext.lineCap=f.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(T,j){n(c(C.prototype),"resize",this).call(this,T,j),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var T,j;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof i.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(T=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(T,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(T=this._getFill(),j=(j=this._pInst).color.apply(j,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(j.levels),j=j.toString(),this._setFill(j),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(T),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var T=(T=this._pInst).color.apply(T,arguments);this._setFill(T.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",T.levels)}},{key:"stroke",value:function(){var T=(T=this._pInst).color.apply(T,arguments);this._setStroke(T.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",T.levels)}},{key:"erase",value:function(T,j){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,T=this._pInst.color(255,T).toString(),this.drawingContext.fillStyle=T,this._cachedStrokeStyle=this.drawingContext.strokeStyle,T=this._pInst.color(255,j).toString(),this.drawingContext.strokeStyle=T,j=this._cachedBlendMode,this.blendMode(f.REMOVE),this._cachedBlendMode=j,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var T=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},T=(n(c(C.prototype),"beginClip",this).call(this,T),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),T=(this.drawingContext.fillStyle=T,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),T=(this.drawingContext.strokeStyle=T,this._cachedBlendMode);this.blendMode(f.BLEND),this._cachedBlendMode=T,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),n(c(C.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(T,j,A,L,M,k,O,N,U){T.gifProperties&&T._animateGif(this._pInst);try{i.default.MediaElement&&T instanceof i.default.MediaElement&&T._ensureCanvas();var V=(V=this._tint&&T.canvas?this._getTintedImageCanvas(T):V)||T.canvas||T.elt,G=1;T.width&&0<T.width&&(G=V.width/T.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(V,G*j,G*A,G*L,G*M,k,O,N,U),this._isErasing&&this._pInst.erase()}catch(z){if(z.name!=="NS_ERROR_NOT_AVAILABLE")throw z}}},{key:"_getTintedImageCanvas",value:function(T){if(!T.canvas)return T;T.tintCanvas||(T.tintCanvas=document.createElement("canvas")),T.tintCanvas.width!==T.canvas.width&&(T.tintCanvas.width=T.canvas.width),T.tintCanvas.height!==T.canvas.height&&(T.tintCanvas.height=T.canvas.height);var j=T.tintCanvas.getContext("2d");return j.save(),j.clearRect(0,0,T.canvas.width,T.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(j.drawImage(T.canvas,0,0),j.globalCompositeOperation="luminosity",j.drawImage(T.canvas,0,0),j.globalCompositeOperation="color",j.drawImage(T.canvas,0,0),j.globalCompositeOperation="multiply",j.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),j.fillRect(0,0,T.canvas.width,T.canvas.height),j.globalCompositeOperation="destination-in"),j.globalAlpha=this._tint[3]/255,j.drawImage(T.canvas,0,0),j.restore(),T.tintCanvas}},{key:"blendMode",value:function(T){if(T===f.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(T!==f.BLEND&&T!==f.REMOVE&&T!==f.DARKEST&&T!==f.LIGHTEST&&T!==f.DIFFERENCE&&T!==f.MULTIPLY&&T!==f.EXCLUSION&&T!==f.SCREEN&&T!==f.REPLACE&&T!==f.OVERLAY&&T!==f.HARD_LIGHT&&T!==f.SOFT_LIGHT&&T!==f.DODGE&&T!==f.BURN&&T!==f.ADD)throw new Error("Mode ".concat(T," not recognized."));this._cachedBlendMode=T,this.drawingContext.globalCompositeOperation=T}}},{key:"blend",value:function(){for(var T=this.drawingContext.globalCompositeOperation,j=arguments.length,A=new Array(j),L=0;L<j;L++)A[L]=arguments[L];var M=A[A.length-1],k=Array.prototype.slice.call(A,0,A.length-1);this.drawingContext.globalCompositeOperation=M,i.default.prototype.copy.apply(this,k),this.drawingContext.globalCompositeOperation=T}},{key:"_getPixel",value:function(T,j){return T=this.drawingContext.getImageData(T,j,1,1).data,[T[0],T[1],T[2],T[3]]}},{key:"loadPixels",value:function(){var T=this._pixelsState,j=T._pixelDensity,A=this.width*j,j=this.height*j,A=this.drawingContext.getImageData(0,0,A,j);T._setProperty("imageData",A),T._setProperty("pixels",A.data)}},{key:"set",value:function(T,j,A){T=Math.floor(T),j=Math.floor(j);var L=this._pixelsState;if(A instanceof i.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(L._pixelDensity,L._pixelDensity),this.drawingContext.clearRect(T,j,A.width,A.height),this.drawingContext.drawImage(A.canvas,T,j),this.drawingContext.restore();else{var M=0,k=0,O=0,N=0,U=4*(j*L._pixelDensity*(this.width*L._pixelDensity)+T*L._pixelDensity);if(L.imageData||L.loadPixels.call(L),typeof A=="number")U<L.pixels.length&&(O=k=M=A,N=255);else if(A instanceof Array){if(A.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");U<L.pixels.length&&(M=A[0],k=A[1],O=A[2],N=A[3])}else A instanceof i.default.Color&&U<L.pixels.length&&(M=A.levels[0],k=A.levels[1],O=A.levels[2],N=A.levels[3]);for(var V=0;V<L._pixelDensity;V++)for(var G=0;G<L._pixelDensity;G++)U=4*((j*L._pixelDensity+G)*this.width*L._pixelDensity+(T*L._pixelDensity+V)),L.pixels[U]=M,L.pixels[U+1]=k,L.pixels[U+2]=O,L.pixels[U+3]=N}}},{key:"updatePixels",value:function(T,j,A,L){var M=this._pixelsState,k=M._pixelDensity;T===void 0&&j===void 0&&A===void 0&&L===void 0&&(j=T=0,A=this.width,L=this.height),T*=k,j*=k,A*=k,L*=k,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=M.imageData),this.drawingContext.putImageData(M.imageData,T,j,0,0,A,L)}},{key:"_acuteArcToBezier",value:function(T,j){var k=j/2,A=Math.cos(k),N=Math.sin(k),L=1/Math.tan(k),k=T+k,M=Math.cos(k),k=Math.sin(k),O=(4-A)/3,N=N+(A-O)*L;return{ax:Math.cos(T).toFixed(7),ay:Math.sin(T).toFixed(7),bx:(O*M+N*k).toFixed(7),by:(O*k-N*M).toFixed(7),cx:(O*M-N*k).toFixed(7),cy:(O*k+N*M).toFixed(7),dx:Math.cos(T+j).toFixed(7),dy:Math.sin(T+j).toFixed(7)}}},{key:"arc",value:function(T,j,A,L,M,k,O){var N,U=this.drawingContext,V=A/2,G=L/2,z=[];for(T+=V,j+=G;1e-5<=k-M;)N=Math.min(k-M,f.HALF_PI),z.push(this._acuteArcToBezier(M,N)),M+=N;return this._doFill&&(this._clipping||U.beginPath(),z.forEach(function(W,Z){Z===0&&U.moveTo(T+W.ax*V,j+W.ay*G),U.bezierCurveTo(T+W.bx*V,j+W.by*G,T+W.cx*V,j+W.cy*G,T+W.dx*V,j+W.dy*G)}),O!==f.PIE&&O!=null||U.lineTo(T,j),U.closePath(),this._clipping||U.fill()),this._doStroke&&(this._clipping||U.beginPath(),z.forEach(function(W,Z){Z===0&&U.moveTo(T+W.ax*V,j+W.ay*G),U.bezierCurveTo(T+W.bx*V,j+W.by*G,T+W.cx*V,j+W.cy*G,T+W.dx*V,j+W.dy*G)}),O===f.PIE?(U.lineTo(T,j),U.closePath()):O===f.CHORD&&U.closePath(),this._clipping||U.stroke()),this}},{key:"ellipse",value:function(z){var j=this.drawingContext,A=this._doFill,L=this._doStroke,M=parseFloat(z[0]),k=parseFloat(z[1]),G=parseFloat(z[2]),z=parseFloat(z[3]);if(A&&!L){if(this._getFill()===a)return this}else if(!A&&L&&this._getStroke()===a)return this;var O=G/2*.5522847498,N=z/2*.5522847498,U=M+G,V=k+z,G=M+G/2,z=k+z/2;this._clipping||j.beginPath(),j.moveTo(M,z),j.bezierCurveTo(M,z-N,G-O,k,G,k),j.bezierCurveTo(G+O,k,U,z-N,U,z),j.bezierCurveTo(U,z+N,G+O,V,G,V),j.bezierCurveTo(G-O,V,M,z+N,M,z),!this._clipping&&A&&j.fill(),!this._clipping&&L&&j.stroke()}},{key:"line",value:function(T,j,A,L){var M=this.drawingContext;return this._doStroke&&this._getStroke()!==a&&(this._clipping||M.beginPath(),M.moveTo(T,j),M.lineTo(A,L),M.stroke()),this}},{key:"point",value:function(T,j){var A,L,M=this.drawingContext;return!this._doStroke||this._getStroke()===a?this:(A=this._getStroke(),L=this._getFill(),this._clipping||this._setFill(A),this._clipping||M.beginPath(),M.arc(T,j,M.lineWidth/2,0,f.TWO_PI,!1),void(this._clipping||(M.fill(),this._setFill(L))))}},{key:"quad",value:function(T,j,A,L,M,k,O,N){var U=this.drawingContext,V=this._doFill,G=this._doStroke;if(V&&!G){if(this._getFill()===a)return this}else if(!V&&G&&this._getStroke()===a)return this;return this._clipping||U.beginPath(),U.moveTo(T,j),U.lineTo(A,L),U.lineTo(M,k),U.lineTo(O,N),U.closePath(),!this._clipping&&V&&U.fill(),!this._clipping&&G&&U.stroke(),this}},{key:"rect",value:function(G){var j,A,L=G[0],M=G[1],k=G[2],O=G[3],N=G[4],U=G[5],V=G[6],G=G[7],z=this.drawingContext,W=this._doFill,Z=this._doStroke;if(W&&!Z){if(this._getFill()===a)return this}else if(!W&&Z&&this._getStroke()===a)return this;return this._clipping||z.beginPath(),N===void 0?z.rect(L,M,k,O):(U===void 0&&(U=N),V===void 0&&(V=U),G===void 0&&(G=V),Z=(W=Math.abs(k))/2,A=(j=Math.abs(O))/2,j<2*(N=W<2*N?Z:N)&&(N=A),j<2*(U=W<2*U?Z:U)&&(U=A),j<2*(V=W<2*V?Z:V)&&(V=A),j<2*(G=W<2*G?Z:G)&&(G=A),this._clipping||z.beginPath(),z.moveTo(L+N,M),z.arcTo(L+k,M,L+k,M+O,U),z.arcTo(L+k,M+O,L,M+O,V),z.arcTo(L,M+O,L,M,G),z.arcTo(L,M,L+k,M,N),z.closePath()),!this._clipping&&this._doFill&&z.fill(),!this._clipping&&this._doStroke&&z.stroke(),this}},{key:"triangle",value:function(V){var j=this.drawingContext,A=this._doFill,L=this._doStroke,M=V[0],k=V[1],O=V[2],N=V[3],U=V[4],V=V[5];if(A&&!L){if(this._getFill()===a)return this}else if(!A&&L&&this._getStroke()===a)return this;this._clipping||j.beginPath(),j.moveTo(M,k),j.lineTo(O,N),j.lineTo(U,V),j.closePath(),!this._clipping&&A&&j.fill(),!this._clipping&&L&&j.stroke()}},{key:"endShape",value:function(T,j,A,L,M,k,O){if(j.length!==0&&(this._doStroke||this._doFill)){var N,U,V,G=T===f.CLOSE,z=(G&&!k&&j.push(j[0]),j.length);if(!A||O!==f.POLYGON&&O!==null)if(!L||O!==f.POLYGON&&O!==null)if(!M||O!==f.POLYGON&&O!==null)if(O===f.POINTS)for(U=0;U<z;U++)N=j[U],this._doStroke&&this._pInst.stroke(N[6]),this._pInst.point(N[0],N[1]);else if(O===f.LINES)for(U=0;U+1<z;U+=2)N=j[U],this._doStroke&&this._pInst.stroke(j[U+1][6]),this._pInst.line(N[0],N[1],j[U+1][0],j[U+1][1]);else if(O===f.TRIANGLES)for(U=0;U+2<z;U+=3)N=j[U],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(N[0],N[1]),this.drawingContext.lineTo(j[U+1][0],j[U+1][1]),this.drawingContext.lineTo(j[U+2][0],j[U+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(j[U+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(j[U+2][6]),this.drawingContext.stroke());else if(O===f.TRIANGLE_STRIP)for(U=0;U+1<z;U++)N=j[U],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(j[U+1][0],j[U+1][1]),this.drawingContext.lineTo(N[0],N[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(j[U+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(j[U+1][5]),U+2<z&&(this.drawingContext.lineTo(j[U+2][0],j[U+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(j[U+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(j[U+2][5])),this._doFillStrokeClose(G);else if(O===f.TRIANGLE_FAN){if(2<z){for(this._clipping||this.drawingContext.beginPath(),U=2;U<z;U++)N=j[U],this.drawingContext.moveTo(j[0][0],j[0][1]),this.drawingContext.lineTo(j[U-1][0],j[U-1][1]),this.drawingContext.lineTo(N[0],N[1]),this.drawingContext.lineTo(j[0][0],j[0][1]),U<z-1&&(this._doFill&&N[5]!==j[U+1][5]||this._doStroke&&N[6]!==j[U+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(N[5]),this.drawingContext.fill(),this._pInst.fill(j[U+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(N[6]),this.drawingContext.stroke(),this._pInst.stroke(j[U+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(G)}}else if(O===f.QUADS)for(U=0;U+3<z;U+=4){for(N=j[U],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(N[0],N[1]),V=1;V<4;V++)this.drawingContext.lineTo(j[U+V][0],j[U+V][1]);this.drawingContext.lineTo(N[0],N[1]),!this._clipping&&this._doFill&&this._pInst.fill(j[U+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(j[U+3][6]),this._doFillStrokeClose(G)}else if(O===f.QUAD_STRIP){if(3<z)for(U=0;U+1<z;U+=2)N=j[U],this._clipping||this.drawingContext.beginPath(),U+3<z?(this.drawingContext.moveTo(j[U+2][0],j[U+2][1]),this.drawingContext.lineTo(N[0],N[1]),this.drawingContext.lineTo(j[U+1][0],j[U+1][1]),this.drawingContext.lineTo(j[U+3][0],j[U+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(j[U+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(j[U+3][6])):(this.drawingContext.moveTo(N[0],N[1]),this.drawingContext.lineTo(j[U+1][0],j[U+1][1])),this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(j[0][0],j[0][1]),U=1;U<z;U++)(N=j[U]).isVert&&(N.moveTo?(G&&this.drawingContext.closePath(),this.drawingContext.moveTo(N[0],N[1])):this.drawingContext.lineTo(N[0],N[1]));this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),U=0;U<z;U++)j[U].isVert?j[U].moveTo?this.drawingContext.moveTo(j[U][0],j[U][1]):this.drawingContext.lineTo(j[U][0],j[U][1]):this.drawingContext.quadraticCurveTo(j[U][0],j[U][1],j[U][2],j[U][3]);this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),U=0;U<z;U++)j[U].isVert?j[U].moveTo?this.drawingContext.moveTo(j[U][0],j[U][1]):this.drawingContext.lineTo(j[U][0],j[U][1]):this.drawingContext.bezierCurveTo(j[U][0],j[U][1],j[U][2],j[U][3],j[U][4],j[U][5]);this._doFillStrokeClose(G)}else if(3<z){var W=[],Z=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(j[1][0],j[1][1]),U=1;U+2<z;U++)N=j[U],W[0]=[N[0],N[1]],W[1]=[N[0]+(Z*j[U+1][0]-Z*j[U-1][0])/6,N[1]+(Z*j[U+1][1]-Z*j[U-1][1])/6],W[2]=[j[U+1][0]+(Z*j[U][0]-Z*j[U+2][0])/6,j[U+1][1]+(Z*j[U][1]-Z*j[U+2][1])/6],W[3]=[j[U+1][0],j[U+1][1]],this.drawingContext.bezierCurveTo(W[1][0],W[1][1],W[2][0],W[2][1],W[3][0],W[3][1]);G&&this.drawingContext.lineTo(j[U+1][0],j[U+1][1]),this._doFillStrokeClose(G)}k=M=L=A=!1,G&&j.pop()}return this}},{key:"strokeCap",value:function(T){return T!==f.ROUND&&T!==f.SQUARE&&T!==f.PROJECT||(this.drawingContext.lineCap=T),this}},{key:"strokeJoin",value:function(T){return T!==f.ROUND&&T!==f.BEVEL&&T!==f.MITER||(this.drawingContext.lineJoin=T),this}},{key:"strokeWeight",value:function(T){return this.drawingContext.lineWidth=T===void 0||T===0?1e-4:T,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(T){T!==this._cachedFillStyle&&(this.drawingContext.fillStyle=T,this._cachedFillStyle=T)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(T){T!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=T,this._cachedStrokeStyle=T)}},{key:"bezier",value:function(T,j,A,L,M,k,O,N){return this._pInst.beginShape(),this._pInst.vertex(T,j),this._pInst.bezierVertex(A,L,M,k,O,N),this._pInst.endShape(),this}},{key:"curve",value:function(T,j,A,L,M,k,O,N){return this._pInst.beginShape(),this._pInst.curveVertex(T,j),this._pInst.curveVertex(A,L),this._pInst.curveVertex(M,k),this._pInst.curveVertex(O,N),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(T){T&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(T,j,A,L,M,k){this.drawingContext.transform(T,j,A,L,M,k)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(T){this.drawingContext.rotate(T)}},{key:"scale",value:function(T,j){return this.drawingContext.scale(T,j),this}},{key:"translate",value:function(T,j){return T instanceof i.default.Vector&&(j=T.y,T=T.x),this.drawingContext.translate(T,j),this}},{key:"_renderText",value:function(T,j,A,L,M,k){if(!(L<k||M<=L))return T.push(),this._isOpenType()?this._textFont._renderPath(j,A,L,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(j,A,L),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(f._DEFAULT_TEXT_FILL),this.drawingContext.fillText(j,A,L))),T.pop(),T}},{key:"textWidth",value:function(T){return this._isOpenType()?this._textFont._textWidth(T,this._textSize):this.drawingContext.measureText(T).width}},{key:"_applyTextProperties",value:function(){var T,j=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),T=this._textFont,this._isOpenType()&&(T=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(T||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===f.CENTER?this.drawingContext.textBaseline=f._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,j}},{key:"push",value:function(){return this.drawingContext.save(),n(c(C.prototype),"push",this).call(this)}},{key:"pop",value:function(T){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,n(c(C.prototype),"pop",this).call(this,T)}}])&&m(v.prototype,p),C}(i.default.Renderer),y=(u.prototype.text=function(p,v,w,A,T){A!==void 0&&this.drawingContext.textBaseline===f.BASELINE&&(j=!0,this.drawingContext.textBaseline=f.TOP);var j,A=i.default.Renderer.prototype.text.apply(this,arguments);return j&&(this.drawingContext.textBaseline=f.BASELINE),A},i.default.Renderer2D=u,i.default.Renderer2D);b.default=y},{"./constants":264,"./main":275,"./p5.Renderer":278,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],280:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var h=(t=t("./main"))&&t.__esModule?t:{default:t};h.default.prototype._promisePreloads=[];function d(){return{}}var i=!(h.default.prototype.registerPromisePreload=function(f){h.default.prototype._promisePreloads.push(f)});h.default.prototype._setupPromisePreloads=function(){var f=!0,g=!1,m=void 0;try{for(var n,s=this._promisePreloads[Symbol.iterator]();!(f=(n=s.next()).done);f=!0){var l=n.value,c=this,a=l.method,u=l.addCallbacks,y=l.legacyPreloadSetup,p=l.target||this,v=p[a].bind(p);if(p===h.default.prototype){if(i)continue;c=null,v=p[a]}p[a]=this._wrapPromisePreload(c,v,u),y&&(p[y.method]=this._legacyPreloadGenerator(c,y,p[a]))}}catch(w){g=!0,m=w}finally{try{f||s.return==null||s.return()}finally{if(g)throw m}}i=!0},h.default.prototype._wrapPromisePreload=function(f,g,m){var n=function(){for(var s=this,l=(this._incrementPreload(),null),c=null,a=arguments.length,u=new Array(a),y=0;y<a;y++)u[y]=arguments[y];if(m)for(var p=u.length-1;0<=p&&!c&&typeof u[p]=="function";p--)c=l,l=u.pop();var v=Promise.resolve(g.apply(this,u));return l&&v.then(l),c&&v.catch(c),v.then(function(){return s._decrementPreload()}),v};return n=f?n.bind(f):n},h.default.prototype._legacyPreloadGenerator=function(f,s,m){var n=s.createBaseObject||d,s=function(){var l=this;this._incrementPreload();for(var c=arguments.length,a=new Array(c),u=0;u<c;u++)a[u]=arguments[u];var y=n.apply(this,a);return m.apply(this,a).then(function(p){Object.assign(y,p),l._decrementPreload()}),y};return s=f?s.bind(f):s}},{"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],281:[function(t,x,b){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=(n=t("./main"))&&n.__esModule?n:{default:n},i=function(s){if(s&&s.__esModule)return s;if(s===null||g(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var y;Object.prototype.hasOwnProperty.call(s,c)&&((y=u?Object.getOwnPropertyDescriptor(s,c):null)&&(y.get||y.set)?Object.defineProperty(a,c,y):a[c]=s[c])}return a.default=s,l&&l.set(s,a),a}(t("./constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}function g(s){return(g=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(l){return h(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":h(l)})(s)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var m="defaultCanvas0",n=(d.default.prototype.createCanvas=function(s,l,c,a){var u,y,p;if(d.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(c=i.P2D,a=arguments[2]):u=c||i.P2D,a)(p=document.getElementById(m))&&p.parentNode.removeChild(p),p=a,this._defaultGraphicsCreated=!1;else{if(u===i.WEBGL)(p=document.getElementById(m))&&(p.parentNode.removeChild(p),y=this._renderer,this._elements=this._elements.filter(function(w){return w!==y})),(p=document.createElement("canvas")).id=m,p.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)p=this.canvas;else{p=a||document.createElement("canvas");for(var v=0;document.getElementById("defaultCanvas".concat(v));)v++;m="defaultCanvas".concat(v),p.id=m,p.classList.add("p5Canvas")}this._setupDone||(p.dataset.hidden=!0,p.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(c=document.createElement("main"),document.body.appendChild(c)),document.getElementsByTagName("main")[0])).appendChild(p)}return u===i.WEBGL?(this._setProperty("_renderer",new d.default.RendererGL(p,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new d.default.Renderer2D(p,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(s,l),this._renderer._applyDefaults(),this._renderer},d.default.prototype.resizeCanvas=function(s,l,c){if(d.default._validateParameters("resizeCanvas",arguments),this._renderer){var a,u,y={};for(a in this.drawingContext){var p=this.drawingContext[a];g(p)!=="object"&&typeof p!="function"&&(y[a]=p)}for(u in this.width=s,this.height=l,this._renderer.resize(s,l),y)try{this.drawingContext[u]=y[u]}catch{}c||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},d.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},d.default.prototype.createGraphics=function(s,l,c,a){return arguments[2]instanceof HTMLCanvasElement&&(c=i.P2D,a=arguments[2]),d.default._validateParameters("createGraphics",arguments),new d.default.Graphics(s,l,c,this,a)},d.default.prototype.createFramebuffer=function(s){return new d.default.Framebuffer(this,s)},d.default.prototype.blendMode=function(s){d.default._validateParameters("blendMode",arguments),s===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),s=i.BLEND),this._renderer.blendMode(s)},d.default);b.default=n},{"../webgl/p5.RendererGL":332,"./constants":264,"./main":275,"./p5.Graphics":277,"./p5.Renderer2D":279,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],282:[function(t,x,b){function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function d(l){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=n(t("../main")),f=function(l){if(l&&l.__esModule)return l;if(l===null||d(l)!=="object"&&typeof l!="function")return{default:l};var c=m();if(c&&c.has(l))return c.get(l);var a,u={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in l){var p;Object.prototype.hasOwnProperty.call(l,a)&&((p=y?Object.getOwnPropertyDescriptor(l,a):null)&&(p.get||p.set)?Object.defineProperty(u,a,p):u[a]=l[a])}return u.default=l,c&&c.set(l,u),u}(t("../constants")),g=n(t("../helpers"));function m(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,m=function(){return l},l)}function n(l){return l&&l.__esModule?l:{default:l}}function s(l){return function(c){if(Array.isArray(c)){for(var a=0,u=new Array(c.length);a<c.length;a++)u[a]=c[a];return u}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),i.default.prototype._normalizeArcAngles=function(l,c,a,u,y){var p;return l-=f.TWO_PI*Math.floor(l/f.TWO_PI),c-=f.TWO_PI*Math.floor(c/f.TWO_PI),p=Math.min(Math.abs(l-c),f.TWO_PI-Math.abs(l-c)),y&&(l=l<=f.HALF_PI?Math.atan(a/u*Math.tan(l)):l>f.HALF_PI&&l<=3*f.HALF_PI?Math.atan(a/u*Math.tan(l))+f.PI:Math.atan(a/u*Math.tan(l))+f.TWO_PI,c=c<=f.HALF_PI?Math.atan(a/u*Math.tan(c)):c>f.HALF_PI&&c<=3*f.HALF_PI?Math.atan(a/u*Math.tan(c))+f.PI:Math.atan(a/u*Math.tan(c))+f.TWO_PI),c<l&&(c+=f.TWO_PI),{start:l,stop:c,correspondToSamePoint:p<1e-5}},i.default.prototype.arc=function(l,c,a,u,y,p,v,w){return i.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&y!==p&&(y=this._toRadians(y),p=this._toRadians(p),a=Math.abs(a),u=Math.abs(u),l=g.default.modeAdjust(l,c,a,u,this._renderer._ellipseMode),(c=this._normalizeArcAngles(y,p,l.w,l.h,!0)).correspondToSamePoint?this._renderer.ellipse([l.x,l.y,l.w,l.h,w]):(this._renderer.arc(l.x,l.y,l.w,l.h,c.start,c.stop,v,w),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[l.x,l.y,l.w,l.h,c.start,c.stop,v]))),this},i.default.prototype.ellipse=function(l,c,a,u,y){return i.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},i.default.prototype.circle=function(){i.default._validateParameters("circle",arguments);var l=Array.prototype.slice.call(arguments,0,2);return l.push(arguments[2]),l.push(arguments[2]),this._renderEllipse.apply(this,s(l))},i.default.prototype._renderEllipse=function(l,c,a,u,y){return(this._renderer._doStroke||this._renderer._doFill)&&(a<0&&(a=Math.abs(a)),u===void 0?u=a:u<0&&(u=Math.abs(u)),l=g.default.modeAdjust(l,c,a,u,this._renderer._ellipseMode),this._renderer.ellipse([l.x,l.y,l.w,l.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[l.x,l.y,l.w,l.h])),this},i.default.prototype.line=function(){for(var l,c=arguments.length,a=new Array(c),u=0;u<c;u++)a[u]=arguments[u];return i.default._validateParameters("line",a),this._renderer._doStroke&&(l=this._renderer).line.apply(l,a),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",a),this},i.default.prototype.point=function(){for(var l,c=arguments.length,a=new Array(c),u=0;u<c;u++)a[u]=arguments[u];return i.default._validateParameters("point",a),this._renderer._doStroke&&(a.length===1&&a[0]instanceof i.default.Vector?this._renderer.point.call(this._renderer,a[0].x,a[0].y,a[0].z):((l=this._renderer).point.apply(l,a),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",a))),this},i.default.prototype.quad=function(){for(var l,c=arguments.length,a=new Array(c),u=0;u<c;u++)a[u]=arguments[u];return i.default._validateParameters("quad",a),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&a.length<12?this._renderer.quad.call(this._renderer,a[0],a[1],0,a[2],a[3],0,a[4],a[5],0,a[6],a[7],0,a[8],a[9]):((l=this._renderer).quad.apply(l,a),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",a))),this},i.default.prototype.rect=function(){for(var l=arguments.length,c=new Array(l),a=0;a<l;a++)c[a]=arguments[a];return i.default._validateParameters("rect",c),this._renderRect.apply(this,c)},i.default.prototype.square=function(l,c,a,u,y,p,v){return i.default._validateParameters("square",arguments),this._renderRect.call(this,l,c,a,a,u,y,p,v)},i.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var l=g.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),c=[l.x,l.y,l.w,l.h],a=4;a<arguments.length;a++)c[a]=arguments[a];this._renderer.rect(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[l.x,l.y,l.w,l.h])}return this},i.default.prototype.triangle=function(){for(var l=arguments.length,c=new Array(l),a=0;a<l;a++)c[a]=arguments[a];return i.default._validateParameters("triangle",c),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",c),this},t=i.default,b.default=t},{"../constants":264,"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../helpers":271,"../main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],283:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(m=t("../main"))&&m.__esModule?m:{default:m},f=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var s=g();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../constants"));function g(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,g=function(){return n},n)}i.default.prototype.ellipseMode=function(n){return i.default._validateParameters("ellipseMode",arguments),n!==f.CORNER&&n!==f.CORNERS&&n!==f.RADIUS&&n!==f.CENTER||(this._renderer._ellipseMode=n),this},i.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(n){return i.default._validateParameters("rectMode",arguments),n!==f.CORNER&&n!==f.CORNERS&&n!==f.RADIUS&&n!==f.CENTER||(this._renderer._rectMode=n),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(n){return i.default._validateParameters("strokeCap",arguments),n!==f.ROUND&&n!==f.SQUARE&&n!==f.PROJECT||this._renderer.strokeCap(n),this},i.default.prototype.strokeJoin=function(n){return i.default._validateParameters("strokeJoin",arguments),n!==f.ROUND&&n!==f.BEVEL&&n!==f.MITER||this._renderer.strokeJoin(n),this},i.default.prototype.strokeWeight=function(n){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(n),this};var m=i.default;b.default=m},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],284:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(d=t("../main"))&&d.__esModule?d:{default:d};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),h.default.prototype.bezier=function(){for(var i,f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return h.default._validateParameters("bezier",g),(this._renderer._doStroke||this._renderer._doFill)&&(i=this._renderer).bezier.apply(i,g),this},h.default.prototype.bezierDetail=function(i){return h.default._validateParameters("bezierDetail",arguments),this._bezierDetail=i,this},h.default.prototype.bezierPoint=function(i,f,g,m,n){h.default._validateParameters("bezierPoint",arguments);var s=1-n;return Math.pow(s,3)*i+3*Math.pow(s,2)*n*f+3*s*Math.pow(n,2)*g+Math.pow(n,3)*m},h.default.prototype.bezierTangent=function(i,f,g,m,n){h.default._validateParameters("bezierTangent",arguments);var s=1-n;return 3*m*Math.pow(n,2)-3*g*Math.pow(n,2)+6*g*s*n-6*f*s*n+3*f*Math.pow(s,2)-3*i*Math.pow(s,2)},h.default.prototype.curve=function(){for(var i,f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return h.default._validateParameters("curve",g),this._renderer._doStroke&&(i=this._renderer).curve.apply(i,g),this},h.default.prototype.curveDetail=function(i){return h.default._validateParameters("curveDetail",arguments),this._curveDetail=i<3?3:i,this},h.default.prototype.curveTightness=function(i){return h.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=i,this},h.default.prototype.curvePoint=function(i,f,g,m,n){h.default._validateParameters("curvePoint",arguments);var s=this._renderer._curveTightness,l=n*n*n,c=n*n;return i*((s-1)/2*l+(1-s)*c+(s-1)/2*n)+f*((s+3)/2*l+(-5-s)/2*c+1)+g*((-3-s)/2*l+(s+2)*c+(1-s)/2*n)+m*((1-s)/2*l+(s-1)/2*c)},h.default.prototype.curveTangent=function(i,f,g,m,c){h.default._validateParameters("curveTangent",arguments);var s=this._renderer._curveTightness,l=c*c*3,c=2*c;return i*((s-1)/2*l+(1-s)*c+(s-1)/2)+f*((s+3)/2*l+(-5-s)/2*c)+g*((-3-s)/2*l+(s+2)*c+(1-s)/2)+m*((1-s)/2*l+(s-1)/2*c)};var d=h.default;b.default=d},{"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../main":275}],285:[function(t,x,b){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function d(v){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(w){return h(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":h(w)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(p=t("../main"))&&p.__esModule?p:{default:p},f=function(v){if(v&&v.__esModule)return v;if(v===null||d(v)!=="object"&&typeof v!="function")return{default:v};var w=g();if(w&&w.has(v))return w.get(v);var C,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in v){var A;Object.prototype.hasOwnProperty.call(v,C)&&((A=j?Object.getOwnPropertyDescriptor(v,C):null)&&(A.get||A.set)?Object.defineProperty(T,C,A):T[C]=v[C])}return T.default=v,w&&w.set(v,T),T}(t("../constants"));function g(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,g=function(){return v},v)}var m=null,n=[],s=[],l=!1,c=!1,a=!1,u=!1,y=!0,p=(i.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(s=[],u=!0),this},i.default.prototype.beginShape=function(v){var w;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(m=v===f.POINTS||v===f.LINES||v===f.TRIANGLES||v===f.TRIANGLE_FAN||v===f.TRIANGLE_STRIP||v===f.QUADS||v===f.QUAD_STRIP?v:null,n=[],s=[]),this},i.default.prototype.bezierVertex=function(){for(var v,w=arguments.length,C=new Array(w),T=0;T<w;T++)C[T]=arguments[T];if(i.default._validateParameters("bezierVertex",C),this._renderer.isP3D)(v=this._renderer).bezierVertex.apply(v,C);else if(n.length===0)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{l=!0;for(var j=[],A=0;A<C.length;A++)j[A]=C[A];j.isVert=!1,(u?s:n).push(j)}return this},i.default.prototype.curveVertex=function(){for(var v,w=arguments.length,C=new Array(w),T=0;T<w;T++)C[T]=arguments[T];return i.default._validateParameters("curveVertex",C),this._renderer.isP3D?(v=this._renderer).curveVertex.apply(v,C):(c=!0,this.vertex(C[0],C[1])),this},i.default.prototype.endContour=function(){if(!this._renderer.isP3D){var v=s[0].slice();v.isVert=s[0].isVert,v.moveTo=!1,s.push(v),y&&(n.push(n[0]),y=!1);for(var w=0;w<s.length;w++)n.push(s[w])}return this},i.default.prototype.endShape=function(v){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(i.default._validateParameters("endShape",arguments),w<1&&(console.log(" p5.js says: You can not have less than one instance"),w=1),this._renderer.isP3D)this._renderer.endShape(v,c,l,a,u,m,w);else{if(w!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),n.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;w=v===f.CLOSE,w&&!u&&n.push(n[0]),this._renderer.endShape(v,n,c,l,a,u,m),y=!(u=a=l=c=!1),w&&n.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var v,w=arguments.length,C=new Array(w),T=0;T<w;T++)C[T]=arguments[T];if(i.default._validateParameters("quadraticVertex",C),this._renderer.isP3D)(v=this._renderer).quadraticVertex.apply(v,C);else{if(this._contourInited)return(v={}).x=C[0],v.y=C[1],v.x3=C[2],v.y3=C[3],v.type=f.QUADRATIC,this._contourVertices.push(v),this;if(0<n.length){a=!0;for(var j=[],A=0;A<C.length;A++)j[A]=C[A];j.isVert=!1,(u?s:n).push(j)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(v,w,C,T,j){var A;return this._renderer.isP3D?(A=this._renderer).vertex.apply(A,arguments):((A=[]).isVert=!0,A[0]=v,A[1]=w,A[2]=0,A[3]=0,A[4]=0,A[5]=this._renderer._getFill(),A[6]=this._renderer._getStroke(),C&&(A.moveTo=C),(u?(s.length===0&&(A.moveTo=!0),s):n).push(A)),this},i.default.prototype.normal=function(v,w,C){var T;return this._assert3d("normal"),i.default._validateParameters("normal",arguments),(T=this._renderer).normal.apply(T,arguments),this},i.default);b.default=p},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],286:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return function(s){if(Array.isArray(s)){for(var l=0,c=new Array(s.length);l<s.length;l++)c[l]=s[l];return c}}(n)||function(s){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]")return Array.from(s)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(n){return(i=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}var f,g,m;t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n,s){window.setTimeout(n,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(f=Object.keys,t=Object.defineProperty,g=typeof Symbol=="function"&&i(Symbol())==="symbol",m=Object.prototype.propertyIsEnumerable,t(Object,"assign",{value:function(n,s){if(n==null)throw new TypeError("target must be an object");for(var l,c=Object(n),a=1;a<arguments.length;++a){var u=Object(arguments[a]),y=f(u);for(g&&Object.getOwnPropertySymbols&&y.push.apply(y,d(Object.getOwnPropertySymbols(u).filter(function(p){return function(v){return m.call(p,v)}}(u)))),l=0;l<y.length;++l)c[y[l]]=u[y[l]]}return c},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/web.dom-collections.iterator":238}],287:[function(t,x,b){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var h=this._styles.pop();h?(this._renderer.pop(h.renderer),Object.assign(this,h.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(h){if(!this._inUserDraw&&this._setupDone){var d=parseInt(h),i=((isNaN(d)||d<1)&&(d=1),this._isGlobal?window:this);if(typeof i.draw=="function"){i.setup===void 0&&i.scale(i._pixelDensity,i._pixelDensity);for(var f=0;f<d;f++){i.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),i._renderer.isP3D&&i._renderer._update(),i._setProperty("frameCount",i.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{i.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,b.default=t},{"./main":275,"core-js/modules/es.object.assign":176}],288:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("./main"))&&t.__esModule?t:{default:t};function d(i){return function(f){if(Array.isArray(f)){for(var g=0,m=new Array(f.length);g<f.length;g++)m[g]=f[g];return m}}(i)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.applyMatrix=function(){var i=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||i?(i=this._renderer).applyMatrix.apply(i,d(arguments.length<=0?void 0:arguments[0])):(i=this._renderer).applyMatrix.apply(i,arguments),this},h.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},h.default.prototype.rotate=function(i,f){return h.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(i),f),this},h.default.prototype.rotateX=function(i){return this._assert3d("rotateX"),h.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(i)),this},h.default.prototype.rotateY=function(i){return this._assert3d("rotateY"),h.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(i)),this},h.default.prototype.rotateZ=function(i){return this._assert3d("rotateZ"),h.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(i)),this},h.default.prototype.scale=function(i,f,g){var m;return h.default._validateParameters("scale",arguments),i instanceof h.default.Vector?(i=(m=i).x,f=m.y,g=m.z):i instanceof Array&&(i=(m=i)[0],f=m[1],g=m[2]||1),isNaN(f)?f=g=i:isNaN(g)&&(g=1),this._renderer.scale.call(this._renderer,i,f,g),this},h.default.prototype.shearX=function(i){return h.default._validateParameters("shearX",arguments),i=this._toRadians(i),this._renderer.applyMatrix(1,0,Math.tan(i),1,0,0),this},h.default.prototype.shearY=function(i){return h.default._validateParameters("shearY",arguments),i=this._toRadians(i),this._renderer.applyMatrix(1,Math.tan(i),0,1,0,0),this},h.default.prototype.translate=function(i,f,g){return h.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(i,f,g):this._renderer.translate(i,f),this},t=h.default,b.default=t},{"./main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238}],289:[function(t,x,b){function h(g){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var d=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(g){return function(m){if(Array.isArray(m)){for(var n=0,s=new Array(m.length);n<m.length;n++)s[n]=m[n];return s}}(g)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(g){return(f=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(g)}d.default.prototype.storeItem=function(g,m){typeof g!="string"&&console.log("The argument that you passed to storeItem() - ".concat(g," is not a string.")),g.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(g," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var n=f(m);switch(n){case"number":case"boolean":m=m.toString();break;case"object":m instanceof d.default.Color?n="p5.Color":m instanceof d.default.Vector&&(n="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(g,m),g="".concat(g,"p5TypeID"),localStorage.setItem(g,n)},d.default.prototype.getItem=function(g){var m=localStorage.getItem(g),n=localStorage.getItem("".concat(g,"p5TypeID"));if(n===void 0)console.log("Unable to determine type of item stored under ".concat(g,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(n){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,i(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,i(m))}return m},d.default.prototype.clearStorage=function(){localStorage.clear()},d.default.prototype.removeItem=function(g){typeof g!="string"&&console.log("The argument that you passed to removeItem() - ".concat(g," is not a string.")),localStorage.removeItem(g),localStorage.removeItem("".concat(g,"p5TypeID"))}},{"../core/main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],290:[function(t,x,b){function h(a){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(a)}function d(a){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(u&&u.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),u&&g(a,u)}function g(a,u){return(g=Object.setPrototypeOf||function(y,p){return y.__proto__=p,y})(a,u)}function m(a){return function(){var u,y=n(a),y=(u=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(u=n(this).constructor,Reflect.construct(y,arguments,u)):y.apply(this,arguments),this);if(!u||d(u)!=="object"&&typeof u!="function"){if(y!==void 0)return y;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return u}}function n(a){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(a)}function s(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function l(a,u){for(var y=0;y<u.length;y++){var p=u[y];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(a,p.key,p)}}function c(a,u,y){u&&l(a.prototype,u),y&&l(a,y)}i.default.prototype.createStringDict=function(a,u){return i.default._validateParameters("createStringDict",arguments),new i.default.StringDict(a,u)},i.default.prototype.createNumberDict=function(a,u){return i.default._validateParameters("createNumberDict",arguments),new i.default.NumberDict(a,u)},i.default.TypedDict=function(){function a(u,y){return s(this,a),u instanceof Object?this.data=u:(this.data={},this.data[u]=y),this}return c(a,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(u){return this.data.hasOwnProperty(u)}},{key:"get",value:function(u){if(this.data.hasOwnProperty(u))return this.data[u];console.log("".concat(u," does not exist in this Dictionary"))}},{key:"set",value:function(u,y){this._validate(y)?this.data[u]=y:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(u){for(var y in u)this.set(y,u[y])}},{key:"create",value:function(u,y){u instanceof Object&&y===void 0?this._addObj(u):u!==void 0?this.set(u,y):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(u){if(!this.data.hasOwnProperty(u))throw new Error("".concat(u," does not exist in this Dictionary"));delete this.data[u]}},{key:"print",value:function(){for(var u in this.data)console.log("key:".concat(u," value:").concat(this.data[u]))}},{key:"saveTable",value:function(u){var y,p="";for(y in this.data)p+="".concat(y,",").concat(this.data[y],`
`);var v=new Blob([p],{type:"text/csv"});i.default.prototype.downloadFile(v,u||"mycsv","csv")}},{key:"saveJSON",value:function(u,y){i.default.prototype.saveJSON(this.data,u,y)}},{key:"_validate",value:function(u){return!0}}]),a}(),i.default.StringDict=function(){f(u,i.default.TypedDict);var a=m(u);function u(){s(this,u);for(var y=arguments.length,p=new Array(y),v=0;v<y;v++)p[v]=arguments[v];return a.call.apply(a,[this].concat(p))}return c(u,[{key:"_validate",value:function(y){return typeof y=="string"}}]),u}(),i.default.NumberDict=function(){f(u,i.default.TypedDict);var a=m(u);function u(){s(this,u);for(var y=arguments.length,p=new Array(y),v=0;v<y;v++)p[v]=arguments[v];return a.call.apply(a,[this].concat(p))}return c(u,[{key:"_validate",value:function(y){return typeof y=="number"}},{key:"add",value:function(y,p){this.data.hasOwnProperty(y)?this.data[y]+=p:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"sub",value:function(y,p){this.add(y,-p)}},{key:"mult",value:function(y,p){this.data.hasOwnProperty(y)?this.data[y]*=p:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"div",value:function(y,p){this.data.hasOwnProperty(y)?this.data[y]/=p:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"_valueTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var p,v=this.data[Object.keys(this.data)[0]];for(p in this.data)this.data[p]*y<v*y&&(v=this.data[p]);return v}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var p=Object.keys(this.data)[0],v=1;v<Object.keys(this.data).length;v++)Object.keys(this.data)[v]*y<p*y&&(p=Object.keys(this.data)[v]);return p}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),u}(),t=i.default.TypedDict,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],291:[function(t,x,b){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(p,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(p,C.key,C)}}function f(p,v,w){v&&i(p.prototype,v),w&&i(p,w)}function g(p,v){return(g=Object.setPrototypeOf||function(w,C){return w.__proto__=C,w})(p,v)}function m(p){return function(){var v,w,C=s(p);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=s(this).constructor,Reflect.construct(C,arguments,v)):C.apply(this,arguments),C=this,!(w=v)||c(w)!=="object"&&typeof w!="function"?n(C):w}}function n(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function s(p){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(p)}function l(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function c(p){return(c=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(v){return h(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":h(v)})(p)}function a(p,v,w){return(v._userNode||document.body).appendChild(p),w=new(w?d.default.MediaElement:d.default.Element)(p,v),v._elements.push(w),w}function u(p,A,w,C){var T=document.createElement(A),j=(typeof(w=w||"")=="string"&&(w=[w]),!0),A=!1,L=void 0;try{for(var M,k=w[Symbol.iterator]();!(j=(M=k.next()).done);j=!0){var O=M.value,N=document.createElement("source");N.setAttribute("src",O),T.appendChild(N)}}catch(V){A=!0,L=V}finally{try{j||k.return==null||k.return()}finally{if(A)throw L}}typeof C=="function"&&T.addEventListener("canplaythrough",function V(){C(),T.removeEventListener("canplaythrough",V)});var U=a(T,p,!0);return U.loadedmetadata=!1,T.addEventListener("loadedmetadata",function(){U.width=T.videoWidth,U.height=T.videoHeight,U.elt.width===0&&(U.elt.width=T.videoWidth),U.elt.height===0&&(U.elt.height=T.videoHeight),U.presetPlaybackRate&&(U.elt.playbackRate=U.presetPlaybackRate,delete U.presetPlaybackRate),U.loadedmetadata=!0}),U}d.default.prototype.select=function(p,v){return d.default._validateParameters("select",arguments),v=this._getContainer(v).querySelector(p),v?this._wrapElement(v):null},d.default.prototype.selectAll=function(p,v){d.default._validateParameters("selectAll",arguments);var w=[],C=this._getContainer(v).querySelectorAll(p);if(C)for(var T=0;T<C.length;T++){var j=this._wrapElement(C[T]);w.push(j)}return w},d.default.prototype._getContainer=function(p){var v=document;return typeof p=="string"?v=document.querySelector(p)||document:p instanceof d.default.Element?v=p.elt:p instanceof HTMLElement&&(v=p),v},d.default.prototype._wrapElement=function(p){var v,w=Array.prototype.slice.call(p.children);return p.tagName==="INPUT"&&p.type==="checkbox"?((v=new d.default.Element(p,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},v):p.tagName==="VIDEO"||p.tagName==="AUDIO"?new d.default.MediaElement(p,this):p.tagName==="SELECT"?this.createSelect(new d.default.Element(p,this)):0<w.length&&w.every(function(C){return C.tagName==="INPUT"||C.tagName==="LABEL"})?this.createRadio(new d.default.Element(p,this)):new d.default.Element(p,this)},d.default.prototype.removeElements=function(p){d.default._validateParameters("removeElements",arguments),this._elements.filter(function(v){return!(v.elt instanceof HTMLCanvasElement)}).map(function(v){return v.remove()})},d.default.Element.prototype.changed=function(p){return d.default.Element._adjustListener("change",p,this),this},d.default.Element.prototype.input=function(p){return d.default.Element._adjustListener("input",p,this),this},d.default.prototype.createDiv=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=document.createElement("div");return v.innerHTML=p,a(v,this)},d.default.prototype.createP=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=document.createElement("p");return v.innerHTML=p,a(v,this)},d.default.prototype.createSpan=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=document.createElement("span");return v.innerHTML=p,a(v,this)},d.default.prototype.createImg=function(){d.default._validateParameters("createImg",arguments);var p,v=document.createElement("img"),w=arguments;return 1<w.length&&typeof w[1]=="string"&&(v.alt=w[1]),2<w.length&&typeof w[2]=="string"&&(v.crossOrigin=w[2]),v.src=w[0],p=a(v,this),v.addEventListener("load",function(){p.width=v.offsetWidth||v.width,p.height=v.offsetHeight||v.height;var C=w[w.length-1];typeof C=="function"&&C(p)}),p},d.default.prototype.createA=function(p,v,w){d.default._validateParameters("createA",arguments);var C=document.createElement("a");return C.href=p,C.innerHTML=v,w&&(C.target=w),a(C,this)},d.default.prototype.createSlider=function(p,v,w,C){d.default._validateParameters("createSlider",arguments);var T=document.createElement("input");return T.type="range",T.min=p,T.max=v,C===0?T.step=1e-18:C&&(T.step=C),typeof w=="number"&&(T.value=w),a(T,this)},d.default.prototype.createButton=function(p,v){d.default._validateParameters("createButton",arguments);var w=document.createElement("button");return w.innerHTML=p,v&&(w.value=v),a(w,this)},d.default.prototype.createCheckbox=function(){for(var p=arguments.length,v=new Array(p),w=0;w<p;w++)v[w]=arguments[w];d.default._validateParameters("createCheckbox",v);var C=document.createElement("div"),T=document.createElement("input"),j=(T.type="checkbox",document.createElement("label")),A=(j.appendChild(T),C.appendChild(j),a(C,this));return A.checked=function(){var L=A.elt.firstElementChild.getElementsByTagName("input")[0];if(L){if(arguments.length===0)return L.checked;L.checked=!(arguments.length<=0||!arguments[0])}return A},this.value=function(L){return A.value=L,this},v[0]&&(A.value(v[0]),(C=document.createElement("span")).innerHTML=v[0],j.appendChild(C)),v[1]&&(T.checked=!0),A},d.default.prototype.createSelect=function(){for(var p,v=arguments.length,w=new Array(v),C=0;C<v;C++)w[C]=arguments[C];d.default._validateParameters("createSelect",w);var T,j=w[0];return j instanceof d.default.Element&&j.elt instanceof HTMLSelectElement?this.elt=(p=j).elt:j instanceof HTMLSelectElement?(p=a(j,this),this.elt=j):(T=document.createElement("select"),j&&typeof j=="boolean"&&T.setAttribute("multiple","true"),p=a(T,this),this.elt=T),p.option=function(A,L){var M;if(A!==void 0){for(var k,O=0;O<this.elt.length;O+=1)if(this.elt[O].textContent===A){M=O;break}M!==void 0?L===!1?this.elt.remove(M):this.elt[M].value=L:((k=document.createElement("option")).textContent=A,k.value=L===void 0?A:L,this.elt.appendChild(k),this._pInst._elements.push(k))}},p.selected=function(A){if(A!==void 0){for(var L=0;L<this.elt.length;L+=1)this.elt[L].value.toString()===A.toString()&&(this.elt.selectedIndex=L);return this}if(this.elt.getAttribute("multiple")){var M=[],k=!0,O=!1,N=void 0;try{for(var U,V=this.elt.selectedOptions[Symbol.iterator]();!(k=(U=V.next()).done);k=!0){var G=U.value;M.push(G.value)}}catch(z){O=!0,N=z}finally{try{k||V.return==null||V.return()}finally{if(O)throw N}}return M}return this.elt.value},p.disable=function(A){if(typeof A=="string")for(var L=0;L<this.elt.length;L++)this.elt[L].value.toString()===A&&(this.elt[L].disabled=!0,this.elt[L].selected=!1);else this.elt.disabled=!0;return this},p.enable=function(A){if(typeof A=="string")for(var L=0;L<this.elt.length;L++)this.elt[L].value.toString()===A&&(this.elt[L].disabled=!1,this.elt[L].selected=!1);else{this.elt.disabled=!1;for(var M=0;M<this.elt.length;M++)this.elt[M].disabled=!1,this.elt[M].selected=!1}return this},p},d.default.prototype.createRadio=function(){function p(A){return A instanceof HTMLInputElement&&A.type==="radio"}function v(A){return A instanceof HTMLLabelElement}var w,C,T,j=arguments.length<=0?void 0:arguments[0];return j instanceof d.default.Element&&(j.elt instanceof HTMLDivElement||j.elt instanceof HTMLSpanElement)?(w=j,this.elt=j.elt):j instanceof HTMLDivElement||j instanceof HTMLSpanElement?(w=a(j,this),C=this.elt=j,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(T=arguments.length<=1?void 0:arguments[1])):(typeof j=="string"&&(T=j),C=document.createElement("div"),w=a(C,this),this.elt=C),w._name=T||"radioOption",w._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(A){return p(A)||v(A)&&p(A.firstElementChild)}).map(function(A){return p(A)?A:A.firstElementChild})},w.option=function(A,L){var M,k,O,N=!0,U=!1,V=void 0;try{for(var G,z=w._getOptionsArray()[Symbol.iterator]();!(N=(G=z.next()).done);N=!0){var W=G.value;if(W.value===A){M=W;break}}}catch(Z){U=!0,V=Z}finally{try{N||z.return==null||z.return()}finally{if(U)throw V}}return M===void 0&&((M=document.createElement("input")).setAttribute("type","radio"),M.setAttribute("value",A)),M.setAttribute("name",w._name),v(M.parentElement)?k=M.parentElement:(k=document.createElement("label")).insertAdjacentElement("afterbegin",M),k.lastElementChild instanceof HTMLSpanElement?O=k.lastElementChild:(O=document.createElement("span"),M.insertAdjacentElement("afterend",O)),O.innerHTML=L===void 0?A:L,this.elt.appendChild(k),M},w.remove=function(A){var L=!0,M=!1,k=void 0;try{for(var O,N=w._getOptionsArray()[Symbol.iterator]();!(L=(O=N.next()).done);L=!0){var U=O.value;if(U.value===A)return void(v(U.parentElement)?U.parentElement:U).remove()}}catch(V){M=!0,k=V}finally{try{L||N.return==null||N.return()}finally{if(M)throw k}}},w.value=function(){var A="",L=!0,M=!1,k=void 0;try{for(var O,N=w._getOptionsArray()[Symbol.iterator]();!(L=(O=N.next()).done);L=!0){var U=O.value;if(U.checked){A=U.value;break}}}catch(V){M=!0,k=V}finally{try{L||N.return==null||N.return()}finally{if(M)throw k}}return A},w.selected=function(A){var L=null;if(A===void 0){var M=!0,k=!1,O=void 0;try{for(var N,U=w._getOptionsArray()[Symbol.iterator]();!(M=(N=U.next()).done);M=!0){var V=N.value;if(V.checked){L=V;break}}}catch(I){k=!0,O=I}finally{try{M||U.return==null||U.return()}finally{if(k)throw O}}}else{w._getOptionsArray().forEach(function(D){D.checked=!1,D.removeAttribute("checked")});var G=!0,k=!1,O=void 0;try{for(var z,W=w._getOptionsArray()[Symbol.iterator]();!(G=(z=W.next()).done);G=!0){var Z=z.value;Z.value===A&&(Z.setAttribute("checked",!0),Z.checked=!0,L=Z)}}catch(D){k=!0,O=D}finally{try{G||W.return==null||W.return()}finally{if(k)throw O}}}return L},w.disable=function(){var A=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],L=!0,M=!1,k=void 0;try{for(var O,N=w._getOptionsArray()[Symbol.iterator]();!(L=(O=N.next()).done);L=!0)O.value.setAttribute("disabled",A)}catch(U){M=!0,k=U}finally{try{L||N.return==null||N.return()}finally{if(M)throw k}}},w},d.default.prototype.createColorPicker=function(p){d.default._validateParameters("createColorPicker",arguments);var v=document.createElement("input");return v.type="color",p?p instanceof d.default.Color?v.value=p.toString("#rrggbb"):(d.default.prototype._colorMode="rgb",d.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},v.value=d.default.prototype.color(p).toString("#rrggbb")):v.value="#000000",(v=a(v,this)).color=function(){return p&&(p.mode&&(d.default.prototype._colorMode=p.mode),p.maxes&&(d.default.prototype._colorMaxes=p.maxes)),d.default.prototype.color(this.elt.value)},v},d.default.prototype.createInput=function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",w=(d.default._validateParameters("createInput",arguments),document.createElement("input"));return w.setAttribute("value",p),w.setAttribute("type",v),a(w,this)},d.default.prototype.createFileInput=function(p){var v,w=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(d.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(v=document.createElement("input")).setAttribute("type","file"),w&&v.setAttribute("multiple",!0),v.addEventListener("change",function(C){var T=!0,j=!1,A=void 0;try{for(var L,M=C.target.files[Symbol.iterator]();!(T=(L=M.next()).done);T=!0){var k=L.value;d.default.File._load(k,p)}}catch(O){j=!0,A=O}finally{try{T||M.return==null||M.return()}finally{if(j)throw A}}},!1),a(v,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},d.default.prototype.createVideo=function(p,v){return d.default._validateParameters("createVideo",arguments),u(this,"video",p,v)},d.default.prototype.createAudio=function(p,v){return d.default._validateParameters("createAudio",arguments),u(this,"audio",p,v)},d.default.prototype.VIDEO="video",d.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(p){var v=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return v?new Promise(function(w,C){v.call(navigator,p,w,C)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),d.default.prototype.createCapture=function(){for(var p=arguments.length,v=new Array(p),w=0;w<p;w++)v[w]=arguments[w];if(d.default._validateParameters("createCapture",v),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var C,T=!0,j=!0,A=0,L=v;A<L.length;A++){var M=L[A];M===d.default.prototype.VIDEO?j=!1:M===d.default.prototype.AUDIO?T=!1:c(M)==="object"?k=M:typeof M=="function"&&(C=M)}var k=k||{video:T,audio:j},O=document.createElement("video"),N=(O.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(k).then(function(U){try{"srcObject"in O?O.srcObject=U:O.src=window.URL.createObjectURL(U)}catch{O.src=U}},console.log),a(O,this,!0));return N.loadedmetadata=!1,O.addEventListener("loadedmetadata",function(){O.play(),O.width?(N.width=O.width,N.height=O.height):(N.width=N.elt.width=O.videoWidth,N.height=N.elt.height=O.videoHeight),N.loadedmetadata=!0,C&&C(O.srcObject)}),N},d.default.prototype.createElement=function(p,v){return d.default._validateParameters("createElement",arguments),p=document.createElement(p),v!==void 0&&(p.innerHTML=v),a(p,this)},d.default.Element.prototype.addClass=function(p){return this.elt.className?this.hasClass(p)||(this.elt.className=this.elt.className+" "+p):this.elt.className=p,this},d.default.Element.prototype.removeClass=function(p){return this.elt.classList.remove(p),this},d.default.Element.prototype.hasClass=function(p){return this.elt.classList.contains(p)},d.default.Element.prototype.toggleClass=function(p){return this.elt.classList.contains(p)?this.elt.classList.remove(p):this.elt.classList.add(p),this},d.default.Element.prototype.child=function(p){return p===void 0?this.elt.childNodes:(typeof p=="string"?(p[0]==="#"&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof d.default.Element&&(p=p.elt),p instanceof HTMLElement&&this.elt.appendChild(p),this)},d.default.Element.prototype.center=function(p){var v=this.elt.style.display,w=this.elt.style.display==="none",C=this.parent().style.display==="none",T={x:this.elt.offsetLeft,y:this.elt.offsetTop},j=(w&&this.show(),C&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),A=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return p==="both"||p===void 0?this.position(j/2+this.parent().offsetLeft,A/2+this.parent().offsetTop):p==="horizontal"?this.position(j/2+this.parent().offsetLeft,T.y):p==="vertical"&&this.position(T.x,A/2+this.parent().offsetTop),this.style("display",v),w&&this.hide(),C&&this.parent().hide(),this},d.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},d.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},d.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var p="";return this.elt.style.transform&&(p=(p=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=p,this},d.default.Element.prototype._rotate=function(){var p="";return this.elt.style.transform&&(p=(p=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=p,this},d.default.Element.prototype.style=function(p,v){if((v=v instanceof d.default.Color?"rgba("+v.levels[0]+","+v.levels[1]+","+v.levels[2]+","+v.levels[3]/255+")":v)===void 0){if(p.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(p);for(var w=p.split(";"),C=0;C<w.length;C++){var T=w[C].split(":");T[0]&&T[1]&&(this.elt.style[T[0].trim()]=T[1].trim())}}else this.elt.style[p]=v,p!=="width"&&p!=="height"&&p!=="left"&&p!=="top"||(v=window.getComputedStyle(this.elt).getPropertyValue(p).replace(/[^\d.]/g,""),this[p]=Math.round(parseFloat(v,10)));return this},d.default.Element.prototype.attribute=function(p,v){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return v===void 0?this.elt.getAttribute(p):(this.elt.setAttribute(p,v),this);if(v===void 0)return this.elt.firstChild.getAttribute(p);for(var w=0;w<this.elt.childNodes.length;w++)this.elt.childNodes[w].setAttribute(p,v)},d.default.Element.prototype.removeAttribute=function(p){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var v=0;v<this.elt.childNodes.length;v++)this.elt.childNodes[v].removeAttribute(p);return this.elt.removeAttribute(p),this},d.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},d.default.Element.prototype.show=function(){return this.elt.style.display="block",this},d.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},d.default.Element.prototype.size=function(p,v){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var w=p,C=v,T=d.default.prototype.AUTO;if(w!==T||C!==T){if(w===T?w=v*this.width/this.height:C===T&&(C=p*this.height/this.width),this.elt instanceof HTMLCanvasElement){var j,A={},L=this.elt.getContext("2d");for(j in L)A[j]=L[j];for(j in this.elt.setAttribute("width",w*this._pInst._pixelDensity),this.elt.setAttribute("height",C*this._pInst._pixelDensity),this.elt.style.width=w+"px",this.elt.style.height=C+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),A)this.elt.getContext("2d")[j]=A[j]}else this.elt.style.width=w+"px",this.elt.style.height=C+"px",this.elt.width=w,this.elt.height=C;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},d.default.Element.prototype.remove=function(){this instanceof d.default.MediaElement&&(this.stop(),(v=this.elt.srcObject)!==null&&v.getTracks().forEach(function(w){w.stop()}));var p,v=this._pInst._elements.indexOf(this);for(p in v!==-1&&this._pInst._elements.splice(v,1),this._events)this.elt.removeEventListener(p,this._events[p]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},d.default.Element.prototype.drop=function(p,v){var w;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",w=function(C){C.preventDefault()}),this.elt.addEventListener("dragleave",w)),d.default.Element._attachListener("drop",function(T){T.preventDefault(),typeof v=="function"&&v.call(this,T);var T=T.dataTransfer.files,j=!0,A=!1,L=void 0;try{for(var M,k=T[Symbol.iterator]();!(j=(M=k.next()).done);j=!0){var O=M.value;d.default.File._load(O,p)}}catch(N){A=!0,L=N}finally{try{j||k.return==null||k.return()}finally{if(A)throw L}}},this)):console.log("The File APIs are not fully supported in this browser."),this};function y(p,v,w,C){l(this,y),this.callback=p,this.time=v,this.id=w,this.val=C}t=function(p){var v=C;if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(p&&p.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),p&&g(v,p);var w=m(C);function C(T,j){l(this,C);var A=n(j=w.call(this,T,j));return j.elt.crossOrigin="anonymous",j._prevTime=0,j._cueIDCounter=0,j._cues=[],j.pixels=[],j._pixelsState=n(j),j._pixelDensity=1,j._modified=!1,j._frameOnCanvas=-1,Object.defineProperty(A,"src",{get:function(){var L=A.elt.children[0].src,M=A.elt.src===window.location.href?"":A.elt.src;return L===window.location.href?M:L},set:function(L){for(var M=0;M<A.elt.children.length;M++)A.elt.removeChild(A.elt.children[M]);var k=document.createElement("source");k.src=L,T.appendChild(k),A.elt.src=L,A.modified=!0}}),A._onended=function(){},A.elt.onended=function(){A._onended(A)},j}return f(C,[{key:"play",value:function(){var T;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(T=this.elt.play())&&T.catch&&T.catch(function(j){j.name==="NotAllowedError"?console.error(j):console.error("Media play method encountered an unexpected error",j)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var T=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(T)},{passive:!0,once:!0})}},{key:"autoplay",value:function(T){var j=this,A=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",T),T&&!A&&(T=function(){return j._setupAutoplayFailDetection()},this.elt.readyState===4?T():this.elt.addEventListener("canplay",T,{passive:!0,once:!0})),this}},{key:"volume",value:function(T){if(T===void 0)return this.elt.volume;this.elt.volume=T}},{key:"speed",value:function(T){if(T===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=T:this.presetPlaybackRate=T}},{key:"time",value:function(T){return T===void 0?this.elt.currentTime:(this.elt.currentTime=T,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var T=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&T&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];return d.default.Renderer2D.prototype.loadPixels.apply(this,j)}},{key:"updatePixels",value:function(T,j,A,L){return this.loadedmetadata&&(this._ensureCanvas(),d.default.Renderer2D.prototype.updatePixels.call(this,T,j,A,L)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];return d.default.Renderer2D.prototype.get.apply(this,j)}},{key:"_getPixel",value:function(){this.loadPixels();for(var T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];return d.default.Renderer2D.prototype._getPixel.apply(this,j)}},{key:"set",value:function(T,j,A){this.loadedmetadata&&(this._ensureCanvas(),d.default.Renderer2D.prototype.set.call(this,T,j,A),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];d.default.prototype.copy.apply(this,j)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];d.default.Image.prototype.mask.apply(this,j)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(T){this._modified=T}},{key:"onended",value:function(T){return this._onended=T,this}},{key:"connect",value:function(T){var j,A;if(typeof d.default.prototype.getAudioContext=="function")j=d.default.prototype.getAudioContext(),A=d.default.soundOut.input;else try{A=(j=T.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=j.createMediaElementSource(this.elt),this.audioSourceNode.connect(A)),T?T.input?this.audioSourceNode.connect(T.input):this.audioSourceNode.connect(T):this.audioSourceNode.connect(A)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(T,M,A){var L=this._cueIDCounter++,M=new y(M,T,L,A);return this._cues.push(M),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),L}},{key:"removeCue",value:function(T){for(var j=0;j<this._cues.length;j++)this._cues[j].id===T&&(console.log(T),this._cues.splice(j,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var T=this.time(),j=0;j<this._cues.length;j++){var A=this._cues[j].time,L=this._cues[j].val;this._prevTime<A&&A<=T&&this._cues[j].callback(L)}this._prevTime=T}}]),C}(d.default.Element),d.default.MediaElement=t,t=function(){function p(v,w){l(this,p),this.file=v,this._pInst=w,w=v.type.split("/"),this.type=w[0],this.subtype=w[1],this.name=v.name,this.size=v.size,this.data=void 0}return f(p,null,[{key:"_createLoader",value:function(v,w){var C=new FileReader;return C.onload=function(T){var j,A=new d.default.File(v);A.file.type==="application/json"?A.data=JSON.parse(T.target.result):A.file.type==="text/xml"?(j=new DOMParser().parseFromString(T.target.result,"text/xml"),A.data=new d.default.XML(j.documentElement)):A.data=T.target.result,w(A)},C}},{key:"_load",value:function(v,w){var C;/^text\//.test(v.type)||v.type==="application/json"?d.default.File._createLoader(v,w).readAsText(v):/^(video|audio)\//.test(v.type)?((C=new d.default.File(v)).data=URL.createObjectURL(v),w(C)):d.default.File._createLoader(v,w).readAsDataURL(v)}}]),p}(),d.default.File=t,t=d.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240}],292:[function(t,x,b){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function d(v){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(w){return h(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":h(w)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(p=t("../core/main"))&&p.__esModule?p:{default:p},f=function(v){if(v&&v.__esModule)return v;if(v===null||d(v)!=="object"&&typeof v!="function")return{default:v};var w=g();if(w&&w.has(v))return w.get(v);var C,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in v){var A;Object.prototype.hasOwnProperty.call(v,C)&&((A=j?Object.getOwnPropertyDescriptor(v,C):null)&&(A.get||A.set)?Object.defineProperty(T,C,A):T[C]=v[C])}return T.default=v,w&&w.set(v,T),T}(t("../core/constants"));function g(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,g=function(){return v},v)}i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var m=i.default.prototype.pRotationZ=0,n=0,s=0,l="clockwise",c="clockwise",a="clockwise",u=(i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0,.5),y=30,p=(i.default.prototype.setMoveThreshold=function(v){i.default._validateParameters("setMoveThreshold",arguments),u=v},i.default.prototype.setShakeThreshold=function(v){i.default._validateParameters("setShakeThreshold",arguments),y=v},i.default.prototype._ondeviceorientation=function(v){this._updatePRotations(),this._angleMode===f.radians&&(v.beta=v.beta*(_PI/180),v.gamma=v.gamma*(_PI/180),v.alpha=v.alpha*(_PI/180)),this._setProperty("rotationX",v.beta),this._setProperty("rotationY",v.gamma),this._setProperty("rotationZ",v.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(v){this._updatePAccelerations(),this._setProperty("accelerationX",2*v.acceleration.x),this._setProperty("accelerationY",2*v.acceleration.y),this._setProperty("accelerationZ",2*v.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var v,w,C,T,j,A=this._isGlobal?window:this;typeof A.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>u||Math.abs(this.accelerationY-this.pAccelerationY)>u||Math.abs(this.accelerationZ-this.pAccelerationZ)>u)&&A.deviceMoved(),typeof A.deviceTurned=="function"&&(w=this.rotationX+180,v=this.pRotationX+180,C=m+180,0<w-v&&w-v<270||w-v<-270?l="clockwise":(w-v<0||270<w-v)&&(l="counter-clockwise"),l!==this.pRotateDirectionX&&(C=w),90<Math.abs(w-C)&&Math.abs(w-C)<270&&(C=w,this._setProperty("turnAxis","X"),A.deviceTurned()),this.pRotateDirectionX=l,m=C-180,v=this.rotationY+180,w=this.pRotationY+180,C=n+180,0<v-w&&v-w<270||v-w<-270?c="clockwise":(v-w<0||270<v-this.pRotationY)&&(c="counter-clockwise"),c!==this.pRotateDirectionY&&(C=v),90<Math.abs(v-C)&&Math.abs(v-C)<270&&(C=v,this._setProperty("turnAxis","Y"),A.deviceTurned()),this.pRotateDirectionY=c,n=C-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?a="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(a="counter-clockwise"),a!==this.pRotateDirectionZ&&(s=this.rotationZ),90<Math.abs(this.rotationZ-s)&&Math.abs(this.rotationZ-s)<270&&(s=this.rotationZ,this._setProperty("turnAxis","Z"),A.deviceTurned()),this.pRotateDirectionZ=a,this._setProperty("turnAxis",void 0)),typeof A.deviceShaken=="function"&&(this.pAccelerationX!==null&&(T=Math.abs(this.accelerationX-this.pAccelerationX),j=Math.abs(this.accelerationY-this.pAccelerationY)),y<T+j&&A.deviceShaken())},i.default);b.default=p},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],293:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.isKeyPressed=!1,h.default.prototype.keyIsPressed=!1,h.default.prototype.key="",h.default.prototype.keyCode=0,h.default.prototype._onkeydown=function(d){var i;this._downKeys[d.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",d.which),this._downKeys[d.which]=!0,this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),typeof(i=this._isGlobal?window:this).keyPressed!="function"||d.charCode||i.keyPressed(d)===!1&&d.preventDefault())},h.default.prototype._onkeyup=function(d){this._downKeys[d.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),this._setProperty("keyCode",d.which);var i=this._isGlobal?window:this;typeof i.keyReleased=="function"&&i.keyReleased(d)===!1&&d.preventDefault()},h.default.prototype._onkeypress=function(d){var i;d.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",d.which),this._setProperty("key",d.key||String.fromCharCode(d.which)||d.which),typeof(i=this._isGlobal?window:this).keyTyped=="function"&&i.keyTyped(d)===!1&&d.preventDefault())},h.default.prototype._onblur=function(d){this._downKeys={}},h.default.prototype.keyIsDown=function(d){return h.default._validateParameters("keyIsDown",arguments),this._downKeys[d]||!1},h.default.prototype._areDownKeys=function(){for(var d in this._downKeys)if(this._downKeys.hasOwnProperty(d)&&this._downKeys[d]===!0)return!0;return!1},t=h.default,b.default=t},{"../core/main":275}],294:[function(t,x,b){function h(m){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(m)}function d(m){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(n){return h(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":h(n)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(i=t("../core/main"))&&i.__esModule?i:{default:i},f=function(m){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var n=g();if(n&&n.has(m))return n.get(m);var s,l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in m){var a;Object.prototype.hasOwnProperty.call(m,s)&&((a=c?Object.getOwnPropertyDescriptor(m,s):null)&&(a.get||a.set)?Object.defineProperty(l,s,a):l[s]=m[s])}return l.default=m,n&&n.set(m,l),l}(t("../core/constants"));function g(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,g=function(){return m},m)}i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(m){var n,s,l,c,a;this._curElement!==null&&(!m.touches||0<m.touches.length)&&(n=this._curElement.elt,s=this.width,l=this.height,(c=m)&&!c.clientX&&(c.touches?c=c.touches[0]:c.changedTouches&&(c=c.changedTouches[0])),a=n.getBoundingClientRect(),s=n.scrollWidth/s||1,n=n.scrollHeight/l||1,l={x:(c.clientX-a.left)/s,y:(c.clientY-a.top)/n,winX:c.clientX,winY:c.clientY,id:c.identifier},this._setProperty("movedX",m.movementX),this._setProperty("movedY",m.movementY),this._setProperty("mouseX",l.x),this._setProperty("mouseY",l.y),this._setProperty("winMouseX",l.winX),this._setProperty("winMouseY",l.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(m){m.button===1?this._setProperty("mouseButton",f.CENTER):m.button===2?this._setProperty("mouseButton",f.RIGHT):this._setProperty("mouseButton",f.LEFT)},i.default.prototype._onmousemove=function(m){var n=this._isGlobal?window:this;this._updateNextMouseCoords(m),this.mouseIsPressed?typeof n.mouseDragged=="function"?n.mouseDragged(m)===!1&&m.preventDefault():typeof n.touchMoved=="function"&&n.touchMoved(m)===!1&&m.preventDefault():typeof n.mouseMoved=="function"&&n.mouseMoved(m)===!1&&m.preventDefault()},i.default.prototype._onmousedown=function(m){var n=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(m),this._updateNextMouseCoords(m),typeof n.mousePressed=="function"?n.mousePressed(m)===!1&&m.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof n.touchStarted=="function"&&n.touchStarted(m)===!1&&m.preventDefault()},i.default.prototype._onmouseup=function(m){var n=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof n.mouseReleased=="function"?n.mouseReleased(m)===!1&&m.preventDefault():typeof n.touchEnded=="function"&&n.touchEnded(m)===!1&&m.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(m){var n=this._isGlobal?window:this;typeof n.mouseClicked=="function"&&n.mouseClicked(m)===!1&&m.preventDefault()},i.default.prototype._ondblclick=function(m){var n=this._isGlobal?window:this;typeof n.doubleClicked=="function"&&n.doubleClicked(m)===!1&&m.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(m){var n=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",m.deltaY),typeof n.mouseWheel=="function"&&(m.delta=m.deltaY,n.mouseWheel(m)===!1&&m.preventDefault())},i.default.prototype.requestPointerLock=function(){var m=this._curElement.elt;return m.requestPointerLock=m.requestPointerLock||m.mozRequestPointerLock,m.requestPointerLock?(m.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=i.default,b.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],295:[function(t,x,b){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(h){if(this._curElement!==null){for(var d=[],i=0;i<h.touches.length;i++)d[i]=function(a,c,u,n){var s=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,l=a.getBoundingClientRect(),c=a.scrollWidth/c||1,a=a.scrollHeight/u||1,u=n.touches[s]||n.changedTouches[s];return{x:(u.clientX-l.left)/c,y:(u.clientY-l.top)/a,winX:u.clientX,winY:u.clientY,id:u.identifier}}(this._curElement.elt,this.width,this.height,h,i);this._setProperty("touches",d)}},t.default.prototype._ontouchstart=function(h){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(h),this._updateNextMouseCoords(h),this._updateMouseCoords(),typeof d.touchStarted=="function"?d.touchStarted(h)===!1&&h.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof d.mousePressed=="function"&&d.mousePressed(h)===!1&&h.preventDefault()},t.default.prototype._ontouchmove=function(h){var d=this._isGlobal?window:this;this._updateTouchCoords(h),this._updateNextMouseCoords(h),typeof d.touchMoved=="function"?d.touchMoved(h)===!1&&h.preventDefault():typeof d.mouseDragged=="function"&&d.mouseDragged(h)===!1&&h.preventDefault()},t.default.prototype._ontouchend=function(h){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(h),this._updateNextMouseCoords(h);var d=this._isGlobal?window:this;typeof d.touchEnded=="function"?d.touchEnded(h)===!1&&h.preventDefault():typeof d.mouseReleased=="function"&&d.mouseReleased(h)===!1&&h.preventDefault()},t=t.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.string.includes":191}],296:[function(t,x,b){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h,d,i,f,g={_toPixels:function(m){var n,s;return m instanceof ImageData?m.data:m.getContext("2d")?m.getContext("2d").getImageData(0,0,m.width,m.height).data:m.getContext("webgl")?(s=(n=m.getContext("webgl")).drawingBufferWidth*n.drawingBufferHeight*4,s=new Uint8Array(s),n.readPixels(0,0,m.width,m.height,n.RGBA,n.UNSIGNED_BYTE,s),s):void 0},_getARGB:function(m,n){return n*=4,m[3+n]<<24&4278190080|m[n]<<16&16711680|m[1+n]<<8&65280|255&m[2+n]},_setPixels:function(m,n){for(var s,l=0,c=m.length;l<c;l++)m[0+(s=4*l)]=(16711680&n[l])>>>16,m[1+s]=(65280&n[l])>>>8,m[2+s]=255&n[l],m[3+s]=(4278190080&n[l])>>>24},_toImageData:function(m){return m instanceof ImageData?m:m.getContext("2d").getImageData(0,0,m.width,m.height)},_createImageData:function(m,n){return g._tmpCanvas=document.createElement("canvas"),g._tmpCtx=g._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(m,n)},apply:function(m,a,s){var l=m.getContext("2d"),c=l.getImageData(0,0,m.width,m.height),a=a(c,s);a instanceof ImageData?l.putImageData(a,0,0,0,0,m.width,m.height):l.putImageData(c,0,0,0,0,m.width,m.height)},threshold:function(m,n){for(var s=g._toPixels(m),l=(n===void 0&&(n=.5),Math.floor(255*n)),c=0;c<s.length;c+=4){var a=void 0,a=l<=.2126*s[c]+.7152*s[c+1]+.0722*s[c+2]?255:0;s[c]=s[c+1]=s[c+2]=a}},gray:function(m){for(var n=g._toPixels(m),s=0;s<n.length;s+=4){var l=n[s],c=n[s+1],a=n[s+2];n[s]=n[s+1]=n[s+2]=.2126*l+.7152*c+.0722*a}},opaque:function(m){for(var n=g._toPixels(m),s=0;s<n.length;s+=4)n[s+3]=255;return n},invert:function(m){for(var n=g._toPixels(m),s=0;s<n.length;s+=4)n[s]=255-n[s],n[s+1]=255-n[s+1],n[s+2]=255-n[s+2]},posterize:function(m,n){var s=g._toPixels(m);if(n<2||255<n)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var l=n-1,c=0;c<s.length;c+=4){var a=s[c],u=s[c+1],y=s[c+2];s[c]=255*(a*n>>8)/l,s[c+1]=255*(u*n>>8)/l,s[c+2]=255*(y*n>>8)/l}},dilate:function(m){for(var n,s,l,c,a,u,y,p,v,w=g._toPixels(m),C=0,T=w.length?w.length/4:0,j=new Int32Array(T);C<T;)for(s=(n=C)+m.width;C<s;)c=l=g._getARGB(w,C),(v=C-1)<n&&(v=C),s<=(p=C+1)&&(p=C),(a=C-m.width)<0&&(a=0),T<=(u=C+m.width)&&(u=C),a=g._getARGB(w,a),v=g._getARGB(w,v),u=g._getARGB(w,u),(c=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))<(y=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(l=v,c=y),c<(y=77*((v=g._getARGB(w,p))>>16&255)+151*(v>>8&255)+28*(255&v))&&(l=v,c=y),c<(p=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(l=a,c=p),c<(v=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))&&(l=u,c=v),j[C++]=l;g._setPixels(w,j)},erode:function(m){for(var n,s,l,c,a,u,y,p,v,w=g._toPixels(m),C=0,T=w.length?w.length/4:0,j=new Int32Array(T);C<T;)for(s=(n=C)+m.width;C<s;)c=l=g._getARGB(w,C),(v=C-1)<n&&(v=C),s<=(p=C+1)&&(p=C),(a=C-m.width)<0&&(a=0),T<=(u=C+m.width)&&(u=C),a=g._getARGB(w,a),v=g._getARGB(w,v),u=g._getARGB(w,u),(y=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<(c=77*(c>>16&255)+151*(c>>8&255)+28*(255&c))&&(l=v,c=y),(y=77*((v=g._getARGB(w,p))>>16&255)+151*(v>>8&255)+28*(255&v))<c&&(l=v,c=y),(p=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<c&&(l=a,c=p),(v=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))<c&&(l=u,c=v),j[C++]=l;g._setPixels(w,j)},blur:function(m,n){for(var s,l,c,a,u,y,p,v,w,C,T=g._toPixels(m),j=m.width,A=m.height,L=j*A,M=new Int32Array(L),k=0;k<L;k++)M[k]=g._getARGB(T,k);var O,N,U,V,G,z,W,Z,I=new Int32Array(L),q=new Int32Array(L),D=new Int32Array(L),F=new Int32Array(L),H=0,Y=3.5*n|0;if(h!==(Y=Y<1?1:Y<248?Y:248)){d=1+(h=Y)<<1,i=new Int32Array(d),f=new Array(d);for(var te=0;te<d;te++)f[te]=new Int32Array(256);for(var ie=1,de=Y-1;ie<Y;ie++){i[Y+ie]=i[de]=z=de*de,W=f[Y+ie],Z=f[de--];for(var _e=0;_e<256;_e++)W[_e]=Z[_e]=z*_e}G=i[Y]=Y*Y,W=f[Y];for(var le=0;le<256;le++)W[le]=G*le}for(N=0;N<A;N++){for(O=0;O<j;O++){if(a=c=l=u=s=0,(y=O-h)<0)C=-y,y=0;else{if(j<=y)break;C=0}for(U=C;U<d&&!(j<=y);U++){var re=M[y+H];V=f[U],u+=V[(-16777216&re)>>>24],l+=V[(16711680&re)>>16],c+=V[(65280&re)>>8],a+=V[255&re],s+=i[U],y++}I[p=H+O]=u/s,q[p]=l/s,D[p]=c/s,F[p]=a/s}H+=j}for(w=(v=-h)*j,N=H=0;N<A;N++){for(O=0;O<j;O++){if(a=c=l=u=s=0,v<0)C=p=-v,y=O;else{if(A<=v)break;C=0,p=v,y=O+w}for(U=C;U<d&&!(A<=p);U++)V=f[U],u+=V[I[y]],l+=V[q[y]],c+=V[D[y]],a+=V[F[y]],s+=i[U],p++,y+=j;M[O+H]=u/s<<24|l/s<<16|c/s<<8|a/s}H+=j,w+=j,v++}g._setPixels(T,M)}};b.default=g},{"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int32-array":217,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234}],297:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=i(t("../core/main")),d=i(t("omggif"));function i(g){return g&&g.__esModule?g:{default:g}}function f(g){return function(m){if(Array.isArray(m)){for(var n=0,s=new Array(m.length);n<m.length;n++)s[n]=m[n];return s}}(g)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.createImage=function(g,m){return h.default._validateParameters("createImage",arguments),new h.default.Image(g,m)},h.default.prototype.saveCanvas=function(){h.default._validateParameters("saveCanvas",arguments);var g,m,n,s,l=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(g=arguments[0],l.shift()):arguments[0]instanceof h.default.Element?(g=arguments[0].elt,l.shift()):g=this._curElement&&this._curElement.elt,1<=l.length&&(m=l[0]),n=(n=2<=l.length?l[1]:n)||h.default.prototype._checkFileExtension(m,n)[1]||"png"){default:s="image/png";break;case"jpeg":case"jpg":s="image/jpeg"}g.toBlob(function(c){h.default.prototype.downloadFile(c,m,n)},s)},h.default.prototype.encodeAndDownloadGif=function(g,m){for(var n=g.gifProperties,s=n.loopLimit,l=(s===1?s=null:s===null&&(s=0),new Uint8Array(g.width*g.height*n.numFrames)),c=[],a={},u=0;u<n.numFrames;u++){for(var y=new Set,p=n.frames[u].image.data,v=p.length,w=new Uint32Array(g.width*g.height),C=0,T=0;C<v;C+=4,T++){var j=p[C+0]<<16|p[C+1]<<8|p[C+2]<<0;y.add(j),w[T]=j}var A=f(y).sort().toString();a[A]===void 0?a[A]={freq:1,frames:[u]}:(a[A].freq+=1,a[A].frames.push(u)),c.push(w)}for(var k=[],L=Object.keys(a).sort(function(D,F){return a[F].freq-a[D].freq}),M=L[0].split(",").map(function(D){return parseInt(D)}),k=k.concat(a[M].frames),O=new Set(M),N=1;N<L.length;N++){var U=L[N].split(",").map(function(D){return parseInt(D)}).filter(function(D){return!O.has(D)});if(M.length+U.length<=256){for(var V=0;V<U.length;V++)M.push(U[V]),O.add(U[V]);k=k.concat(a[L[N]].frames)}}k=new Set(k);for(var G={},z=0;z<M.length;z++)G[M[z]]||(G[M[z]]=z);for(var W=1;W<M.length;)W<<=1;M.length=W;for(var s={loop:s,palette:new Uint32Array(M)},Z=new d.default.GifWriter(l,g.width,g.height,s),I={},q=0;q<n.numFrames;q++)(function(F){var H=!k.has(F),Y=H?[]:M,te=new Uint8Array(g.width*g.height),ie={},de=new Set,_e=(c[F].forEach(function(ce,be){H?(ie[ce]===void 0&&(ie[ce]=Y.length,Y.push(ce)),te[be]=ie[ce]):te[be]=G[ce],0<F&&c[F-1][be]!==ce&&de.add(ce)}),{}),le=Y.filter(function(ce){return!de.has(ce)});if(0<le.length){var le=le[0],re=(H?ie:G)[le];if(0<F){for(var pe=0;pe<c[F].length;pe++)c[F-1][pe]===c[F][pe]&&(te[pe]=re);_e.transparent=re,I.frameOpts.disposal=1}}if(_e.delay=n.frames[F].delay/10,H){for(var Q=1;Q<Y.length;)Q<<=1;Y.length=Q,_e.palette=new Uint32Array(Y)}0<F&&Z.addFrame(0,0,g.width,g.height,I.pixelPaletteIndex,I.frameOpts),I={pixelPaletteIndex:te,frameOpts:_e}})(q);I.frameOpts.disposal=1,Z.addFrame(0,0,g.width,g.height,I.pixelPaletteIndex,I.frameOpts),s=new Blob([l.slice(0,Z.end())],{type:"image/gif"}),h.default.prototype.downloadFile(s,m,"gif")},h.default.prototype.saveFrames=function(g,m,n,c,l){h.default._validateParameters("saveFrames",arguments),n=h.default.prototype.constrain(n=n||3,0,15),n*=1e3;var c=h.default.prototype.constrain(c||15,0,22),a=0,u=h.default.prototype._makeFrame,y=this._curElement.elt,p=[],v=setInterval(function(){p.push(u(g+a,m,y)),a++},1e3/c);setTimeout(function(){if(clearInterval(v),l)l(p);else for(var w=0,C=p;w<C.length;w++){var T=C[w];h.default.prototype.downloadFile(T.imageData,T.filename,T.ext)}p=[]},.01+n)},h.default.prototype._makeFrame=function(g,m,l){var s,l=this?this._curElement.elt:l;if(m)switch(m.toLowerCase()){case"png":s="image/png";break;case"jpeg":case"jpg":s="image/jpeg";break;default:s="image/png"}else m="png",s="image/png";var l=(l=l.toDataURL(s)).replace(s,"image/octet-stream"),c={};return c.imageData=l,c.filename=g,c.ext=m,c},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,omggif:248}],298:[function(t,x,b){function h(y){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function d(y){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t("regenerator-runtime/runtime");var i=l(t("../core/main")),f=l(t("../core/helpers")),g=function(y){if(y&&y.__esModule)return y;if(y===null||d(y)!=="object"&&typeof y!="function")return{default:y};var p=s();if(p&&p.has(y))return p.get(y);var v,w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in y){var T;Object.prototype.hasOwnProperty.call(y,v)&&((T=C?Object.getOwnPropertyDescriptor(y,v):null)&&(T.get||T.set)?Object.defineProperty(w,v,T):w[v]=y[v])}return w.default=y,p&&p.set(y,w),w}(t("../core/constants")),m=l(t("omggif")),n=t("gifenc");function s(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,s=function(){return y},y)}function l(y){return y&&y.__esModule?y:{default:y}}function c(y,p,v,w,C,T,j){try{var A=y[T](j),L=A.value}catch(M){return void v(M)}A.done?p(L):Promise.resolve(L).then(w,C)}function a(y,p,v,w,C,T,j,A,L,M,k){var O,N,U,V,G,z,W,Z,I;return y===g.COVER&&(O=p,U=v,W=T,Z=j,z=A,I=L,N=M,V=k,G=Math.max(W/N,Z/V),W/=G,Z/=G,G=z,z=I,O===g.CENTER?G+=(N-W)/2:O===g.RIGHT&&(G+=N-W),U===g.CENTER?z+=(V-Z)/2:U===g.BOTTOM&&(z+=V-Z),A=(I={x:G,y:z,w:W,h:Z}).x,L=I.y,M=I.w,k=I.h),y===g.CONTAIN&&(O=p,N=v,U=w,V=C,G=T,z=j,W=M,Z=k,I=Math.max(W/G,Z/z),W/=I,Z/=I,I=U,U=V,O===g.CENTER?I+=(G-W)/2:O===g.RIGHT&&(I+=G-W),N===g.CENTER?U+=(z-Z)/2:N===g.BOTTOM&&(U+=z-Z),w=(y={x:I,y:U,w:W,h:Z}).x,C=y.y,T=y.w,j=y.h),{sx:A,sy:L,sw:M,sh:k,dx:w,dy:C,dw:T,dh:j}}function u(y,p){return 0<y&&y<p?y:p}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadImage=function(y,p,v){i.default._validateParameters("loadImage",arguments);var w=new i.default.Image(1,1,this),C=this,T=new Request(y,{method:"GET",mode:"cors"});return fetch(y,T).then(function(j){var A,L=j.headers.get("content-type");L===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),L&&L.includes("image/gif")?j.arrayBuffer().then(function(M){if(M){for(var M=new Uint8Array(M),k=w,O=p,N=v,U=(function(H){C._decrementPreload()}).bind(C),V=new m.default.GifReader(M),G=(k.width=k.canvas.width=V.width,k.height=k.canvas.height=V.height,[]),z=V.numFrames(),W=new Uint8ClampedArray(k.width*k.height*4),Z=0;Z<z;Z++){var I=V.frameInfo(Z),q=k.drawingContext.getImageData(0,0,k.width,k.height),D=(W=q.data.slice(),function(H,Y){try{Y.decodeAndBlitFrameRGBA(H,W)}catch(te){i.default._friendlyFileLoadError(8,k.src),typeof N=="function"?N(te):console.error(te)}}(Z,V),new ImageData(W,k.width,k.height)),D=(k.drawingContext.putImageData(D,0,0),I.delay);D===0&&(D=10),G.push({image:k.drawingContext.getImageData(0,0,k.width,k.height),delay:10*D}),I.disposal===2?k.drawingContext.clearRect(I.x,I.y,I.width,I.height):I.disposal===3&&k.drawingContext.putImageData(q,0,0,I.x,I.y,I.width,I.height)}(M=V.loopCount())===null?M=1:M===0&&(M=null),k.drawingContext.putImageData(G[0].image,0,0),1<G.length&&(k.gifProperties={displayIndex:0,loopLimit:M,loopCount:0,frames:G,numFrames:z,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof O=="function"&&O(k),U()}},function(M){typeof v=="function"?(v(M),C._decrementPreload()):console.error(M)}):((A=new Image).onload=function(){w.width=w.canvas.width=A.width,w.height=w.canvas.height=A.height,w.drawingContext.drawImage(A,0,0),w.modified=!0,typeof p=="function"&&p(w),C._decrementPreload()},A.onerror=function(M){i.default._friendlyFileLoadError(0,A.src),typeof v=="function"?(v(M),C._decrementPreload()):console.error(M)},y.indexOf("data:image/")!==0&&(A.crossOrigin="Anonymous"),A.src=y),w.modified=!0}).catch(function(j){i.default._friendlyFileLoadError(0,y),typeof v=="function"?(v(j),C._decrementPreload()):console.error(j)}),w},i.default.prototype.saveGif=function(){y=regeneratorRuntime.mark(function v(w,C){var T,j,A,L,M,k,O,N,U,V,G,z,W,Z,I,q,D,F,H,Y,te,ie,de,_e,le,re,pe=arguments;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(T=2<pe.length&&pe[2]!==void 0?pe[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof w!="string")throw TypeError("fileName parameter must be a string");Q.next=3;break;case 3:if(typeof C!="number")throw TypeError("Duration parameter must be a number");Q.next=5;break;case 5:if(j=T&&T.delay||0,A=T&&T.units||"seconds",L=T&&T.silent||!1,M=T&&T.notificationDuration||0,k=T&&T.notificationID||"progressBar",typeof j!="number")throw TypeError("Delay parameter must be a number");Q.next=12;break;case 12:if(A!=="seconds"&&A!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');Q.next=14;break;case 14:if(typeof L!="boolean")throw TypeError("Silent parameter must be a boolean");Q.next=16;break;case 16:if(typeof M!="number")throw TypeError("Notification duration parameter must be a number");Q.next=18;break;case 18:if(typeof k!="string")throw TypeError("Notification ID parameter must be a string");Q.next=20;break;case 20:return this._recording=!0,V=this._targetFrameRate,O=(O=1/(V=V!==1/0&&V!==void 0&&V!==0?V:60)*1e3)<20?20:O,U=(N=A==="seconds"?C*V:C)+(V=A==="seconds"?j*V:j),V=V,this.frameCount=V,G=this._pixelDensity,this.pixelDensity(1),z=[],document.getElementById(k)!==null&&document.getElementById(k).remove(),L||((W=this.createP("")).id(k),W.style("font-size","16px"),W.style("font-family","Montserrat"),W.style("background-color","#ffffffa0"),W.style("padding","8px"),W.style("border-radius","10px"),W.position(0,0)),this._renderer instanceof i.default.RendererGL&&(I=this.drawingContext,Z=new Uint8Array(I.drawingBufferWidth*I.drawingBufferHeight*4)),this.noLoop(),Q.next=39,Promise.resolve();case 39:if(V<U)return this.redraw(),_e=void 0,_e=this._renderer instanceof i.default.RendererGL?(Z=new Uint8Array(I.drawingBufferWidth*I.drawingBufferHeight*4),I.readPixels(0,0,I.drawingBufferWidth,I.drawingBufferHeight,I.RGBA,I.UNSIGNED_BYTE,Z),function(ce){for(var be=parseInt(height/2),Re=4*width,xe=new Uint8Array(4*width),Te=0;Te<be;++Te){var Le=Te*Re,Je=(height-Te-1)*Re;xe.set(ce.subarray(Le,Le+Re)),ce.copyWithin(Le,Je,Je+Re),ce.set(xe,Je)}return ce}(Z)):this.drawingContext.getImageData(0,0,this.width,this.height).data,z.push(_e),V++,L||W.html("Saved frame <b>"+z.length.toString()+"</b> out of "+N.toString()),Q.next=48,new Promise(function(ce){return setTimeout(ce,0)});Q.next=50;break;case 48:Q.next=39;break;case 50:L||W.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(G),q=(0,n.GIFEncoder)(),D=function(ce){for(var be=new Uint8Array(ce.length*ce[0].length),Re=0;Re<ce.length;Re++)be.set(ce[Re],Re*ce[0].length);var xe=(0,n.quantize)(be,256,{format:"rgba4444",oneBitAlpha:!0});return xe.length===256?xe[xe.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:xe.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),xe}(z),F={},H=function(ce){for(var be=ce.length/4,Re=new Uint8Array(be),xe=0;xe<be;xe++){var Te=ce[4*xe]<<24|ce[4*xe+1]<<16|ce[4*xe+2]<<8|ce[4*xe+3];F[Te]===void 0&&(F[Te]=(0,n.nearestColorIndex)(D,ce.slice(4*xe,4*(xe+1)))),Re[xe]=F[Te]}return Re},Y=D.length-1,te=[],ie=0;case 60:if(!(ie<z.length)){Q.next=71;break}if(de=H(z[ie]),_e=de.slice(),ie===0)q.writeFrame(de,this.width,this.height,{palette:D,delay:O,dispose:1});else{for(le=0;le<de.length;le++)de[le]===te[le]&&(de[le]=Y);q.writeFrame(de,this.width,this.height,{delay:O,transparent:!0,transparentIndex:Y,dispose:1})}return te=_e,L||W.html("Rendered frame <b>"+ie.toString()+"</b> out of "+N.toString()),Q.next=68,new Promise(function(ce){return setTimeout(ce,0)});case 68:ie++,Q.next=60;break;case 71:q.finish(),re=q.bytesView(),re=new Blob([re],{type:"image/gif"}),z=[],this._recording=!1,this.loop(),L||(W.html("Done. Downloading your gif!"),0<M&&setTimeout(function(){return W.remove()},1e3*M)),i.default.prototype.downloadFile(re,w,"gif");case 80:case"end":return Q.stop()}},v,this)});var y,p=function(){var v=this,w=arguments;return new Promise(function(C,T){var j=y.apply(v,w);function A(M){c(j,C,T,A,L,"next",M)}function L(M){c(j,C,T,A,L,"throw",M)}A(void 0)})};return function(v,w){return p.apply(this,arguments)}}(),i.default.prototype.image=function(y,p,v,w,V,G,z,W,I,M,k,O){i.default._validateParameters("image",arguments);var Z=y.width,N=y.height,U=(O=O||g.CENTER,k=k||g.CENTER,y.elt&&(Z=Z!==void 0?Z:y.elt.width,N=N!==void 0?N:y.elt.height),y.elt&&y.elt.videoWidth&&!y.canvas&&(Z=Z!==void 0?Z:y.elt.videoWidth,N=N!==void 0?N:y.elt.videoHeight),w||Z),V=V||N,G=G||0,z=z||0,W=u(W!==void 0?W:Z,Z),Z=u(I!==void 0?I:N,N),I=1;y.elt&&!y.canvas&&y.elt.style.width&&(I=y.elt.videoWidth&&!w?y.elt.videoWidth:y.elt.width,I/=parseInt(y.elt.style.width,10)),G*=I,z*=I,Z*=I,W*=I,N=a(M,k,O,(N=f.default.modeAdjust(p,v,U,V,this._renderer._imageMode)).x,N.y,N.w,N.h,G,z,W,Z),this._renderer.image(y,N.sx,N.sy,N.sw,N.sh,N.dx,N.dy,N.dw,N.dh)},i.default.prototype.tint=function(){for(var y=arguments.length,p=new Array(y),v=0;v<y;v++)p[v]=arguments[v];i.default._validateParameters("tint",p);var w=this.color.apply(this,p);this._renderer._tint=w.levels},i.default.prototype.noTint=function(){this._renderer._tint=null},i.default.prototype._getTintedImageCanvas=i.default.Renderer2D.prototype._getTintedImageCanvas,i.default.prototype.imageMode=function(y){i.default._validateParameters("imageMode",arguments),y!==g.CORNER&&y!==g.CORNERS&&y!==g.CENTER||(this._renderer._imageMode=y)},t=i.default,b.default=t},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/helpers":271,"../core/main":275,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,gifenc:245,omggif:248,"regenerator-runtime/runtime":252}],299:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=i(t("../core/main")),d=i(t("./filters"));function i(g){return g&&g.__esModule?g:{default:g}}function f(g,m){for(var n=0;n<m.length;n++){var s=m[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}h.default.Image=function(){function g(s,l){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this.width=s,this.height=l,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var m,n;return m=g,(n=[{key:"pixelDensity",value:function(s){return s!==void 0?(s<=0&&(h.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),s=1),this._pixelDensity=s,this.width/=s,this.height/=s,this):this._pixelDensity}},{key:"_animateGif",value:function(a){var l,c=this.gifProperties,a=a._lastRealFrameTime;c.lastChangeTime===0&&(c.lastChangeTime=a),c.playing&&(c.timeDisplayed=a-c.lastChangeTime,l=c.frames[c.displayIndex].delay,c.timeDisplayed>=l&&(l=Math.floor(c.timeDisplayed/l),c.timeDisplayed=0,c.lastChangeTime=a,c.displayIndex+=l,c.loopCount=Math.floor(c.displayIndex/c.numFrames),c.loopLimit!==null&&c.loopCount>=c.loopLimit?c.playing=!1:(a=c.displayIndex%c.numFrames,this.drawingContext.putImageData(c.frames[a].image,0,0),c.displayIndex=a,this.setModified(!0))))}},{key:"_setProperty",value:function(s,l){this[s]=l,this.setModified(!0)}},{key:"loadPixels",value:function(){h.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(s,l,c,a){h.default.Renderer2D.prototype.updatePixels.call(this,s,l,c,a),this.setModified(!0)}},{key:"get",value:function(s,l,c,a){return h.default._validateParameters("p5.Image.get",arguments),h.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return h.default.Renderer2D.prototype._getPixel.apply(this,l)}},{key:"set",value:function(s,l,c){h.default.Renderer2D.prototype.set.call(this,s,l,c),this.setModified(!0)}},{key:"resize",value:function(s,l){s===0&&l===0?(s=this.canvas.width,l=this.canvas.height):s===0?s=this.canvas.width*l/this.canvas.height:l===0&&(l=this.canvas.height*s/this.canvas.width),s=Math.floor(s),l=Math.floor(l);var c=document.createElement("canvas");if(c.width=s,c.height=l,this.gifProperties)for(var a=this.gifProperties,u=0;u<a.numFrames;u++){for(var y=this.drawingContext.createImageData(s,l),p=(j=j=T=C=w=void 0,a.frames[u].image),v=y,w=0,C=0;C<v.height;C++)for(var T=0;T<v.width;T++){var j=Math.floor(T*p.width/v.width),j=4*(Math.floor(C*p.height/v.height)*p.width+j);v.data[w++]=p.data[j++],v.data[w++]=p.data[j++],v.data[w++]=p.data[j++],v.data[w++]=p.data[+j]}a.frames[u].image=y}c.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,c.width,c.height),this.canvas.width=this.width=s,this.canvas.height=this.height=l,this.drawingContext.drawImage(c,0,0,s,l,0,0,s,l),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];h.default.prototype.copy.apply(this,l)}},{key:"mask",value:function(s){var l=this.drawingContext.globalCompositeOperation,c=1,a=[s=s===void 0?this:s,0,0,(c=s instanceof h.default.Renderer?s._pInst._pixelDensity:c)*s.width,c*s.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var u=0;u<this.gifProperties.frames.length;u++)this.drawingContext.putImageData(this.gifProperties.frames[u].image,0,0),this.copy.apply(this,a),this.gifProperties.frames[u].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,a);this.drawingContext.globalCompositeOperation=l,this.setModified(!0)}},{key:"filter",value:function(s,l){d.default.apply(this.canvas,d.default[s],l),this.setModified(!0)}},{key:"blend",value:function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];h.default._validateParameters("p5.Image.blend",arguments),h.default.prototype.blend.apply(this,l),this.setModified(!0)}},{key:"setModified",value:function(s){this._modified=s}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(s,l){this.gifProperties?h.default.prototype.encodeAndDownloadGif(this,s):h.default.prototype.saveCanvas(this.canvas,s,l)}},{key:"reset",value:function(){var s;this.gifProperties&&((s=this.gifProperties).playing=!0,s.timeSinceStart=0,s.timeDisplayed=0,s.lastChangeTime=0,s.loopCount=0,s.displayIndex=0,this.drawingContext.putImageData(s.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var s;if(this.gifProperties)return(s=this.gifProperties).displayIndex%s.numFrames}},{key:"setFrame",value:function(s){var l;this.gifProperties&&(s<(l=this.gifProperties).numFrames&&0<=s?(l.timeDisplayed=0,l.lastChangeTime=0,l.displayIndex=s,this.drawingContext.putImageData(l.frames[s].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(s,l){if(this.gifProperties){var c=this.gifProperties;if(l<c.numFrames&&0<=l)c.frames[l].delay=s;else{var a=!0,l=!1,u=void 0;try{for(var y,p=c.frames[Symbol.iterator]();!(a=(y=p.next()).done);a=!0)y.value.delay=s}catch(w){l=!0,u=w}finally{try{a||p.return==null||p.return()}finally{if(l)throw u}}}}}}])&&f(m.prototype,n),g}(),t=h.default.Image,b.default=t},{"../core/main":275,"./filters":296,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],300:[function(t,x,b){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function d(s){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(l){return h(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":h(l)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=n(t("../core/main")),f=n(t("./filters")),g=(t("../color/p5.Color"),function(s){if(s&&s.__esModule)return s;if(s===null||d(s)!=="object"&&typeof s!="function")return{default:s};var l=m();if(l&&l.has(s))return l.get(s);var c,a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var y;Object.prototype.hasOwnProperty.call(s,c)&&((y=u?Object.getOwnPropertyDescriptor(s,c):null)&&(y.get||y.set)?Object.defineProperty(a,c,y):a[c]=s[c])}return a.default=s,l&&l.set(s,a),a}(t("../core/constants")));function m(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,m=function(){return s},s)}function n(s){return s&&s.__esModule?s:{default:s}}i.default.prototype.pixels=[],i.default.prototype.blend=function(){for(var s,l=arguments.length,c=new Array(l),a=0;a<l;a++)c[a]=arguments[a];i.default._validateParameters("blend",c),this._renderer?(s=this._renderer).blend.apply(s,c):i.default.Renderer2D.prototype.blend.apply(this,c)},i.default.prototype.copy=function(){for(var s,l,c,a,u,y,p,v,w,C=arguments.length,T=new Array(C),j=0;j<C;j++)T[j]=arguments[j];if(i.default._validateParameters("copy",T),T.length===9)s=T[0],l=T[1],c=T[2],a=T[3],u=T[4],y=T[5],p=T[6],v=T[7],w=T[8];else{if(T.length!==8)throw new Error("Signature not supported");s=this,l=T[0],c=T[1],a=T[2],u=T[3],y=T[4],p=T[5],v=T[6],w=T[7]}i.default.prototype._copyHelper(this,s,l,c,a,u,y,p,v,w)},i.default.prototype._copyHelper=function(s,l,c,a,u,y,p,v,w,C){l.loadPixels();var T=l.canvas.width/l.width,j=0,A=0;l._renderer&&l._renderer.isP3D&&(j=l.width/2,A=l.height/2),s._renderer&&s._renderer.isP3D?i.default.RendererGL.prototype.image.call(s._renderer,l,c+j,a+A,u,y,p,v,w,C):s.drawingContext.drawImage(l.canvas,T*(c+j),T*(a+A),T*u,T*y,p,v,w,C)},i.default.prototype.filter=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];i.default._validateParameters("filter",arguments);var p=(function(){var v,w={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof i.default.Shader?w.shader=arguments.length<=0?void 0:arguments[0]:(w.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(w.value=arguments.length<=1?void 0:arguments[1]),((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])===!1&&(w.useWebGL=!1)),w}).apply(void 0,l),a=p.shader,u=p.operation,y=p.value,p=p.useWebGL;a?i.default.RendererGL.prototype.filter.call(this._renderer,a):p||this._renderer.isP3D?(!p&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?i.default.RendererGL.prototype.filter.call(this._renderer,u,y):(this.filterGraphicsLayer||(a=(this._renderer._pInst instanceof i.default.Graphics?this._renderer._pInst:this._renderer)._pInst,this.filterGraphicsLayer=new i.default.Graphics(this.width,this.height,g.WEBGL,a)),this.filterGraphicsLayer.copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this.filterGraphicsLayer.filter(u,y),this._renderer._pInst.image(this.filterGraphicsLayer,0,0),this.filterGraphicsLayer.clear())):this.canvas!==void 0?f.default.apply(this.canvas,f.default[u],y):f.default.apply(this.elt,f.default[u],y)},i.default.prototype.get=function(s,l,c,a){var u;return i.default._validateParameters("get",arguments),(u=this._renderer).get.apply(u,arguments)},i.default.prototype.loadPixels=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];i.default._validateParameters("loadPixels",l),this._renderer.loadPixels()},i.default.prototype.set=function(s,l,c){this._renderer.set(s,l,c)},i.default.prototype.updatePixels=function(s,l,c,a){i.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(s,l,c,a)},t=i.default,b.default=t},{"../color/p5.Color":262,"../core/constants":264,"../core/main":275,"./filters":296,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],301:[function(t,x,b){function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=g(t("../core/main")),i=(t("whatwg-fetch"),t("es6-promise/auto"),g(t("fetch-jsonp"))),f=g(t("file-saver"));function g(l){return l&&l.__esModule?l:{default:l}}function m(l){return(m=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(l)}function n(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function s(l,c){c&&c!==!0&&c!=="true"||(c="");var a="";return(l=l||"untitled")&&l.includes(".")&&(a=l.split(".").pop()),c&&a!==c&&(a=c,l="".concat(l,".").concat(a)),[l,a]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),d.default.prototype.loadJSON=function(){for(var l=arguments.length,c=new Array(l),a=0;a<l;a++)c[a]=arguments[a];d.default._validateParameters("loadJSON",c);for(var u,y,p,v=c[0],w={},C="json",T=1;T<c.length;T++){var j=c[T];typeof j=="string"?j!=="jsonp"&&j!=="json"||(C=j):typeof j=="function"?u?y=j:u=j:m(j)==="object"&&(j.hasOwnProperty("jsonpCallback")||j.hasOwnProperty("jsonpCallbackFunction"))&&(C="jsonp",p=j)}var A=this;return this.httpDo(v,"GET",p,C,function(L){for(var M in L)w[M]=L[M];u!==void 0&&u(L),A._decrementPreload()},function(L){if(d.default._friendlyFileLoadError(5,v),!y)throw L;y(L)}),w},d.default.prototype.loadStrings=function(){for(var l=arguments.length,c=new Array(l),a=0;a<l;a++)c[a]=arguments[a];d.default._validateParameters("loadStrings",c);for(var u,y,p=[],v=1;v<c.length;v++){var w=c[v];typeof w=="function"&&(u===void 0?u=w:y===void 0&&(y=w))}var C=this;return d.default.prototype.httpDo.call(this,c[0],"GET","text",function(T){for(var j=T.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),A=0,L=j.length;A<L;A+=32768)Array.prototype.push.apply(p,j.slice(A,Math.min(A+32768,L)));u!==void 0&&u(p),C._decrementPreload()},function(T){if(d.default._friendlyFileLoadError(3,T),!y)throw T;y(T)}),p},d.default.prototype.loadTable=function(l){var c,a,u,y=!1,p=l.substring(l.lastIndexOf(".")+1,l.length);p==="csv"?u=",":p==="ssv"?u=";":p==="tsv"&&(u="	");for(var v=1;v<arguments.length;v++)typeof arguments[v]=="function"?c===void 0?c=arguments[v]:a===void 0&&(a=arguments[v]):typeof arguments[v]=="string"&&(arguments[v]==="header"&&(y=!0),arguments[v]==="csv"?u=",":arguments[v]==="ssv"?u=";":arguments[v]==="tsv"&&(u="	"));var w=new d.default.Table,C=this;return this.httpDo(l,"GET","table",function(T){for(var j,A,L={},M=0,k=[],O=0,N=null,U=function(){L.currentState=M,L.token=""},V=function(){N.push(L.token),U()},G=function(){L.currentState=4,k.push(N),N=null};;){if((j=T[O++])==null){if(L.escaped)throw new Error("Unclosed quote in file.");if(N){V(),G();break}}if(N===null&&(L.escaped=!1,N=[],U()),L.currentState===M){if(j==='"'){L.escaped=!0,L.currentState=1;continue}L.currentState=1}if(L.currentState===1&&L.escaped)if(j==='"')T[O]==='"'?(L.token+='"',O++):(L.escaped=!1,L.currentState=2);else{if(j==="\r")continue;L.token+=j}else j==="\r"?(T[O]===`
`&&O++,V(),G()):j===`
`?(V(),G()):j===u?V():L.currentState===1&&(L.token+=j)}if(y)w.columns=k.shift();else for(var z=0;z<k[0].length;z++)w.columns[z]="null";for(var W=0;W<k.length;W++)(k[W].length!==1||k[W][0]!=="undefined"&&k[W][0]!=="")&&((A=new d.default.TableRow).arr=k[W],A.obj=function(Z,I){if((I=I||[])===void 0)for(var q=0;q<Z.length;q++)I[q.toString()]=q;return Object.fromEntries(I.map(function(D,F){return[D,Z[F]]}))}(k[W],w.columns),w.addRow(A));typeof c=="function"&&c(w),C._decrementPreload()},function(T){d.default._friendlyFileLoadError(2,l),a?a(T):console.error(T)}),w},d.default.prototype.loadXML=function(){for(var l=arguments.length,c=new Array(l),a=0;a<l;a++)c[a]=arguments[a];for(var u,y,p=new d.default.XML,v=1;v<c.length;v++){var w=c[v];typeof w=="function"&&(u===void 0?u=w:y===void 0&&(y=w))}var C=this;return this.httpDo(c[0],"GET","xml",function(T){for(var j in T)p[j]=T[j];u!==void 0&&u(p),C._decrementPreload()},function(T){if(d.default._friendlyFileLoadError(1,T),!y)throw T;y(T)}),p},d.default.prototype.loadBytes=function(l,c,a){var u={},y=this;return this.httpDo(l,"GET","arrayBuffer",function(p){u.bytes=new Uint8Array(p),typeof c=="function"&&c(u),y._decrementPreload()},function(p){if(d.default._friendlyFileLoadError(6,l),!a)throw p;a(p)}),u},d.default.prototype.httpGet=function(){d.default._validateParameters("httpGet",arguments);var l=Array.prototype.slice.call(arguments);return l.splice(1,0,"GET"),d.default.prototype.httpDo.apply(this,l)},d.default.prototype.httpPost=function(){d.default._validateParameters("httpPost",arguments);var l=Array.prototype.slice.call(arguments);return l.splice(1,0,"POST"),d.default.prototype.httpDo.apply(this,l)},d.default.prototype.httpDo=function(){for(var l,c,a,u={},y=0,p="text/plain",v=arguments.length-1;0<v&&typeof(v<0||arguments.length<=v?void 0:arguments[v])=="function";v--)y++;var w=arguments.length-y,C=arguments.length<=0?void 0:arguments[0];if(w==2&&typeof C=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")k=new Request(C,arguments.length<=1?void 0:arguments[1]),c=arguments.length<=2?void 0:arguments[2],a=arguments.length<=3?void 0:arguments[3];else{for(var T,j="GET",A=1;A<arguments.length;A++){var L=A<0||arguments.length<=A?void 0:arguments[A];if(typeof L=="string")L==="GET"||L==="POST"||L==="PUT"||L==="DELETE"?j=L:L==="json"||L==="jsonp"||L==="binary"||L==="arrayBuffer"||L==="xml"||L==="text"||L==="table"?l=L:T=L;else if(typeof L=="number")T=L.toString();else if(m(L)==="object")if(L.hasOwnProperty("jsonpCallback")||L.hasOwnProperty("jsonpCallbackFunction"))for(var M in L)u[M]=L[M];else p=L instanceof d.default.XML?(T=L.serialize(),"application/xml"):(T=JSON.stringify(L),"application/json");else typeof L=="function"&&(c?a=L:c=L)}var w=j==="GET"?new Headers:new Headers({"Content-Type":p}),k=new Request(C,{method:j,mode:"cors",body:T,headers:w})}return(w=(w=(l=l||(C.includes("json")?"json":C.includes("xml")?"xml":"text"))==="jsonp"?(0,i.default)(C,u):fetch(k)).then(function(O){if(!O.ok)throw(N=new Error(O.body)).status=O.status,N.ok=!1,N;var N=0;switch((N=l!=="jsonp"?O.headers.get("content-length"):N)&&64e6<N&&d.default._friendlyFileLoadError(7,C),l){case"json":case"jsonp":return O.json();case"binary":return O.blob();case"arrayBuffer":return O.arrayBuffer();case"xml":return O.text().then(function(U){return U=new DOMParser().parseFromString(U,"text/xml"),new d.default.XML(U.documentElement)});default:return O.text()}})).then(c||function(){}),w.catch(a||console.error),w},window.URL=window.URL||window.webkitURL,d.default.prototype._pWriters=[],d.default.prototype.createWriter=function(l,c){var a,u;for(u in d.default.prototype._pWriters)if(d.default.prototype._pWriters[u].name===l)return a=new d.default.PrintWriter(l+this.millis(),c),d.default.prototype._pWriters.push(a),a;return a=new d.default.PrintWriter(l,c),d.default.prototype._pWriters.push(a),a},d.default.PrintWriter=function(l,c){var a=this;this.name=l,this.content="",this.write=function(u){this.content+=u},this.print=function(u){this.content+="".concat(u,`
`)},this.clear=function(){this.content=""},this.close=function(){var u,y=[];for(u in y.push(this.content),d.default.prototype.writeFile(y,l,c),d.default.prototype._pWriters)d.default.prototype._pWriters[u].name===this.name&&d.default.prototype._pWriters.splice(u,1);a.clear(),a={}}},d.default.prototype.save=function(l,c,a){var u=arguments,y=(this._curElement||this).elt;if(u.length===0)d.default.prototype.saveCanvas(y);else if(u[0]instanceof d.default.Renderer||u[0]instanceof d.default.Graphics)d.default.prototype.saveCanvas(u[0].elt,u[1],u[2]);else if(u.length===1&&typeof u[0]=="string")d.default.prototype.saveCanvas(y,u[0]);else switch(s(u[1],u[2])[1]){case"json":return void d.default.prototype.saveJSON(u[0],u[1],u[2]);case"txt":return void d.default.prototype.saveStrings(u[0],u[1],u[2]);default:u[0]instanceof Array?d.default.prototype.saveStrings(u[0],u[1],u[2]):u[0]instanceof d.default.Table?d.default.prototype.saveTable(u[0],u[1],u[2]):u[0]instanceof d.default.Image?d.default.prototype.saveCanvas(u[0].canvas,u[1]):u[0]instanceof d.default.SoundFile&&d.default.prototype.saveSound(u[0],u[1],u[2],u[3])}},d.default.prototype.saveJSON=function(l,c,a){d.default._validateParameters("saveJSON",arguments),a=a?JSON.stringify(l):JSON.stringify(l,void 0,2),this.saveStrings(a.split(`
`),c,"json")},d.default.prototype.saveJSONObject=d.default.prototype.saveJSON,d.default.prototype.saveJSONArray=d.default.prototype.saveJSON,d.default.prototype.saveStrings=function(l,c,a,u){d.default._validateParameters("saveStrings",arguments);for(var y=this.createWriter(c,a||"txt"),p=0;p<l.length;p++)u?y.write(l[p]+`\r
`):y.write(l[p]+`
`);y.close(),y.clear()},d.default.prototype.saveTable=function(l,c,a){d.default._validateParameters("saveTable",arguments),u=a===void 0?c.substring(c.lastIndexOf(".")+1,c.length):a;var u,y=this.createWriter(c,u),p=l.columns,v=u==="tsv"?"	":",";if(u!=="html"){if(p[0]!=="0"){for(var w=0;w<p.length;w++)w<p.length-1?y.write(p[w]+v):y.write(p[w]);y.write(`
`)}for(var C=0;C<l.rows.length;C++){for(var T=void 0,T=0;T<l.rows[C].arr.length;T++)T<l.rows[C].arr.length-1?u==="csv"&&String(l.rows[C].arr[T]).includes(",")?y.write('"'+l.rows[C].arr[T]+'"'+v):y.write(l.rows[C].arr[T]+v):u==="csv"&&String(l.rows[C].arr[T]).includes(",")?y.write('"'+l.rows[C].arr[T]+'"'):y.write(l.rows[C].arr[T]);y.write(`
`)}}else{if(y.print("<html>"),y.print("<head>"),y.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),y.print("</head>"),y.print("<body>"),y.print("  <table>"),p[0]!=="0"){y.print("    <tr>");for(var j=0;j<p.length;j++){var A=n(p[j]);y.print("      <td>".concat(A)),y.print("      </td>")}y.print("    </tr>")}for(var L=0;L<l.rows.length;L++){y.print("    <tr>");for(var M=0;M<l.columns.length;M++){var k=n(l.rows[L].getString(M));y.print("      <td>".concat(k)),y.print("      </td>")}y.print("    </tr>")}y.print("  </table>"),y.print("</body>"),y.print("</html>")}y.close(),y.clear()},d.default.prototype.writeFile=function(y,c,a){var u="application/octet-stream",y=(d.default.prototype._isSafari()&&(u="text/plain"),new Blob(y,{type:u}));d.default.prototype.downloadFile(y,c,a)},d.default.prototype.downloadFile=function(l,y,p){var u,y=s(y,p),p=y[0];l instanceof Blob?f.default.saveAs(l,p):((u=document.createElement("a")).href=l,u.download=p,u.onclick=function(v){document.body.removeChild(v.target),v.stopPropagation()},u.style.display="none",document.body.appendChild(u),d.default.prototype._isSafari()&&(l=(l=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(y[1],'"'),alert(l)),u.click())},d.default.prototype._checkFileExtension=s,d.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},t=d.default,b.default=t},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240,"es6-promise/auto":241,"fetch-jsonp":243,"file-saver":244,"whatwg-fetch":253}],302:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(i,f){for(var g=0;g<f.length;g++){var m=f[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(i,m.key,m)}}h.default.Table=function(){function i(m){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var f,g;return f=i,(g=[{key:"addRow",value:function(m){if(m=m||new h.default.TableRow,m.arr===void 0||m.obj===void 0)throw new Error("invalid TableRow: ".concat(m));return(m.table=this).rows.push(m),m}},{key:"removeRow",value:function(m){this.rows[m].table=null,m=this.rows.splice(m+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(m)}},{key:"getRow",value:function(m){return this.rows[m]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(m,n){if(typeof n=="string"){for(var s=0;s<this.rows.length;s++)if(this.rows[s].obj[n]===m)return this.rows[s]}else for(var l=0;l<this.rows.length;l++)if(this.rows[l].arr[n]===m)return this.rows[l];return null}},{key:"findRows",value:function(m,n){var s=[];if(typeof n=="string")for(var l=0;l<this.rows.length;l++)this.rows[l].obj[n]===m&&s.push(this.rows[l]);else for(var c=0;c<this.rows.length;c++)this.rows[c].arr[n]===m&&s.push(this.rows[c]);return s}},{key:"matchRow",value:function(m,n){if(typeof n=="number"){for(var s=0;s<this.rows.length;s++)if(this.rows[s].arr[n].match(m))return this.rows[s]}else for(var l=0;l<this.rows.length;l++)if(this.rows[l].obj[n].match(m))return this.rows[l];return null}},{key:"matchRows",value:function(m,n){var s=[];if(typeof n=="number")for(var l=0;l<this.rows.length;l++)this.rows[l].arr[n].match(m)&&s.push(this.rows[l]);else for(var c=0;c<this.rows.length;c++)this.rows[c].obj[n].match(m)&&s.push(this.rows[c]);return s}},{key:"getColumn",value:function(m){var n=[];if(typeof m=="string")for(var s=0;s<this.rows.length;s++)n.push(this.rows[s].obj[m]);else for(var l=0;l<this.rows.length;l++)n.push(this.rows[l].arr[m]);return n}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(m){this.columns.push(m||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(m,n){for(var s=[],l=0;l<m.length;l++)s.push(m.charAt(l).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var c=new RegExp(s.join("|"),"g");if(n===void 0)for(var a=0;a<this.columns.length;a++)for(var u=0;u<this.rows.length;u++){var y=(y=this.rows[u].arr[a]).replace(c,"");this.rows[u].arr[a]=y,this.rows[u].obj[this.columns[a]]=y}else if(typeof n=="string")for(var p=0;p<this.rows.length;p++){var v=(v=this.rows[p].obj[n]).replace(c,""),w=(this.rows[p].obj[n]=v,this.columns.indexOf(n));this.rows[p].arr[w]=v}else for(var C=0;C<this.rows.length;C++){var T=(T=this.rows[C].arr[n]).replace(c,"");this.rows[C].arr[n]=T,this.rows[C].obj[this.columns[n]]=T}}},{key:"trim",value:function(m){var n=new RegExp(" ","g");if(m===void 0)for(var s=0;s<this.columns.length;s++)for(var l=0;l<this.rows.length;l++){var c=(c=this.rows[l].arr[s]).replace(n,"");this.rows[l].arr[s]=c,this.rows[l].obj[this.columns[s]]=c}else if(typeof m=="string")for(var a=0;a<this.rows.length;a++){var u=(u=this.rows[a].obj[m]).replace(n,""),y=(this.rows[a].obj[m]=u,this.columns.indexOf(m));this.rows[a].arr[y]=u}else for(var p=0;p<this.rows.length;p++){var v=(v=this.rows[p].arr[m]).replace(n,"");this.rows[p].arr[m]=v,this.rows[p].obj[this.columns[m]]=v}}},{key:"removeColumn",value:function(l){typeof l=="string"?s=this.columns.indexOf(n=l):n=this.columns[s=l];var n,s,l=this.columns.splice(s+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(l);for(var c=0;c<this.rows.length;c++){var a=this.rows[c].arr,u=a.splice(s+1,a.length);a.pop(),this.rows[c].arr=a.concat(u),delete this.rows[c].obj[n]}}},{key:"set",value:function(m,n,s){this.rows[m].set(n,s)}},{key:"setNum",value:function(m,n,s){this.rows[m].setNum(n,s)}},{key:"setString",value:function(m,n,s){this.rows[m].setString(n,s)}},{key:"get",value:function(m,n){return this.rows[m].get(n)}},{key:"getNum",value:function(m,n){return this.rows[m].getNum(n)}},{key:"getString",value:function(m,n){return this.rows[m].getString(n)}},{key:"getObject",value:function(m){for(var n,s={},l=0;l<this.rows.length;l++)if(n=this.rows[l].obj,typeof m=="string"){if(!(0<=this.columns.indexOf(m)))throw new Error('This table has no column named "'.concat(m,'"'));s[n[m]]=n}else s[l]=this.rows[l].obj;return s}},{key:"getArray",value:function(){for(var m=[],n=0;n<this.rows.length;n++)m.push(this.rows[n].arr);return m}}])&&d(f.prototype,g),i}(),t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.splice":167,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196}],303:[function(t,x,b){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(d,i){for(var f=0;f<i.length;f++){var g=i[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}t.default.TableRow=function(){function d(g,m){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var n=[];g&&(n=g.split(m=m||",")),this.arr=n,this.obj=Object.fromEntries(n.entries()),this.table=null}var i,f;return i=d,(f=[{key:"set",value:function(g,m){if(typeof g=="string"){var n=this.table.columns.indexOf(g);if(!(0<=n))throw new Error('This table has no column named "'.concat(g,'"'));this.obj[g]=m,this.arr[n]=m}else{if(!(g<this.table.columns.length))throw new Error("Column #".concat(g," is out of the range of this table"));this.arr[g]=m,n=this.table.columns[g],this.obj[n]=m}}},{key:"setNum",value:function(g,m){m=parseFloat(m),this.set(g,m)}},{key:"setString",value:function(g,m){m=m.toString(),this.set(g,m)}},{key:"get",value:function(g){return(typeof g=="string"?this.obj:this.arr)[g]}},{key:"getNum",value:function(g){var m=parseFloat(typeof g=="string"?this.obj[g]:this.arr[g]);if(m.toString()==="NaN")throw"Error: ".concat(this.obj[g]," is NaN (Not a Number)");return m}},{key:"getString",value:function(g){return(typeof g=="string"?this.obj:this.arr)[g].toString()}}])&&h(i.prototype,f),d}(),t=t.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238}],304:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(f,g){for(var m=0;m<g.length;m++){var n=g[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}function i(f){for(var g=[],m=0;m<f.length;m++)g.push(new h.default.XML(f[m]));return g}h.default.XML=function(){function f(n){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");n?this.DOM=n:(n=document.implementation.createDocument(null,"doc"),this.DOM=n.createElement("root"))}var g,m;return g=f,(m=[{key:"getParent",value:function(){return new h.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(n){var s=this.DOM.innerHTML,l=this.DOM.attributes,c=document.implementation.createDocument(null,"default").createElement(n);c.innerHTML=s;for(var a=0;a<l.length;a++)c.setAttribute(l[a].nodeName,l.nodeValue);this.DOM=c}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var n=[],s=0;s<this.DOM.childNodes.length;s++)n.push(this.DOM.childNodes[s].nodeName);return n}},{key:"getChildren",value:function(n){return i(n?this.DOM.getElementsByTagName(n):this.DOM.children)}},{key:"getChild",value:function(n){if(typeof n!="string")return new h.default.XML(this.DOM.children[n]);var s=!0,l=!1,c=void 0;try{for(var a,u=this.DOM.children[Symbol.iterator]();!(s=(a=u.next()).done);s=!0){var y=a.value;if(y.tagName===n)return new h.default.XML(y)}}catch(p){l=!0,c=p}finally{try{s||u.return==null||u.return()}finally{if(l)throw c}}}},{key:"addChild",value:function(n){n instanceof h.default.XML&&this.DOM.appendChild(n.DOM)}},{key:"removeChild",value:function(n){var s=-1;if(typeof n=="string"){for(var l=0;l<this.DOM.children.length;l++)if(this.DOM.children[l].tagName===n){s=l;break}}else s=n;s!==-1&&this.DOM.removeChild(this.DOM.children[s])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var n=[],s=!0,l=!1,c=void 0;try{for(var a,u=this.DOM.attributes[Symbol.iterator]();!(s=(a=u.next()).done);s=!0){var y=a.value;n.push(y.nodeName)}}catch(p){l=!0,c=p}finally{try{s||u.return==null||u.return()}finally{if(l)throw c}}return n}},{key:"hasAttribute",value:function(n){var s={},l=!0,c=!1,a=void 0;try{for(var u,y=this.DOM.attributes[Symbol.iterator]();!(l=(u=y.next()).done);l=!0){var p=u.value;s[p.nodeName]=p.nodeValue}}catch(v){c=!0,a=v}finally{try{l||y.return==null||y.return()}finally{if(c)throw a}}return!!s[n]}},{key:"getNum",value:function(n,s){var l={},c=!0,a=!1,u=void 0;try{for(var y,p=this.DOM.attributes[Symbol.iterator]();!(c=(y=p.next()).done);c=!0){var v=y.value;l[v.nodeName]=v.nodeValue}}catch(w){a=!0,u=w}finally{try{c||p.return==null||p.return()}finally{if(a)throw u}}return Number(l[n])||s||0}},{key:"getString",value:function(n,s){var l={},c=!0,a=!1,u=void 0;try{for(var y,p=this.DOM.attributes[Symbol.iterator]();!(c=(y=p.next()).done);c=!0){var v=y.value;l[v.nodeName]=v.nodeValue}}catch(w){a=!0,u=w}finally{try{c||p.return==null||p.return()}finally{if(a)throw u}}return l[n]?String(l[n]):s||null}},{key:"setAttribute",value:function(n,s){this.DOM.setAttribute(n,s)}},{key:"getContent",value:function(n){var s=this.DOM.textContent;return(s=s.replace(/\s\s+/g,","))||n||null}},{key:"setContent",value:function(n){this.DOM.children.length||(this.DOM.textContent=n)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&d(g.prototype,m),f}(),t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],305:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var i=arguments.length,f=[],g=0,m=0;m<i;m++){var n=arguments[m];if((n=+n)===1/0||n===-1/0)return 1/0;g<(n=Math.abs(n))&&(g=n),f[m]=n}g===0&&(g=1);for(var u=0,a=0,s=0;s<i;s++)var l=f[s]/g,l=l*l-a,c=u+l,a=c-u-l,u=c;return Math.sqrt(u)*g}h.default.prototype.abs=Math.abs,h.default.prototype.ceil=Math.ceil,h.default.prototype.constrain=function(i,f,g){return h.default._validateParameters("constrain",arguments),Math.max(Math.min(i,g),f)},h.default.prototype.dist=function(){for(var i=arguments.length,f=new Array(i),g=0;g<i;g++)f[g]=arguments[g];return h.default._validateParameters("dist",f),f.length===4?d(f[2]-f[0],f[3]-f[1]):f.length===6?d(f[3]-f[0],f[4]-f[1],f[5]-f[2]):void 0},h.default.prototype.exp=Math.exp,h.default.prototype.floor=Math.floor,h.default.prototype.lerp=function(i,f,g){return h.default._validateParameters("lerp",arguments),g*(f-i)+i},h.default.prototype.log=Math.log,h.default.prototype.mag=function(i,f){return h.default._validateParameters("mag",arguments),d(i,f)},h.default.prototype.map=function(i,f,g,m,n,s){return h.default._validateParameters("map",arguments),i=(i-f)/(g-f)*(n-m)+m,s?m<n?this.constrain(i,m,n):this.constrain(i,n,m):i},h.default.prototype.max=function(){for(var i=function(n){var s=-1/0,l=!0,c=!1,a=void 0;try{for(var u,y=n[Symbol.iterator]();!(l=(u=y.next()).done);l=!0)var p=u.value,s=s<p?p:s}catch(v){c=!0,a=v}finally{try{l||y.return==null||y.return()}finally{if(c)throw a}}return s},f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return g[0]instanceof Array?i(g[0]):i(g)},h.default.prototype.min=function(){for(var i=function(n){var s=1/0,l=!0,c=!1,a=void 0;try{for(var u,y=n[Symbol.iterator]();!(l=(u=y.next()).done);l=!0)var p=u.value,s=p<s?p:s}catch(v){c=!0,a=v}finally{try{l||y.return==null||y.return()}finally{if(c)throw a}}return s},f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return g[0]instanceof Array?i(g[0]):i(g)},h.default.prototype.norm=function(i,f,g){return h.default._validateParameters("norm",arguments),this.map(i,f,g,0,1)},h.default.prototype.pow=Math.pow,h.default.prototype.round=function(i,f){return f?(f=Math.pow(10,f),Math.round(i*f)/f):Math.round(i)},h.default.prototype.sq=function(i){return i*i},h.default.prototype.sqrt=Math.sqrt,h.default.prototype.fract=function(m){h.default._validateParameters("fract",arguments);var f,g=0,m=Number(m);return isNaN(m)||Math.abs(m)===1/0?m:(m<0&&(m=-m,g=1),String(m).includes(".")&&!String(m).includes("e")?(f=String(m),f=+("0"+f.slice(f.indexOf("."))),Math.abs(g-f)):m<1?Math.abs(g-m):0)},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],306:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(f,g,m){return(d=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(n,s,l){var c=[null];return c.push.apply(c,s),s=new(Function.bind.apply(n,c)),l&&i(s,l.prototype),s}).apply(null,arguments)}function i(f,g){return(i=Object.setPrototypeOf||function(m,n){return m.__proto__=n,m})(f,g)}h.default.prototype.createVector=function(f,g,m){return this instanceof h.default?d(h.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new h.default.Vector(f,g,m)},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188}],307:[function(m,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,m=(m=m("../core/main"))&&m.__esModule?m:{default:m};function h(n){return .5*(1-Math.cos(n*Math.PI))}var d,i=4095,f=4,g=.5,m=(m.default.prototype.noise=function(n){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(d==null){d=new Array(4096);for(var c=0;c<4096;c++)d[c]=Math.random()}n<0&&(n=-n),s<0&&(s=-s),l<0&&(l=-l);for(var a,u,y=Math.floor(n),p=Math.floor(s),v=Math.floor(l),w=n-y,C=s-p,T=l-v,j=0,A=.5,L=0;L<f;L++){var M=y+(p<<4)+(v<<8),k=h(w),O=h(C),N=d[M&i];N+=k*(d[M+1&i]-N),a=d[M+16&i],N+=O*((a+=k*(d[M+16+1&i]-a))-N),a=d[(M+=256)&i],a+=k*(d[M+1&i]-a),u=d[M+16&i],a+=O*((u+=k*(d[M+16+1&i]-u))-a),j+=(N+=h(T)*(a-N))*A,A*=g,y<<=1,p<<=1,v<<=1,1<=(w*=2)&&(y++,w--),1<=(C*=2)&&(p++,C--),1<=(T*=2)&&(v++,T--)}return j},m.default.prototype.noiseDetail=function(n,s){0<n&&(f=n),0<s&&(g=s)},m.default.prototype.noiseSeed=function(n){c=4294967296;var s,l,c,a={setSeed:function(y){l=s=(y??Math.random()*c)>>>0},getSeed:function(){return s},rand:function(){return(l=(1664525*l+1013904223)%c)/c}};a.setSeed(n),d=new Array(4096);for(var u=0;u<4096;u++)d[u]=a.rand()},m.default);b.default=m},{"../core/main":275}],308:[function(t,x,b){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(c)}function d(c){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(a){return h(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":h(a)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(l=t("../core/main"))&&l.__esModule?l:{default:l},f=function(c){if(c&&c.__esModule)return c;if(c===null||d(c)!=="object"&&typeof c!="function")return{default:c};var a=g();if(a&&a.has(c))return a.get(c);var u,y={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in c){var v;Object.prototype.hasOwnProperty.call(c,u)&&((v=p?Object.getOwnPropertyDescriptor(c,u):null)&&(v.get||v.set)?Object.defineProperty(y,u,v):y[u]=c[u])}return y.default=c,a&&a.set(c,y),y}(t("../core/constants"));function g(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,g=function(){return c},c)}function m(c,a){for(var u=0;u<a.length;u++){var y=a[u];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}function n(c,a){return c!==0&&(this.x=this.x%c),a!==0&&(this.y=this.y%a),this}function s(c,a,u){return c!==0&&(this.x=this.x%c),a!==0&&(this.y=this.y%a),u!==0&&(this.z=this.z%u),this}i.default.Vector=function(){function c(){var C=this,p=c;if(!(C instanceof p))throw new TypeError("Cannot call a class as a function");var v,w,C=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],v=(arguments.length<=2?void 0:arguments[2])||0,w=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(v=(arguments.length<=0?void 0:arguments[0])||0,w=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=v,this.y=w,this.z=C}var a,u,y;return a=c,y=[{key:"fromAngle",value:function(p,v){return new i.default.Vector((v=v===void 0?1:v)*Math.cos(p),v*Math.sin(p),0)}},{key:"fromAngles",value:function(A,T,w){w===void 0&&(w=1);var C=Math.cos(T),T=Math.sin(T),j=Math.cos(A),A=Math.sin(A);return new i.default.Vector(w*A*T,-w*j,w*A*C)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*f.TWO_PI)}},{key:"random3D",value:function(){var p=Math.random()*f.TWO_PI,v=2*Math.random()-1,C=Math.sqrt(1-v*v),w=C*Math.cos(p),C=C*Math.sin(p);return new i.default.Vector(w,C,v)}},{key:"copy",value:function(p){return p.copy(p)}},{key:"add",value:function(p,v,w){return w?w.set(p):(w=p.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),w.add(v),w}},{key:"rem",value:function(p,v){if(p instanceof i.default.Vector&&v instanceof i.default.Vector)return(p=p.copy()).rem(v),p}},{key:"sub",value:function(p,v,w){return w?w.set(p):(w=p.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),w.sub(v),w}},{key:"mult",value:function(p,v,w){return w?w.set(p):(w=p.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),w.mult(v),w}},{key:"rotate",value:function(p,v,w){return arguments.length===2?w=p.copy():(w instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),w.set(p)),w.rotate(v),w}},{key:"div",value:function(p,v,w){return w?w.set(p):(w=p.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),w.div(v),w}},{key:"dot",value:function(p,v){return p.dot(v)}},{key:"cross",value:function(p,v){return p.cross(v)}},{key:"dist",value:function(p,v){return p.dist(v)}},{key:"lerp",value:function(p,v,w,C){return C?C.set(p):(C=p.copy(),arguments.length===4&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(v,w),C}},{key:"slerp",value:function(p,v,w,C){return C?C.set(p):(C=p.copy(),arguments.length===4&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(v,w),C}},{key:"mag",value:function(p){return p.mag()}},{key:"magSq",value:function(p){return p.magSq()}},{key:"normalize",value:function(p,v){return arguments.length<2?v=p.copy():(v instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),v.set(p)),v.normalize()}},{key:"limit",value:function(p,v,w){return arguments.length<3?w=p.copy():(w instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),w.set(p)),w.limit(v)}},{key:"setMag",value:function(p,v,w){return arguments.length<3?w=p.copy():(w instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),w.set(p)),w.setMag(v)}},{key:"heading",value:function(p){return p.heading()}},{key:"angleBetween",value:function(p,v){return p.angleBetween(v)}},{key:"reflect",value:function(p,v,w){return arguments.length<3?w=p.copy():(w instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),w.set(p)),w.reflect(v)}},{key:"array",value:function(p){return p.array()}},{key:"equals",value:function(p,v){var w;return p instanceof i.default.Vector?w=p:p instanceof Array?w=new i.default.Vector().set(p):i.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),w.equals(v)}}],(u=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(p,v,w){return p instanceof i.default.Vector?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):Array.isArray(p)?(this.x=p[0]||0,this.y=p[1]||0,this.z=p[2]||0):(this.x=p||0,this.y=v||0,this.z=w||0),this}},{key:"copy",value:function(){return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new i.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(p,v,w){return p instanceof i.default.Vector?(this.x+=p.x||0,this.y+=p.y||0,this.z+=p.z||0):Array.isArray(p)?(this.x+=p[0]||0,this.y+=p[1]||0,this.z+=p[2]||0):(this.x+=p||0,this.y+=v||0,this.z+=w||0),this}},{key:"rem",value:function(p,v,w){var C;if(p instanceof i.default.Vector){if([p.x,p.y,p.z].every(Number.isFinite))return T=parseFloat(p.x),j=parseFloat(p.y),C=parseFloat(p.z),s.call(this,T,j,C)}else if(Array.isArray(p)){if(p.every(function(A){return Number.isFinite(A)}))return p.length===2?n.call(this,p[0],p[1]):p.length===3?s.call(this,p[0],p[1],p[2]):void 0}else if(arguments.length===1){if(Number.isFinite(p)&&p!==0)return this.x=this.x%p,this.y=this.y%p,this.z=this.z%p,this}else if(arguments.length===2){var T=Array.prototype.slice.call(arguments);if(T.every(function(A){return Number.isFinite(A)})&&T.length===2)return n.call(this,T[0],T[1])}else if(arguments.length===3){var j=Array.prototype.slice.call(arguments);if(j.every(function(A){return Number.isFinite(A)})&&j.length===3)return s.call(this,j[0],j[1],j[2])}}},{key:"sub",value:function(p,v,w){return p instanceof i.default.Vector?(this.x-=p.x||0,this.y-=p.y||0,this.z-=p.z||0):Array.isArray(p)?(this.x-=p[0]||0,this.y-=p[1]||0,this.z-=p[2]||0):(this.x-=p||0,this.y-=v||0,this.z-=w||0),this}},{key:"mult",value:function(p,v,w){var C;return p instanceof i.default.Vector?Number.isFinite(p.x)&&Number.isFinite(p.y)&&Number.isFinite(p.z)&&typeof p.x=="number"&&typeof p.y=="number"&&typeof p.z=="number"?(this.x*=p.x,this.y*=p.y,this.z*=p.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(p)?p.every(function(T){return Number.isFinite(T)})&&p.every(function(T){return typeof T=="number"})?p.length===1?(this.x*=p[0],this.y*=p[0],this.z*=p[0]):p.length===2?(this.x*=p[0],this.y*=p[1]):p.length===3&&(this.x*=p[0],this.y*=p[1],this.z*=p[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(C=Array.prototype.slice.call(arguments)).every(function(T){return Number.isFinite(T)})&&C.every(function(T){return typeof T=="number"})?(arguments.length===1&&(this.x*=p,this.y*=p,this.z*=p),arguments.length===2&&(this.x*=p,this.y*=v),arguments.length===3&&(this.x*=p,this.y*=v,this.z*=w)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(p,v,w){if(p instanceof i.default.Vector)if(Number.isFinite(p.x)&&Number.isFinite(p.y)&&Number.isFinite(p.z)&&typeof p.x=="number"&&typeof p.y=="number"&&typeof p.z=="number"){var C=p.z===0&&this.z===0;if(p.x===0||p.y===0||!C&&p.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=p.x,this.y/=p.y,C||(this.z/=p.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(p))if(p.every(function(T){return Number.isFinite(T)})&&p.every(function(T){return typeof T=="number"})){if(p.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;p.length===1?(this.x/=p[0],this.y/=p[0],this.z/=p[0]):p.length===2?(this.x/=p[0],this.y/=p[1]):p.length===3&&(this.x/=p[0],this.y/=p[1],this.z/=p[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(C=Array.prototype.slice.call(arguments),C.every(function(T){return Number.isFinite(T)})&&C.every(function(T){return typeof T=="number"})){if(C.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=p,this.y/=p,this.z/=p),arguments.length===2&&(this.x/=p,this.y/=v),arguments.length===3&&(this.x/=p,this.y/=v,this.z/=w)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var p=this.x,v=this.y,w=this.z;return p*p+v*v+w*w}},{key:"dot",value:function(p,v,w){return p instanceof i.default.Vector?this.dot(p.x,p.y,p.z):this.x*(p||0)+this.y*(v||0)+this.z*(w||0)}},{key:"cross",value:function(C){var v=this.y*C.z-this.z*C.y,w=this.z*C.x-this.x*C.z,C=this.x*C.y-this.y*C.x;return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,v,w,C):new i.default.Vector(v,w,C)}},{key:"dist",value:function(p){return p.copy().sub(this).mag()}},{key:"normalize",value:function(){var p=this.mag();return p!==0&&this.mult(1/p),this}},{key:"limit",value:function(p){var v=this.magSq();return p*p<v&&this.div(Math.sqrt(v)).mult(p),this}},{key:"setMag",value:function(p){return this.normalize().mult(p)}},{key:"heading",value:function(){var p=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(p):p}},{key:"setHeading",value:function(p){this.isPInst&&(p=this._toRadians(p));var v=this.mag();return this.x=v*Math.cos(p),this.y=v*Math.sin(p),this}},{key:"rotate",value:function(v){var v=this.heading()+v,w=(this.isPInst&&(v=this._toRadians(v)),this.mag());return this.x=Math.cos(v)*w,this.y=Math.sin(v)*w,this}},{key:"angleBetween",value:function(p){var v;return this.magSq()*p.magSq()==0?NaN:(v=this.cross(p),p=Math.atan2(v.mag(),this.dot(p))*Math.sign(v.z||1),this.isPInst?this._fromRadians(p):p)}},{key:"lerp",value:function(p,v,w,C){return p instanceof i.default.Vector?this.lerp(p.x,p.y,p.z,v):(this.x+=(p-this.x)*C||0,this.y+=(v-this.y)*C||0,this.z+=(w-this.z)*C||0,this)}},{key:"slerp",value:function(p,v){if(v!==0){if(v===1)return this.set(p);var w=this.mag(),C=p.mag();if(w*C==0)this.mult(1-v).add(p.x*v,p.y*v,p.z*v);else{var T=this.cross(p),j=T.mag(),A=Math.atan2(j,this.dot(p));if(0<j)T.x/=j,T.y/=j,T.z/=j;else{if(A<.5*Math.PI)return this.mult(1-v).add(p.x*v,p.y*v,p.z*v),this;this.z===0&&p.z===0?T.set(0,0,1):this.x!==0?T.set(this.y,-this.x,0).normalize():T.set(1,0,0)}j=T.cross(this),p=1-v+v*C/w,T=p*Math.cos(v*A),C=p*Math.sin(v*A),this.x=this.x*T+j.x*C,this.y=this.y*T+j.y*C,this.z=this.z*T+j.z*C}}return this}},{key:"reflect",value:function(p){return p.normalize(),this.sub(p.mult(2*this.dot(p)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(j,v,w){var C,T,j=j instanceof i.default.Vector?(C=j.x||0,T=j.y||0,j.z||0):Array.isArray(j)?(C=j[0]||0,T=j[1]||0,j[2]||0):(C=j||0,T=v||0,w||0);return this.x===C&&this.y===T&&this.z===j}}])&&m(a.prototype,u),y&&m(a,y),c}();var l=i.default.Vector;b.default=l},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.constructor":173,"core-js/modules/es.number.is-finite":174,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],309:[function(g,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(g=g("../core/main"))&&g.__esModule?g:{default:g},d="_lcg_random_state",i=4294967296,f=0,g=(h.default.prototype._lcg=function(m){return this[m]=(1664525*this[m]+1013904223)%i,this[m]/i},h.default.prototype._lcgSetSeed=function(m,n){this[m]=(n??Math.random()*i)>>>0},h.default.prototype.randomSeed=function(m){this._lcgSetSeed(d,m),this._gaussian_previous=!1},h.default.prototype.random=function(m,n){var s,l;return h.default._validateParameters("random",arguments),s=this[d]!=null?this._lcg(d):Math.random(),m===void 0?s:n===void 0?m instanceof Array?m[Math.floor(s*m.length)]:s*m:(n<m&&(l=m,m=n,n=l),s*(n-m)+m)},h.default.prototype.randomGaussian=function(m){var n,s,l,c,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)n=f,this._gaussian_previous=!1;else{for(;1<=(c=(s=this.random(2)-1)*s+(l=this.random(2)-1)*l););n=s*(c=Math.sqrt(-2*Math.log(c)/c)),f=l*c,this._gaussian_previous=!0}return n*a+(m||0)},h.default);b.default=g},{"../core/main":275}],310:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var s=g();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../core/constants"));function g(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,g=function(){return n},n)}i.default.prototype._angleMode=f.RADIANS,i.default.prototype.acos=function(n){return this._fromRadians(Math.acos(n))},i.default.prototype.asin=function(n){return this._fromRadians(Math.asin(n))},i.default.prototype.atan=function(n){return this._fromRadians(Math.atan(n))},i.default.prototype.atan2=function(n,s){return this._fromRadians(Math.atan2(n,s))},i.default.prototype.cos=function(n){return Math.cos(this._toRadians(n))},i.default.prototype.sin=function(n){return Math.sin(this._toRadians(n))},i.default.prototype.tan=function(n){return Math.tan(this._toRadians(n))},i.default.prototype.degrees=function(n){return n*f.RAD_TO_DEG},i.default.prototype.radians=function(n){return n*f.DEG_TO_RAD},i.default.prototype.angleMode=function(n){if(i.default._validateParameters("angleMode",arguments),n===void 0)return this._angleMode;n!==f.DEGREES&&n!==f.RADIANS||(this._angleMode=n)},i.default.prototype._toRadians=function(n){return this._angleMode===f.DEGREES?n*f.DEG_TO_RAD:n},i.default.prototype._toDegrees=function(n){return this._angleMode===f.RADIANS?n*f.RAD_TO_DEG:n},i.default.prototype._fromRadians=function(n){return this._angleMode===f.DEGREES?n*f.RAD_TO_DEG:n};var m=i.default;b.default=m},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],311:[function(t,x,b){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.textAlign=function(d,i){var f;return h.default._validateParameters("textAlign",arguments),(f=this._renderer).textAlign.apply(f,arguments)},h.default.prototype.textLeading=function(d){var i;return h.default._validateParameters("textLeading",arguments),(i=this._renderer).textLeading.apply(i,arguments)},h.default.prototype.textSize=function(d){var i;return h.default._validateParameters("textSize",arguments),(i=this._renderer).textSize.apply(i,arguments)},h.default.prototype.textStyle=function(d){var i;return h.default._validateParameters("textStyle",arguments),(i=this._renderer).textStyle.apply(i,arguments)},h.default.prototype.textWidth=function(){for(var d=arguments.length,i=new Array(d),f=0;f<d;f++)i[f]=arguments[f];if(i[0]+="",h.default._validateParameters("textWidth",i),i[0].length===0)return 0;for(var g=i[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),m=[],n=0;n<g.length;n++)m.push(this._renderer.textWidth(g[n]));return Math.max.apply(Math,m)},h.default.prototype.textAscent=function(){for(var d=arguments.length,i=new Array(d),f=0;f<d;f++)i[f]=arguments[f];return h.default._validateParameters("textAscent",i),this._renderer.textAscent()},h.default.prototype.textDescent=function(){for(var d=arguments.length,i=new Array(d),f=0;f<d;f++)i[f]=arguments[f];return h.default._validateParameters("textDescent",i),this._renderer.textDescent()},h.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},h.default.prototype.textWrap=function(d){if(d!=="WORD"&&d!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(d)},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],312:[function(t,x,b){function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function d(l){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(s=t("../core/main"))&&s.__esModule?s:{default:s},f=n(t("../core/constants")),g=n(t("opentype.js"));function m(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,m=function(){return l},l)}function n(l){if(l&&l.__esModule)return l;if(l===null||d(l)!=="object"&&typeof l!="function")return{default:l};var c=m();if(c&&c.has(l))return c.get(l);var a,u,y={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&((u=p?Object.getOwnPropertyDescriptor(l,a):null)&&(u.get||u.set)?Object.defineProperty(y,a,u):y[a]=l[a]);return y.default=l,c&&c.set(l,y),y}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(l,c,a){i.default._validateParameters("loadFont",arguments);var u=new i.default.Font(this),y=this;return g.load(l,function(w,C){if(w)return i.default._friendlyFileLoadError(4,l),a!==void 0?a(w):void console.error(w,l);u.font=C,c!==void 0&&c(u),y._decrementPreload();var w=l.split("\\").pop().split("/").pop(),C=w.lastIndexOf("."),T=C<1?null:w.slice(C+1);["ttf","otf","woff","woff2"].includes(T)&&(T=w.slice(0,C!==-1?C:0),(w=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(T,`;
src: url(`).concat(l,`);
}
`))),document.head.appendChild(w))}),u},i.default.prototype.text=function(l,c,a,u,y){var p;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(p=this._renderer).text.apply(p,arguments):this},i.default.prototype.textFont=function(l,c){if(i.default._validateParameters("textFont",arguments),arguments.length){if(l)return this._renderer._setProperty("_textFont",l),c&&(this._renderer._setProperty("_textSize",c),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",c*f._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var s=i.default;b.default=s},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,"opentype.js":249}],313:[function(t,x,b){function h(j){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(j)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=(d=t("../core/main"))&&d.__esModule?d:{default:d},i=function(j){if(j&&j.__esModule)return j;if(j===null||g(j)!=="object"&&typeof j!="function")return{default:j};var A=f();if(A&&A.has(j))return A.get(j);var L,M={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(L in j){var O;Object.prototype.hasOwnProperty.call(j,L)&&((O=k?Object.getOwnPropertyDescriptor(j,L):null)&&(O.get||O.set)?Object.defineProperty(M,L,O):M[L]=j[L])}return M.default=j,A&&A.set(j,M),M}(t("../core/constants"));function f(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,f=function(){return j},j)}function g(j){return(g=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(A){return h(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":h(A)})(j)}function m(j,A){for(var L=0;L<A.length;L++){var M=A[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}function n(j,A){var L=j.length;return j[A<0?A%L+L:A%L]}function s(j,A,L,M){var k,O,N;return M?(s.tmpPoint1===void 0&&(s.tmpPoint1=[],s.tmpPoint2=[]),O=s.tmpPoint1,N=s.tmpPoint2,O.x=A.x-j.x,O.y=A.y-j.y,N.x=L.x-A.x,N.y=L.y-A.y,k=O.x*N.x+O.y*N.y,O=Math.sqrt(O.x*O.x+O.y*O.y),N=Math.sqrt(N.x*N.x+N.y*N.y),Math.acos(k/(O*N))<M):(A[0]-j[0])*(L[1]-j[1])-(L[0]-j[0])*(A[1]-j[1])==0}function l(F,Y,H,te,ie,O,N,U,V){var G=1-V,W=Math.pow(G,3),Z=Math.pow(G,2),D=V*V,I=D*V,z=W*F+3*Z*V*H+3*G*V*V*ie+I*N,W=W*Y+3*Z*V*te+3*G*V*V*O+I*U,Z=F+2*V*(H-F)+D*(ie-2*H+F),I=Y+2*V*(te-Y)+D*(O-2*te+Y),q=H+2*V*(ie-H)+D*(N-2*ie+H),D=te+2*V*(O-te)+D*(U-2*O+te),F=G*F+V*H,H=G*Y+V*te,Y=G*ie+V*N,te=G*O+V*U,ie=90-180*Math.atan2(Z-q,I-D)/Math.PI;return(q<Z||I<D)&&(ie+=180),{x:z,y:W,m:{x:Z,y:I},n:{x:q,y:D},start:{x:F,y:H},end:{x:Y,y:te},alpha:ie}}function c(j,A,L,M,k,O,N,U,V){return V==null?C(j,A,L,M,k,O,N,U):l(j,A,L,M,k,O,N,U,function(G,z,W,Z,I,q,D,F,H){if(!(H<0||C(G,z,W,Z,I,q,D,F)<H)){var Y,te=.5,ie=1-te;for(Y=C(G,z,W,Z,I,q,D,F,ie);.01<Math.abs(Y-H);)Y=C(G,z,W,Z,I,q,D,F,ie+=(Y<H?1:-1)*(te/=2));return ie}}(j,A,L,M,k,O,N,U,V))}function a(j,A,L){for(var M,k,O,N,U,V=0,G=0,z=(j=function(W,Z){function I(xe,Te,Le){var Je,ke;if(!xe)return["C",Te.x,Te.y,Te.x,Te.y,Te.x,Te.y];switch(xe[0]in{T:1,Q:1}||(Te.qx=Te.qy=null),xe[0]){case"M":Te.X=xe[1],Te.Y=xe[2];break;case"A":xe=["C"].concat(y.apply(0,[Te.x,Te.y].concat(xe.slice(1))));break;case"S":ke=Le==="C"||Le==="S"?(Je=2*Te.x-Te.bx,2*Te.y-Te.by):(Je=Te.x,Te.y),xe=["C",Je,ke].concat(xe.slice(1));break;case"T":Le==="Q"||Le==="T"?(Te.qx=2*Te.x-Te.qx,Te.qy=2*Te.y-Te.qy):(Te.qx=Te.x,Te.qy=Te.y),xe=["C"].concat(w(Te.x,Te.y,Te.qx,Te.qy,xe[1],xe[2]));break;case"Q":Te.qx=xe[1],Te.qy=xe[2],xe=["C"].concat(w(Te.x,Te.y,xe[1],xe[2],xe[3],xe[4]));break;case"L":xe=["C"].concat(v(Te.x,Te.y,xe[1],xe[2]));break;case"H":xe=["C"].concat(v(Te.x,Te.y,xe[1],Te.y));break;case"V":xe=["C"].concat(v(Te.x,Te.y,Te.x,xe[1]));break;case"Z":xe=["C"].concat(v(Te.x,Te.y,Te.X,Te.Y))}return xe}function q(xe,Te){if(7<xe[Te].length){xe[Te].shift();for(var Le=xe[Te];Le.length;)de[Te]="A",Y&&(_e[Te]="A"),xe.splice(Te++,0,["C"].concat(Le.splice(0,6)));xe.splice(Te,1),F=Math.max(H.length,Y&&Y.length||0)}}function D(xe,Te,Le,Je,ke){xe&&Te&&xe[ke][0]==="M"&&Te[ke][0]!=="M"&&(Te.splice(ke,0,["M",Je.x,Je.y]),Le.bx=0,Le.by=0,Le.x=xe[ke][1],Le.y=xe[ke][2],F=Math.max(H.length,Y&&Y.length||0))}var F,H=u(W),Y=Z&&u(Z),te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ie={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},de=[],_e=[],le="",re="";F=Math.max(H.length,Y&&Y.length||0);for(var pe=0;pe<F;pe++){(le=H[pe]?H[pe][0]:le)!=="C"&&(de[pe]=le,pe&&(re=de[pe-1])),H[pe]=I(H[pe],te,re),de[pe]!=="A"&&le==="C"&&(de[pe]="C"),q(H,pe),Y&&((le=Y[pe]?Y[pe][0]:le)!=="C"&&(_e[pe]=le,pe&&(re=_e[pe-1])),Y[pe]=I(Y[pe],ie,re),_e[pe]!=="A"&&le==="C"&&(_e[pe]="C"),q(Y,pe)),D(H,Y,te,ie,pe),D(Y,H,ie,te,pe);var Q=H[pe],ce=Y&&Y[pe],be=Q.length,Re=Y&&ce.length;te.x=Q[be-2],te.y=Q[be-1],te.bx=parseFloat(Q[be-4])||te.x,te.by=parseFloat(Q[be-3])||te.y,ie.bx=Y&&(parseFloat(ce[Re-4])||ie.x),ie.by=Y&&(parseFloat(ce[Re-3])||ie.y),ie.x=Y&&ce[Re-2],ie.y=Y&&ce[Re-1]}return Y?[H,Y]:H}(j)).length;G<z;G++){if((O=j[G])[0]==="M")M=+O[1],k=+O[2];else{if(A<V+(N=c(M,k,O[1],O[2],O[3],O[4],O[5],O[6]))&&!L)return{x:(U=c(M,k,O[1],O[2],O[3],O[4],O[5],O[6],A-V)).x,y:U.y,alpha:U.alpha};V+=N,M=+O[5],k=+O[6]}O.shift()}return U=(U=L?V:l(M,k,O[0],O[1],O[2],O[3],O[4],O[5],1)).alpha?{x:U.x,y:U.y,alpha:U.alpha}:U}function u(j){var A=[],L=0,M=0,k=0,O=0,N=0;if(j){j[0][0]==="M"&&(k=L=+j[0][1],O=M=+j[0][2],N++,A[0]=["M",L,M]);for(var U,V,G=j.length===3&&j[0][0]==="M"&&j[1][0].toUpperCase()==="R"&&j[2][0].toUpperCase()==="Z",z=N,W=j.length;z<W;z++){if(A.push(U=[]),(V=j[z])[0]!==String.prototype.toUpperCase.call(V[0]))switch(U[0]=String.prototype.toUpperCase.call(V[0]),U[0]){case"A":U[1]=V[1],U[2]=V[2],U[3]=V[3],U[4]=V[4],U[5]=V[5],U[6]=+(V[6]+L),U[7]=+(V[7]+M);break;case"V":U[1]=+V[1]+M;break;case"H":U[1]=+V[1]+L;break;case"R":for(var Z,I=2,q=(Z=[L,M].concat(V.slice(1))).length;I<q;I++)Z[I]=+Z[I]+L,Z[++I]=+Z[I]+M;A.pop(),A=A.concat(p(Z,G));break;case"M":k=+V[1]+L,O=+V[2]+M;break;default:for(var D=1,F=V.length;D<F;D++)U[D]=+V[D]+(D%2?L:M)}else if(V[0]==="R")Z=[L,M].concat(V.slice(1)),A.pop(),A=A.concat(p(Z,G)),U=["R"].concat(V.slice(-2));else for(var H=0,Y=V.length;H<Y;H++)U[H]=V[H];switch(U[0]){case"Z":L=k,M=O;break;case"H":L=U[1];break;case"V":M=U[1];break;case"M":k=U[U.length-2],O=U[U.length-1];break;default:L=U[U.length-2],M=U[U.length-1]}}}return A}function y(j,A,L,M,Y,de,te,U,V,G){function z(Re,xe,Te){return{x:Re*Math.cos(Te)-xe*Math.sin(Te),y:Re*Math.sin(Te)+xe*Math.cos(Te)}}var W,F=Math.PI,H=120*F/180,Z=F/180*(+Y||0),I=[],q=(G?(pe=G[0],W=G[1],le=G[2],re=G[3]):(j=(ie=z(j,A,-Z)).x,A=ie.y,1<(q=(D=(j-(U=(ie=z(U,V,-Z)).x))/2)*D/(L*L)+(ie=(A-(V=ie.y))/2)*ie/(M*M))&&(L*=q=Math.sqrt(q),M*=q),q=L*L,_e=M*M,le=(de=(de===te?-1:1)*Math.sqrt(Math.abs((q*_e-q*ie*ie-_e*D*D)/(q*ie*ie+_e*D*D))))*L*ie/M+(j+U)/2,re=de*-M*D/L+(A+V)/2,pe=Math.asin(((A-re)/M).toFixed(9)),W=Math.asin(((V-re)/M).toFixed(9)),(pe=j<le?F-pe:pe)<0&&(pe=2*F+pe),(W=U<le?F-W:W)<0&&(W=2*F+W),te&&W<pe&&(pe-=2*F),!te&&pe<W&&(W-=2*F)),W-pe),D=(Math.abs(q)>H&&(_e=W,ie=U,de=V,W=pe+H*(te&&pe<W?1:-1),I=y(U=le+L*Math.cos(W),V=re+M*Math.sin(W),L,M,Y,0,te,ie,de,[W,_e,le,re])),q=W-pe,Math.cos(pe)),F=Math.sin(pe),H=Math.cos(W),Y=Math.sin(W),te=Math.tan(q/4),ie=4/3*L*te,de=4/3*M*te,_e=[j,A],le=[j+ie*F,A-de*D],re=[U+ie*Y,V-de*H],pe=[U,V];if(le[0]=2*_e[0]-le[0],le[1]=2*_e[1]-le[1],G)return[le,re,pe].concat(I);for(var Q=[],ce=0,be=(I=[le,re,pe].concat(I).join().split(",")).length;ce<be;ce++)Q[ce]=ce%2?z(I[ce-1],I[ce],Z).y:z(I[ce],I[ce+1],Z).x;return Q}function p(j,A){for(var L=[],M=0,k=j.length;M<k-2*!A;M+=2){var O=[{x:+j[M-2],y:+j[M-1]},{x:+j[M],y:+j[M+1]},{x:+j[M+2],y:+j[M+3]},{x:+j[M+4],y:+j[M+5]}];A?M?k-4===M?O[3]={x:+j[0],y:+j[1]}:k-2===M&&(O[2]={x:+j[0],y:+j[1]},O[3]={x:+j[2],y:+j[3]}):O[0]={x:+j[k-2],y:+j[k-1]}:k-4===M?O[3]=O[2]:M||(O[0]={x:+j[M],y:+j[M+1]}),L.push(["C",(-O[0].x+6*O[1].x+O[2].x)/6,(-O[0].y+6*O[1].y+O[2].y)/6,(O[1].x+6*O[2].x-O[3].x)/6,(O[1].y+6*O[2].y-O[3].y)/6,O[2].x,O[2].y])}return L}function v(j,A,L,M){return[j,A,L,M,L,M]}function w(j,A,L,M,k,O){return[1/3*j+2/3*L,1/3*A+2/3*M,1/3*k+2/3*L,1/3*O+2/3*M,k,O]}function C(j,A,L,M,k,O,N,U,V){for(var G=(V=1<(V=V??1)?1:V<0?0:V)/2,z=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],W=0,Z=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0;I<12;I++){var D=G*z[I]+G,q=T(D,j,L,k,N),D=T(D,A,M,O,U);W+=Z[I]*Math.sqrt(q*q+D*D)}return G*W}function T(j,A,L,M,k){return j*(j*(-3*A+9*L-9*M+3*k)+6*A-12*L+6*M)-3*A+3*L}d.default.Font=function(){function j(M){if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");this.parent=M,this.cache={},this.font=void 0}var A,L;return A=j,(L=[{key:"textBounds",value:function(M){var k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,N=4<arguments.length?arguments[4]:void 0,U=N&&N.renderer&&N.renderer._pInst||this.parent,V=U._renderer.drawingContext,G=(V.textAlign||i.LEFT,V.textBaseline||i.BASELINE,G||U._renderer._textSize);if(!ie){for(var z=[],W=[],Z=[],I=(Z[0]=[],[]),q=this._scale(G),D=U._renderer.textLeading(),F=0,H=(this.font.forEachGlyph(M,k,O,G,N,function(le,re,pe,Q){var ce=le.getMetrics();le.index===0||le.index===10?Z[F+=1]=[]:(Z[F].push(re+ce.xMin*q),Z[F].push(re+ce.xMax*q),I.push(pe+F*D+-ce.yMin*q),I.push(pe+F*D+-ce.yMax*q))}),0<Z[F].length&&(z[F]=Math.min.apply(null,Z[F]),W[F]=Math.max.apply(null,Z[F])),0),Y=0;Y<=F;Y++){z[Y]=Math.min.apply(null,Z[Y]),W[Y]=Math.max.apply(null,Z[Y]);var te=W[Y]-z[Y];H<te&&(H=te)}var V=Math.min.apply(null,z),ie={x:V,y:O=Math.min.apply(null,I),h:Math.max.apply(null,I)-O,w:H,advance:V-k},G=this._handleAlignment(U._renderer,M,ie.x,ie.y,ie.w+ie.advance);ie.x=G.x,ie.y=G.y}return ie}},{key:"textToPoints",value:function(M,k,O,N,U){var V=k,G=[],z=M.split(/\r?\n|\r|\n/g);N=N||this.parent._renderer._textSize;for(var W,Z,I,q=0;q<z.length;q++){var D=0;k=V;for(var F=(F=z[q]).replace("	","  "),H=this._getGlyphs(F),Y=0;Y<H.length;Y++){if(Z=F,!((I=H)[W=Y].name&&I[W].name==="space"||Z.length===I.length&&Z[W]===" "))for(var te=function(le){for(var re,pe=[],Q=0;Q<le.length;Q++)le[Q].type==="M"&&(re&&pe.push(re),re=[]),re.push(function(ce){var be=[ce.type];return ce.type==="M"||ce.type==="L"?be.push(ce.x,ce.y):ce.type==="C"?be.push(ce.x1,ce.y1,ce.x2,ce.y2,ce.x,ce.y):ce.type==="Q"&&be.push(ce.x1,ce.y1,ce.x,ce.y),be}(le[Q]));return pe.push(re),pe}(H[Y].getPath(k,O,N).commands),ie=0;ie<te.length;ie++)for(var de=function(le,re){for(var re=function(xe,Te){if(g(xe)!=="object")xe=Te;else for(var Le in Te)xe[Le]===void 0&&(xe[Le]=Te[Le]);return xe}(re,{sampleFactor:.1,simplifyThreshold:0}),pe=a(le,0,1),Q=pe/(pe*re.sampleFactor),ce=[],be=0;be<pe;be+=Q)ce.push(a(le,be));return re.simplifyThreshold&&function(Re){for(var xe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Te=0,Le=Re.length-1;3<Re.length&&0<=Le;--Le)s(n(Re,Le-1),n(Re,Le),n(Re,Le+1),xe)&&(Re.splice(Le%Re.length,1),Te++)}(ce,re.simplifyThreshold),ce}(te[ie],U),_e=0;_e<de.length;_e++)de[_e].x+=D,G.push(de[_e]);D+=H[Y].advanceWidth*this._scale(N)}O+=this.parent._renderer._textLeading}return G}},{key:"_getGlyphs",value:function(M){return this.font.stringToGlyphs(M)}},{key:"_getPath",value:function(M,V,O,N){var U=(N&&N.renderer&&N.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(U,M,V,O);return this.font.getPath(M,V.x,V.y,U._textSize,N)}},{key:"_getPathData",value:function(M,k,O,N){var U=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,k,O,N):g(k)==="object"&&(N=k),N&&typeof N.decimals=="number"&&(U=N.decimals),M.toPathData(U)}},{key:"_getSVG",value:function(M,k,O,N){var U=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,k,O,N):g(k)==="object"&&(N=k),N&&(typeof N.decimals=="number"&&(U=N.decimals),typeof N.strokeWidth=="number"&&(M.strokeWidth=N.strokeWidth),N.fill!==void 0&&(M.fill=N.fill),N.stroke!==void 0&&(M.stroke=N.stroke)),M.toSVG(U)}},{key:"_renderPath",value:function(G,W,Z,N){var U=N&&N.renderer||this.parent._renderer,V=U.drawingContext,G=(g(G)==="object"&&G.commands?G:this._getPath(G,W,Z,N)).commands,z=(V.beginPath(),!0),W=!1,Z=void 0;try{for(var I,q=G[Symbol.iterator]();!(z=(I=q.next()).done);z=!0){var D=I.value;D.type==="M"?V.moveTo(D.x,D.y):D.type==="L"?V.lineTo(D.x,D.y):D.type==="C"?V.bezierCurveTo(D.x1,D.y1,D.x2,D.y2,D.x,D.y):D.type==="Q"?V.quadraticCurveTo(D.x1,D.y1,D.x,D.y):D.type==="Z"&&V.closePath()}}catch(F){W=!0,Z=F}finally{try{z||q.return==null||q.return()}finally{if(W)throw Z}}return U._doStroke&&U._strokeSet&&!U._clipping&&V.stroke(),U._doFill&&!U._clipping&&(U._fillSet||U._setFill(i._DEFAULT_TEXT_FILL),V.fill()),this}},{key:"_textWidth",value:function(M,k){return this.font.getAdvanceWidth(M,k)}},{key:"_textAscent",value:function(M){return this.font.ascender*this._scale(M)}},{key:"_textDescent",value:function(M){return-this.font.descender*this._scale(M)}},{key:"_scale",value:function(M){return 1/this.font.unitsPerEm*(M||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(M,k,O,N,U){var V=M._textSize;switch(U===void 0&&(U=this._textWidth(k,V)),M._textAlign){case i.CENTER:O-=U/2;break;case i.RIGHT:O-=U}switch(M._textBaseline){case i.TOP:N+=this._textAscent(V);break;case i.CENTER:N+=this._textAscent(V)/2;break;case i.BOTTOM:N-=this._textDescent(V)}return{x:O,y:N}}}])&&m(A.prototype,L),j}(),t=d.default,b.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],314:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(h,d){return h.push(d),h},t.default.prototype.arrayCopy=function(h,d,i,f,g){var m,n;h=g!==void 0?(n=Math.min(g,h.length),m=f,h.slice(d,n+d)):(n=i!==void 0?(n=i,Math.min(n,h.length)):h.length,i=d,h.slice(m=0,n)),Array.prototype.splice.apply(i,[m,n].concat(h))},t.default.prototype.concat=function(h,d){return h.concat(d)},t.default.prototype.reverse=function(h){return h.reverse()},t.default.prototype.shorten=function(h){return h.pop(),h},t.default.prototype.shuffle=function(h,d){for(var i,f,g=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(h),m=(h=d||g?h:h.slice()).length;1<m;)i=this.random(0,1)*m|0,f=h[--m],h[m]=h[i],h[i]=f;return h},t.default.prototype.sort=function(h,f){var i=f?h.slice(0,Math.min(f,h.length)):h,f=f?h.slice(Math.min(f,h.length)):[];return(i=typeof i[0]=="string"?i.sort():i.sort(function(g,m){return g-m})).concat(f)},t.default.prototype.splice=function(h,d,i){return Array.prototype.splice.apply(h,[i,0].concat(d)),h},t.default.prototype.subset=function(h,d,i){return i!==void 0?h.slice(d,d+i):h.slice(d,h.length)},t=t.default,b.default=t},{"../core/main":275,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182}],315:[function(t,x,b){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.float=function(d){return d instanceof Array?d.map(parseFloat):parseFloat(d)},h.default.prototype.int=function(d){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return d===1/0||d==="Infinity"?1/0:d===-1/0||d==="-Infinity"?-1/0:typeof d=="string"?parseInt(d,i):typeof d=="number"?0|d:typeof d=="boolean"?d?1:0:d instanceof Array?d.map(function(f){return h.default.prototype.int(f,i)}):void 0},h.default.prototype.str=function(d){return d instanceof Array?d.map(h.default.prototype.str):String(d)},h.default.prototype.boolean=function(d){return typeof d=="number"?d!==0:typeof d=="string"?d.toLowerCase()==="true":typeof d=="boolean"?d:d instanceof Array?d.map(h.default.prototype.boolean):void 0},h.default.prototype.byte=function(d){return d=h.default.prototype.int(d,10),typeof d=="number"?(d+128)%256-128:d instanceof Array?d.map(h.default.prototype.byte):void 0},h.default.prototype.char=function(d){return typeof d!="number"||isNaN(d)?d instanceof Array?d.map(h.default.prototype.char):typeof d=="string"?h.default.prototype.char(parseInt(d,10)):void 0:String.fromCharCode(d)},h.default.prototype.unchar=function(d){return typeof d=="string"&&d.length===1?d.charCodeAt(0):d instanceof Array?d.map(h.default.prototype.unchar):void 0},h.default.prototype.hex=function(d,i){if(i=i??8,d instanceof Array)return d.map(function(g){return h.default.prototype.hex(g,i)});if(d===1/0||d===-1/0)return(d===1/0?"F":"0").repeat(i);if(typeof d=="number"){d<0&&(d=4294967295+d+1);for(var f=Number(d).toString(16).toUpperCase();f.length<i;)f="0".concat(f);return f=f.length>=i?f.substring(f.length-i,f.length):f}},h.default.prototype.unhex=function(d){return d instanceof Array?d.map(h.default.prototype.unhex):parseInt("0x".concat(d),16)},t=h.default,b.default=t},{"../core/main":275,"core-js/modules/es.array.map":164,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.repeat":195}],316:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(n=t("../core/main"))&&n.__esModule?n:{default:n};function d(s,l){return function(c){if(Array.isArray(c))return c}(s)||function(c,a){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]"){var u=[],y=!0,p=!1,v=void 0;try{for(var w,C=c[Symbol.iterator]();!(y=(w=C.next()).done)&&(u.push(w.value),!a||u.length!==a);y=!0);}catch(T){p=!0,v=T}finally{try{y||C.return==null||C.return()}finally{if(p)throw v}}return u}}(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(s,l,c){var u=d(s.toString().split("."),2),a=u[0],u=u[1];return c===void 0?(a=a.padStart(l,"0"),u?a+"."+u:a):(a=(s=d(s.toFixed(c).toString().split("."),2))[0],u=s[1],a=a.padStart(l,"0"),u===void 0?a:a+"."+u)}function f(u,l){var c=(u=u.toString()).indexOf("."),a=c!==-1?u.substring(c):"",u=(u=c!==-1?u.substring(0,c):u).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(l===0)a="";else if(l!==void 0)if(l>a.length)for(var y=l-(a+=c===-1?".":"").length+1,p=0;p<y;p++)a+="0";else a=a.substring(0,l+1);return u+a}function g(s){return 0<parseFloat(s)?"+".concat(s.toString()):s.toString()}function m(s){return 0<=parseFloat(s)?" ".concat(s.toString()):s.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.join=function(s,l){return h.default._validateParameters("join",arguments),s.join(l)},h.default.prototype.match=function(s,l){return h.default._validateParameters("match",arguments),s.match(l)},h.default.prototype.matchAll=function(s,l){h.default._validateParameters("matchAll",arguments);for(var c=new RegExp(l,"g"),a=c.exec(s),u=[];a!==null;)u.push(a),a=c.exec(s);return u},h.default.prototype.nf=function(s,l,c){return h.default._validateParameters("nf",arguments),s instanceof Array?s.map(function(a){return i(a,l,c)}):Object.prototype.toString.call(s)==="[object Arguments]"?s.length===3?this.nf(s[0],s[1],s[2]):s.length===2?this.nf(s[0],s[1]):this.nf(s[0]):i(s,l,c)},h.default.prototype.nfc=function(s,l){return h.default._validateParameters("nfc",arguments),s instanceof Array?s.map(function(c){return f(c,l)}):f(s,l)},h.default.prototype.nfp=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];h.default._validateParameters("nfp",l);var a=h.default.prototype.nf.apply(this,l);return a instanceof Array?a.map(g):g(a)},h.default.prototype.nfs=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];h.default._validateParameters("nfs",l);var a=h.default.prototype.nf.apply(this,l);return a instanceof Array?a.map(m):m(a)},h.default.prototype.split=function(s,l){return h.default._validateParameters("split",arguments),s.split(l)},h.default.prototype.splitTokens=function(s,l){var c,a;return h.default._validateParameters("splitTokens",arguments),a=l!==void 0?(a=/\]/g.exec(l=l),(c=/\[/g.exec(l))&&a?(l=l.slice(0,a.index)+l.slice(a.index+1),c=/\[/g.exec(l),l=l.slice(0,c.index)+l.slice(c.index+1),new RegExp("[\\[".concat(l,"\\]]"),"g")):a?(l=l.slice(0,a.index)+l.slice(a.index+1),new RegExp("[".concat(l,"\\]]"),"g")):c?(l=l.slice(0,c.index)+l.slice(c.index+1),new RegExp("[".concat(l,"\\[]"),"g")):new RegExp("[".concat(l,"]"),"g")):/\s/g,s.split(a).filter(function(u){return u})},h.default.prototype.trim=function(s){return h.default._validateParameters("trim",arguments),s instanceof Array?s.map(this.trim):s.trim()};var n=h.default;b.default=n},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.pad-start":194,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],317:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,b.default=t},{"../core/main":275}],318:[function(t,x,b){function h(s){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function d(s){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(l){return h(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":h(l)})(s)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(n=t("../core/main"))&&n.__esModule?n:{default:n},f=(t("./p5.Geometry"),function(s){if(s&&s.__esModule)return s;if(s===null||d(s)!=="object"&&typeof s!="function")return{default:s};var l=g();if(l&&l.has(s))return l.get(s);var c,a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var y;Object.prototype.hasOwnProperty.call(s,c)&&((y=u?Object.getOwnPropertyDescriptor(s,c):null)&&(y.get||y.set)?Object.defineProperty(a,c,y):a[c]=s[c])}return a.default=s,l&&l.set(s,a),a}(t("../core/constants")));function g(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,g=function(){return s},s)}i.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},i.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},i.default.prototype.buildGeometry=function(s){return this._renderer.buildGeometry(s)},i.default.prototype.freeGeometry=function(s){this._renderer._freeBuffers(s.gid)},i.default.prototype.plane=function(s,l,c,a){this._assert3d("plane"),i.default._validateParameters("plane",arguments),s===void 0&&(s=50),l===void 0&&(l=s),a===void 0&&(a=1);var u,y="plane|".concat(c=c===void 0?1:c,"|").concat(a);return this._renderer.geometryInHash(y)||((u=new i.default.Geometry(c,a,function(){for(var p,v,w=0;w<=this.detailY;w++)for(var C=w/this.detailY,T=0;T<=this.detailX;T++)p=T/this.detailX,v=new i.default.Vector(p-.5,C-.5,0),this.vertices.push(v),this.uvs.push(p,C)})).computeFaces().computeNormals(),c<=1&&a<=1?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,u)),this._renderer.drawBuffersScaled(y,s,l,1),this},i.default.prototype.box=function(s,l,c,a,u){this._assert3d("box"),i.default._validateParameters("box",arguments),s===void 0&&(s=50),l===void 0&&(l=s),c===void 0&&(c=l);var y,p=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,p=(u===void 0&&(u=p?1:4),"box|".concat(a=a===void 0?p?1:4:a,"|").concat(u));return this._renderer.geometryInHash(p)||((y=new i.default.Geometry(a,u,function(){var v=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(w,C){for(var C=4*C,T=0;T<4;T++){var j=w[T],j=new i.default.Vector((2*(1&j)-1)/2,((2&j)-1)/2,((4&j)/2-1)/2);v.vertices.push(j),v.uvs.push(1&T,(2&T)/2)}v.faces.push([C,1+C,2+C]),v.faces.push([2+C,1+C,3+C])})})).computeNormals(),a<=4&&u<=4?y._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(p,y)),this._renderer.drawBuffersScaled(p,s,l,c),this},i.default.prototype.sphere=function(s,l,c){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),this.ellipsoid(s=s===void 0?50:s,s,s,l=l===void 0?24:l,c=c===void 0?16:c),this};function m(s,l,c,a,u,y,p){s=s<=0?1:s,l=l<0?0:l,c=c<=0?s:c,a=a<3?3:a;for(var v,w,C=(y=y===void 0||y)?-2:0,T=(u=u<1?1:u)+((p=p===void 0?l!==0:p)?2:0),j=Math.atan2(s-l,c),A=Math.sin(j),L=Math.cos(j),M=C;M<=T;++M){var k=M/u,O=c*k,N=void 0,N=M<0?(k=O=0,s):u<M?(O=c,k=1,l):s+(l-s)*k;for(M!==-2&&M!==u+2||(N=0),O-=c/2,v=0;v<a;++v){var U=v/(a-1),G=2*Math.PI*U,V=Math.sin(G),G=Math.cos(G),z=(this.vertices.push(new i.default.Vector(V*N,O,G*N)),void 0),z=M<0?new i.default.Vector(0,-1,0):u<M&&l?new i.default.Vector(0,1,0):new i.default.Vector(V*L,A,G*L);this.vertexNormals.push(z),this.uvs.push(U,k)}}var W=0;if(y){for(w=0;w<a;++w)this.faces.push([W+w,W+a+(w+1)%a,W+a+w]);W+=2*a}for(M=0;M<u;++M){for(v=0;v<a;++v){var Z=(v+1)%a;this.faces.push([W+v,W+Z,W+a+Z]),this.faces.push([W+v,W+a+Z,W+a+v])}W+=a}if(p)for(W+=a,v=0;v<a;++v)this.faces.push([W+v,W+(v+1)%a,W+a])}i.default.prototype.cylinder=function(s,l,c,a,u,y){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),s===void 0&&(s=50),l===void 0&&(l=s),a===void 0&&(a=1),y===void 0&&(y=!0),u===void 0&&(u=!0);var p,v="cylinder|".concat(c=c===void 0?24:c,"|").concat(a,"|").concat(u,"|").concat(y);return this._renderer.geometryInHash(v)||(p=new i.default.Geometry(c,a),m.call(p,1,1,1,c,a,u,y),c<=24&&a<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,p)),this._renderer.drawBuffersScaled(v,s,l,s),this},i.default.prototype.cone=function(s,l,c,a,u){this._assert3d("cone"),i.default._validateParameters("cone",arguments),s===void 0&&(s=50),l===void 0&&(l=s),a===void 0&&(a=1),u===void 0&&(u=!0);var y,p="cone|".concat(c=c===void 0?24:c,"|").concat(a,"|").concat(u);return this._renderer.geometryInHash(p)||(y=new i.default.Geometry(c,a),m.call(y,1,0,1,c,a,u,!1),c<=24&&a<=16?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(p,y)),this._renderer.drawBuffersScaled(p,s,l,s),this},i.default.prototype.ellipsoid=function(s,l,c,a,u){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),s===void 0&&(s=50),l===void 0&&(l=s),c===void 0&&(c=s),u===void 0&&(u=16);var y,p="ellipsoid|".concat(a=a===void 0?24:a,"|").concat(u);return this._renderer.geometryInHash(p)||((y=new i.default.Geometry(a,u,function(){for(var v=0;v<=this.detailY;v++)for(var w=v/this.detailY,C=Math.PI*w-Math.PI/2,T=Math.cos(C),j=Math.sin(C),A=0;A<=this.detailX;A++){var L=A/this.detailX,k=2*Math.PI*L,M=Math.cos(k),k=Math.sin(k),k=new i.default.Vector(T*k,j,T*M);this.vertices.push(k),this.vertexNormals.push(k),this.uvs.push(L,w)}})).computeFaces(),a<=24&&u<=24?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(p,y)),this._renderer.drawBuffersScaled(p,s,l,c),this},i.default.prototype.torus=function(s,p,c,a){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),s===void 0)s=50;else if(!s)return;if(p===void 0)p=10;else if(!p)return;c===void 0&&(c=24),a===void 0&&(a=16);var u,y=(p/s).toPrecision(4),p="torus|".concat(y,"|").concat(c,"|").concat(a);return this._renderer.geometryInHash(p)||((u=new i.default.Geometry(c,a,function(){for(var v=0;v<=this.detailY;v++)for(var w=v/this.detailY,C=2*Math.PI*w,T=Math.cos(C),j=Math.sin(C),A=1+y*T,L=0;L<=this.detailX;L++){var M=L/this.detailX,k=2*Math.PI*M,N=Math.cos(k),k=Math.sin(k),O=new i.default.Vector(A*N,A*k,y*j),N=new i.default.Vector(T*N,T*k,j);this.vertices.push(O),this.vertexNormals.push(N),this.uvs.push(M,w)}})).computeFaces(),c<=24&&a<=16?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(p,u)),this._renderer.drawBuffersScaled(p,s,s,s),this},i.default.RendererGL.prototype.point=function(s,l,c){var a=[];return a.push(new i.default.Vector(s,l,c=c===void 0?0:c)),this._drawPoints(a,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(p){var l=p[0],c=p[1],a=p[2],u=p[3],y=p[4],p=p[5],v=(this.geometryInHash("tri")||((v=new i.default.Geometry(1,1,function(){var T=[];T.push(new i.default.Vector(0,0,0)),T.push(new i.default.Vector(1,0,0)),T.push(new i.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=T,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),v.computeNormals(),this.createBuffers("tri",v)),this.uMVMatrix.copy());try{var w=Math.sign(l*u-a*c+a*p-y*u+y*c-l*p),C=new i.default.Matrix([a-l,u-c,0,0,y-l,p-c,0,0,0,0,w,0,l,c,0,1]).mult(this.uMVMatrix);this.uMVMatrix=C,this.drawBuffers("tri")}finally{this.uMVMatrix=v}return this},i.default.RendererGL.prototype.ellipse=function(s){this.arc(s[0],s[1],s[2],s[3],0,f.TWO_PI,f.OPEN,s[4])},i.default.RendererGL.prototype.arc=function(s){var l,c=arguments[1],a=arguments[2],u=arguments[3],y=arguments[4],p=arguments[5],v=arguments[6],w=arguments[7]||25,C=(Math.abs(p-y)>=f.TWO_PI?"".concat(T="ellipse","|"):"".concat(T="arc","|").concat(y,"|").concat(p,"|").concat(v,"|")).concat(w,"|"),T=(this.geometryInHash(C)||((l=new i.default.Geometry(w,1,function(){if(y.toFixed(10)!==p.toFixed(10)){v!==f.PIE&&v!==void 0||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var j=0;j<=w;j++){var L=(p-y)*(j/w)+y,A=.5+Math.cos(L)/2,L=.5+Math.sin(L)/2;this.vertices.push(new i.default.Vector(A,L,0)),this.uvs.push([A,L]),j<w-1&&(this.faces.push([0,j+1,j+2]),this.edges.push([j+1,j+2]))}switch(v){case f.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case f.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case f.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),w<=50?l._edgesToVertices(l):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(T," with more than 50 detail")),this.createBuffers(C,l)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([s,c,0]),this.uMVMatrix.scale(a,u,1),this.drawBuffers(C)}finally{this.uMVMatrix=T}return this},i.default.RendererGL.prototype.rect=function(s){var l=s[0],c=s[1],a=s[2],u=s[3];if(s[4]===void 0){var v=this._pInst._glAttributes.perPixelLighting,y=s[4]||(v?1:24),p=s[5]||(v?1:16),v="rect|".concat(y,"|").concat(p),w=(this.geometryInHash(v)||((w=new i.default.Geometry(y,p,function(){for(var z=0;z<=this.detailY;z++)for(var W=z/this.detailY,Z=0;Z<=this.detailX;Z++){var I=Z/this.detailX,q=new i.default.Vector(I,W,0);this.vertices.push(q),this.uvs.push(I,W)}0<y&&0<p&&(this.edges=[[0,y],[y,(y+1)*(p+1)-1],[(y+1)*(p+1)-1,(y+1)*p],[(y+1)*p,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(v,w)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([l,c,0]),this.uMVMatrix.scale(a,u,1),this.drawBuffers(v)}finally{this.uMVMatrix=w}}else{var v=s[4],w=s[5]===void 0?v:s[5],C=s[6]===void 0?w:s[6],s=s[7]===void 0?C:s[7],k=a,T=u,L=((k+=l)<l&&(L=l,l=k,k=L),(T+=c)<c&&(L=c,c=T,T=L),Math.min((k-l)/2,(T-c)/2)),j=(L<v&&(v=L),L<w&&(w=L),L<C&&(C=L),L<s&&(s=L),l),A=c,L=k,l=T,M=(this.beginShape(),w!==0?(this.vertex(L-w,A),this.quadraticVertex(L,A,L,A+w)):this.vertex(L,A),C!==0?(this.vertex(L,l-C),this.quadraticVertex(L,l,L-C,l)):this.vertex(L,l),s!==0?(this.vertex(j+s,l),this.quadraticVertex(j,l,j,l-s)):this.vertex(j,l),v!==0?(this.vertex(j,A+v),this.quadraticVertex(j,A,j+v,A)):this.vertex(j,A),!(this.immediateMode.geometry.uvs.length=0)),c=!1,k=void 0;try{for(var O,N=this.immediateMode.geometry.vertices[Symbol.iterator]();!(M=(O=N.next()).done);M=!0){var U=O.value,V=(U.x-j)/a,G=(U.y-A)/u;this.immediateMode.geometry.uvs.push(V,G)}}catch(D){c=!0,k=D}finally{try{M||N.return==null||N.return()}finally{if(c)throw k}}this.endShape(f.CLOSE)}return this},i.default.RendererGL.prototype.quad=function(s,l,c,a,u,y,p,v,w,C,T,j,A,L){A===void 0&&(A=2),L===void 0&&(L=2);var M="quad|".concat(s,"|").concat(l,"|").concat(c,"|").concat(a,"|").concat(u,"|").concat(y,"|").concat(p,"|").concat(v,"|").concat(w,"|").concat(C,"|").concat(T,"|").concat(j,"|").concat(A,"|").concat(L);if(!this.geometryInHash(M)){var k=new i.default.Geometry(A,L,function(){for(var Z=1/(this.detailX-1),I=1/(this.detailY-1),q=0;q<this.detailY;q++)for(var D=0;D<this.detailX;D++){var F=D*Z,H=q*I;this.vertices.push(new i.default.Vector((1-F)*((1-H)*s+H*C)+F*((1-H)*a+H*p),(1-F)*((1-H)*l+H*T)+F*((1-H)*u+H*v),(1-F)*((1-H)*c+H*j)+F*((1-H)*y+H*w))),this.uvs.push([F,H])}});k.faces=[];for(var O=0;O<L-1;O++)for(var N=0;N<A-1;N++){var U=N+O*A,V=N+1+(O+1)*A,G=N+(O+1)*A;k.faces.push([U,N+1+O*A,V]),k.faces.push([U,V,G])}k.computeNormals();for(var z=[k.edges.length=0,2,3,1],W=0;W<z.length;W++)k.edges.push([z[W],z[(W+1)%z.length]]);k._edgesToVertices(),this.createBuffers(M,k)}return this.drawBuffers(M),this},i.default.RendererGL.prototype.bezier=function(s,l,c,a,u,y,p,v,w,C,T,j){arguments.length===8&&(T=v,C=p,v=y,p=u,u=a,a=c,c=y=w=j=0);var A=this._pInst._bezierDetail||20;this.beginShape();for(var L=0;L<=A;L++){var M=Math.pow(1-L/A,3),k=L/A*3*Math.pow(1-L/A,2),O=3*Math.pow(L/A,2)*(1-L/A),N=Math.pow(L/A,3);this.vertex(s*M+a*k+p*O+C*N,l*M+u*k+v*O+T*N,c*M+y*k+w*O+j*N)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(s,l,c,a,u,y,p,v,w,C,T,j){arguments.length===8&&(C=p,T=v,p=u,v=a,u=a=c,c=y=w=j=0);var A=this._pInst._curveDetail;this.beginShape();for(var L=0;L<=A;L++){var M=.5*Math.pow(L/A,3),k=.5*Math.pow(L/A,2),O=L/A*.5;this.vertex(M*(3*a-s-3*p+C)+k*(2*s-5*a+4*p-C)+O*(-s+p)+2*a*.5,M*(3*u-l-3*v+T)+k*(2*l-5*u+4*v-T)+O*(-l+v)+2*u*.5,M*(3*y-c-3*w+j)+k*(2*c-5*y+4*w-j)+O*(-c+w)+2*y*.5)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(f.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(f.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var s,l,c,a,u,y,p=[],v=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,T=0,j=1,A=0;T<1;){if(y=parseFloat(T.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(y),j.toFixed(6)===C.toFixed(6)){y=parseFloat(j.toFixed(6))+parseFloat(T.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(y);break}T+=C,j-=C,++A}}for(var L=this._lookUpTableBezier.length,M=[],k=0;k<4;k++)M.push([]);M[0]=this.immediateMode.geometry.vertexColors.slice(-4),M[3]=this.curFillColor.slice();var O=[];for(k=0;k<4;k++)O.push([]);if(O[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),O[3]=this.curStrokeColor.slice(),w===6){this.isBezier=!0;var p=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],N=Math.hypot(p[0]-p[1],v[0]-v[1]),V=Math.hypot(p[1]-p[2],v[1]-v[2]),U=Math.hypot(p[2]-p[3],v[2]-v[3]),V=N+V+U;for(N/=V,U/=V,u=0;u<4;u++)M[1].push(M[0][u]*(1-N)+M[3][u]*N),M[2].push(M[0][u]*U+M[3][u]*(1-U)),O[1].push(O[0][u]*(1-N)+O[3][u]*N),O[2].push(O[0][u]*U+O[3][u]*(1-U));for(a=0;a<L;a++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=s=l=0;k<4;k++){for(u=0;u<4;u++)this.curFillColor[u]+=this._lookUpTableBezier[a][k]*M[k][u],this.curStrokeColor[u]+=this._lookUpTableBezier[a][k]*O[k][u];s+=p[k]*this._lookUpTableBezier[a][k],l+=v[k]*this._lookUpTableBezier[a][k]}this.vertex(s,l)}this.curFillColor=M[3],this.curStrokeColor=O[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){this.isBezier=!0,p=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var G=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],z=Math.hypot(p[0]-p[1],v[0]-v[1],G[0]-G[1]),V=Math.hypot(p[1]-p[2],v[1]-v[2],G[1]-G[2]),W=Math.hypot(p[2]-p[3],v[2]-v[3],G[2]-G[3]),w=z+V+W;for(z/=w,W/=w,u=0;u<4;u++)M[1].push(M[0][u]*(1-z)+M[3][u]*z),M[2].push(M[0][u]*W+M[3][u]*(1-W)),O[1].push(O[0][u]*(1-z)+O[3][u]*z),O[2].push(O[0][u]*W+O[3][u]*(1-W));for(a=0;a<L;a++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=s=l=c=0;k<4;k++){for(u=0;u<4;u++)this.curFillColor[u]+=this._lookUpTableBezier[a][k]*M[k][u],this.curStrokeColor[u]+=this._lookUpTableBezier[a][k]*O[k][u];s+=p[k]*this._lookUpTableBezier[a][k],l+=v[k]*this._lookUpTableBezier[a][k],c+=G[k]*this._lookUpTableBezier[a][k]}this.vertex(s,l,c)}this.curFillColor=M[3],this.curStrokeColor=O[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var s,l,c,a,u,y,p=[],v=[],w=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var C=1/this._lutQuadraticDetail,T=0,j=1,A=0;T<1;){if(y=parseFloat(T.toFixed(6)),this._lookUpTableQuadratic[A]=this._quadraticCoefficients(y),j.toFixed(6)===C.toFixed(6)){y=parseFloat(j.toFixed(6))+parseFloat(T.toFixed(6)),++A,this._lookUpTableQuadratic[A]=this._quadraticCoefficients(y);break}T+=C,j-=C,++A}}for(var L=this._lookUpTableQuadratic.length,M=[],k=0;k<3;k++)M.push([]);M[0]=this.immediateMode.geometry.vertexColors.slice(-4),M[2]=this.curFillColor.slice();var O=[];for(k=0;k<3;k++)O.push([]);if(O[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),O[2]=this.curStrokeColor.slice(),w===4){this.isQuadratic=!0;var p=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],N=Math.hypot(p[0]-p[1],v[0]-v[1]);for(N/=N+Math.hypot(p[1]-p[2],v[1]-v[2]),u=0;u<4;u++)M[1].push(M[0][u]*(1-N)+M[2][u]*N),O[1].push(O[0][u]*(1-N)+O[2][u]*N);for(a=0;a<L;a++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=s=l=0;k<3;k++){for(u=0;u<4;u++)this.curFillColor[u]+=this._lookUpTableQuadratic[a][k]*M[k][u],this.curStrokeColor[u]+=this._lookUpTableQuadratic[a][k]*O[k][u];s+=p[k]*this._lookUpTableQuadratic[a][k],l+=v[k]*this._lookUpTableQuadratic[a][k]}this.vertex(s,l)}this.curFillColor=M[2],this.curStrokeColor=O[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){this.isQuadratic=!0,p=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var U=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],V=Math.hypot(p[0]-p[1],v[0]-v[1],U[0]-U[1]);for(V/=V+Math.hypot(p[1]-p[2],v[1]-v[2],U[1]-U[2]),u=0;u<4;u++)M[1].push(M[0][u]*(1-V)+M[2][u]*V),O[1].push(O[0][u]*(1-V)+O[2][u]*V);for(a=0;a<L;a++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],k=s=l=c=0;k<3;k++){for(u=0;u<4;u++)this.curFillColor[u]+=this._lookUpTableQuadratic[a][k]*M[k][u],this.curStrokeColor[u]+=this._lookUpTableQuadratic[a][k]*O[k][u];s+=p[k]*this._lookUpTableQuadratic[a][k],l+=v[k]*this._lookUpTableQuadratic[a][k],c+=U[k]*this._lookUpTableQuadratic[a][k]}this.vertex(s,l,c)}this.curFillColor=M[2],this.curStrokeColor=O[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var s,l,c,a,u,y,p=[],v=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,T=0,j=1,A=0;T<1;){if(y=parseFloat(T.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(y),j.toFixed(6)===C.toFixed(6)){y=parseFloat(j.toFixed(6))+parseFloat(T.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(y);break}T+=C,j-=C,++A}}var L=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,p=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),u=0;u<L;u++)l=p[0]*this._lookUpTableBezier[u][0]+p[1]*this._lookUpTableBezier[u][1]+p[2]*this._lookUpTableBezier[u][2]+p[3]*this._lookUpTableBezier[u][3],c=v[0]*this._lookUpTableBezier[u][0]+v[1]*this._lookUpTableBezier[u][1]+v[2]*this._lookUpTableBezier[u][2]+v[3]*this._lookUpTableBezier[u][3],this.vertex(l,c);for(u=0;u<w;u++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,p=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),u=0;u<L;u++)l=p[0]*this._lookUpTableBezier[u][0]+p[1]*this._lookUpTableBezier[u][1]+p[2]*this._lookUpTableBezier[u][2]+p[3]*this._lookUpTableBezier[u][3],c=v[0]*this._lookUpTableBezier[u][0]+v[1]*this._lookUpTableBezier[u][1]+v[2]*this._lookUpTableBezier[u][2]+v[3]*this._lookUpTableBezier[u][3],a=s[0]*this._lookUpTableBezier[u][0]+s[1]*this._lookUpTableBezier[u][1]+s[2]*this._lookUpTableBezier[u][2]+s[3]*this._lookUpTableBezier[u][3],this.vertex(l,c,a);for(u=0;u<w;u++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(s,j,c,A,u,y,p,v,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(s),this._pInst.textureMode(f.NORMAL);var C=0,T=(j<=s.width&&(C=j/s.width),1),j=(j+A<=s.width&&(T=(j+A)/s.width),0),A=(c<=s.height&&(j=c/s.height),1);c+u<=s.height&&(A=(c+u)/s.height),this.beginShape(),this.vertex(y,p,0,C,j),this.vertex(y+v,p,0,T,j),this.vertex(y+v,p+w,0,T,A),this.vertex(y,p+w,0,C,A),this.endShape(f.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(f.REMOVE)};var n=i.default;b.default=n},{"../core/constants":264,"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],319:[function(t,x,b){function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function d(l){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(s=t("../core/main"))&&s.__esModule?s:{default:s},f=function(l){if(l&&l.__esModule)return l;if(l===null||d(l)!=="object"&&typeof l!="function")return{default:l};var c=g();if(c&&c.has(l))return c.get(l);var a,u={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in l){var p;Object.prototype.hasOwnProperty.call(l,a)&&((p=y?Object.getOwnPropertyDescriptor(l,a):null)&&(p.get||p.set)?Object.defineProperty(u,a,p):u[a]=l[a])}return u.default=l,c&&c.set(l,u),u}(t("../core/constants"));function g(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,g=function(){return l},l)}function m(l){return function(c){if(Array.isArray(c)){for(var a=0,u=new Array(c.length);a<c.length;a++)u[a]=c[a];return u}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(l,c){for(var a=0;a<c.length;a++){var u=c[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}var s=function(){function l(u){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");(this.renderer=u)._pInst.push(),this.identityMatrix=new i.default.Matrix,u.uMVMatrix=new i.default.Matrix,this.geometry=new i.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(l.nextGeometryId),l.nextGeometryId++,this.hasTransform=!1}var c,a;return c=l,(a=[{key:"transformVertices",value:function(u){var y=this;return this.hasTransform?u.map(function(p){return y.renderer.uMVMatrix.multiplyPoint(p)}):u}},{key:"transformNormals",value:function(u){var y=this;return this.hasTransform?u.map(function(p){return y.renderer.uNMatrix.multiplyVec3(p)}):u}},{key:"addGeometry",value:function(u){for(var y,p=this,v=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(C,T){return C===p.identityMatrix.mat4[T]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),w=((y=this.geometry.vertices).push.apply(y,m(this.transformVertices(u.vertices))),(y=this.geometry.vertexNormals).push.apply(y,m(this.transformNormals(u.vertexNormals))),(y=this.geometry.uvs).push.apply(y,m(u.uvs)),this.renderer._doFill&&(y=this.geometry.faces).push.apply(y,m(u.faces.map(function(C){return C.map(function(T){return T+v})}))),this.renderer._doStroke&&(y=this.geometry.edges).push.apply(y,m(u.edges.map(function(C){return C.map(function(T){return T+v})}))),m(u.vertexColors));w.length<4*u.vertices.length;)w.push.apply(w,m(this.renderer.curFillColor));(y=this.geometry.vertexColors).push.apply(y,m(w))}},{key:"addImmediate",value:function(){var u=this.renderer.immediateMode.geometry,y=this.renderer.immediateMode.shapeMode,p=[];if(this.renderer._doFill)if(y===f.TRIANGLE_STRIP||y===f.QUAD_STRIP)for(var v=2;v<u.vertices.length;v++)v%2==0?p.push([v,v-1,v-2]):p.push([v,v-2,v-1]);else if(y===f.TRIANGLE_FAN)for(var w=2;w<u.vertices.length;w++)p.push([0,w-1,w]);else for(var C=0;C<u.vertices.length;C+=3)p.push([C,C+1,C+2]);this.addGeometry(Object.assign({},u,{faces:p}))}},{key:"addRetained",value:function(u){this.addGeometry(u.model)}},{key:"finish",value:function(){this.renderer._pInst.pop();for(var u=!0,y=4;y<this.geometry.vertexColors.length;y++)if(this.geometry.vertexColors[y]!==this.geometry.vertexColors[y%4]){u=!1;break}return u&&(this.geometry.vertexColors=[]),this.geometry}}])&&n(c.prototype,a),l}();s.nextGeometryId=0,b.default=s},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],320:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=(m=t("../core/main"))&&m.__esModule?m:{default:m},i=function(n){if(n&&n.__esModule)return n;if(n===null||g(n)!=="object"&&typeof n!="function")return{default:n};var s=f();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../core/constants"));function f(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,f=function(){return n},n)}function g(n){return(g=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}d.default.prototype.orbitControl=function(n,s,l,w){var a=this,u=(this._assert3d("orbitControl"),d.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);n===void 0&&(n=1),s===void 0&&(s=n),l===void 0&&(l=1),g(w)!=="object"&&(w={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var T=w.disableTouchActions;this.touchActionsDisabled===!0||T!==void 0&&!T||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var y,p,v,T=w.freeRotation,w=T!==void 0&&T,C=[],T=(this.touches.forEach(function(N){a._renderer.prevTouches.forEach(function(U){N.id===U.id&&(U={x:N.x,y:N.y,px:U.x,py:U.y},C.push(U))})}),this._renderer.prevTouches=this.touches,0),j=0,A=0,L=0,M=0,k=this.height<this.width?this.height:this.width,O=!1;return 0<C.length?(O=0<C[0].x&&C[0].x<this.width&&0<C[0].y&&C[0].y<this.height,C.length===1?(j=-n*((y=C[0]).x-y.px)/k,A=s*(y.y-y.py)/k):(y=C[0],p=C[1],T=-(Math.hypot(y.x-p.x,y.y-p.y)-Math.hypot(y.px-p.px,y.py-p.py))*l*4e-4,L=.5*(y.x+p.x)-.5*(y.px+p.px),M=.5*(y.y+p.y)-.5*(y.py+p.py)),0<this.touches.length?O&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(O=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(T=Math.sign(this._mouseWheelDeltaY)*l,T*=.01,this._mouseWheelDeltaY=0,O&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(j=-n*this.movedX/k,A=s*this.movedY/k):this.mouseButton===this.RIGHT&&(L=this.movedX,M=this.movedY),O&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),T!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=T),.001<Math.abs(this._renderer.zoomVelocity)?(w?u._orbitFree(0,0,this._renderer.zoomVelocity):u._orbit(0,0,this._renderer.zoomVelocity),u.projMatrix.mat4[15]!==0&&(u.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),u.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=u.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=u.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,j===0&&A===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*j,.6*A),1e-6<this._renderer.rotateVelocity.magSq()?(w?u._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):u._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),L===0&&M===0||!this._renderer.executeRotateAndMove||(y=2*L/this.width,p=2*-M/this.height,this._renderer.moveVelocity.add(.15*y,.15*p)),1e-6<this._renderer.moveVelocity.magSq()?(l=u._getLocalAxes(),n=u.eyeX-u.centerX,s=u.eyeY-u.centerY,k=u.eyeZ-u.centerZ,O=Math.sqrt(n*n+s*s+k*k),T=new d.default.Vector(u.centerX,u.centerY,u.centerZ),T=u.cameraMatrix.multiplyPoint(T),(T=this._renderer.uPMatrix.multiplyAndNormalizePoint(T)).x-=this._renderer.moveVelocity.x,T.y-=this._renderer.moveVelocity.y,A=(j=this._renderer.uPMatrix.mat4)[15]===0?(v=(j[8]+T.x)/j[0]*O,(j[9]+T.y)/j[5]*O):(v=(T.x-j[12])/j[0],(T.y-j[13])/j[5]),u.setPosition(u.eyeX+v*l.x[0]+A*l.y[0],u.eyeY+v*l.x[1]+A*l.y[1],u.eyeZ+v*l.x[2]+A*l.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},d.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];d.default._validateParameters("debugMode",s);for(var c=this._registeredMethods.post.length-1;0<=c;c--)this._registeredMethods.post[c].toString()!==this._grid().toString()&&this._registeredMethods.post[c].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(c,1);s[0]===i.GRID?this.registerMethod("post",this._grid.call(this,s[1],s[2],s[3],s[4],s[5])):s[0]===i.AXES?this.registerMethod("post",this._axesIcon.call(this,s[1],s[2],s[3],s[4])):(this.registerMethod("post",this._grid.call(this,s[0],s[1],s[2],s[3],s[4])),this.registerMethod("post",this._axesIcon.call(this,s[5],s[6],s[7],s[8])))},d.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var n=this._registeredMethods.post.length-1;0<=n;n--)this._registeredMethods.post[n].toString()!==this._grid().toString()&&this._registeredMethods.post[n].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(n,1)},d.default.prototype._grid=function(n,s,l,c,a){n===void 0&&(n=this.width/2),s===void 0&&(s=Math.round(n/30)<4?4:Math.round(n/30)),l===void 0&&(l=0),c===void 0&&(c=0),a===void 0&&(a=0);var u=n/s,y=n/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var p=0;p<=s;p++)this.beginShape(this.LINES),this.vertex(-y+l,c,p*u-y+a),this.vertex(y+l,c,p*u-y+a),this.endShape();for(var v=0;v<=s;v++)this.beginShape(this.LINES),this.vertex(v*u-y+l,c,-y+a),this.vertex(v*u-y+l,c,y+a),this.endShape();this.pop()}},d.default.prototype._axesIcon=function(n,s,l,c){return n===void 0&&(n=40<this.width/20?this.width/20:40),s===void 0&&(s=-this.width/4),l===void 0&&(l=s),c===void 0&&(c=s),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(s,l,c),this.vertex(s+n,l,c),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(s,l,c),this.vertex(s,l+n,c),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(s,l,c),this.vertex(s,l,c+n),this.endShape(),this.pop()}};var m=d.default;b.default=m},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],321:[function(t,x,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};h.default.prototype.ambientLight=function(d,i,f,g){this._assert3d("ambientLight"),h.default._validateParameters("ambientLight",arguments);var m=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(m._array[0],m._array[1],m._array[2]),this._renderer._enableLighting=!0,this},h.default.prototype.specularColor=function(d,i,f){this._assert3d("specularColor"),h.default._validateParameters("specularColor",arguments);var g=this.color.apply(this,arguments);return this._renderer.specularColors=[g._array[0],g._array[1],g._array[2]],this},h.default.prototype.directionalLight=function(d,a,c,g,m,n){this._assert3d("directionalLight"),h.default._validateParameters("directionalLight",arguments),d=d instanceof h.default.Color?d:this.color(d,a,c);var s,l,a=arguments[arguments.length-1],c=typeof a=="number"?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(s=a.x,l=a.y,a.z),a=Math.sqrt(s*s+l*l+c*c);return this._renderer.directionalLightDirections.push(s/a,l/a,c/a),this._renderer.directionalLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.pointLight=function(d,c,a,g,m,n){this._assert3d("pointLight"),h.default._validateParameters("pointLight",arguments),d=d instanceof h.default.Color?d:this.color(d,c,a);var s,l,c=arguments[arguments.length-1],a=typeof c=="number"?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(s=c.x,l=c.y,c.z);return this._renderer.pointLightPositions.push(s,l,a),this._renderer.pointLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.lights=function(){this._assert3d("lights");var d=this.color("rgb(128,128,128)");return this.ambientLight(d),this.directionalLight(d,0,0,-1),this},h.default.prototype.lightFalloff=function(d,i,f){return this._assert3d("lightFalloff"),h.default._validateParameters("lightFalloff",arguments),d<0&&(d=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),i<0&&(i=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),f<0&&(f=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),d===0&&i===0&&f===0&&(d=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=d,this._renderer.linearAttenuation=i,this._renderer.quadraticAttenuation=f,this},h.default.prototype.spotLight=function(d,i,f,g,m,n,s,l,c,a,u){this._assert3d("spotLight"),h.default._validateParameters("spotLight",arguments);var y,p,v,w=arguments.length;switch(w){case 11:case 10:y=this.color(d,i,f),p=new h.default.Vector(g,m,n),v=new h.default.Vector(s,l,c);break;case 9:d instanceof h.default.Color?(y=d,p=new h.default.Vector(i,f,g),v=new h.default.Vector(m,n,s),a=l,u=c):g instanceof h.default.Vector?(y=this.color(d,i,f),p=g,v=new h.default.Vector(m,n,s),a=l,u=c):s instanceof h.default.Vector?(y=this.color(d,i,f),p=new h.default.Vector(g,m,n),v=s,a=l,u=c):(y=this.color(d,i,f),p=new h.default.Vector(g,m,n),v=new h.default.Vector(s,l,c));break;case 8:a=(v=d instanceof h.default.Color?(y=d,p=new h.default.Vector(i,f,g),new h.default.Vector(m,n,s)):g instanceof h.default.Vector?(y=this.color(d,i,f),p=g,new h.default.Vector(m,n,s)):(y=this.color(d,i,f),p=new h.default.Vector(g,m,n),s),l);break;case 7:d instanceof h.default.Color&&i instanceof h.default.Vector?(y=d,p=i,v=new h.default.Vector(f,g,m),a=n,u=s):d instanceof h.default.Color&&m instanceof h.default.Vector?(y=d,p=new h.default.Vector(i,f,g),v=m,a=n,u=s):g instanceof h.default.Vector&&m instanceof h.default.Vector?(y=this.color(d,i,f),p=g,v=m,a=n,u=s):v=d instanceof h.default.Color?(y=d,p=new h.default.Vector(i,f,g),new h.default.Vector(m,n,s)):g instanceof h.default.Vector?(y=this.color(d,i,f),p=g,new h.default.Vector(m,n,s)):(y=this.color(d,i,f),p=new h.default.Vector(g,m,n),s);break;case 6:g instanceof h.default.Vector&&m instanceof h.default.Vector?(y=this.color(d,i,f),p=g,v=m,a=n):d instanceof h.default.Color&&m instanceof h.default.Vector?(y=d,p=new h.default.Vector(i,f,g),v=m,a=n):d instanceof h.default.Color&&i instanceof h.default.Vector&&(y=d,p=i,v=new h.default.Vector(f,g,m),a=n);break;case 5:d instanceof h.default.Color&&i instanceof h.default.Vector&&f instanceof h.default.Vector?(y=d,p=i,v=f,a=g,u=m):g instanceof h.default.Vector&&m instanceof h.default.Vector?(y=this.color(d,i,f),p=g,v=m):d instanceof h.default.Color&&m instanceof h.default.Vector?(y=d,p=new h.default.Vector(i,f,g),v=m):d instanceof h.default.Color&&i instanceof h.default.Vector&&(y=d,p=i,v=new h.default.Vector(f,g,m));break;case 4:y=d,p=i,v=f,a=g;break;case 3:y=d,p=i,v=f;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(w<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(p.x,p.y,p.z),v.normalize(),this._renderer.spotLightDirections.push(v.x,v.y,v.z),a===void 0&&(a=Math.PI/3),u!==void 0&&u<1?(u=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):u===void 0&&(u=100),a=this._renderer._pInst._toRadians(a),this._renderer.spotLightAngle.push(Math.cos(a)),this._renderer.spotLightConc.push(u),this._renderer._enableLighting=!0,this},h.default.prototype.noLights=function(){this._assert3d("noLights");for(var d=arguments.length,i=new Array(d),f=0;f<d;f++)i[f]=arguments[f];return h.default._validateParameters("noLights",i),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},t=h.default,b.default=t},{"../core/main":275}],322:[function(t,x,b){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(d=t("../core/main"))&&d.__esModule?d:{default:d};t("./p5.Geometry"),h.default.prototype.loadModel=function(i){h.default._validateParameters("loadModel",arguments);var f,g,m,n=i.slice(-4),s=(typeof arguments[1]=="boolean"?(f=arguments[1],g=arguments[2],m=arguments[3],arguments[4]!==void 0&&(n=arguments[4])):(f=!1,g=arguments[1],m=arguments[2],arguments[3]!==void 0&&(n=arguments[3])),new h.default.Geometry),l=(s.gid="".concat(i,"|").concat(f),this);return n.match(/\.stl$/i)?this.httpDo(i,"GET","arrayBuffer",function(c){(function(a,u){if(function(y){for(var p=new DataView(y),v=[115,111,108,105,100],w=0;w<5;w++)if(function(C,T,j){for(var A=0,L=C.length;A<L;A++)if(C[A]!==T.getUint8(j+A,!1))return;return 1}(v,p,w))return;return 1}(u))(function(y,p){for(var v,w,C,T,j,A,L,M=new DataView(p),k=M.getUint32(80,!0),O=!1,N=0;N<70;N++)M.getUint32(N,!1)===1129270351&&M.getUint8(N+4)===82&&M.getUint8(N+5)===61&&(O=!0,T=[],j=M.getUint8(N+6)/255,A=M.getUint8(N+7)/255,L=M.getUint8(N+8)/255);for(var U=0;U<k;U++){for(var V,G=84+50*U,z=M.getFloat32(G,!0),W=M.getFloat32(4+G,!0),Z=M.getFloat32(8+G,!0),I=(O&&(V=M.getUint16(48+G,!0),C=32768&V?(v=j,w=A,L):(v=(31&V)/31,w=(V>>5&31)/31,(V>>10&31)/31)),new h.default.Vector(z,W,Z)),q=1;q<=3;q++){var D=G+12*q,D=new h.default.Vector(M.getFloat32(D,!0),M.getFloat32(4+D,!0),M.getFloat32(8+D,!0));y.vertices.push(D),y.vertexNormals.push(I),O&&T.push(v,w,C)}y.faces.push([3*U,3*U+1,3*U+2]),y.uvs.push([0,0],[0,0],[0,0])}})(a,u);else{if(u=new DataView(u),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");u=new TextDecoder("utf-8").decode(u).split(`
`),function(y,p){for(var v,w,C="",T=[],j=0;j<p.length;++j){for(var A=p[j].trim(),L=A.split(" "),M=0;M<L.length;++M)L[M]===""&&L.splice(M,1);if(L.length!==0)switch(C){case"":if(L[0]!=="solid")return console.error(A),console.error('Invalid state "'.concat(L[0],'", should be "solid"'));C="solid";break;case"solid":if(L[0]!=="facet"||L[1]!=="normal")return console.error(A),console.error('Invalid state "'.concat(L[0],'", should be "facet normal"'));v=new h.default.Vector(parseFloat(L[2]),parseFloat(L[3]),parseFloat(L[4])),y.vertexNormals.push(v,v,v),C="facet normal";break;case"facet normal":if(L[0]!=="outer"||L[1]!=="loop")return console.error(A),console.error('Invalid state "'.concat(L[0],'", should be "outer loop"'));C="vertex";break;case"vertex":if(L[0]==="vertex")w=new h.default.Vector(parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])),y.vertices.push(w),y.uvs.push([0,0]),T.push(y.vertices.indexOf(w));else{if(L[0]!=="endloop")return console.error(A),console.error('Invalid state "'.concat(L[0],'", should be "vertex" or "endloop"'));y.faces.push(T),T=[],C="endloop"}break;case"endloop":if(L[0]!=="endfacet")return console.error(A),console.error('Invalid state "'.concat(L[0],'", should be "endfacet"'));C="endfacet";break;case"endfacet":if(L[0]!=="endsolid"){if(L[0]!=="facet"||L[1]!=="normal")return console.error(A),console.error('Invalid state "'.concat(L[0],'", should be "endsolid" or "facet normal"'));v=new h.default.Vector(parseFloat(L[2]),parseFloat(L[3]),parseFloat(L[4])),y.vertexNormals.push(v,v,v),C="facet normal"}break;default:console.error('Invalid state "'.concat(C,'"'))}}}(a,u)}})(s,c),f&&s.normalize(),l._decrementPreload(),typeof g=="function"&&g(s)},m):n.match(/\.obj$/i)?this.loadStrings(i,function(c){for(var a=s,u=c,y={v:[],vt:[],vn:[]},p={},v=0;v<u.length;++v){var w=u[v].trim().split(/\b\s+/);if(0<w.length){if(w[0]==="v"||w[0]==="vn"){var C=new h.default.Vector(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));y[w[0]].push(C)}else if(w[0]==="vt")C=[parseFloat(w[1]),1-parseFloat(w[2])],y[w[0]].push(C);else if(w[0]==="f")for(var T=3;T<w.length;++T){for(var j=[],A=[1,T-1,T],L=0;L<A.length;++L){var M=w[A[L]],k=0;if(p[M]!==void 0)k=p[M];else{for(var O=M.split("/"),N=0;N<O.length;N++)O[N]=parseInt(O[N])-1;k=p[M]=a.vertices.length,a.vertices.push(y.v[O[0]].copy()),y.vt[O[1]]?a.uvs.push(y.vt[O[1]].slice()):a.uvs.push([0,0]),y.vn[O[2]]&&a.vertexNormals.push(y.vn[O[2]].copy())}j.push(k)}j[0]!==j[1]&&j[0]!==j[2]&&j[1]!==j[2]&&a.faces.push(j)}}}a.vertexNormals.length===0&&a.computeNormals(),f&&s.normalize(),l._decrementPreload(),typeof g=="function"&&g(s)},m):(h.default._friendlyFileLoadError(3,i),m?m():h.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),s},h.default.prototype.model=function(i){this._assert3d("model"),h.default._validateParameters("model",arguments),0<i.vertices.length&&(this._renderer.geometryInHash(i.gid)||(i.edges.length===0&&i._makeTriangleEdges(),i._edgesToVertices(),this._renderer.createBuffers(i.gid,i)),this._renderer.drawBuffers(i.gid))};var d=h.default;b.default=d},{"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201}],323:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var s=g();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../core/constants"));function g(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,g=function(){return n},n)}t("./p5.Texture"),i.default.prototype.loadShader=function(n,s,l,c){i.default._validateParameters("loadShader",arguments),c=c||console.error;function a(){y._decrementPreload(),l&&l(u)}var u=new i.default.Shader,y=this,p=!1,v=!1;return this.loadStrings(n,function(w){u._vertSrc=w.join(`
`),v=!0,p&&a()},c),this.loadStrings(s,function(w){u._fragSrc=w.join(`
`),p=!0,v&&a()},c),u},i.default.prototype.createShader=function(n,s){return this._assert3d("createShader"),i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,n,s)},i.default.prototype.createFilterShader=function(n){this._assert3d("createFilterShader"),i.default._validateParameters("createFilterShader",arguments);var s=n.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,s=new i.default.Shader(this._renderer,s,n);return s.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),s},i.default.prototype.shader=function(n){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),n.ensureCompiledOnContext(this),n.isStrokeShader()?this._renderer.userStrokeShader=n:(this._renderer.userFillShader=n,this._renderer._useNormalMaterial=!1),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.texture=function(n){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),n.gifProperties&&n._animateGif(this),this._renderer.drawMode=f.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=n,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(n){n!==f.IMAGE&&n!==f.NORMAL?console.warn("You tried to set ".concat(n," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=n},i.default.prototype.textureWrap=function(n){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:n,l=(this._renderer.textureWrapX=n,this._renderer.textureWrapY=s,!0),c=!1,a=void 0;try{for(var u,y=this._renderer.textures.values()[Symbol.iterator]();!(l=(u=y.next()).done);l=!0)u.value.setWrapMode(n,s)}catch(p){c=!0,a=p}finally{try{l||y.return==null||y.return()}finally{if(c)throw a}}},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return i.default._validateParameters("normalMaterial",s),this._renderer.drawMode=f.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.ambientMaterial=function(n,s,l){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var c=i.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=c._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.emissiveMaterial=function(n,s,l,c){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var a=i.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=a._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.specularMaterial=function(n,s,l,c){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var a=i.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=a._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.shininess=function(n){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),this._renderer._useShininess=n=n<1?1:n,this},i.default.RendererGL.prototype._applyColorBlend=function(n){var s=this.GL,l=this.drawMode===f.TEXTURE,l=this.userFillShader||this.userStrokeShader||this.userPointShader||l||this.curBlendMode!==f.BLEND||n[n.length-1]<1||this._isErasing;return l!==this._isBlending&&(l||this.curBlendMode!==f.BLEND&&this.curBlendMode!==f.ADD?s.enable(s.BLEND):s.disable(s.BLEND),s.depthMask(!0),this._isBlending=l),this._applyBlendMode(),n},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var n=this.GL;switch(this.curBlendMode){case f.BLEND:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case f.ADD:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE);break;case f.REMOVE:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ZERO,n.ONE_MINUS_SRC_ALPHA);break;case f.MULTIPLY:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA);break;case f.SCREEN:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_COLOR);break;case f.EXCLUSION:n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD),n.blendFuncSeparate(n.ONE_MINUS_DST_COLOR,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE);break;case f.REPLACE:n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO);break;case f.SUBTRACT:n.blendEquationSeparate(n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD),n.blendFuncSeparate(n.ONE,n.ONE,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case f.DARKEST:this.blendExt?(n.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,n.FUNC_ADD),n.blendFuncSeparate(n.ONE,n.ONE,n.ONE,n.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case f.LIGHTEST:this.blendExt?(n.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,n.FUNC_ADD),n.blendFuncSeparate(n.ONE,n.ONE,n.ONE,n.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var m=i.default;b.default=m},{"../core/constants":264,"../core/main":275,"./p5.Texture":334,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],324:[function(t,x,b){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(i,f){for(var g=0;g<f.length;g++){var m=f[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(i,m.key,m)}}h.default.prototype.camera=function(){var i;this._assert3d("camera");for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return h.default._validateParameters("camera",g),(i=this._renderer._curCamera).camera.apply(i,g),this},h.default.prototype.perspective=function(){var i;this._assert3d("perspective");for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return h.default._validateParameters("perspective",g),(i=this._renderer._curCamera).perspective.apply(i,g),this},h.default.prototype.ortho=function(){var i;this._assert3d("ortho");for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return h.default._validateParameters("ortho",g),(i=this._renderer._curCamera).ortho.apply(i,g),this},h.default.prototype.frustum=function(){var i;this._assert3d("frustum");for(var f=arguments.length,g=new Array(f),m=0;m<f;m++)g[m]=arguments[m];return h.default._validateParameters("frustum",g),(i=this._renderer._curCamera).frustum.apply(i,g),this},h.default.prototype.createCamera=function(){this._assert3d("createCamera");var i=new h.default.Camera(this._renderer);return i._computeCameraDefaultSettings(),i._setDefaultCamera(),this._renderer._curCamera=i},h.default.Camera=function(){function i(m){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._renderer=m,this.cameraType="default",this.cameraMatrix=new h.default.Matrix,this.projMatrix=new h.default.Matrix,this.yScale=1}var f,g;return f=i,(g=[{key:"perspective",value:function(c,n,s,l){this.cameraType=0<arguments.length?"custom":"default",c===void 0?(c=this.defaultCameraFOV,this.cameraFOV=c):this.cameraFOV=this._renderer._pInst._toRadians(c),n===void 0&&(n=this.defaultAspectRatio),s===void 0&&(s=this.defaultCameraNear),l===void 0&&(l=this.defaultCameraFar),s<=1e-4&&(s=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),l<s&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=n,this.cameraNear=s,this.cameraFar=l,this.projMatrix=h.default.Matrix.identity();var c=1/Math.tan(this.cameraFOV/2),a=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(c/n,0,0,0,0,-c*this.yScale,0,0,0,0,(l+s)*a,-1,0,0,2*l*s*a,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(T,C,s,l,c,a){T===void 0&&(T=-this._renderer.width/2),C===void 0&&(C=+this._renderer.width/2),s===void 0&&(s=-this._renderer.height/2),l===void 0&&(l=+this._renderer.height/2),c===void 0&&(c=0),a===void 0&&(a=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=c;var j=C-T,u=l-s,y=(this.cameraFar=a)-c,p=2/j,v=2/u*this.yScale,w=-2/y,C=-(C+T)/j,T=-(l+s)/u,j=-(a+c)/y;this.projMatrix=h.default.Matrix.identity(),this.projMatrix.set(p,0,0,0,0,-v,0,0,0,0,w,0,C,T,j,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(T,C,s,l,c,a){T===void 0&&(T=.05*-this._renderer.width),C===void 0&&(C=.05*+this._renderer.width),s===void 0&&(s=.05*+this._renderer.height),l===void 0&&(l=.05*-this._renderer.height),c===void 0&&(c=this.defaultCameraNear),a===void 0&&(a=this.defaultCameraFar),this.cameraNear=c;var j=C-T,u=l-s,y=(this.cameraFar=a)-c,p=2*c/j,v=2*c/u*this.yScale,w=-2*a*c/y,C=(C+T)/j,T=(l+s)/u,j=-(a+c)/y;this.projMatrix=h.default.Matrix.identity(),this.projMatrix.set(p,0,0,0,0,-v,0,0,C,T,j,-1,0,0,w,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(p,n,s,l){var c=this.centerX,a=this.centerY,u=this.centerZ,y=(c-=this.eyeX,a-=this.eyeY,u-=this.eyeZ,h.default.Matrix.identity(this._renderer._pInst)),p=(y.rotate(this._renderer._pInst._toRadians(p),n,s,l),[c*y.mat4[0]+a*y.mat4[4]+u*y.mat4[8],c*y.mat4[1]+a*y.mat4[5]+u*y.mat4[9],c*y.mat4[2]+a*y.mat4[6]+u*y.mat4[10]]);p[0]+=this.eyeX,p[1]+=this.eyeY,p[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,p[0],p[1],p[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(m){var n=this._getLocalAxes();this._rotateView(m,n.y[0],n.y[1],n.y[2])}},{key:"tilt",value:function(m){var n=this._getLocalAxes();this._rotateView(m,n.x[0],n.x[1],n.x[2])}},{key:"lookAt",value:function(m,n,s){this.camera(this.eyeX,this.eyeY,this.eyeZ,m,n,s,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(m,n,s,l,c,a,u,y,p){return m===void 0&&(m=this.defaultEyeX,n=this.defaultEyeY,s=this.defaultEyeZ,l=m,c=n,y=1,p=u=a=0),this.eyeX=m,this.eyeY=n,this.eyeZ=s,l!==void 0&&(this.centerX=l,this.centerY=c,this.centerZ=a),u!==void 0&&(this.upX=u,this.upY=y,this.upZ=p),l=this._getLocalAxes(),this.cameraMatrix.set(l.x[0],l.y[0],l.z[0],0,l.x[1],l.y[1],l.z[1],0,l.x[2],l.y[2],l.z[2],0,0,0,0,1),c=-m,this.cameraMatrix.translate([c,-n,-s]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(l,c,s){var a=this._getLocalAxes(),l=[a.x[0]*l,a.x[1]*l,a.x[2]*l],c=[a.y[0]*c,a.y[1]*c,a.y[2]*c],a=[a.z[0]*s,a.z[1]*s,a.z[2]*s];this.camera(this.eyeX+l[0]+c[0]+a[0],this.eyeY+l[1]+c[1]+a[1],this.eyeZ+l[2]+c[2]+a[2],this.centerX+l[0]+c[0]+a[0],this.centerY+l[1]+c[1]+a[1],this.centerZ+l[2]+c[2]+a[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(m,n,s){var l=m-this.eyeX,c=n-this.eyeY,a=s-this.eyeZ;this.camera(m,n,s,this.centerX+l,this.centerY+c,this.centerZ+a,this.upX,this.upY,this.upZ)}},{key:"set",value:function(m){for(var n=0,s=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];n<s.length;n++){var l=s[n];this[l]=m[l]}this.cameraMatrix=m.cameraMatrix.copy(),this.projMatrix=m.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(m,n,s){var l,c,a,u,y,p,v,w,C,T,j,A,L,M,k,O,N,U;s===0?this.set(m):s===1?this.set(n):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=m.projMatrix.mat4[0]*Math.pow(n.projMatrix.mat4[0]/m.projMatrix.mat4[0],s),this.projMatrix.mat4[5]=m.projMatrix.mat4[5]*Math.pow(n.projMatrix.mat4[5]/m.projMatrix.mat4[5],s),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),u=new h.default.Vector(m.eyeX,m.eyeY,m.eyeZ),y=new h.default.Vector(n.eyeX,n.eyeY,n.eyeZ),O=new h.default.Vector(m.centerX,m.centerY,m.centerZ),U=new h.default.Vector(n.centerX,n.centerY,n.centerZ),a=h.default.Vector.dist(u,O),l=h.default.Vector.dist(y,U),l=a*Math.pow(l/a,s),a=h.default.Vector.sub(u,y),c=1,1e-6<(N=(M=u.copy().sub(y).sub(O).add(U)).magSq())&&(c=h.default.Vector.dot(a,M)/N,c=Math.max(0,Math.min(c,1))),a=h.default.Vector.lerp(h.default.Vector.lerp(u,O,c),h.default.Vector.lerp(y,U,c),s),M=m.cameraMatrix.createSubMatrix3x3(),N=n.cameraMatrix.createSubMatrix3x3(),u=M.column(2),O=N.column(2),y=M.column(1),U=N.column(1),m=new h.default.Vector,n=new h.default.Vector,p=new h.default.Vector,v=new h.default.Vector,1-(w=.5*((M=(N=N.mult3x3(M.copy().transpose3x3())).diagonal())[0]+M[1]+M[2]-1))<1e-7?(m.set(h.default.Vector.lerp(u,O,s)).normalize(),p.set(m).mult(c*l).add(a),v.set(m).mult((c-1)*l).add(a),n.set(h.default.Vector.lerp(y,U,s)).normalize()):(O=1/(1-w),U=Math.max(M[0],M[1],M[2]),A=N.mat3[1]+N.mat3[3],L=N.mat3[2]+N.mat3[6],k=N.mat3[5]+N.mat3[7],U=U===M[0]?(T=.5*A*(O/=C=Math.sqrt((M[0]-w)*O)),j=.5*L*O,.5*(N.mat3[7]-N.mat3[5])/C):U===M[1]?(j=.5*k*(O/=T=Math.sqrt((M[1]-w)*O)),C=.5*A*O,.5*(N.mat3[2]-N.mat3[6])/T):(C=.5*L*(O/=j=Math.sqrt((M[2]-w)*O)),T=.5*k*O,.5*(N.mat3[3]-N.mat3[1])/j),A=s*Math.atan2(U,w),L=Math.cos(A),M=Math.sin(A),(U=new h.default.Matrix("mat3",[L+(k=1-L)*C*C,k*(O=C*T)+M*j,k*(N=j*C)-M*T,k*O-M*j,L+k*T*T,k*(s=T*j)+M*C,k*N+M*T,k*s-M*C,L+k*j*j])).multiplyVec3(u,m),p.set(m).mult(c*l).add(a),v.set(m).mult((c-1)*l).add(a),U.multiplyVec3(y,n)),this.camera(p.x,p.y,p.z,v.x,v.y,v.z,n.x,n.y,n.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)}},{key:"copy",value:function(){var m=new h.default.Camera(this._renderer);return m.cameraFOV=this.cameraFOV,m.aspectRatio=this.aspectRatio,m.eyeX=this.eyeX,m.eyeY=this.eyeY,m.eyeZ=this.eyeZ,m.centerX=this.centerX,m.centerY=this.centerY,m.centerZ=this.centerZ,m.upX=this.upX,m.upY=this.upY,m.upZ=this.upZ,m.cameraNear=this.cameraNear,m.cameraFar=this.cameraFar,m.cameraType=this.cameraType,m.cameraMatrix=this.cameraMatrix.copy(),m.projMatrix=this.projMatrix.copy(),m.yScale=this.yScale,m}},{key:"_getLocalAxes",value:function(){var m=this.eyeX-this.centerX,n=this.eyeY-this.centerY,s=this.eyeZ-this.centerZ,u=Math.sqrt(m*m+n*n+s*s),u=(u!==0&&(m/=u,n/=u,s/=u),this.upX),l=(y=this.upY)*s-(p=this.upZ)*n,c=-u*s+p*m,a=u*n-y*m,u=n*a-s*c,y=-m*a+s*l,p=m*c-n*l,v=Math.sqrt(l*l+c*c+a*a),v=(v!==0&&(l/=v,c/=v,a/=v),Math.sqrt(u*u+y*y+p*p));return v!==0&&(u/=v,y/=v,p/=v),{x:[l,c,a],y:[u,y,p],z:[m,n,s]}}},{key:"_orbit",value:function(m,v,p){var c=this.eyeX-this.centerX,a=this.eyeY-this.centerY,u=this.eyeZ-this.centerZ,l=Math.hypot(c,a,u),c=new h.default.Vector(c,a,u).normalize(),a=new h.default.Vector(this.upX,this.upY,this.upZ).normalize(),u=new h.default.Vector.cross(a,c).normalize(),y=new h.default.Vector.cross(u,a),p=((l=(l*=Math.pow(10,p))<this.cameraNear?this.cameraNear:l)>this.cameraFar&&(l=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,h.default.Vector.dot(c,a))))+v),v=m;(p<=0||p>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),a.mult(Math.cos(p)),y.mult(Math.cos(v)*Math.sin(p)),u.mult(Math.sin(v)*Math.sin(p)),c.set(a).add(y).add(u),this.eyeX=l*c.x+this.centerX,this.eyeY=l*c.y+this.centerY,this.eyeZ=l*c.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(p,v,C){var c=this.eyeX-this.centerX,a=this.eyeY-this.centerY,u=this.eyeZ-this.centerZ,l=Math.hypot(c,a,u),c=new h.default.Vector(c,a,u).normalize(),a=new h.default.Vector(this.upX,this.upY,this.upZ),u=new h.default.Vector.cross(a,c).normalize(),y=new h.default.Vector.cross(c,u),T=Math.atan2(v,p),T=(y.mult(Math.sin(T)),u.mult(Math.cos(T)).add(y),Math.sqrt(p*p+v*v)),y=new h.default.Vector.cross(c,u),p=((l=(l*=Math.pow(10,C))<this.cameraNear?this.cameraNear:l)>this.cameraFar&&(l=this.cameraFar),Math.cos(T)),v=Math.sin(T),C=a.dot(c),T=a.dot(u),w=C*p+T*v,C=-C*v+T*p,T=a.dot(y);a.x=w*c.x+C*u.x+T*y.x,a.y=w*c.y+C*u.y+T*y.y,a.z=w*c.z+C*u.z+T*y.z,u.mult(-v),c.mult(p).add(u).mult(l),this.camera(c.x+this.centerX,c.y+this.centerY,c.z+this.centerZ,this.centerX,this.centerY,this.centerZ,a.x,a.y,a.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&d(f.prototype,g),i}(),h.default.prototype.setCamera=function(i){this._renderer._curCamera=i,this._renderer.uPMatrix.set(i.projMatrix.mat4[0],i.projMatrix.mat4[1],i.projMatrix.mat4[2],i.projMatrix.mat4[3],i.projMatrix.mat4[4],i.projMatrix.mat4[5],i.projMatrix.mat4[6],i.projMatrix.mat4[7],i.projMatrix.mat4[8],i.projMatrix.mat4[9],i.projMatrix.mat4[10],i.projMatrix.mat4[11],i.projMatrix.mat4[12],i.projMatrix.mat4[13],i.projMatrix.mat4[14],i.projMatrix.mat4[15])},t=h.default.Camera,b.default=t},{"../core/main":275,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.string.sub":200}],325:[function(t,x,b){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(d,i){for(var f=0;f<i.length;f++){var g=i[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}t.default.DataArray=function(){function d(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,m=this,n=d;if(!(m instanceof n))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(g),this.initialLength=g}var i,f;return i=d,(f=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var g;this.length<this.data.length/2&&(g=1<<Math.ceil(Math.log2(this.length)),(g=new Float32Array(g)).set(this.data.subarray(0,this.length),0),this.data=g)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var g=arguments.length,m=new Array(g),n=0;n<g;n++)m[n]=arguments[n];this.ensureLength(this.length+m.length),this.data.set(m,this.length),this.length+=m.length}},{key:"slice",value:function(g,m){return this.data.slice(g,Math.min(m,this.length))}},{key:"subArray",value:function(g,m){return this.data.subarray(g,Math.min(m,this.length))}},{key:"ensureLength",value:function(g){for(;this.data.length<g;){var m=new Float32Array(2*this.data.length);m.set(this.data,0),this.data=m}}}])&&h(i.prototype,f),d}(),t=t.default.DataArray,b.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.log2":171,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],326:[function(A,x,b){function h(L){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(L)}function d(L){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(M){return h(M)}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":h(M)})(L)}A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.object.get-own-property-descriptor"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.reflect.construct"),A("core-js/modules/es.reflect.get"),A("core-js/modules/es.regexp.to-string"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint8-clamped-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/es.weak-map"),A("core-js/modules/web.dom-collections.iterator"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint8-clamped-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(j=A("../core/main"))&&j.__esModule?j:{default:j},f=function(L){if(L&&L.__esModule)return L;if(L===null||d(L)!=="object"&&typeof L!="function")return{default:L};var M=n();if(M&&M.has(L))return M.get(L);var k,O={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in L){var U;Object.prototype.hasOwnProperty.call(L,k)&&((U=N?Object.getOwnPropertyDescriptor(L,k):null)&&(U.get||U.set)?Object.defineProperty(O,k,U):O[k]=L[k])}return O.default=L,M&&M.set(L,O),O}(A("../core/constants")),g=A("./p5.Texture"),m=A("./p5.RendererGL");function n(){var L;return typeof WeakMap!="function"?null:(L=new WeakMap,n=function(){return L},L)}function s(L,M){return function(k){if(Array.isArray(k))return k}(L)||function(k,O){if(Symbol.iterator in Object(k)||Object.prototype.toString.call(k)==="[object Arguments]"){var N=[],U=!0,V=!1,G=void 0;try{for(var z,W=k[Symbol.iterator]();!(U=(z=W.next()).done)&&(N.push(z.value),!O||N.length!==O);U=!0);}catch(Z){V=!0,G=Z}finally{try{U||W.return==null||W.return()}finally{if(V)throw G}}return N}}(L,M)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(L,M,k){return M in L?Object.defineProperty(L,M,{value:k,enumerable:!0,configurable:!0,writable:!0}):L[M]=k,L}function c(L,M){if(!(L instanceof M))throw new TypeError("Cannot call a class as a function")}function a(L,M){for(var k=0;k<M.length;k++){var O=M[k];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(L,O.key,O)}}function u(L,M,k){M&&a(L.prototype,M),k&&a(L,k)}function y(L,M,k){return(y=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,N,U){var V=function(G,z){for(;!Object.prototype.hasOwnProperty.call(G,z)&&(G=w(G))!==null;);return G}(V,N);if(V)return(V=Object.getOwnPropertyDescriptor(V,N)).get?V.get.call(U):V.value})(L,M,k||L)}function p(L,M){return(p=Object.setPrototypeOf||function(k,O){return k.__proto__=O,k})(L,M)}function v(L){return function(){var M,k=w(L),k=(M=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(M=w(this).constructor,Reflect.construct(k,arguments,M)):k.apply(this,arguments),this);if(!M||d(M)!=="object"&&typeof M!="function"){if(k!==void 0)return k;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return M}}function w(L){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(L)}var C=function(L){var M=O;if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),L&&p(M,L);var k=v(O);function O(N){var U;return c(this,O),(U=k.call(this,N.target._renderer)).fbo=N,U.yScale=-1,U}return u(O,[{key:"_computeCameraDefaultSettings",value:function(){y(w(O.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultEyeZ=this.fbo.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this.fbo.width/this.fbo.height)}}]),O}(i.default.Camera),T=(i.default.FramebufferCamera=C,function(){function L(M,k){c(this,L),this.framebuffer=M,this.property=k}return u(L,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),L}()),j=(i.default.FramebufferTexture=T,function(){function L(N){var k=this,O=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},N=(c(this,L),this.target=N,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=O.format||f.UNSIGNED_BYTE,this.channels=O.channels||(N._renderer._pInst._glAttributes.alpha?f.RGBA:f.RGB),this.useDepth=O.depth===void 0||O.depth,this.depthFormat=O.depthFormat||f.FLOAT,this.textureFiltering=O.textureFiltering||f.LINEAR,O.antialias===void 0?this.antialiasSamples=N._renderer._pInst._glAttributes.antialias?2:0:typeof O.antialias=="number"?this.antialiasSamples=O.antialias:this.antialiasSamples=O.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&N.webglVersion!==f.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),O.width&&O.height?(this.width=O.width,this.height=O.height,this.autoSized=!1):(O.width===void 0!=(O.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=N.width,this.height=N.height,this.autoSized=!0),this.density=O.density||N.pixelDensity(),N._renderer.GL);if(this.gl=N,this._checkIfFormatsAvailable(),O.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(O.stencil===void 0||O.stencil),this.framebuffer=N.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=N.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),O=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=O,this.draw(function(){return k.target.clear()})}return u(L,[{key:"resize",value:function(M,k){this.autoSized=!1,this.width=M,this.height=k,this._handleResize()}},{key:"pixelDensity",value:function(M){if(!M)return this.density;this.autoSized=!1,this.density=M,this._handleResize()}},{key:"autoSized",value:function(M){if(M===void 0)return this.autoSized;this.autoSized=M,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var M=this.gl,M=(this.useDepth&&this.target.webglVersion===f.WEBGL&&!M.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===f.WEBGL&&this.depthFormat===f.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=f.UNSIGNED_INT),[f.UNSIGNED_BYTE,f.FLOAT,f.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.useDepth&&![f.UNSIGNED_INT,f.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=f.FLOAT),(0,g.checkWebGLCapabilities)(this.target._renderer));M.float||this.format!==f.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.useDepth&&!M.float&&this.depthFormat===f.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=f.UNSIGNED_INT),M.halfFloat||this.format!==f.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.channels===f.RGB&&[f.FLOAT,f.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=f.RGBA)}},{key:"_recreateTextures",value:function(){var M=this.gl,k=(this._updateSize(),M.getParameter(M.TEXTURE_BINDING_2D)),O=M.getParameter(M.FRAMEBUFFER_BINDING),N=M.createTexture();if(!N)throw new Error("Unable to create color texture");M.bindTexture(M.TEXTURE_2D,N);var U=this._glColorFormat();if(M.texImage2D(M.TEXTURE_2D,0,U.internalFormat,this.width*this.density,this.height*this.density,0,U.format,U.type,null),this.colorTexture=N,M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,N,0),this.useDepth){var N=M.createTexture();if(!N)throw new Error("Unable to create depth texture");var V=this._glDepthFormat();M.bindTexture(M.TEXTURE_2D,N),M.texImage2D(M.TEXTURE_2D,0,V.internalFormat,this.width*this.density,this.height*this.density,0,V.format,V.type,null),M.framebufferTexture2D(M.FRAMEBUFFER,this.useStencil?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,M.TEXTURE_2D,N,0),this.depthTexture=N}this.antialias&&(this.colorRenderbuffer=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,this.colorRenderbuffer),M.renderbufferStorageMultisample(M.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,M.getParameter(M.MAX_SAMPLES))),U.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(V=this._glDepthFormat(),this.depthRenderbuffer=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,this.depthRenderbuffer),M.renderbufferStorageMultisample(M.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,M.getParameter(M.MAX_SAMPLES))),V.internalFormat,this.width*this.density,this.height*this.density)),M.bindFramebuffer(M.FRAMEBUFFER,this.aaFramebuffer),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&M.framebufferRenderbuffer(M.FRAMEBUFFER,this.useStencil?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,M.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new T(this,"depthTexture"),N=M.NEAREST,this.depthP5Texture=new i.default.Texture(this.target._renderer,this.depth,{minFilter:N,magFilter:N}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new T(this,"colorTexture"),U=this.textureFiltering===f.LINEAR?M.LINEAR:M.NEAREST,this.colorP5Texture=new i.default.Texture(this.target._renderer,this.color,{minFilter:U,magFilter:U}),this.target._renderer.textures.set(this.color,this.colorP5Texture),M.bindTexture(M.TEXTURE_2D,k),M.bindFramebuffer(M.FRAMEBUFFER,O)}},{key:"_glColorFormat",value:function(){var M,k,O=this.gl,N=this.format===f.FLOAT?O.FLOAT:this.format===f.HALF_FLOAT?this.target.webglVersion===f.WEBGL2?O.HALF_FLOAT:O.getExtension("OES_texture_half_float").HALF_FLOAT_OES:O.UNSIGNED_BYTE,U=this.channels===f.RGBA?O.RGBA:O.RGB;return{internalFormat:this.target.webglVersion===f.WEBGL2?(l(k={},O.FLOAT,l({},O.RGBA,O.RGBA32F)),l(k,O.HALF_FLOAT,l({},O.RGBA,O.RGBA16F)),l(k,O.UNSIGNED_BYTE,(l(M={},O.RGBA,O.RGBA8),l(M,O.RGB,O.RGB8),M)),k[N][U]):this.format===f.HALF_FLOAT?O.RGBA:U,format:U,type:N}}},{key:"_glDepthFormat",value:function(){var O=this.gl,M=this.useStencil?this.depthFormat===f.FLOAT?O.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===f.WEBGL2?O.UNSIGNED_INT_24_8:O.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===f.FLOAT?O.FLOAT:O.UNSIGNED_INT,k=this.useStencil?O.DEPTH_STENCIL:O.DEPTH_COMPONENT,O=this.useStencil?this.depthFormat===f.FLOAT?O.DEPTH32F_STENCIL8:this.target.webglVersion===f.WEBGL2?O.DEPTH24_STENCIL8:O.DEPTH_STENCIL:this.target.webglVersion===f.WEBGL2?this.depthFormat===f.FLOAT?O.DEPTH_COMPONENT32F:O.DEPTH_COMPONENT24:O.DEPTH_COMPONENT;return{internalFormat:O,format:k,type:M}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var N=this.color,M=this.depth,k=this.colorRenderbuffer,O=this.depthRenderbuffer,N=(this._deleteTexture(N),M&&this._deleteTexture(M),this.gl);k&&N.deleteRenderbuffer(k),O&&N.deleteRenderbuffer(O),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var M=new C(this);return M._computeCameraDefaultSettings(),M._setDefaultCamera(),this.target._renderer._curCamera=M}},{key:"_deleteTexture",value:function(M){this.gl.deleteTexture(M.rawTexture()),this.target._renderer.textures.delete(M)}},{key:"remove",value:function(){var M=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),M.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&M.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&M.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&M.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var M=this.gl,k=(M.bindFramebuffer(M.READ_FRAMEBUFFER,this.aaFramebuffer),M.bindFramebuffer(M.DRAW_FRAMEBUFFER,this.framebuffer),[[M.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&k.push([M.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var O=0,N=k;O<N.length;O++){var V=s(N[O],2),U=V[0],V=V[1];M.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,U,V)}}}},{key:"end",value:function(){var M=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(M.bindFramebuffer(M.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(M){this.begin(),M(),this.end()}},{key:"loadPixels",value:function(){var M=this.gl,k=this.target._renderer.activeFramebuffer(),O=(M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,m.readPixelsWebGL)(this.pixels,M,this.framebuffer,0,0,this.width*this.density,this.height*this.density,O.format,O.type),k?M.bindFramebuffer(M.FRAMEBUFFER,k._framebufferToBind()):M.bindFramebuffer(M.FRAMEBUFFER,null)}},{key:"get",value:function(M,k,O,N){i.default._validateParameters("p5.Framebuffer.get",arguments);var U=this._glColorFormat();if(M===void 0&&k===void 0)k=M=0,O=this.width,N=this.height;else if(O===void 0&&N===void 0)return(M<0||k<0||M>=this.width||k>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),M=this.target.constrain(M,0,this.width-1),k=this.target.constrain(k,0,this.height-1)),(0,m.readPixelWebGL)(this.gl,this.framebuffer,M*this.density,k*this.density,U.format,U.type);M=this.target.constrain(M,0,this.width-1),k=this.target.constrain(k,0,this.height-1),O=this.target.constrain(O,1,this.width-M),N=this.target.constrain(N,1,this.height-k);for(var V=(0,m.readPixelsWebGL)(void 0,this.gl,this.framebuffer,M*this.density,k*this.density,O*this.density,N*this.density,U.format,U.type),G=new Uint8ClampedArray(O*N*this.density*this.density*4),z=(G.fill(255),U.type===this.gl.RGB?3:4),W=0;W<N*this.density;W++)for(var Z=0;Z<O*this.density;Z++)for(var I=0;I<4;I++){var q,D=4*(W*O*this.density+Z)+I;I<z&&(q=z==4?D:(W*O*this.density+Z)*z+I,G[D]=V[q])}return M=new i.default.Image(O*this.density,N*this.density),M.imageData=M.canvas.getContext("2d").createImageData(M.width,M.height),M.imageData.data.set(G),M.pixels=M.imageData.data,M.updatePixels(),this.density!==1&&M.resize(O,N),M}},{key:"updatePixels",value:function(){var M=this.gl,k=(this.colorP5Texture.bindTexture(),this._glColorFormat()),O=k.format===M.RGBA?4:3,O=this.width*this.height*this.density*this.density*O,N=k.type===M.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof N)||this.pixels.length!==O)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");M.texImage2D(M.TEXTURE_2D,0,k.internalFormat,this.width*this.density,this.height*this.density,0,k.format,k.type,this.pixels),this.colorP5Texture.unbindTexture(),N=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(M.clearDepth(1),M.clear(M.DEPTH_BUFFER_BIT)),this.end()):(M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),this.useDepth&&(M.clearDepth(1),M.clear(M.DEPTH_BUFFER_BIT)),N?M.bindFramebuffer(M.FRAMEBUFFER,N._framebufferToBind()):M.bindFramebuffer(M.FRAMEBUFFER,null))}}]),L}()),A=i.default.Framebuffer=j;b.default=A},{"../core/constants":264,"../core/main":275,"./p5.RendererGL":332,"./p5.Texture":334,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],327:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(f){return function(g){if(Array.isArray(g)){for(var m=0,n=new Array(g.length);m<g.length;m++)n[m]=g[m];return n}}(f)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(f,g){for(var m=0;m<g.length;m++){var n=g[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}h.default.Geometry=function(){function f(n,s,l){if(this instanceof f)return this.vertices=[],this.lineVertices=new h.default.DataArray,this.lineTangentsIn=new h.default.DataArray,this.lineTangentsOut=new h.default.DataArray,this.lineSides=new h.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new h.default.DataArray,this.detailX=n!==void 0?n:1,this.detailY=s!==void 0?s:1,this.dirtyFlags={},l instanceof Function&&l.call(this),this;throw new TypeError("Cannot call a class as a function")}var g,m;return g=f,(m=[{key:"reset",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"computeFaces",value:function(){this.faces.length=0;for(var n,s,l,c=this.detailX+1,a=0;a<this.detailY;a++)for(var u=0;u<this.detailX;u++)s=(a+1)*c+u+1,this.faces.push([a*c+u,n=a*c+u+1,l=(a+1)*c+u]),this.faces.push([l,n,s]);return this}},{key:"_getFaceNormal",value:function(s){var s=this.faces[s],l=this.vertices[s[0]],a=this.vertices[s[1]],s=this.vertices[s[2]],a=h.default.Vector.sub(a,l),s=h.default.Vector.sub(s,l),l=h.default.Vector.cross(a,s),c=h.default.Vector.mag(l),a=c/(h.default.Vector.mag(a)*h.default.Vector.mag(s));return a===0||isNaN(a)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),l):(1<a&&(a=1),l.mult(Math.asin(a)/c))}},{key:"computeNormals",value:function(){for(var n=this,s=this.vertexNormals,l=this.vertices,c=this.faces,a=s.length=0;a<l.length;++a)s.push(new h.default.Vector);for(c.forEach(function(u,y){for(var p=n._getFaceNormal(y),v=0;v<3;++v){var w=u[v];s[w].add(p)}}),a=0;a<l.length;++a)s[a].normalize();return this}},{key:"averageNormals",value:function(){for(var n=0;n<=this.detailY;n++){var s=this.detailX+1,l=h.default.Vector.add(this.vertexNormals[n*s],this.vertexNormals[n*s+this.detailX]),l=h.default.Vector.div(l,2);this.vertexNormals[n*s]=l,this.vertexNormals[n*s+this.detailX]=l}return this}},{key:"averagePoleNormals",value:function(){for(var n=new h.default.Vector(0,0,0),s=0;s<this.detailX;s++)n.add(this.vertexNormals[s]);for(var n=h.default.Vector.div(n,this.detailX),l=0;l<this.detailX;l++)this.vertexNormals[l]=n;n=new h.default.Vector(0,0,0);for(var c=this.vertices.length-1;c>this.vertices.length-1-this.detailX;c--)n.add(this.vertexNormals[c]);n=h.default.Vector.div(n,this.detailX);for(var a=this.vertices.length-1;a>this.vertices.length-1-this.detailX;a--)this.vertexNormals[a]=n;return this}},{key:"_makeTriangleEdges",value:function(){for(var n=this.edges.length=0;n<this.faces.length;n++)this.edges.push([this.faces[n][0],this.faces[n][1]]),this.edges.push([this.faces[n][1],this.faces[n][2]]),this.edges.push([this.faces[n][2],this.faces[n][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var n,s=new Map,l=new Set,c=0;c<this.edges.length;c++){var a,u=this.edges[c-1],y=this.edges[c],p=this.vertices[y[0]],v=this.vertices[y[1]],w=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*y[0],4*(y[0]+1)):[0,0,0,0],C=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*y[1],4*(y[1]+1)):[0,0,0,0],T=v.copy().sub(p).normalize(),j=0<T.magSq();j&&this._addSegment(p,v,w,C,T),0<c&&u[1]===y[0]?l.has(y[0])||(l.add(y[0]),s.delete(y[0]),n&&j&&T.dot(n)<1-1e-8&&this._addJoin(p,n,T,w)):(j&&!l.has(y[0])&&((a=s.get(y[0]))?(this._addJoin(p,a.dir,T,w),s.delete(y[0]),l.add(y[0])):s.set(y[0],{point:p,dir:T.copy().mult(-1),color:w})),n&&!l.has(u[1])&&((a=s.get(u[1]))?(this._addJoin(this.vertices[u[1]],n,a.dir.copy().mult(-1),w),s.delete(u[1]),l.add(u[1])):s.set(u[1],{point:this.vertices[u[1]],dir:n,color:w}),n=void 0)),c!==this.edges.length-1||l.has(y[1])||((p=s.get(y[1]))?(this._addJoin(v,T,p.dir.copy().mult(-1),C),s.delete(y[1]),l.add(y[1])):s.set(y[1],{point:v,dir:T,color:C})),j&&(n=T)}var A=!0,L=!1,M=void 0;try{for(var k,O=s.values()[Symbol.iterator]();!(A=(k=O.next()).done);A=!0){var N=k.value,U=N.point,V=N.dir,G=N.color;this._addCap(U,V,G)}}catch(z){L=!0,M=z}finally{try{A||O.return==null||O.return()}finally{if(L)throw M}}return this}},{key:"_addSegment",value:function(u,y,l,c,a){var u=u.array(),y=y.array(),p=a.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var v=0,w=[this.lineTangentsIn,this.lineTangentsOut];v<w.length;v++)for(var C=w[v],T=0;T<6;T++)C.push.apply(C,d(p));return(a=this.lineVertices).push.apply(a,d(u).concat(d(y),d(u),d(y),d(y),d(u))),(a=this.lineVertexColors).push.apply(a,d(l).concat(d(c),d(l),d(c),d(c),d(l))),this}},{key:"_addCap",value:function(n,s,l){for(var c,a=n.array(),u=s.array(),y=[0,0,0],p=0;p<6;p++)(c=this.lineVertices).push.apply(c,d(a)),(c=this.lineTangentsIn).push.apply(c,d(u)),(c=this.lineTangentsOut).push.apply(c,y),(c=this.lineVertexColors).push.apply(c,d(l));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(n,s,l,c){for(var a,u=n.array(),y=s.array(),p=l.array(),v=0;v<12;v++)(a=this.lineVertices).push.apply(a,d(u)),(a=this.lineTangentsIn).push.apply(a,d(y)),(a=this.lineTangentsOut).push.apply(a,d(p)),(a=this.lineVertexColors).push.apply(a,d(c));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var n=this.vertices[0].copy(),s=this.vertices[0].copy(),l=0;l<this.vertices.length;l++)n.x=Math.max(n.x,this.vertices[l].x),s.x=Math.min(s.x,this.vertices[l].x),n.y=Math.max(n.y,this.vertices[l].y),s.y=Math.min(s.y,this.vertices[l].y),n.z=Math.max(n.z,this.vertices[l].z),s.z=Math.min(s.z,this.vertices[l].z);for(var c=h.default.Vector.lerp(n,s,.5),a=h.default.Vector.sub(n,s),u=200/Math.max(Math.max(a.x,a.y),a.z),y=0;y<this.vertices.length;y++)this.vertices[y].sub(c),this.vertices[y].mult(u)}return this}}])&&i(g.prototype,m),f}(),t=h.default.Geometry,b.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],328:[function(g,x,b){g("core-js/modules/es.array.iterator"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.typed-array.float32-array"),g("core-js/modules/es.typed-array.copy-within"),g("core-js/modules/es.typed-array.every"),g("core-js/modules/es.typed-array.fill"),g("core-js/modules/es.typed-array.filter"),g("core-js/modules/es.typed-array.find"),g("core-js/modules/es.typed-array.find-index"),g("core-js/modules/es.typed-array.for-each"),g("core-js/modules/es.typed-array.includes"),g("core-js/modules/es.typed-array.index-of"),g("core-js/modules/es.typed-array.iterator"),g("core-js/modules/es.typed-array.join"),g("core-js/modules/es.typed-array.last-index-of"),g("core-js/modules/es.typed-array.map"),g("core-js/modules/es.typed-array.reduce"),g("core-js/modules/es.typed-array.reduce-right"),g("core-js/modules/es.typed-array.reverse"),g("core-js/modules/es.typed-array.set"),g("core-js/modules/es.typed-array.slice"),g("core-js/modules/es.typed-array.some"),g("core-js/modules/es.typed-array.sort"),g("core-js/modules/es.typed-array.subarray"),g("core-js/modules/es.typed-array.to-locale-string"),g("core-js/modules/es.typed-array.to-string"),g("core-js/modules/es.array.iterator"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.typed-array.float32-array"),g("core-js/modules/es.typed-array.copy-within"),g("core-js/modules/es.typed-array.every"),g("core-js/modules/es.typed-array.fill"),g("core-js/modules/es.typed-array.filter"),g("core-js/modules/es.typed-array.find"),g("core-js/modules/es.typed-array.find-index"),g("core-js/modules/es.typed-array.for-each"),g("core-js/modules/es.typed-array.includes"),g("core-js/modules/es.typed-array.index-of"),g("core-js/modules/es.typed-array.iterator"),g("core-js/modules/es.typed-array.join"),g("core-js/modules/es.typed-array.last-index-of"),g("core-js/modules/es.typed-array.map"),g("core-js/modules/es.typed-array.reduce"),g("core-js/modules/es.typed-array.reduce-right"),g("core-js/modules/es.typed-array.reverse"),g("core-js/modules/es.typed-array.set"),g("core-js/modules/es.typed-array.slice"),g("core-js/modules/es.typed-array.some"),g("core-js/modules/es.typed-array.sort"),g("core-js/modules/es.typed-array.subarray"),g("core-js/modules/es.typed-array.to-locale-string"),g("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(g=g("../core/main"))&&g.__esModule?g:{default:g};function d(m,n){for(var s=0;s<n.length;s++){var l=n[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(m,l.key,l)}}var i=Array,f=function(m){return Array.isArray(m)},g=(typeof Float32Array<"u"&&(i=Float32Array,f=function(m){return Array.isArray(m)||m instanceof Float32Array}),h.default.Matrix=function(){function m(){var c=this,a=m;if(c instanceof a)return arguments.length&&((c=arguments.length-1)<0||arguments.length<=c?void 0:arguments[c])instanceof h.default&&(this.p5=(a=arguments.length-1)<0||arguments.length<=a?void 0:arguments[a]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var n,s,l;return n=m,l=[{key:"identity",value:function(c){return new h.default.Matrix(c)}}],(s=[{key:"set",value:function(c){return c instanceof h.default.Matrix?this.mat4=c.mat4:f(c)?this.mat4=c:arguments.length===16&&(this.mat4[0]=c,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new h.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var c;return this.mat3!==void 0?((c=new h.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],c.mat3[1]=this.mat3[1],c.mat3[2]=this.mat3[2],c.mat3[3]=this.mat3[3],c.mat3[4]=this.mat3[4],c.mat3[5]=this.mat3[5],c.mat3[6]=this.mat3[6],c.mat3[7]=this.mat3[7],c.mat3[8]=this.mat3[8]):((c=new h.default.Matrix(this.p5)).mat4[0]=this.mat4[0],c.mat4[1]=this.mat4[1],c.mat4[2]=this.mat4[2],c.mat4[3]=this.mat4[3],c.mat4[4]=this.mat4[4],c.mat4[5]=this.mat4[5],c.mat4[6]=this.mat4[6],c.mat4[7]=this.mat4[7],c.mat4[8]=this.mat4[8],c.mat4[9]=this.mat4[9],c.mat4[10]=this.mat4[10],c.mat4[11]=this.mat4[11],c.mat4[12]=this.mat4[12],c.mat4[13]=this.mat4[13],c.mat4[14]=this.mat4[14],c.mat4[15]=this.mat4[15]),c}},{key:"transpose",value:function(c){var a,u,y,p,v,w;return c instanceof h.default.Matrix?(a=c.mat4[1],u=c.mat4[2],y=c.mat4[3],p=c.mat4[6],v=c.mat4[7],w=c.mat4[11],this.mat4[0]=c.mat4[0],this.mat4[1]=c.mat4[4],this.mat4[2]=c.mat4[8],this.mat4[3]=c.mat4[12],this.mat4[4]=a,this.mat4[5]=c.mat4[5],this.mat4[6]=c.mat4[9],this.mat4[7]=c.mat4[13],this.mat4[8]=u,this.mat4[9]=p,this.mat4[10]=c.mat4[10],this.mat4[11]=c.mat4[14],this.mat4[12]=y,this.mat4[13]=v,this.mat4[14]=w,this.mat4[15]=c.mat4[15]):f(c)&&(a=c[1],u=c[2],y=c[3],p=c[6],v=c[7],w=c[11],this.mat4[0]=c[0],this.mat4[1]=c[4],this.mat4[2]=c[8],this.mat4[3]=c[12],this.mat4[4]=a,this.mat4[5]=c[5],this.mat4[6]=c[9],this.mat4[7]=c[13],this.mat4[8]=u,this.mat4[9]=p,this.mat4[10]=c[10],this.mat4[11]=c[14],this.mat4[12]=y,this.mat4[13]=v,this.mat4[14]=w,this.mat4[15]=c[15]),this}},{key:"invert",value:function(V){V instanceof h.default.Matrix?(a=V.mat4[0],u=V.mat4[1],y=V.mat4[2],p=V.mat4[3],v=V.mat4[4],w=V.mat4[5],C=V.mat4[6],T=V.mat4[7],j=V.mat4[8],A=V.mat4[9],L=V.mat4[10],M=V.mat4[11],k=V.mat4[12],O=V.mat4[13],N=V.mat4[14],U=V.mat4[15]):f(V)&&(a=V[0],u=V[1],y=V[2],p=V[3],v=V[4],w=V[5],C=V[6],T=V[7],j=V[8],A=V[9],L=V[10],M=V[11],k=V[12],O=V[13],N=V[14],U=V[15]);var a,u,y,p,v,w,C,T,j,A,L,M,k,O,N,U,V=a*w-u*v,G=a*C-y*v,z=a*T-p*v,W=u*C-y*w,Z=u*T-p*w,I=y*T-p*C,q=j*O-A*k,D=j*N-L*k,F=j*U-M*k,H=A*N-L*O,Y=A*U-M*O,te=L*U-M*N,ie=V*te-G*Y+z*H+W*F-Z*D+I*q;return ie?(this.mat4[0]=(w*te-C*Y+T*H)*(ie=1/ie),this.mat4[1]=(y*Y-u*te-p*H)*ie,this.mat4[2]=(O*I-N*Z+U*W)*ie,this.mat4[3]=(L*Z-A*I-M*W)*ie,this.mat4[4]=(C*F-v*te-T*D)*ie,this.mat4[5]=(a*te-y*F+p*D)*ie,this.mat4[6]=(N*z-k*I-U*G)*ie,this.mat4[7]=(j*I-L*z+M*G)*ie,this.mat4[8]=(v*Y-w*F+T*q)*ie,this.mat4[9]=(u*F-a*Y-p*q)*ie,this.mat4[10]=(k*Z-O*z+U*V)*ie,this.mat4[11]=(A*z-j*Z-M*V)*ie,this.mat4[12]=(w*D-v*H-C*q)*ie,this.mat4[13]=(a*H-u*D+y*q)*ie,this.mat4[14]=(O*G-k*W-N*V)*ie,this.mat4[15]=(j*W-A*G+L*V)*ie,this):null}},{key:"invert3x3",value:function(){var c=this.mat3[0],a=this.mat3[1],u=this.mat3[2],y=this.mat3[3],p=this.mat3[4],v=this.mat3[5],w=this.mat3[6],C=this.mat3[7],T=this.mat3[8],j=T*p-v*C,A=-T*y+v*w,L=C*y-p*w,M=c*j+a*A+u*L;return M?(this.mat3[0]=j*(M=1/M),this.mat3[1]=(-T*a+u*C)*M,this.mat3[2]=(v*a-u*p)*M,this.mat3[3]=A*M,this.mat3[4]=(T*c-u*w)*M,this.mat3[5]=(-v*c+u*y)*M,this.mat3[6]=L*M,this.mat3[7]=(-C*c+a*w)*M,this.mat3[8]=(p*c-a*y)*M,this):null}},{key:"transpose3x3",value:function(c){var a=(c=c===void 0?this.mat3:c)[1],u=c[2],y=c[5];return this.mat3[0]=c[0],this.mat3[1]=c[3],this.mat3[2]=c[6],this.mat3[3]=a,this.mat3[4]=c[4],this.mat3[5]=c[7],this.mat3[6]=u,this.mat3[7]=y,this.mat3[8]=c[8],this}},{key:"inverseTranspose",value:function(c){if(c=c.mat4,this.mat3===void 0?h.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=c[0],this.mat3[1]=c[1],this.mat3[2]=c[2],this.mat3[3]=c[4],this.mat3[4]=c[5],this.mat3[5]=c[6],this.mat3[6]=c[8],this.mat3[7]=c[9],this.mat3[8]=c[10]),c=this.invert3x3(),c)c.transpose3x3(this.mat3);else for(var a=0;a<9;a++)this.mat3[a]=0;return this}},{key:"determinant",value:function(){var c=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],a=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],u=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],y=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],p=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],v=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],w=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],C=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],T=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],j=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],A=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return c*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-a*A+u*j+y*T-p*C+v*w}},{key:"mult",value:function(u){var a;if(u===this||u===this.mat4)a=this.copy().mat4;else if(u instanceof h.default.Matrix)a=u.mat4;else if(f(u))a=u;else{if(arguments.length!==16)return;a=arguments}var u=this.mat4[0],y=this.mat4[1],p=this.mat4[2],v=this.mat4[3];return this.mat4[0]=u*a[0]+y*a[4]+p*a[8]+v*a[12],this.mat4[1]=u*a[1]+y*a[5]+p*a[9]+v*a[13],this.mat4[2]=u*a[2]+y*a[6]+p*a[10]+v*a[14],this.mat4[3]=u*a[3]+y*a[7]+p*a[11]+v*a[15],u=this.mat4[4],y=this.mat4[5],p=this.mat4[6],v=this.mat4[7],this.mat4[4]=u*a[0]+y*a[4]+p*a[8]+v*a[12],this.mat4[5]=u*a[1]+y*a[5]+p*a[9]+v*a[13],this.mat4[6]=u*a[2]+y*a[6]+p*a[10]+v*a[14],this.mat4[7]=u*a[3]+y*a[7]+p*a[11]+v*a[15],u=this.mat4[8],y=this.mat4[9],p=this.mat4[10],v=this.mat4[11],this.mat4[8]=u*a[0]+y*a[4]+p*a[8]+v*a[12],this.mat4[9]=u*a[1]+y*a[5]+p*a[9]+v*a[13],this.mat4[10]=u*a[2]+y*a[6]+p*a[10]+v*a[14],this.mat4[11]=u*a[3]+y*a[7]+p*a[11]+v*a[15],u=this.mat4[12],y=this.mat4[13],p=this.mat4[14],v=this.mat4[15],this.mat4[12]=u*a[0]+y*a[4]+p*a[8]+v*a[12],this.mat4[13]=u*a[1]+y*a[5]+p*a[9]+v*a[13],this.mat4[14]=u*a[2]+y*a[6]+p*a[10]+v*a[14],this.mat4[15]=u*a[3]+y*a[7]+p*a[11]+v*a[15],this}},{key:"apply",value:function(u){var a;if(u===this||u===this.mat4)a=this.copy().mat4;else if(u instanceof h.default.Matrix)a=u.mat4;else if(f(u))a=u;else{if(arguments.length!==16)return;a=arguments}var u=this.mat4,y=u[0],p=u[4],v=u[8],w=u[12],y=(u[0]=a[0]*y+a[1]*p+a[2]*v+a[3]*w,u[4]=a[4]*y+a[5]*p+a[6]*v+a[7]*w,u[8]=a[8]*y+a[9]*p+a[10]*v+a[11]*w,u[12]=a[12]*y+a[13]*p+a[14]*v+a[15]*w,u[1]),p=u[5],v=u[9],w=u[13],y=(u[1]=a[0]*y+a[1]*p+a[2]*v+a[3]*w,u[5]=a[4]*y+a[5]*p+a[6]*v+a[7]*w,u[9]=a[8]*y+a[9]*p+a[10]*v+a[11]*w,u[13]=a[12]*y+a[13]*p+a[14]*v+a[15]*w,u[2]),p=u[6],v=u[10],w=u[14],y=(u[2]=a[0]*y+a[1]*p+a[2]*v+a[3]*w,u[6]=a[4]*y+a[5]*p+a[6]*v+a[7]*w,u[10]=a[8]*y+a[9]*p+a[10]*v+a[11]*w,u[14]=a[12]*y+a[13]*p+a[14]*v+a[15]*w,u[3]),p=u[7],v=u[11],w=u[15];return u[3]=a[0]*y+a[1]*p+a[2]*v+a[3]*w,u[7]=a[4]*y+a[5]*p+a[6]*v+a[7]*w,u[11]=a[8]*y+a[9]*p+a[10]*v+a[11]*w,u[15]=a[12]*y+a[13]*p+a[14]*v+a[15]*w,this}},{key:"scale",value:function(c,a,u){return c instanceof h.default.Vector?(a=c.y,u=c.z,c=c.x):c instanceof Array&&(a=c[1],u=c[2],c=c[0]),this.mat4[0]*=c,this.mat4[1]*=c,this.mat4[2]*=c,this.mat4[3]*=c,this.mat4[4]*=a,this.mat4[5]*=a,this.mat4[6]*=a,this.mat4[7]*=a,this.mat4[8]*=u,this.mat4[9]*=u,this.mat4[10]*=u,this.mat4[11]*=u,this}},{key:"rotate",value:function(V,Y,H,y){Y instanceof h.default.Vector?(H=Y.y,y=Y.z,Y=Y.x):Y instanceof Array&&(H=Y[1],y=Y[2],Y=Y[0]);var p=Math.sqrt(Y*Y+H*H+y*y),p=(Y*=1/p,H*=1/p,y*=1/p,this.mat4[0]),v=this.mat4[1],w=this.mat4[2],C=this.mat4[3],T=this.mat4[4],j=this.mat4[5],A=this.mat4[6],L=this.mat4[7],M=this.mat4[8],k=this.mat4[9],O=this.mat4[10],N=this.mat4[11],U=Math.sin(V),V=Math.cos(V),G=1-V,z=Y*Y*G+V,W=H*Y*G+y*U,Z=y*Y*G-H*U,I=Y*H*G-y*U,q=H*H*G+V,D=y*H*G+Y*U,F=Y*y*G+H*U,H=H*y*G-Y*U,Y=y*y*G+V;return this.mat4[0]=p*z+T*W+M*Z,this.mat4[1]=v*z+j*W+k*Z,this.mat4[2]=w*z+A*W+O*Z,this.mat4[3]=C*z+L*W+N*Z,this.mat4[4]=p*I+T*q+M*D,this.mat4[5]=v*I+j*q+k*D,this.mat4[6]=w*I+A*q+O*D,this.mat4[7]=C*I+L*q+N*D,this.mat4[8]=p*F+T*H+M*Y,this.mat4[9]=v*F+j*H+k*Y,this.mat4[10]=w*F+A*H+O*Y,this.mat4[11]=C*F+L*H+N*Y,this}},{key:"translate",value:function(y){var a=y[0],u=y[1],y=y[2]||0;this.mat4[12]+=this.mat4[0]*a+this.mat4[4]*u+this.mat4[8]*y,this.mat4[13]+=this.mat4[1]*a+this.mat4[5]*u+this.mat4[9]*y,this.mat4[14]+=this.mat4[2]*a+this.mat4[6]*u+this.mat4[10]*y,this.mat4[15]+=this.mat4[3]*a+this.mat4[7]*u+this.mat4[11]*y}},{key:"rotateX",value:function(c){this.rotate(c,1,0,0)}},{key:"rotateY",value:function(c){this.rotate(c,0,1,0)}},{key:"rotateZ",value:function(c){this.rotate(c,0,0,1)}},{key:"perspective",value:function(p,a,u,y){var p=1/Math.tan(p/2),v=1/(u-y);return this.mat4[0]=p/a,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=p,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(y+u)*v,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*y*u*v,this.mat4[15]=0,this}},{key:"ortho",value:function(c,a,u,y,p,v){var w=1/(c-a),C=1/(u-y),T=1/(p-v);return this.mat4[0]=-2*w,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*C,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*T,this.mat4[11]=0,this.mat4[12]=(c+a)*w,this.mat4[13]=(y+u)*C,this.mat4[14]=(v+p)*T,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(c,a,u,y){var p=new Array(4),v=this.mat4;return p[0]=v[0]*c+v[4]*a+v[8]*u+v[12]*y,p[1]=v[1]*c+v[5]*a+v[9]*u+v[13]*y,p[2]=v[2]*c+v[6]*a+v[10]*u+v[14]*y,p[3]=v[3]*c+v[7]*a+v[11]*u+v[15]*y,p}},{key:"multiplyPoint",value:function(u){var y=u.x,a=u.y,u=u.z,y=this.multiplyVec4(y,a,u,1);return new h.default.Vector(y[0],y[1],y[2])}},{key:"multiplyAndNormalizePoint",value:function(u){var y=u.x,a=u.y,u=u.z,y=this.multiplyVec4(y,a,u,1);return y[0]/=y[3],y[1]/=y[3],y[2]/=y[3],new h.default.Vector(y[0],y[1],y[2])}},{key:"multiplyDirection",value:function(u){var y=u.x,a=u.y,u=u.z,y=this.multiplyVec4(y,a,u,0);return new h.default.Vector(y[0],y[1],y[2])}},{key:"mult3x3",value:function(u){var a;if(u===this||u===this.mat3)a=this.copy().mat3;else if(u instanceof h.default.Matrix)a=u.mat3;else if(f(u))a=u;else{if(arguments.length!==9)return;a=arguments}var u=this.mat3[0],y=this.mat3[1],p=this.mat3[2];return this.mat3[0]=u*a[0]+y*a[3]+p*a[6],this.mat3[1]=u*a[1]+y*a[4]+p*a[7],this.mat3[2]=u*a[2]+y*a[5]+p*a[8],u=this.mat3[3],y=this.mat3[4],p=this.mat3[5],this.mat3[3]=u*a[0]+y*a[3]+p*a[6],this.mat3[4]=u*a[1]+y*a[4]+p*a[7],this.mat3[5]=u*a[2]+y*a[5]+p*a[8],u=this.mat3[6],y=this.mat3[7],p=this.mat3[8],this.mat3[6]=u*a[0]+y*a[3]+p*a[6],this.mat3[7]=u*a[1]+y*a[4]+p*a[7],this.mat3[8]=u*a[2]+y*a[5]+p*a[8],this}},{key:"column",value:function(c){return new h.default.Vector(this.mat3[3*c],this.mat3[3*c+1],this.mat3[3*c+2])}},{key:"row",value:function(c){return new h.default.Vector(this.mat3[c],this.mat3[c+3],this.mat3[c+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(c,a){return(a=a===void 0?c.copy():a).x=this.row(0).dot(c),a.y=this.row(1).dot(c),a.z=this.row(2).dot(c),a}},{key:"createSubMatrix3x3",value:function(){var c=new h.default.Matrix("mat3");return c.mat3[0]=this.mat4[0],c.mat3[1]=this.mat4[1],c.mat3[2]=this.mat4[2],c.mat3[3]=this.mat4[4],c.mat3[4]=this.mat4[5],c.mat3[5]=this.mat4[6],c.mat3[6]=this.mat4[8],c.mat3[7]=this.mat4[9],c.mat3[8]=this.mat4[10],c}}])&&d(n.prototype,s),l&&d(n,l),m}(),h.default.Matrix);b.default=g},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],329:[function(t,x,b){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(d,i){for(var f=0;f<i.length;f++){var g=i[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}t.default.RenderBuffer=function(){function d(g,m,n,s,l,c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.size=g,this.src=m,this.dst=n,this.attr=s,this._renderer=l,this.map=c}var i,f;return i=d,(f=[{key:"_prepareBuffer",value:function(g,m){var n,s,l,u=m.attributes,c=this._renderer.GL,a=g.model||g,u=u[this.attr];u&&(n=g[this.dst],0<(s=a[this.src]).length?((l=!n)&&(g[this.dst]=n=c.createBuffer()),c.bindBuffer(c.ARRAY_BUFFER,n),!l&&a.dirtyFlags[this.src]===!1||(l=(g=this.map)?g(s):s,this._renderer._bindBuffer(n,c.ARRAY_BUFFER,l),a.dirtyFlags[this.src]=!1),m.enableAttrib(u,this.size)):(g=u.location)!==-1&&this._renderer.registerEnabled.has(g)&&(c.disableVertexAttribArray(g),this._renderer.registerEnabled.delete(g)))}}])&&h(i.prototype,f),d}(),t=t.default.RenderBuffer,b.default=t},{"../core/main":275,"core-js/modules/es.array.map":164}],330:[function(t,x,b){function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function d(l){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(s=t("../core/main"))&&s.__esModule?s:{default:s},f=function(l){if(l&&l.__esModule)return l;if(l===null||d(l)!=="object"&&typeof l!="function")return{default:l};var c=g();if(c&&c.has(l))return c.get(l);var a,u={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in l){var p;Object.prototype.hasOwnProperty.call(l,a)&&((p=y?Object.getOwnPropertyDescriptor(l,a):null)&&(p.get||p.set)?Object.defineProperty(u,a,p):u[a]=l[a])}return u.default=l,c&&c.set(l,u),u}(t("../core/constants"));function g(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,g=function(){return l},l)}function m(l){return function(c){if(Array.isArray(c)){for(var a=0,u=new Array(c.length);a<c.length;a++)u[a]=c[a];return u}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(l){return this.immediateMode.shapeMode=l!==void 0?l:f.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var n={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},s=(i.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==f.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},i.default.RendererGL.prototype.vertex=function(l,c){if(this.immediateMode.shapeMode===f.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var a in n){var u=n[a],a=this.immediateMode.geometry[a];a.push.apply(a,m(a.slice(a.length-3*u,a.length-2*u)).concat(m(a.slice(a.length-u,a.length))))}var y,p,v=y=p=0,w=(arguments.length===3?v=arguments[2]:arguments.length===4?(y=arguments[2],p=arguments[3]):arguments.length===5&&(v=arguments[2],y=arguments[3],p=arguments[4]),new i.default.Vector(l,c,v)),w=(this.immediateMode.geometry.vertices.push(w),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),w=(this.immediateMode.geometry.vertexColors.push(w[0],w[1],w[2],w[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(w[0],w[1],w[2],w[3]),this.textureMode!==f.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(y/=this._tex.width,p/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(y,p),this.immediateMode._bezierVertex[0]=l,this.immediateMode._bezierVertex[1]=c,this.immediateMode._bezierVertex[2]=v,this.immediateMode._quadraticVertex[0]=l,this.immediateMode._quadraticVertex[1]=c,this.immediateMode._quadraticVertex[2]=v,this},i.default.RendererGL.prototype.normal=function(l,c,a){return l instanceof i.default.Vector?this._currentNormal=l:this._currentNormal=new i.default.Vector(l,c,a),this},i.default.RendererGL.prototype.endShape=function(l,c,a,u,y,p){var v=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===f.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===f.TESS&&(this.immediateMode.shapeMode,f.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this.immediateMode.shapeMode!==f.LINE_STRIP&&this.immediateMode.shapeMode!==f.LINES||(this.immediateMode.shapeMode=f.TRIANGLE_FAN),this.immediateMode.shapeMode===f.QUADS?this.immediateMode.shapeMode=f.TRIANGLES:this.immediateMode.shapeMode===f.QUAD_STRIP&&(this.immediateMode.shapeMode=f.TRIANGLE_STRIP),this._doFill&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(v),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(l){var c;this.immediateMode.geometry.vertices.length!==0&&(c=this._doStroke,l=l===f.CLOSE,c&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,l),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),c=this.immediateMode.shapeMode===f.TESS,l=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||c||l)&&this.immediateMode.shapeMode!==f.LINES&&this._tesselateShape())},i.default.RendererGL.prototype._calculateEdges=function(l,c,a){var u=[],y=0,p=this.immediateMode.contourIndices.slice(),v=0;switch(l){case f.TRIANGLE_STRIP:for(y=0;y<c.length-2;y++)u.push([y,y+1]),u.push([y,y+2]);u.push([y,y+1]);break;case f.TRIANGLE_FAN:for(y=1;y<c.length-1;y++)u.push([0,y]),u.push([y,y+1]);u.push([0,c.length-1]);break;case f.TRIANGLES:for(y=0;y<c.length-2;y+=3)u.push([y,y+1]),u.push([y+1,y+2]),u.push([y+2,y]);break;case f.LINES:for(y=0;y<c.length-1;y+=2)u.push([y,y+1]);break;case f.QUADS:for(y=0;y<c.length-5;y+=6)u.push([y,y+1]),u.push([y+1,y+2]),u.push([y+3,y+5]),u.push([y+4,y+5]);break;case f.QUAD_STRIP:for(y=0;y<c.length-2;y+=2)u.push([y,y+1]),u.push([y,y+2]),u.push([y+1,y+3]);u.push([y,y+1]);break;default:for(y=0;y<c.length;y++)y+1<c.length&&y+1!==p[0]?u.push([y,y+1]):((a||v)&&u.push([y,v]),0<p.length&&(v=p.shift()))}return l!==f.TESS&&a&&u.push([c.length-1,0]),u},i.default.RendererGL.prototype._tesselateShape=function(){for(var l=this,c=(this.immediateMode.shapeMode=f.TRIANGLES,[[]]),a=0;a<this.immediateMode.geometry.vertices.length;a++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===a&&(this.immediateMode.contourIndices.shift(),c.push([])),c[c.length-1].push(this.immediateMode.geometry.vertices[a].x,this.immediateMode.geometry.vertices[a].y,this.immediateMode.geometry.vertices[a].z,this.immediateMode.geometry.uvs[2*a],this.immediateMode.geometry.uvs[2*a+1],this.immediateMode.geometry.vertexColors[4*a],this.immediateMode.geometry.vertexColors[4*a+1],this.immediateMode.geometry.vertexColors[4*a+2],this.immediateMode.geometry.vertexColors[4*a+3],this.immediateMode.geometry.vertexNormals[a].x,this.immediateMode.geometry.vertexNormals[a].y,this.immediateMode.geometry.vertexNormals[a].z);for(var u,y=this._triangulate(c),p=this.immediateMode.geometry.vertices,v=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),w=0,C=y.length;w<C;w+=i.default.RendererGL.prototype.tessyVertexSize)v.push.apply(v,m(y.slice(w+5,w+9))),this.normal.apply(this,m(y.slice(w+9,w+12))),this.vertex.apply(this,m(y.slice(w,w+5)));this.geometryBuilder&&(u=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(T){return T.map(function(j){if(!u.has(j)){var A=p[j],L=l.immediateMode.geometry.vertices.findIndex(function(G){return A.x===G.x&&A.y===G.y&&A.z===G.z});if(L===-1){for(var M=1/0,k=0,O=0;O<l.immediateMode.geometry.vertices.length;O++){var U=l.immediateMode.geometry.vertices[O],V=A.x-U.x,N=A.y-U.y,U=A.z-U.z,V=V*V+N*N+U*U;V<M&&(M=V,k=O)}L=k}u.set(j,L)}return u.get(j)})})),this.immediateMode.geometry.vertexColors=v},i.default.RendererGL.prototype._drawImmediateFill=function(){var l,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,a=this.GL,u=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,l=this._getImmediateFillShader(),this._setFillUniforms(l),!0),y=!1,p=void 0;try{for(var v,w=this.immediateMode.buffers.fill[Symbol.iterator]();!(u=(v=w.next()).done);u=!0)v.value._prepareBuffer(this.immediateMode.geometry,l)}catch(C){y=!0,p=C}finally{try{u||w.return==null||w.return()}finally{if(y)throw p}}if(l.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor),c===1)a.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{a.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,c)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}l.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var l=this.GL,c=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),a=(this._setStrokeUniforms(c),!0),u=!1,y=void 0;try{for(var p,v=this.immediateMode.buffers.stroke[Symbol.iterator]();!(a=(p=v.next()).done);a=!0)p.value._prepareBuffer(this.immediateMode.geometry,c)}catch(w){u=!0,y=w}finally{try{a||v.return==null||v.return()}finally{if(u)throw y}}c.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),l.drawArrays(l.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),c.unbindShader()},i.default.RendererGL);b.default=s},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.find-index":156,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],331:[function(t,x,b){function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}function d(n){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(s){return h(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":h(s)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var s=g();if(s&&s.has(n))return s.get(n);var l,c={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in n){var u;Object.prototype.hasOwnProperty.call(n,l)&&((u=a?Object.getOwnPropertyDescriptor(n,l):null)&&(u.get||u.set)?Object.defineProperty(c,l,u):c[l]=n[l])}return c.default=n,s&&s.set(n,c),c}(t("../core/constants")));function g(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,g=function(){return n},n)}i.default.RendererGL.prototype.freeGeometry=function(n){n.gid?this._freeBuffers(n.gid):console.warn("The model you passed to freeGeometry does not have an id!")},i.default.RendererGL.prototype._initBufferDefaults=function(n){var s;return this._freeBuffers(n),1e3<Object.keys(this.retainedMode.geometry).length&&(s=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(s)),this.retainedMode.geometry[n]={}},i.default.RendererGL.prototype._freeBuffers=function(n){var s,l=this.retainedMode.geometry[n];function c(a){var u=!0,y=!1,p=void 0;try{for(var v,w=a[Symbol.iterator]();!(u=(v=w.next()).done);u=!0){var C=v.value;l[C.dst]&&(s.deleteBuffer(l[C.dst]),l[C.dst]=null)}}catch(T){y=!0,p=T}finally{try{u||w.return==null||w.return()}finally{if(y)throw p}}}l&&(delete this.retainedMode.geometry[n],s=this.GL,l.indexBuffer&&s.deleteBuffer(l.indexBuffer),c(this.retainedMode.buffers.stroke),c(this.retainedMode.buffers.fill))},i.default.RendererGL.prototype.createBuffers=function(y,s){var l,c,a,u=this.GL,y=this._initBufferDefaults(y),p=(y.model=s,y.indexBuffer);return s.faces.length?(p=p||(y.indexBuffer=u.createBuffer()),a=(c=(l=i.default.RendererGL.prototype._flatten(s.faces)).some(function(v){return 65535<v}))?Uint32Array:Uint16Array,this._bindBuffer(p,u.ELEMENT_ARRAY_BUFFER,l,a),y.indexBufferType=c?u.UNSIGNED_INT:u.UNSIGNED_SHORT,y.vertexCount=3*s.faces.length):(p&&(u.deleteBuffer(p),y.indexBuffer=null),y.vertexCount=s.vertices?s.vertices.length:0),y.lineVertexCount=s.lineVertices?s.lineVertices.length/3:0,y},i.default.RendererGL.prototype.drawBuffers=function(n){var s=this.GL,l=this.retainedMode.geometry[n];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[n].vertexCount){this._useVertexColor=0<l.model.vertexColors.length;var c=this._getRetainedFillShader(),a=(this._setFillUniforms(c),!0),u=!1,y=void 0;try{for(var p,v=this.retainedMode.buffers.fill[Symbol.iterator]();!(a=(p=v.next()).done);a=!0)p.value._prepareBuffer(l,c)}catch(A){u=!0,y=A}finally{try{a||v.return==null||v.return()}finally{if(u)throw y}}c.disableRemainingAttributes(),l.indexBuffer&&this._bindBuffer(l.indexBuffer,s.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(s.TRIANGLES,n),c.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<l.lineVertexCount){this._useLineColor=0<l.model.vertexStrokeColors.length;var w=this._getRetainedStrokeShader(),C=(this._setStrokeUniforms(w),!0),u=!1,y=void 0;try{for(var T,j=this.retainedMode.buffers.stroke[Symbol.iterator]();!(C=(T=j.next()).done);C=!0)T.value._prepareBuffer(l,w)}catch(M){u=!0,y=M}finally{try{C||j.return==null||j.return()}finally{if(u)throw y}}w.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),this._drawArrays(s.TRIANGLES,n),w.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(l),this},i.default.RendererGL.prototype.drawBuffersScaled=function(n,s,l,c){var a=this.uMVMatrix.copy();try{this.uMVMatrix.scale(s,l,c),this.drawBuffers(n)}finally{this.uMVMatrix=a}},i.default.RendererGL.prototype._drawArrays=function(n,s){return this.GL.drawArrays(n,0,this.retainedMode.geometry[s].lineVertexCount),this},i.default.RendererGL.prototype._drawElements=function(n,l){var l=this.retainedMode.geometry[l],c=this.GL;if(l.indexBuffer){if(this._pInst.webglVersion!==f.WEBGL2&&l.indexBufferType===c.UNSIGNED_INT&&!c.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");c.drawElements(c.TRIANGLES,l.vertexCount,l.indexBufferType,0)}else c.drawArrays(n||c.TRIANGLES,0,l.vertexCount)},i.default.RendererGL.prototype._drawPoints=function(n,s){var l=this.GL,c=this._getImmediatePointShader();this._setPointUniforms(c),this._bindBuffer(s,l.ARRAY_BUFFER,this._vToNArray(n),Float32Array,l.STATIC_DRAW),c.enableAttrib(c.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),l.drawArrays(l.Points,0,n.length),c.unbindShader()};var m=i.default.RendererGL;b.default=m},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"./p5.RendererGL":332,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.some":166,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],332:[function(M,x,b){function h(G){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(G)}function d(G){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(z){return h(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":h(z)})(G)}M("core-js/modules/es.symbol"),M("core-js/modules/es.symbol.description"),M("core-js/modules/es.symbol.iterator"),M("core-js/modules/es.array.concat"),M("core-js/modules/es.array.copy-within"),M("core-js/modules/es.array.every"),M("core-js/modules/es.array.fill"),M("core-js/modules/es.array.from"),M("core-js/modules/es.array.includes"),M("core-js/modules/es.array.iterator"),M("core-js/modules/es.array.slice"),M("core-js/modules/es.array.some"),M("core-js/modules/es.map"),M("core-js/modules/es.object.assign"),M("core-js/modules/es.object.get-own-property-descriptor"),M("core-js/modules/es.object.get-prototype-of"),M("core-js/modules/es.object.to-string"),M("core-js/modules/es.reflect.construct"),M("core-js/modules/es.reflect.get"),M("core-js/modules/es.regexp.to-string"),M("core-js/modules/es.set"),M("core-js/modules/es.string.includes"),M("core-js/modules/es.string.iterator"),M("core-js/modules/es.typed-array.float32-array"),M("core-js/modules/es.typed-array.float64-array"),M("core-js/modules/es.typed-array.int16-array"),M("core-js/modules/es.typed-array.uint8-array"),M("core-js/modules/es.typed-array.uint16-array"),M("core-js/modules/es.typed-array.uint32-array"),M("core-js/modules/es.typed-array.copy-within"),M("core-js/modules/es.typed-array.every"),M("core-js/modules/es.typed-array.fill"),M("core-js/modules/es.typed-array.filter"),M("core-js/modules/es.typed-array.find"),M("core-js/modules/es.typed-array.find-index"),M("core-js/modules/es.typed-array.for-each"),M("core-js/modules/es.typed-array.includes"),M("core-js/modules/es.typed-array.index-of"),M("core-js/modules/es.typed-array.iterator"),M("core-js/modules/es.typed-array.join"),M("core-js/modules/es.typed-array.last-index-of"),M("core-js/modules/es.typed-array.map"),M("core-js/modules/es.typed-array.reduce"),M("core-js/modules/es.typed-array.reduce-right"),M("core-js/modules/es.typed-array.reverse"),M("core-js/modules/es.typed-array.set"),M("core-js/modules/es.typed-array.slice"),M("core-js/modules/es.typed-array.some"),M("core-js/modules/es.typed-array.sort"),M("core-js/modules/es.typed-array.subarray"),M("core-js/modules/es.typed-array.to-locale-string"),M("core-js/modules/es.typed-array.to-string"),M("core-js/modules/es.weak-map"),M("core-js/modules/web.dom-collections.iterator"),M("core-js/modules/es.symbol"),M("core-js/modules/es.symbol.description"),M("core-js/modules/es.symbol.iterator"),M("core-js/modules/es.array.concat"),M("core-js/modules/es.array.copy-within"),M("core-js/modules/es.array.every"),M("core-js/modules/es.array.fill"),M("core-js/modules/es.array.from"),M("core-js/modules/es.array.includes"),M("core-js/modules/es.array.iterator"),M("core-js/modules/es.array.slice"),M("core-js/modules/es.array.some"),M("core-js/modules/es.map"),M("core-js/modules/es.object.assign"),M("core-js/modules/es.object.to-string"),M("core-js/modules/es.set"),M("core-js/modules/es.string.includes"),M("core-js/modules/es.string.iterator"),M("core-js/modules/es.typed-array.float32-array"),M("core-js/modules/es.typed-array.float64-array"),M("core-js/modules/es.typed-array.int16-array"),M("core-js/modules/es.typed-array.uint8-array"),M("core-js/modules/es.typed-array.uint16-array"),M("core-js/modules/es.typed-array.uint32-array"),M("core-js/modules/es.typed-array.copy-within"),M("core-js/modules/es.typed-array.every"),M("core-js/modules/es.typed-array.fill"),M("core-js/modules/es.typed-array.filter"),M("core-js/modules/es.typed-array.find"),M("core-js/modules/es.typed-array.find-index"),M("core-js/modules/es.typed-array.for-each"),M("core-js/modules/es.typed-array.includes"),M("core-js/modules/es.typed-array.index-of"),M("core-js/modules/es.typed-array.iterator"),M("core-js/modules/es.typed-array.join"),M("core-js/modules/es.typed-array.last-index-of"),M("core-js/modules/es.typed-array.map"),M("core-js/modules/es.typed-array.reduce"),M("core-js/modules/es.typed-array.reduce-right"),M("core-js/modules/es.typed-array.reverse"),M("core-js/modules/es.typed-array.set"),M("core-js/modules/es.typed-array.slice"),M("core-js/modules/es.typed-array.some"),M("core-js/modules/es.typed-array.sort"),M("core-js/modules/es.typed-array.subarray"),M("core-js/modules/es.typed-array.to-locale-string"),M("core-js/modules/es.typed-array.to-string"),M("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.readPixelsWebGL=U,b.readPixelWebGL=V,b.default=void 0;var i=s(M("../core/main")),f=function(G){if(G&&G.__esModule)return G;if(G===null||d(G)!=="object"&&typeof G!="function")return{default:G};var z=n();if(z&&z.has(G))return z.get(G);var W,Z={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(W in G){var q;Object.prototype.hasOwnProperty.call(G,W)&&((q=I?Object.getOwnPropertyDescriptor(G,W):null)&&(q.get||q.set)?Object.defineProperty(Z,W,q):Z[W]=G[W])}return Z.default=G,z&&z.set(G,Z),Z}(M("../core/constants")),g=s(M("./GeometryBuilder")),m=s(M("libtess"));M("./p5.Shader"),M("./p5.Camera"),M("../core/p5.Renderer"),M("./p5.Matrix"),M("./p5.Framebuffer"),M("path");function n(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,n=function(){return G},G)}function s(G){return G&&G.__esModule?G:{default:G}}function l(G){return function(z){if(Array.isArray(z)){for(var W=0,Z=new Array(z.length);W<z.length;W++)Z[W]=z[W];return Z}}(G)||function(z){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]")return Array.from(z)}(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(G,z){for(var W=0;W<z.length;W++){var Z=z[W];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(G,Z.key,Z)}}function a(G,z,W){return(a=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(D,I,q){var D=function(F,H){for(;!Object.prototype.hasOwnProperty.call(F,H)&&(F=v(F))!==null;);return F}(D,I);if(D)return(D=Object.getOwnPropertyDescriptor(D,I)).get?D.get.call(q):D.value})(G,z,W||G)}function u(G,z){return(u=Object.setPrototypeOf||function(W,Z){return W.__proto__=Z,W})(G,z)}function y(G){return function(){var z,W,Z=v(G);return z=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(z=v(this).constructor,Reflect.construct(Z,arguments,z)):Z.apply(this,arguments),Z=this,!(W=z)||d(W)!=="object"&&typeof W!="function"?p(Z):W}}function p(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function v(G){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(G)}function w(G,z,W){z in G?Object.defineProperty(G,z,{value:W,enumerable:!0,configurable:!0,writable:!0}):G[z]=W}function C(G,z){L+="#define STROKE_CAP_".concat(G," ").concat(z,`
`),j[f[G]]=z}function T(G,z){L+="#define STROKE_JOIN_".concat(G," ").concat(z,`
`),A[f[G]]=z}var j={},A={},L="",M=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),T("ROUND",0),T("MITER",1),T("BEVEL",2),`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),k=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`,O={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;
varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:M+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? texture2D(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    gl_FragColor = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:M+`// include lighting.glsl
precision highp float;
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? texture2D(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  gl_FragColor = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:k+`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:k+`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:L+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump float;
precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

attribute vec4 aPosition;
attribute vec3 aTangentIn;
attribute vec3 aTangentOut;
attribute float aSide;
attribute vec4 aVertexColor;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5 * curPerspScale;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset / curPerspScale;

  gl_Position.xy = p.xy + offset.xy;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:L+`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`},N=(w(M={},f.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),w(M,f.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),w(M,f.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),w(M,f.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),w(M,f.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb, color.a);
}
`),w(M,f.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb, 1.0);
}
`),w(M,f.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  vec3 invertedColor = 1.0 - color.rgb;
  gl_FragColor = vec4(invertedColor, color.a);
}
`),w(M,f.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite), color.a);
}
`),M);function U(G,z,ie,Z,I,q,D,F,H,Y){var te=z.getParameter(z.FRAMEBUFFER_BINDING),ie=(z.bindFramebuffer(z.FRAMEBUFFER,ie),F===z.RGBA?4:3),de=q*D*ie,_e=H===z.UNSIGNED_BYTE?Uint8Array:Float32Array;if(G instanceof _e&&G.length===de||(G=new _e(de)),z.readPixels(Z,Y?Y-I-D:I,q,D,F,H,G),z.bindFramebuffer(z.FRAMEBUFFER,te),Y)for(var le=Math.floor(D/2),re=new _e(q*ie),pe=0;pe<le;pe++){var Q=pe*q*4,ce=(D-pe-1)*q*4;re.set(G.subarray(Q,Q+4*q)),G.copyWithin(Q,ce,ce+4*q),G.set(re,ce)}return G}function V(G,H,W,Z,I,q,D){var F=G.getParameter(G.FRAMEBUFFER_BINDING),H=(G.bindFramebuffer(G.FRAMEBUFFER,H),I===G.RGBA?4:3),H=new(q===G.UNSIGNED_BYTE?Uint8Array:Float32Array)(H);return G.readPixels(W,D?D-Z-1:Z,1,1,I,q,H),G.bindFramebuffer(G.FRAMEBUFFER,F),Array.from(H)}i.default.prototype.setAttributes=function(G,z){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var W=!0;if(z!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[G]!==z&&(this._glAttributes[G]=z,W=!1)):G instanceof Object&&this._glAttributes!==G&&(this._glAttributes=G,W=!1),this._renderer.isP3D&&!W){if(!this._setupDone){for(var Z in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(Z))return void i.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},i.default.RendererGL=function(G){var z=Z;if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(G&&G.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),G&&u(z,G);var W=y(Z);function Z(I,q,D,F){if(this instanceof Z)return(I=W.call(this,I,q,D))._setAttributeDefaults(q),I._initContext(),I.isP3D=!0,I.geometryBuilder=void 0,I.GL=I.drawingContext,I._pInst._setProperty("drawingContext",I.drawingContext),I._isErasing=!1,I._clipDepths=[],I._isClipApplied=!1,I._stencilTestOn=!1,I._enableLighting=!1,I.ambientLightColors=[],I.specularColors=[1,1,1],I.directionalLightDirections=[],I.directionalLightDiffuseColors=[],I.directionalLightSpecularColors=[],I.pointLightPositions=[],I.pointLightDiffuseColors=[],I.pointLightSpecularColors=[],I.spotLightPositions=[],I.spotLightDirections=[],I.spotLightDiffuseColors=[],I.spotLightSpecularColors=[],I.spotLightAngle=[],I.spotLightConc=[],I.drawMode=f.FILL,I.curFillColor=I._cachedFillStyle=[1,1,1,1],I.curAmbientColor=I._cachedFillStyle=[1,1,1,1],I.curSpecularColor=I._cachedFillStyle=[0,0,0,0],I.curEmissiveColor=I._cachedFillStyle=[0,0,0,0],I.curStrokeColor=I._cachedStrokeStyle=[0,0,0,1],I.curBlendMode=f.BLEND,I._cachedBlendMode=void 0,I.webglVersion===f.WEBGL2?I.blendExt=I.GL:I.blendExt=I.GL.getExtension("EXT_blend_minmax"),I._isBlending=!1,I._hasSetAmbient=!1,I._useSpecularMaterial=!1,I._useEmissiveMaterial=!1,I._useNormalMaterial=!1,I._useShininess=1,I._useLineColor=!1,I._useVertexColor=!1,I.registerEnabled=new Set,I._tint=[255,255,255,255],I.constantAttenuation=1,I.linearAttenuation=0,I.quadraticAttenuation=0,I.uMVMatrix=new i.default.Matrix,I.uPMatrix=new i.default.Matrix,I.uNMatrix=new i.default.Matrix("mat3"),I._currentNormal=new i.default.Vector(0,0,1),I._curCamera=new i.default.Camera(p(I)),I._curCamera._computeCameraDefaultSettings(),I._curCamera._setDefaultCamera(),I.prevTouches=[],I.zoomVelocity=0,I.rotateVelocity=new i.default.Vector(0,0),I.moveVelocity=new i.default.Vector(0,0),I.executeZoom=!1,I.executeRotateAndMove=!1,I._defaultLightShader=void 0,I._defaultImmediateModeShader=void 0,I._defaultNormalShader=void 0,I._defaultColorShader=void 0,I._defaultPointShader=void 0,I.userFillShader=void 0,I.userStrokeShader=void 0,I.userPointShader=void 0,I.retainedMode={geometry:{},buffers:{stroke:[new i.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",p(I)),new i.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",p(I)),new i.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",p(I)),new i.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",p(I)),new i.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",p(I))],fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",p(I),I._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",p(I),I._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",p(I)),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",p(I)),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",p(I),I._flatten)],text:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",p(I),I._vToNArray),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",p(I),I._flatten)]}},I.immediateMode={geometry:new i.default.Geometry,shapeMode:f.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",p(I),I._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",p(I),I._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",p(I)),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",p(I)),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",p(I),I._flatten)],stroke:[new i.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",p(I)),new i.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",p(I)),new i.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",p(I)),new i.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",p(I)),new i.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",p(I))],point:I.GL.createBuffer()}},I.pointSize=5,I.curStrokeWeight=1,I.curStrokeCap=f.ROUND,I.curStrokeJoin=f.ROUND,I.textures=new Map,I.framebuffers=new Set,I.activeFramebuffers=[],I.filterShader=void 0,I.filterGraphicsLayer=void 0,I.filterGraphicsLayerTemp=void 0,I.defaultFilterShaders={},I.textureMode=f.IMAGE,I.textureWrapX=f.CLAMP,I.textureWrapY=f.CLAMP,I._tex=null,I._curveTightness=6,I._lookUpTableBezier=[],I._lookUpTableQuadratic=[],I._lutBezierDetail=0,I._lutQuadraticDetail=0,I.isProcessingVertices=!1,I._tessy=I._initTessy(),I.fontInfos={},I._curShader=void 0,I;throw new TypeError("Cannot call a class as a function")}return z=Z,(G=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new g.default(this)}},{key:"endGeometry",value:function(){var I;if(this.geometryBuilder)return I=this.geometryBuilder.finish(),this.geometryBuilder=void 0,I;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(I){return this.beginGeometry(),I(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(I){var q={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};I._glAttributes===null?I._glAttributes=q:I._glAttributes=Object.assign(q,I._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?f.WEBGL2:f.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var I=this.drawingContext;I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL),I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(I,q){var D,F=this.width,H=this.height,te=this.canvas.id,Y=this._pInst instanceof i.default.Graphics,te=(Y?((D=this._pInst).canvas.parentNode.removeChild(D.canvas),D.canvas=document.createElement("canvas"),(D._pInst._userNode||document.body).appendChild(D.canvas),i.default.Element.call(D,D.canvas,D._pInst),D.width=F,D.height=H):((D=this.canvas)&&D.parentNode.removeChild(D),(D=document.createElement("canvas")).id=te,(this._pInst._userNode||document.body).appendChild(D),this._pInst.canvas=D,this.canvas=D),new i.default.RendererGL(this._pInst.canvas,this._pInst,!Y));this._pInst._setProperty("_renderer",te),te.resize(F,H),te._applyDefaults(),Y||this._pInst._elements.push(te),typeof q=="function"&&setTimeout(function(){q.apply(window._renderer,I)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var F=(F=this._pInst).color.apply(F,arguments),I=F.levels[0]/255,q=F.levels[1]/255,D=F.levels[2]/255,F=F.levels[3]/255;this.clear(I,q,D,F)}},{key:"fill",value:function(I,q,D,F){var H=i.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=H._array,this.drawMode=f.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(I,q,D,F){var H=i.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=H._array}},{key:"strokeCap",value:function(I){this.curStrokeCap=I}},{key:"strokeJoin",value:function(I){this.curStrokeJoin=I}},{key:"getFilterGraphicsLayer",value:function(){var I;return this.filterGraphicsLayer||(I=(this._pInst instanceof i.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new i.default.Graphics(this.width,this.height,f.WEBGL,I),this.filterGraphicsLayer.noStroke()),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"getFilterGraphicsLayerTemp",value:function(){var I;return this.filterGraphicsLayerTemp||(I=(this._pInst instanceof i.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayerTemp=new i.default.Graphics(this.width,this.height,f.WEBGL,I),this.filterGraphicsLayerTemp.noStroke()),this.filterGraphicsLayerTemp.width===this.width&&this.filterGraphicsLayerTemp.height===this.height||this.filterGraphicsLayerTemp.resizeCanvas(this.width,this.height),this.filterGraphicsLayerTemp.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayerTemp.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayerTemp}},{key:"filter",value:function(){var I=this.getFilterGraphicsLayer(),q=void 0,D=void 0,F=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(D=arguments.length<=0?void 0:arguments[0],w(F={},f.BLUR,3),w(F,f.POSTERIZE,4),w(F,f.THRESHOLD,.5),q=D in(F=F)&&(arguments.length<=1?void 0:arguments[1])===void 0?F[D]:arguments.length<=1?void 0:arguments[1],D in this.defaultFilterShaders||(this.defaultFilterShaders[D]=new i.default.Shader(I._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,N[D])),this.filterShader=this.defaultFilterShaders[D]):this.filterShader=arguments.length<=0?void 0:arguments[0],I.clear(),this._pInst.pixelDensity()),F=[1/(this.width*F),1/(this.height*F)];D===f.BLUR?((D=this.getFilterGraphicsLayerTemp()).clear(),this._pInst.push(),this._pInst.noStroke(),D.image(this,-this.width/2,-this.height/2),I.shader(this.filterShader),this.filterShader.setUniform("texelSize",F),this.filterShader.setUniform("canvasSize",[this.width,this.height]),this.filterShader.setUniform("radius",Math.max(1,q)),this.filterShader.setUniform("direction",[1,0]),this.filterShader.setUniform("tex0",D),I.rect(-this.width/2,-this.height/2,this.width,this.height),D.image(I,-this.width/2,-this.height/2),this.filterShader.setUniform("direction",[0,1]),this.filterShader.setUniform("tex0",D),I.rect(-this.width/2,-this.height/2,this.width,this.height),this._pInst.pop()):(I.shader(this.filterShader),this.filterShader.setUniform("tex0",this),this.filterShader.setUniform("texelSize",F),this.filterShader.setUniform("canvasSize",[this.width,this.height]),this.filterShader.setUniform("filterParameter",q),I.rect(-this.width/2,-this.height/2,this.width,this.height)),this._pInst.push(),this._pInst.noStroke(),this._pInst.image(I,-this.width/2,-this.height/2,this.width,this.height),this._pInst.pop()}},{key:"blendMode",value:function(I){I===f.DARKEST||I===f.LIGHTEST||I===f.ADD||I===f.BLEND||I===f.SUBTRACT||I===f.SCREEN||I===f.EXCLUSION||I===f.REPLACE||I===f.MULTIPLY||I===f.REMOVE?this.curBlendMode=I:I!==f.BURN&&I!==f.OVERLAY&&I!==f.HARD_LIGHT&&I!==f.SOFT_LIGHT&&I!==f.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(I,q){this._isErasing||(this._applyBlendMode(f.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,I/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,q/255])}},{key:"noErase",value:function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var I=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},I=(a(v(Z.prototype),"beginClip",this).call(this,I),this.drawTarget()._isClipApplied=!0,this.GL);I.clearStencil(0),I.clear(I.STENCIL_BUFFER_BIT),I.enable(I.STENCIL_TEST),this._stencilTestOn=!0,I.stencilFunc(I.ALWAYS,1,255),I.stencilOp(I.KEEP,I.KEEP,I.REPLACE),I.disable(I.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var I=this.GL;I.stencilOp(I.KEEP,I.KEEP,I.KEEP),I.stencilFunc(this._clipInvert?I.EQUAL:I.NOTEQUAL,0,255),I.enable(I.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),a(v(Z.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(I){this.curStrokeWeight!==I&&(this.pointSize=I,this.curStrokeWeight=I)}},{key:"_getPixel",value:function(I,q){var D=this.GL;return V(D,null,I,q,D.RGBA,D.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var I,q,D=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(I=this._pInst._pixelDensity,q=this.GL,D._setProperty("pixels",U(D.pixels,q,null,0,0,this.width*I,this.height*I,q.RGBA,q.UNSIGNED_BYTE,this.height*I)))}},{key:"updatePixels",value:function(){var I=this._getTempFramebuffer();I.pixels=this._pixelsState.pixels,I.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(f.CENTER),this._pInst.image(I,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:f.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:f.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(I){return this.retainedMode.geometry[I]!==void 0}},{key:"viewport",value:function(I,q){this._viewport=[0,0,I,q],this.GL.viewport(0,0,I,q)}},{key:"resize",value:function(I,q){i.default.Renderer.prototype.resize.call(this,I,q),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var F=this._pixelsState,D=(F.pixels!==void 0&&F._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),F=!1,H=void 0;try{for(var Y,te=this.framebuffers[Symbol.iterator]();!(D=(Y=te.next()).done);D=!0)Y.value._canvasSizeChanged()}catch(ie){F=!0,H=ie}finally{try{D||te.return==null||te.return()}finally{if(F)throw H}}this.filterGraphicsLayer&&i.default.Renderer.prototype.resize.call(this.filterGraphicsLayer,I,q)}},{key:"clear",value:function(){var I=(arguments.length<=0?void 0:arguments[0])||0,q=(arguments.length<=1?void 0:arguments[1])||0,D=(arguments.length<=2?void 0:arguments[2])||0,F=(arguments.length<=3?void 0:arguments[3])||0,H=this.activeFramebuffer();H&&H.format===f.UNSIGNED_BYTE&&!H.antialias&&F===0&&(F=1e-10),this.GL.clearColor(I*F,q*F,D*F,F),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(I,q,D,F,H,Y){arguments.length===16?i.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([I,q,0,0,D,F,0,0,0,0,1,0,H,Y,0,1])}},{key:"translate",value:function(I,q,D){return I instanceof i.default.Vector&&(D=I.z,q=I.y,I=I.x),this.uMVMatrix.translate([I,q,D]),this}},{key:"scale",value:function(I,q,D){return this.uMVMatrix.scale(I,q,D),this}},{key:"rotate",value:function(I,q){return q===void 0?this.rotateZ(I):(i.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(I){return this.rotate(I,1,0,0),this}},{key:"rotateY",value:function(I){return this.rotate(I,0,1,0),this}},{key:"rotateZ",value:function(I){return this.rotate(I,0,0,1),this}},{key:"push",value:function(){var I=i.default.Renderer.prototype.push.apply(this),q=I.properties;return q.uMVMatrix=this.uMVMatrix.copy(),q.uPMatrix=this.uPMatrix.copy(),q._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),q.ambientLightColors=this.ambientLightColors.slice(),q.specularColors=this.specularColors.slice(),q.directionalLightDirections=this.directionalLightDirections.slice(),q.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),q.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),q.pointLightPositions=this.pointLightPositions.slice(),q.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),q.pointLightSpecularColors=this.pointLightSpecularColors.slice(),q.spotLightPositions=this.spotLightPositions.slice(),q.spotLightDirections=this.spotLightDirections.slice(),q.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),q.spotLightSpecularColors=this.spotLightSpecularColors.slice(),q.spotLightAngle=this.spotLightAngle.slice(),q.spotLightConc=this.spotLightConc.slice(),q.userFillShader=this.userFillShader,q.userStrokeShader=this.userStrokeShader,q.userPointShader=this.userPointShader,q.pointSize=this.pointSize,q.curStrokeWeight=this.curStrokeWeight,q.curStrokeColor=this.curStrokeColor,q.curFillColor=this.curFillColor,q.curAmbientColor=this.curAmbientColor,q.curSpecularColor=this.curSpecularColor,q.curEmissiveColor=this.curEmissiveColor,q._hasSetAmbient=this._hasSetAmbient,q._useSpecularMaterial=this._useSpecularMaterial,q._useEmissiveMaterial=this._useEmissiveMaterial,q._useShininess=this._useShininess,q.constantAttenuation=this.constantAttenuation,q.linearAttenuation=this.linearAttenuation,q.quadraticAttenuation=this.quadraticAttenuation,q._enableLighting=this._enableLighting,q._useNormalMaterial=this._useNormalMaterial,q._tex=this._tex,q.drawMode=this.drawMode,q._currentNormal=this._currentNormal,q.curBlendMode=this.curBlendMode,I}},{key:"pop",value:function(){var I;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var q=arguments.length,D=new Array(q),F=0;F<q;F++)D[F]=arguments[F];(I=a(v(Z.prototype),"pop",this)).call.apply(I,[this].concat(D)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var I=this.drawTarget();I._isClipApplied!==this._stencilTestOn&&(I._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var I=this.userStrokeShader;return I&&I.isStrokeShader()?I:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var I=this.userFillShader;if(this._useNormalMaterial&&(!I||!I.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getImmediateModeShader();return I}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var I=this.userFillShader;if(this._enableLighting){if(!I||!I.isLightShader())return this._getLightShader()}else if(this._tex){if(!I||!I.isTextureShader())return this._getLightShader()}else if(!I)return this._getColorShader();return I}},{key:"_getImmediatePointShader",value:function(){var I=this.userPointShader;return I&&I.isPointShader()?I:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new i.default.Shader(this,O.phongVert,O.phongFrag):this._defaultLightShader=new i.default.Shader(this,O.lightVert,O.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new i.default.Shader(this,O.immediateVert,O.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new i.default.Shader(this,O.normalVert,O.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new i.default.Shader(this,O.normalVert,O.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new i.default.Shader(this,O.pointVert,O.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new i.default.Shader(this,O.lineVert,O.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===f.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+O.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+O.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(I,q){var D="";return this.webglVersion===f.WEBGL2&&(D+=`#version 300 es
#define WEBGL2
`),I==="vert"?D+=`#define VERTEX_SHADER
`:I==="frag"&&(D+=`#define FRAGMENT_SHADER
`),q&&(D+="precision ".concat(q,` float;
`)),D}},{key:"_getEmptyTexture",value:function(){var I;return this._emptyTexture||((I=new i.default.Image(1,1)).set(0,0,255),this._emptyTexture=new i.default.Texture(this,I)),this._emptyTexture}},{key:"getTexture",value:function(I){I instanceof i.default.Framebuffer&&(I=I.color);var q=this.textures.get(I);return q||(q=new i.default.Texture(this,I),this.textures.set(I,q),q)}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(I){return new i.default.Framebuffer(this,I)}},{key:"_setStrokeUniforms",value:function(I){I.bindShader(),I.setUniform("uUseLineColor",this._useLineColor),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uStrokeWeight",this.curStrokeWeight),I.setUniform("uStrokeCap",j[this.curStrokeCap]),I.setUniform("uStrokeJoin",A[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(I){I.bindShader(),I.setUniform("uUseVertexColor",this._useVertexColor),I.setUniform("uMaterialColor",this.curFillColor),I.setUniform("isTexture",!!this._tex),this._tex&&I.setUniform("uSampler",this._tex),I.setUniform("uTint",this._tint),I.setUniform("uHasSetAmbient",this._hasSetAmbient),I.setUniform("uAmbientMatColor",this.curAmbientColor),I.setUniform("uSpecularMatColor",this.curSpecularColor),I.setUniform("uEmissiveMatColor",this.curEmissiveColor),I.setUniform("uSpecular",this._useSpecularMaterial),I.setUniform("uEmissive",this._useEmissiveMaterial),I.setUniform("uShininess",this._useShininess),I.setUniform("uUseLighting",this._enableLighting);var q=this.pointLightDiffuseColors.length/3,q=(I.setUniform("uPointLightCount",q),I.setUniform("uPointLightLocation",this.pointLightPositions),I.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),I.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),q=(I.setUniform("uDirectionalLightCount",q),I.setUniform("uLightingDirection",this.directionalLightDirections),I.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),I.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),q=(I.setUniform("uAmbientLightCount",q),I.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);I.setUniform("uSpotLightCount",q),I.setUniform("uSpotLightAngle",this.spotLightAngle),I.setUniform("uSpotLightConc",this.spotLightConc),I.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),I.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),I.setUniform("uSpotLightLocation",this.spotLightPositions),I.setUniform("uSpotLightDirection",this.spotLightDirections),I.setUniform("uConstantAttenuation",this.constantAttenuation),I.setUniform("uLinearAttenuation",this.linearAttenuation),I.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),I.bindTextures()}},{key:"_setPointUniforms",value:function(I){I.bindShader(),I.setUniform("uMaterialColor",this.curStrokeColor),I.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(I,q,D,F,H){q=q||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(q,I),D!==void 0&&((I=D)instanceof i.default.DataArray?I=D.dataArray():I instanceof(F||Float32Array)||(I=new(F||Float32Array)(I)),this.GL.bufferData(q,I,H||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(I,q){return I.length===q.length&&I.every(function(D,F){return D===q[F]})}},{key:"_isTypedArray",value:function(I){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(q){return I instanceof q})}},{key:"_flatten",value:function(I){if(I.length===0)return[];var q;if(2e4<I.length){for(var D=[],F=I.slice(),H=F.pop();Array.isArray(H)?F.push.apply(F,l(H)):D.push(H),F.length&&(H=F.pop())!==void 0;);return D.reverse(),D}return(q=[]).concat.apply(q,l(I))}},{key:"_vToNArray",value:function(I){var q=[],D=!0,F=!1,H=void 0;try{for(var Y,te=I[Symbol.iterator]();!(D=(Y=te.next()).done);D=!0){var ie=Y.value;q.push(ie.x,ie.y,ie.z)}}catch(de){F=!0,H=de}finally{try{D||te.return==null||te.return()}finally{if(F)throw H}}return q}},{key:"_bezierCoefficients",value:function(I){var q=I*I,D=1-I,F=D*D;return[F*D,3*F*I,3*D*q,q*I]}},{key:"_quadraticCoefficients",value:function(I){var q=1-I;return[q*q,2*q*I,I*I]}},{key:"_bezierToCatmull",value:function(I){return[I[1],I[1]+(I[2]-I[0])/this._curveTightness,I[2]-(I[3]-I[1])/this._curveTightness,I[2]]}},{key:"_initTessy",value:function(){var I=new m.default.GluTesselator;return I.gluTessCallback(m.default.gluEnum.GLU_TESS_VERTEX_DATA,function(q,D){for(var F=0;F<q.length;F++)D.push(q[F])}),I.gluTessCallback(m.default.gluEnum.GLU_TESS_BEGIN,function(q){q!==m.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(q))}),I.gluTessCallback(m.default.gluEnum.GLU_TESS_ERROR,function(q){console.log("error callback"),console.log("error number: ".concat(q))}),I.gluTessCallback(m.default.gluEnum.GLU_TESS_COMBINE,function(q,D,F){for(var H=new Array(i.default.RendererGL.prototype.tessyVertexSize).fill(0),Y=0;Y<F.length;Y++)for(var te=0;te<H.length;te++)F[Y]!==0&&D[Y]&&(H[te]+=D[Y][te]*F[Y]);return H}),I.gluTessCallback(m.default.gluEnum.GLU_TESS_EDGE_FLAG,function(q){}),I.gluTessProperty(m.default.gluEnum.GLU_TESS_WINDING_RULE,m.default.windingRule.GLU_TESS_WINDING_NONZERO),I}},{key:"_triangulate",value:function(I){var q=I[0]?I[0][2]:void 0,D=!0,F=!0,de=!1,le=void 0;try{for(var H,Y=I[Symbol.iterator]();!(F=(H=Y.next()).done);F=!0)for(var te=H.value,ie=0;ie<te.length;ie+=i.default.RendererGL.prototype.tessyVertexSize)if(te[ie+2]!==q){D=!1;break}}catch(xe){de=!0,le=xe}finally{try{F||Y.return==null||Y.return()}finally{if(de)throw le}}D?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var de=[],_e=(this._tessy.gluTessBeginPolygon(de),!0),le=!1,re=void 0;try{for(var pe,Q=I[Symbol.iterator]();!(_e=(pe=Q.next()).done);_e=!0){var ce=pe.value;this._tessy.gluTessBeginContour();for(var be=0;be<ce.length;be+=i.default.RendererGL.prototype.tessyVertexSize){var Re=ce.slice(be,be+i.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Re,Re)}this._tessy.gluTessEndContour()}}catch(xe){le=!0,re=xe}finally{try{_e||Q.return==null||Q.return()}finally{if(le)throw re}}return this._tessy.gluTessEndPolygon(),de}}])&&c(z.prototype,G),Z}(i.default.Renderer),i.default.prototype._assert3d=function(G){if(!this._renderer.isP3D)throw new Error("".concat(G,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},i.default.RendererGL.prototype.tessyVertexSize=12,k=i.default.RendererGL,b.default=k},{"../core/constants":264,"../core/main":275,"../core/p5.Renderer":278,"./GeometryBuilder":319,"./p5.Camera":324,"./p5.Framebuffer":326,"./p5.Matrix":328,"./p5.Shader":333,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.map":169,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.float64-array":212,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int16-array":216,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,libtess:247,path:250}],333:[function(t,x,b){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var h=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(i,f){for(var g=0;g<f.length;g++){var m=f[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(i,m.key,m)}}h.default.Shader=function(){function i(m,n,s){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._renderer=m,this._vertSrc=n,this._fragSrc=s,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var f,g;return f=i,(g=[{key:"init",value:function(){if(this._glProgram===0){var m=this._renderer.GL;if(this._vertShader=m.createShader(m.VERTEX_SHADER),m.shaderSource(this._vertShader,this._vertSrc),m.compileShader(this._vertShader),!m.getShaderParameter(this._vertShader,m.COMPILE_STATUS))return h.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(m.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(this._fragShader,this._fragSrc),m.compileShader(this._fragShader),!m.getShaderParameter(this._fragShader,m.COMPILE_STATUS))return h.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(m.getShaderInfoLog(this._fragShader))),null;this._glProgram=m.createProgram(),m.attachShader(this._glProgram,this._vertShader),m.attachShader(this._glProgram,this._fragShader),m.linkProgram(this._glProgram),m.getProgramParameter(this._glProgram,m.LINK_STATUS)||h.default._friendlyError("Snap! Error linking shader program: ".concat(m.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(m){var n=new h.default.Shader(m._renderer,this._vertSrc,this._fragSrc);return n.ensureCompiledOnContext(m),n}},{key:"ensureCompiledOnContext",value:function(m){if(this._glProgram!==0&&this._renderer!==m._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=m._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var m=this._renderer.GL,n=m.getProgramParameter(this._glProgram,m.ACTIVE_ATTRIBUTES),s=0;s<n;++s){var l=m.getActiveAttrib(this._glProgram,s),c=l.name,a=m.getAttribLocation(this._glProgram,c),u={};u.name=c,u.location=a,u.index=s,u.type=l.type,u.size=l.size,this.attributes[c]=u}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var m=this._renderer.GL,n=m.getProgramParameter(this._glProgram,m.ACTIVE_UNIFORMS),s=0,l=0;l<n;++l){var c=m.getActiveUniform(this._glProgram,l),a={},u=(a.location=m.getUniformLocation(this._glProgram,c.name),a.size=c.size,c.name);1<c.size&&(u=u.substring(0,u.indexOf("[0]"))),a.name=u,a.type=c.type,a._cachedData=void 0,a.type===m.SAMPLER_2D&&(a.samplerIndex=s,s++,this.samplers.push(a)),a.isArray=1<c.size||a.type===m.FLOAT_MAT3||a.type===m.FLOAT_MAT4||a.type===m.FLOAT_VEC2||a.type===m.FLOAT_VEC3||a.type===m.FLOAT_VEC4||a.type===m.INT_VEC2||a.type===m.INT_VEC4||a.type===m.INT_VEC3,this.uniforms[u]=a}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var m=this._renderer.GL,n=!0,s=!1,l=void 0;try{for(var c,a=this.samplers[Symbol.iterator]();!(n=(c=a.next()).done);n=!0){var u=c.value,y=u.texture;y===void 0&&(y=this._renderer._getEmptyTexture()),m.activeTexture(m.TEXTURE0+u.samplerIndex),y.bindTexture(),y.update(),m.uniform1i(u.location,u.samplerIndex)}}catch(p){s=!0,l=p}finally{try{n||a.return==null||a.return()}finally{if(s)throw l}}}},{key:"updateTextures",value:function(){var m=!0,n=!1,s=void 0;try{for(var l,c=this.samplers[Symbol.iterator]();!(m=(l=c.next()).done);m=!0){var a=l.value.texture;a&&a.update()}}catch(u){n=!0,s=u}finally{try{m||c.return==null||c.return()}finally{if(n)throw s}}}},{key:"unbindTextures",value:function(){var m=!0,n=!1,s=void 0;try{for(var l,c=this.samplers[Symbol.iterator]();!(m=(l=c.next()).done);m=!0){var a=l.value;this.setUniform(a.name,this._renderer._getEmptyTexture())}}catch(u){n=!0,s=u}finally{try{m||c.return==null||c.return()}finally{if(n)throw s}}}},{key:"_setMatrixUniforms",value:function(){var m=this._renderer._curCamera.cameraMatrix,n=this._renderer.uPMatrix,s=this._renderer.uMVMatrix,l=s.copy();l.mult(n),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",m.mat4),this.setUniform("uProjectionMatrix",n.mat4),this.setUniform("uModelViewMatrix",s.mat4),this.setUniform("uModelViewProjectionMatrix",l.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var m=this._renderer.GL;return this._renderer._curShader!==this&&(m.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(m,n){var s=this.uniforms[m];if(s){var l=this._renderer.GL;if(s.isArray){if(s._cachedData&&this._renderer._arraysEqual(s._cachedData,n))return;s._cachedData=n.slice(0)}else{if(s._cachedData&&s._cachedData===n)return;Array.isArray(n)?s._cachedData=n.slice(0):s._cachedData=n}var c=s.location;switch(this.useProgram(),s.type){case l.BOOL:n===!0?l.uniform1i(c,1):l.uniform1i(c,0);break;case l.INT:1<s.size?n.length&&l.uniform1iv(c,n):l.uniform1i(c,n);break;case l.FLOAT:1<s.size?n.length&&l.uniform1fv(c,n):l.uniform1f(c,n);break;case l.FLOAT_MAT3:l.uniformMatrix3fv(c,!1,n);break;case l.FLOAT_MAT4:l.uniformMatrix4fv(c,!1,n);break;case l.FLOAT_VEC2:1<s.size?n.length&&l.uniform2fv(c,n):l.uniform2f(c,n[0],n[1]);break;case l.FLOAT_VEC3:1<s.size?n.length&&l.uniform3fv(c,n):l.uniform3f(c,n[0],n[1],n[2]);break;case l.FLOAT_VEC4:1<s.size?n.length&&l.uniform4fv(c,n):l.uniform4f(c,n[0],n[1],n[2],n[3]);break;case l.INT_VEC2:1<s.size?n.length&&l.uniform2iv(c,n):l.uniform2i(c,n[0],n[1]);break;case l.INT_VEC3:1<s.size?n.length&&l.uniform3iv(c,n):l.uniform3i(c,n[0],n[1],n[2]);break;case l.INT_VEC4:1<s.size?n.length&&l.uniform4iv(c,n):l.uniform4i(c,n[0],n[1],n[2],n[3]);break;case l.SAMPLER_2D:l.activeTexture(l.TEXTURE0+s.samplerIndex),s.texture=n instanceof h.default.Texture?n:this._renderer.getTexture(n),l.uniform1i(c,s.samplerIndex),s.texture.src.gifProperties&&s.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(m,n,s,l,c,a){var u;return m&&(m=m.location)!==-1&&(u=this._renderer.GL,this._renderer.registerEnabled.has(m)||(u.enableVertexAttribArray(m),this._renderer.registerEnabled.add(m)),this._renderer.GL.vertexAttribPointer(m,n,s||u.FLOAT,l||!1,c||0,a||0)),this}},{key:"disableRemainingAttributes",value:function(){var m=this,n=!0,s=!1,l=void 0;try{for(var c,a=this._renderer.registerEnabled.values()[Symbol.iterator]();!(n=(c=a.next()).done);n=!0)(function(){var u=c.value;Object.keys(m.attributes).some(function(y){return m.attributes[y].location===u})||(m._renderer.GL.disableVertexAttribArray(u),m._renderer.registerEnabled.delete(u))})()}catch(u){s=!0,l=u}finally{try{n||a.return==null||a.return()}finally{if(s)throw l}}}}])&&d(f.prototype,g),i}(),t=h.default.Shader,b.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],334:[function(t,x,b){function h(l){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function d(l){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(b,"__esModule",{value:!0}),b.checkWebGLCapabilities=n,b.default=void 0;var i=(s=t("../core/main"))&&s.__esModule?s:{default:s},f=function(l){if(l&&l.__esModule)return l;if(l===null||d(l)!=="object"&&typeof l!="function")return{default:l};var c=g();if(c&&c.has(l))return c.get(l);var a,u={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in l){var p;Object.prototype.hasOwnProperty.call(l,a)&&((p=y?Object.getOwnPropertyDescriptor(l,a):null)&&(p.get||p.set)?Object.defineProperty(u,a,p):u[a]=l[a])}return u.default=l,c&&c.set(l,u),u}(t("../core/constants"));function g(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,g=function(){return l},l)}function m(l,c){for(var a=0;a<c.length;a++){var u=c[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function n(y){var c=y.GL,y=y.webglVersion,a=y===f.WEBGL2?c.getExtension("EXT_color_buffer_float")&&c.getExtension("EXT_float_blend"):c.getExtension("OES_texture_float"),u=a&&c.getExtension("OES_texture_float_linear"),y=y===f.WEBGL2?c.getExtension("EXT_color_buffer_float"):c.getExtension("OES_texture_half_float");return{float:a,floatLinear:u,halfFloat:y,halfFloatLinear:y&&c.getExtension("OES_texture_half_float_linear")}}i.default.Texture=function(){function l(C,y,w){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=C;var v=this._renderer.GL,w=(w=w||{},this.src=y,this.glTex=void 0,this.glTarget=v.TEXTURE_2D,this.glFormat=w.format||v.RGBA,this.mipmaps=!1,this.glMinFilter=w.minFilter||v.LINEAR,this.glMagFilter=w.magFilter||v.LINEAR,this.glWrapS=w.wrapS||v.CLAMP_TO_EDGE,this.glWrapT=w.wrapT||v.CLAMP_TO_EDGE,this.glDataType=w.dataType||v.UNSIGNED_BYTE,n(C)),C=(this.glFormat!==v.HALF_FLOAT||w.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=v.FLOAT),this.glFormat!==v.HALF_FLOAT||this.glMinFilter!==v.LINEAR&&this.glMagFilter!==v.LINEAR||w.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===v.LINEAR&&(this.glMinFilter=v.NEAREST),this.glMagFilter===v.LINEAR&&(this.glMagFilter=v.NEAREST)),this.glFormat!==v.FLOAT||w.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=v.UNSIGNED_BYTE),this.glFormat!==v.FLOAT||this.glMinFilter!==v.LINEAR&&this.glMagFilter!==v.LINEAR||w.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===v.LINEAR&&(this.glMinFilter=v.NEAREST),this.glMagFilter===v.LINEAR&&(this.glMagFilter=v.NEAREST)),this.isSrcMediaElement=i.default.MediaElement!==void 0&&y instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=i.default.Element!==void 0&&y instanceof i.default.Element&&!(y instanceof i.default.Graphics)&&!(y instanceof i.default.Renderer),this.isSrcP5Image=y instanceof i.default.Image,this.isSrcP5Graphics=y instanceof i.default.Graphics,this.isSrcP5Renderer=y instanceof i.default.Renderer,this.isImageData=typeof ImageData<"u"&&y instanceof ImageData,this.isFramebufferTexture=y instanceof i.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=C.width,this.height=C.height,this.init(C),this}var c,a;return c=l,(a=[{key:"_getTextureDataFromSource",value:function(){var u;return this.isFramebufferTexture?u=this.src.rawTexture():this.isSrcP5Image?u=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?u=this.src.elt:this.isImageData&&(u=this.src),u}},{key:"init",value:function(u){var y,p=this._renderer.GL;this.isFramebufferTexture||(this.glTex=p.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,this.glMagFilter),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(y=new Uint8Array([1,1,1,1]),p.texImage2D(this.glTarget,0,p.RGBA,1,1,0,this.glFormat,this.glDataType,y)):p.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,u))}},{key:"update",value:function(){var u,y,p,v=this.src;return v.width!==0&&v.height!==0&&!this.isFramebufferTexture&&(u=this._getTextureDataFromSource(),y=!1,p=this._renderer.GL,u.width!==this.width||u.height!==this.height?(y=!0,this.width=u.width||v.width,this.height=u.height||v.height,this.isSrcP5Image?v.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&v.setModified(!0)):this.isSrcP5Image?v.isModified()&&v.setModified(!(y=!0)):this.isSrcMediaElement?v.isModified()?v.setModified(!(y=!0)):v.loadedmetadata&&this._videoPrevUpdateTime!==v.time()&&(this._videoPrevUpdateTime=v.time(),y=!0):this.isImageData?v._dirty&&(y=!(v._dirty=!1)):y=!0,y&&(this.bindTexture(),p.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,u)),y)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(u,y){var p=this._renderer.GL;u===f.NEAREST?this.glMinFilter=p.NEAREST:this.glMinFilter=p.LINEAR,y===f.NEAREST?this.glMagFilter=p.NEAREST:this.glMagFilter=p.LINEAR,this.bindTexture(),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.glMinFilter),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"setWrapMode",value:function(u,y){function p(T){return(T&T-1)==0}var v=this._renderer.GL,C=this._getTextureDataFromSource(),C=C.naturalWidth&&C.naturalHeight?(w=C.naturalWidth,C.naturalHeight):(w=this.width,this.height),w=p(w),C=p(C);u===f.REPEAT?this._renderer.webglVersion===f.WEBGL2||w&&C?this.glWrapS=v.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=v.CLAMP_TO_EDGE):u===f.MIRROR?this._renderer.webglVersion===f.WEBGL2||w&&C?this.glWrapS=v.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=v.CLAMP_TO_EDGE):this.glWrapS=v.CLAMP_TO_EDGE,y===f.REPEAT?this._renderer.webglVersion===f.WEBGL2||w&&C?this.glWrapT=v.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=v.CLAMP_TO_EDGE):y===f.MIRROR?this._renderer.webglVersion===f.WEBGL2||w&&C?this.glWrapT=v.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=v.CLAMP_TO_EDGE):this.glWrapT=v.CLAMP_TO_EDGE,this.bindTexture(),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,this.glWrapS),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}])&&m(c.prototype,a),l}();var s=i.default.Texture;b.default=s},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],335:[function(t,x,b){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(p)}function d(p){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(v){return h(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":h(v)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var i,f=(i=t("../core/main"))&&i.__esModule?i:{default:i},g=function(p){if(p&&p.__esModule)return p;if(p===null||d(p)!=="object"&&typeof p!="function")return{default:p};var v=m();if(v&&v.has(p))return v.get(p);var w,C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in p){var j;Object.prototype.hasOwnProperty.call(p,w)&&((j=T?Object.getOwnPropertyDescriptor(p,w):null)&&(j.get||j.set)?Object.defineProperty(C,w,j):C[w]=p[w])}return C.default=p,v&&v.set(p,C),C}(t("../core/constants"));function m(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,m=function(){return p},p)}function n(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function s(p,v){for(var w=0;w<v.length;w++){var C=v[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(p,C.key,C)}}function l(p,v,w){v&&s(p.prototype,v),w&&s(p,w)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),f.default.RendererGL.prototype._applyTextProperties=function(){},f.default.RendererGL.prototype.textWidth=function(p){return this._isOpenType()?this._textFont._textWidth(p,this._textSize):0};var c=function(){function p(v,w){n(this,p),this.width=v,this.height=w,this.infos=[]}return l(p,[{key:"findImage",value:function(v){var w,C,T=this.width*this.height;if(T<v)throw new Error("font is too complex to render in 3D");for(var j=this.infos.length-1;0<=j;--j){var A=this.infos[j];if(A.index+v<T){C=(w=A).imageData;break}}if(!w){try{C=new ImageData(this.width,this.height)}catch{var L=document.getElementsByTagName("canvas")[0],M=!L,k=(L||((L=document.createElement("canvas")).style.display="none",document.body.appendChild(L)),L.getContext("2d"));k&&(C=k.createImageData(this.width,this.height)),M&&document.body.removeChild(L)}this.infos.push(w={index:0,imageData:C})}return k=w.index,w.index+=v,C._dirty=!0,{imageData:C,index:k}}}]),p}();function a(A,v,w,C,T){var j=A.imageData.data,A=4*A.index++;j[A++]=v,j[A++]=w,j[A++]=C,j[+A]=T}var u=Math.sqrt(3),y=function(){function p(v){n(this,p),this.font=v,this.strokeImageInfos=new c(64,64),this.colDimImageInfos=new c(64,64),this.rowDimImageInfos=new c(64,64),this.colCellImageInfos=new c(64,64),this.rowCellImageInfos=new c(64,64),this.glyphInfos={}}return l(p,[{key:"getGlyphInfo",value:function(v){var w=this.glyphInfos[v.index];if(!w){var C=v.getBoundingBox(),T=C.x1,j=C.y1,A=C.x2-T,L=C.y2-j,M=v.path.commands;if(A==0||L==0||!M.length)return this.glyphInfos[v.index]={};for(var k=[],O=[],N=[],U=8;0<=U;--U)N.push([]);for(U=8;0<=U;--U)O.push([]);var V,G,z,W,Z=function(){function oe(Ce,He,Ge,ve){n(this,oe),this.p0=Ce,this.c0=He,this.c1=Ge,this.p1=ve}return l(oe,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return f.default.Vector.sub(f.default.Vector.sub(this.p1,this.p0),f.default.Vector.mult(f.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Ie){var He=f.default.Vector.lerp(this.p0,this.c0,Ie),ve=f.default.Vector.lerp(this.c0,this.c1,Ie),Ge=f.default.Vector.lerp(He,ve,Ie),ve=(this.c1=f.default.Vector.lerp(this.c1,this.p1,Ie),this.c0=f.default.Vector.lerp(ve,this.c1,Ie),f.default.Vector.lerp(Ge,this.c0,Ie)),Ie=new oe(this.p0,He,Ge,ve);return this.p0=ve,Ie}},{key:"splitInflections",value:function(){var Ce=f.default.Vector.sub(this.c0,this.p0),He=f.default.Vector.sub(f.default.Vector.sub(this.c1,this.c0),Ce),Ge=f.default.Vector.sub(f.default.Vector.sub(f.default.Vector.sub(this.p1,this.c1),Ce),f.default.Vector.mult(He,2)),ve=[],Ie=He.x*Ge.y-He.y*Ge.x;return Ie!==0&&0<=(Ce=(Ge=Ce.x*Ge.y-Ce.y*Ge.x)*Ge-4*Ie*(Ce.x*He.y-Ce.y*He.x))&&(Ie<0&&(Ie=-Ie,Ge=-Ge),Ce=(-Ge+(He=Math.sqrt(Ce)))/(2*Ie),0<(Ge=(-Ge-He)/(2*Ie))&&Ge<1&&(ve.push(this.split(Ge)),Ce=1-(1-Ce)/(1-Ge)),0<Ce&&Ce<1&&ve.push(this.split(Ce))),ve.push(this),ve}}]),oe}(),I=!0,q=!1,D=void 0;try{for(var F,H=M[Symbol.iterator]();!(I=(F=H.next()).done);I=!0){var Y=F.value,te=(Y.x-T)/A,ie=(Y.y-j)/L;if(!ke(V,G,te,ie)){switch(Y.type){case"M":z=te,W=ie;break;case"L":Je(V,G,te,ie);break;case"Q":var de=(Y.x1-T)/A,_e=(Y.y1-j)/L;Te([V,te,de],[G,ie,_e],{x:V,y:G,cx:de,cy:_e});break;case"Z":ke(V,G,z,W)?k.push({x:V,y:G}):(Je(V,G,z,W),k.push({x:z,y:W}));break;case"C":for(var le=function(ee,Ee,De,Ge,ve,Ie,Me,J){var ee=new Z(new f.default.Vector(ee,Ee),new f.default.Vector(De,Ge),new f.default.Vector(ve,Ie),new f.default.Vector(Me,J)).splitInflections(),K=[],ne=30/u,me=!0,Ee=!1,De=void 0;try{for(var $e,ge=ee[Symbol.iterator]();!(me=($e=ge.next()).done);me=!0){for(var ze=$e.value,je=[],Ze=void 0;!(.125<=(Ze=ne/ze.quadError()));){var Ke=Math.pow(Ze,.3333333333333333),rt=ze.split(Ke),lt=ze.split(1-Ke/(1-Ke));K.push(rt),je.push(ze),ze=lt}Ze<1&&K.push(ze.split(.5)),K.push(ze),Array.prototype.push.apply(K,je.reverse())}}catch(at){Ee=!0,De=at}finally{try{me||ge.return==null||ge.return()}finally{if(Ee)throw De}}return K}(V,G,(Y.x1-T)/A,(Y.y1-j)/L,(Y.x2-T)/A,(Y.y2-j)/L,te,ie),re=0;re<le.length;re++){var pe=le[re].toQuadratic();Te([pe.x,pe.x1,pe.cx],[pe.y,pe.y1,pe.cy],pe)}break;default:throw new Error("unknown command type: ".concat(Y.type))}V=te,G=ie}}}catch(oe){q=!0,D=oe}finally{try{I||H.return==null||H.return()}finally{if(q)throw D}}for(var Q=k.length,ce=this.strokeImageInfos.findImage(Q),be=ce.index,Re=0;Re<Q;++Re){var xe=k[Re];a(ce,Le(xe.x),Le(xe.y),Le(xe.cx),Le(xe.cy))}(w=this.glyphInfos[v.index]={glyph:v,uGlyphRect:[C.x1,-C.y1,C.x2,-C.y2],strokeImageInfo:ce,strokes:k,colInfo:ue(N,this.colDimImageInfos,this.colCellImageInfos),rowInfo:ue(O,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[w.colInfo.dimOffset,w.rowInfo.dimOffset]}return w;function Te(oe,Ce,He){var Ge=k.length;function ve(K,ne,me){for(var Ee=K.length;0<Ee--;){var De=K[Ee];De<ne&&(ne=De),me<De&&(me=De)}return{min:ne,max:me}}k.push(He);for(var He=ve(oe,1,0),oe=Math.max(Math.floor(9*He.min-.5),0),Ie=Math.min(Math.ceil(9*He.max+.5),9),Me=oe;Me<Ie;++Me)N[Me].push(Ge);for(var He=ve(Ce,1,0),oe=Math.max(Math.floor(9*He.min-.5),0),J=Math.min(Math.ceil(9*He.max+.5),9),ee=oe;ee<J;++ee)O[ee].push(Ge)}function Le(oe){return(oe=(He=255)*oe)<(Ce=0)?Ce:He<oe?He:oe;var Ce,He}function Je(oe,Ce,He,Ge){Te([oe,He],[Ce,Ge],{x:oe,y:Ce,cx:(oe+He)/2,cy:(Ce+Ge)/2})}function ke(oe,Ce,He,Ge){return Math.abs(He-oe)<1e-5&&Math.abs(Ge-Ce)<1e-5}function ue(oe,Ce,He){for(var Ge=oe.length,ve=Ce.findImage(Ge),Ce=ve.index,Ie=0,Me=0;Me<Ge;++Me)Ie+=oe[Me].length;for(var J=He.findImage(Ie),ee=0;ee<Ge;++ee){var K=oe[ee],ne=K.length,me=J.index;a(ve,me>>7,127&me,ne>>7,127&ne);for(var Ee=0;Ee<ne;++Ee){var De=K[Ee]+be;a(J,De>>7,127&De,0,0)}}return{cellImageInfo:J,dimOffset:Ce,dimImageInfo:ve}}}}]),p}();f.default.RendererGL.prototype._renderText=function(p,v,w,C,T){if(this._textFont&&typeof this._textFont!="string"){if(!(T<=C)&&this._doFill){if(this._isOpenType()){p.push();var T=this._doStroke,j=this.drawMode,A=(this._doStroke=!1,this.drawMode=g.TEXTURE,this._textFont.font),L=(L=this._textFont._fontInfo)||(this._textFont._fontInfo=new y(A)),w=this._textFont._handleAlignment(this,v,w,C),C=this._textSize/A.unitsPerEm,M=(this.translate(w.x,w.y,0),this.scale(C,C,1),this.GL),w=!this._defaultFontShader,k=this._getFontShader(),O=(k.init(),k.bindShader(),w&&(k.setUniform("uGridImageSize",[64,64]),k.setUniform("uCellsImageSize",[64,64]),k.setUniform("uStrokeImageSize",[64,64]),k.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),N=(O||((C=this._textGeom=new f.default.Geometry(1,1,function(){for(var re=0;re<=1;re++)for(var pe=0;pe<=1;pe++)this.vertices.push(new f.default.Vector(pe,re,0)),this.uvs.push(pe,re)})).computeFaces().computeNormals(),O=this.createBuffers("glyph",C)),!0),w=!1,C=void 0;try{for(var U,V=this.retainedMode.buffers.text[Symbol.iterator]();!(N=(U=V.next()).done);N=!0)U.value._prepareBuffer(O,k)}catch(re){w=!0,C=re}finally{try{N||V.return==null||V.return()}finally{if(w)throw C}}this._bindBuffer(O.indexBuffer,M.ELEMENT_ARRAY_BUFFER),k.setUniform("uMaterialColor",this.curFillColor),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var G=0,z=null,W=A.stringToGlyphs(v),Z=!0,I=!1,q=void 0;try{for(var D,F=W[Symbol.iterator]();!(Z=(D=F.next()).done);Z=!0){var H,Y,te=D.value,ie=(z&&(G+=A.getKerningValue(z,te)),L.getGlyphInfo(te));ie.uGlyphRect&&(H=ie.rowInfo,Y=ie.colInfo,k.setUniform("uSamplerStrokes",ie.strokeImageInfo.imageData),k.setUniform("uSamplerRowStrokes",H.cellImageInfo.imageData),k.setUniform("uSamplerRows",H.dimImageInfo.imageData),k.setUniform("uSamplerColStrokes",Y.cellImageInfo.imageData),k.setUniform("uSamplerCols",Y.dimImageInfo.imageData),k.setUniform("uGridOffset",ie.uGridOffset),k.setUniform("uGlyphRect",ie.uGlyphRect),k.setUniform("uGlyphOffset",G),k.bindTextures(),M.drawElements(M.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),G+=te.advanceWidth,z=te}}catch(re){I=!0,q=re}finally{try{Z||F.return==null||F.return()}finally{if(I)throw q}}}finally{k.unbindShader(),this._doStroke=T,this.drawMode=j,M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),p.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return p}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":264,"../core/main":275,"./p5.RendererGL.Retained":331,"./p5.Shader":333,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}]},{},[259])(259)})})(Yl);var $l=Yl.exports;const Em=Mm($l),Tm=vc({__proto__:null,default:Em},[$l]),lr=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let S=0;S<256;S++)lr[256+S]=lr[S];function Ks(S){return S*S*S*(S*(S*6-15)+10)}function Mn(S,r,o){return r+S*(o-r)}function dn(S,r,o,t){const x=S&15,b=x<8?r:o,h=x<4?o:x==12||x==14?r:t;return(x&1?-b:b)+(x&2?-h:h)}class Am{noise(r,o,t){const x=Math.floor(r),b=Math.floor(o),h=Math.floor(t),d=x&255,i=b&255,f=h&255;r-=x,o-=b,t-=h;const g=r-1,m=o-1,n=t-1,s=Ks(r),l=Ks(o),c=Ks(t),a=lr[d]+i,u=lr[a]+f,y=lr[a+1]+f,p=lr[d+1]+i,v=lr[p]+f,w=lr[p+1]+f;return Mn(c,Mn(l,Mn(s,dn(lr[u],r,o,t),dn(lr[v],g,o,t)),Mn(s,dn(lr[y],r,m,t),dn(lr[w],g,m,t))),Mn(l,Mn(s,dn(lr[u+1],r,o,n),dn(lr[v+1],g,o,n)),Mn(s,dn(lr[y+1],r,m,n),dn(lr[w+1],g,m,n))))}}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class Br{constructor(r,o,t,x,b="div"){this.parent=r,this.object=o,this.property=t,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(x),this.$name=document.createElement("div"),this.$name.classList.add("name"),Br.nextNameID=Br.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Br.nextNameID,this.$widget=document.createElement(b),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(t)}name(r){return this._name=r,this.$name.innerHTML=r,this}onChange(r){return this._onChange=r,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(r){return this._onFinishChange=r,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(r=!0){return this.disable(!r)}disable(r=!0){return r===this._disabled||(this._disabled=r,this.domElement.classList.toggle("disabled",r),this.$disable.toggleAttribute("disabled",r)),this}show(r=!0){return this._hidden=!r,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(r){const o=this.parent.add(this.object,this.property,r);return o.name(this._name),this.destroy(),o}min(r){return this}max(r){return this}step(r){return this}decimals(r){return this}listen(r=!0){return this._listening=r,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const r=this.save();r!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=r}getValue(){return this.object[this.property]}setValue(r){return this.object[this.property]=r,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(r){return this.setValue(r),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class jm extends Br{constructor(r,o,t){super(r,o,t,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function co(S){let r,o;return(r=S.match(/(#|0x)?([a-f0-9]{6})/i))?o=r[2]:(r=S.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?o=parseInt(r[1]).toString(16).padStart(2,0)+parseInt(r[2]).toString(16).padStart(2,0)+parseInt(r[3]).toString(16).padStart(2,0):(r=S.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(o=r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),!!o&&"#"+o}const Cm={isPrimitive:!0,match:S=>typeof S=="string",fromHexString:co,toHexString:co},Ci={isPrimitive:!0,match:S=>typeof S=="number",fromHexString:S=>parseInt(S.substring(1),16),toHexString:S=>"#"+S.toString(16).padStart(6,0)},Rm={isPrimitive:!1,match:Array.isArray,fromHexString(S,r,o=1){const t=Ci.fromHexString(S);r[0]=(t>>16&255)/255*o,r[1]=(t>>8&255)/255*o,r[2]=(255&t)/255*o},toHexString:([S,r,o],t=1)=>Ci.toHexString(S*(t=255/t)<<16^r*t<<8^o*t<<0)},Lm={isPrimitive:!1,match:S=>Object(S)===S,fromHexString(S,r,o=1){const t=Ci.fromHexString(S);r.r=(t>>16&255)/255*o,r.g=(t>>8&255)/255*o,r.b=(255&t)/255*o},toHexString:({r:S,g:r,b:o},t=1)=>Ci.toHexString(S*(t=255/t)<<16^r*t<<8^o*t<<0)},Pm=[Cm,Ci,Rm,Lm];class Om extends Br{constructor(r,o,t,x){var b;super(r,o,t,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(b=this.initialValue,Pm.find(h=>h.match(b))),this._rgbScale=x,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const h=co(this.$text.value);h&&this._setValueFromHexString(h)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(r){if(this._format.isPrimitive){const o=this._format.fromHexString(r);this.setValue(o)}else this._format.fromHexString(r,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(r){return this._setValueFromHexString(r),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Js extends Br{constructor(r,o,t){super(r,o,t,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",x=>{x.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class Dm extends Br{constructor(r,o,t,x,b,h){super(r,o,t,"number"),this._initInput(),this.min(x),this.max(b);const d=h!==void 0;this.step(d?h:this._getImplicitStep(),d),this.updateDisplay()}decimals(r){return this._decimals=r,this.updateDisplay(),this}min(r){return this._min=r,this._onUpdateMinMax(),this}max(r){return this._max=r,this._onUpdateMinMax(),this}step(r,o=!0){return this._step=r,this._stepExplicit=o,this}updateDisplay(){const r=this.getValue();if(this._hasSlider){let o=(r-this._min)/(this._max-this._min);o=Math.max(0,Math.min(o,1)),this.$fill.style.width=100*o+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?r:r.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const r=g=>{const m=parseFloat(this.$input.value);isNaN(m)||(this._snapClampSetValue(m+g),this.$input.value=this.getValue())};let o,t,x,b,h,d=!1;const i=g=>{if(d){const m=g.clientX-o,n=g.clientY-t;Math.abs(n)>5?(g.preventDefault(),this.$input.blur(),d=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(m)>5&&f()}if(!d){const m=g.clientY-x;h-=m*this._step*this._arrowKeyMultiplier(g),b+h>this._max?h=this._max-b:b+h<this._min&&(h=this._min-b),this._snapClampSetValue(b+h)}x=g.clientY},f=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",f)};this.$input.addEventListener("input",()=>{let g=parseFloat(this.$input.value);isNaN(g)||(this._stepExplicit&&(g=this._snap(g)),this.setValue(this._clamp(g)))}),this.$input.addEventListener("keydown",g=>{g.code==="Enter"&&this.$input.blur(),g.code==="ArrowUp"&&(g.preventDefault(),r(this._step*this._arrowKeyMultiplier(g))),g.code==="ArrowDown"&&(g.preventDefault(),r(this._step*this._arrowKeyMultiplier(g)*-1))}),this.$input.addEventListener("wheel",g=>{this._inputFocused&&(g.preventDefault(),r(this._step*this._normalizeMouseWheel(g)))},{passive:!1}),this.$input.addEventListener("mousedown",g=>{o=g.clientX,t=x=g.clientY,d=!0,b=this.getValue(),h=0,window.addEventListener("mousemove",i),window.addEventListener("mouseup",f)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const r=n=>{const s=this.$slider.getBoundingClientRect();let l=(c=n,a=s.left,u=s.right,y=this._min,p=this._max,(c-a)/(u-a)*(p-y)+y);var c,a,u,y,p;this._snapClampSetValue(l)},o=n=>{r(n.clientX)},t=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",t)};let x,b,h=!1;const d=n=>{n.preventDefault(),this._setDraggingStyle(!0),r(n.touches[0].clientX),h=!1},i=n=>{if(h){const s=n.touches[0].clientX-x,l=n.touches[0].clientY-b;Math.abs(s)>Math.abs(l)?d(n):(window.removeEventListener("touchmove",i),window.removeEventListener("touchend",f))}else n.preventDefault(),r(n.touches[0].clientX)},f=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",f)},g=this._callOnFinishChange.bind(this);let m;this.$slider.addEventListener("mousedown",n=>{this._setDraggingStyle(!0),r(n.clientX),window.addEventListener("mousemove",o),window.addEventListener("mouseup",t)}),this.$slider.addEventListener("touchstart",n=>{n.touches.length>1||(this._hasScrollBar?(x=n.touches[0].clientX,b=n.touches[0].clientY,h=!0):d(n),window.addEventListener("touchmove",i,{passive:!1}),window.addEventListener("touchend",f))},{passive:!1}),this.$slider.addEventListener("wheel",n=>{if(Math.abs(n.deltaX)<Math.abs(n.deltaY)&&this._hasScrollBar)return;n.preventDefault();const s=this._normalizeMouseWheel(n)*this._step;this._snapClampSetValue(this.getValue()+s),this.$input.value=this.getValue(),clearTimeout(m),m=setTimeout(g,400)},{passive:!1})}_setDraggingStyle(r,o="horizontal"){this.$slider&&this.$slider.classList.toggle("active",r),document.body.classList.toggle("lil-gui-dragging",r),document.body.classList.toggle("lil-gui-"+o,r)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(r){let{deltaX:o,deltaY:t}=r;return Math.floor(r.deltaY)!==r.deltaY&&r.wheelDelta&&(o=0,t=-r.wheelDelta/120,t*=this._stepExplicit?1:10),o+-t}_arrowKeyMultiplier(r){let o=this._stepExplicit?1:10;return r.shiftKey?o*=10:r.altKey&&(o/=10),o}_snap(r){const o=Math.round(r/this._step)*this._step;return parseFloat(o.toPrecision(15))}_clamp(r){return r<this._min&&(r=this._min),r>this._max&&(r=this._max),r}_snapClampSetValue(r){this.setValue(this._clamp(this._snap(r)))}get _hasScrollBar(){const r=this.parent.root.$children;return r.scrollHeight>r.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class Im extends Br{constructor(r,o,t,x){super(r,o,t,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(x)?x:Object.values(x),this._names=Array.isArray(x)?x:Object.keys(x),this._names.forEach(b=>{const h=document.createElement("option");h.innerHTML=b,this.$select.appendChild(h)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const r=this.getValue(),o=this._values.indexOf(r);return this.$select.selectedIndex=o,this.$display.innerHTML=o===-1?r:this._names[o],this}}class km extends Br{constructor(r,o,t){super(r,o,t,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",x=>{x.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let cl=!1;class yo{constructor({parent:r,autoPlace:o=r===void 0,container:t,width:x,title:b="Controls",injectStyles:h=!0,touchStyles:d=!0}={}){if(this.parent=r,this.root=r?r.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",i=>{i.code!=="Enter"&&i.code!=="Space"||(i.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(b),d&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!cl&&h&&(function(i){const f=document.createElement("style");f.innerHTML=i;const g=document.querySelector("head link[rel=stylesheet], head style");g?document.head.insertBefore(f,g):document.head.appendChild(f)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:""}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),cl=!0),t?t.appendChild(this.domElement):o&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),x&&this.domElement.style.setProperty("--width",x+"px"),this.domElement.addEventListener("keydown",i=>i.stopPropagation()),this.domElement.addEventListener("keyup",i=>i.stopPropagation())}add(r,o,t,x,b){if(Object(t)===t)return new Im(this,r,o,t);const h=r[o];switch(typeof h){case"number":return new Dm(this,r,o,t,x,b);case"boolean":return new jm(this,r,o);case"string":return new km(this,r,o);case"function":return new Js(this,r,o)}console.error(`gui.add failed
	property:`,o,`
	object:`,r,`
	value:`,h)}addColor(r,o,t=1){return new Om(this,r,o,t)}addFolder(r){return new yo({parent:this,title:r})}load(r,o=!0){return r.controllers&&this.controllers.forEach(t=>{t instanceof Js||t._name in r.controllers&&t.load(r.controllers[t._name])}),o&&r.folders&&this.folders.forEach(t=>{t._title in r.folders&&t.load(r.folders[t._title])}),this}save(r=!0){const o={controllers:{},folders:{}};return this.controllers.forEach(t=>{if(!(t instanceof Js)){if(t._name in o.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);o.controllers[t._name]=t.save()}}),r&&this.folders.forEach(t=>{if(t._title in o.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);o.folders[t._title]=t.save()}),o}open(r=!0){return this._closed=!r,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(r=!0){return this._hidden=!r,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(r=!0){return this._closed=!r,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const o=this.$children.clientHeight;this.$children.style.height=o+"px",this.domElement.classList.add("transition");const t=b=>{b.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",t))};this.$children.addEventListener("transitionend",t);const x=r?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!r),requestAnimationFrame(()=>{this.$children.style.height=x+"px"})}),this}title(r){return this._title=r,this.$title.innerHTML=r,this}reset(r=!0){return(r?this.controllersRecursive():this.controllers).forEach(o=>o.reset()),this}onChange(r){return this._onChange=r,this}_callOnChange(r){this.parent&&this.parent._callOnChange(r),this._onChange!==void 0&&this._onChange.call(this,{object:r.object,property:r.property,value:r.getValue(),controller:r})}onFinishChange(r){return this._onFinishChange=r,this}_callOnFinishChange(r){this.parent&&this.parent._callOnFinishChange(r),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:r.object,property:r.property,value:r.getValue(),controller:r})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(r=>r.destroy())}controllersRecursive(){let r=Array.from(this.controllers);return this.folders.forEach(o=>{r=r.concat(o.controllersRecursive())}),r}foldersRecursive(){let r=Array.from(this.folders);return this.folders.forEach(o=>{r=r.concat(o.foldersRecursive())}),r}}class Um{static isWebGLAvailable(){try{const r=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(r.getContext("webgl")||r.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const r=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&r.getContext("webgl2"))}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(r){const o={1:"WebGL",2:"WebGL 2"},t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let x='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const b=document.createElement("div");return b.id="webglmessage",b.style.fontFamily="monospace",b.style.fontSize="13px",b.style.fontWeight="normal",b.style.textAlign="center",b.style.background="#fff",b.style.color="#000",b.style.padding="1.5em",b.style.width="400px",b.style.margin="5em auto 0",t[r]?x=x.replace("$0","graphics card"):x=x.replace("$0","browser"),x=x.replace("$1",o[r]),b.innerHTML=x,b}}const ul=Um,Fm=S=>{let r,o=0,t=1,x=0,b=3,h,d,i,f,g,m,n;const s=127744,l=129535;let c=[];S.preload=()=>{c=S.loadJSON("data/entries.json")},S.setup=()=>{r=c[o].THOUGHT,console.log(r);var a=S.createCanvas(window.innerWidth,window.innerHeight);a.parent("p5Div"),S.colorMode(S.RGB,150),g=S.random(0,255),n=S.random(0,255),m=S.random(0,255),S.width/2,S.height/2,h=S.random(0,S.width),d=S.random(0,S.height),i=20,f=20,S.frameRate(10),S.loadImage("images/1.jpeg")},S.draw=()=>{if(S.fill(g,m,n),S.random(0,1)<.15?S.stroke(g,m,n):S.noStroke(),S.textFont("Times New Roman"),S.textSize(i),c[o]){let a=c[o].THOUGHT;S.text(a.substring(0,x+1),h,d,200,300);const u=S.int(S.map(g,0,255,s,l)),y=String.fromCodePoint(u);S.textSize(f),S.text(y,m/255*S.width,n/255*S.height),x++,x>a.length+b&&(i=S.map(a.length,1,258,30,5),f=S.map(a.length,1,258,100,30),h=S.random(0,.75*S.width),d=S.random(0,.95*S.height),S.randomSeed(x),g=S.random(255),m=S.random(255),n=S.random(255),x=0,console.log(o%3),(o%3==0||o==0)&&(console.log("yes"),S.loadImage("images/"+t+".jpeg",p=>{S.image(p,S.random(0,S.width*.8),S.random(0,S.height*.8),p.width/10,p.height/10)}),t++),o++,S.filter(S.BLUR,2))}}};new Tm(Fm);ul.isWebGL2Available()===!1&&document.body.appendChild(ul.getWebGL2ErrorMessage());let jn,uo,Lr,Ti;function Nm(){jn=new ql({alpha:!0}),jn.setPixelRatio(window.devicePixelRatio),jn.setClearColor(16777215,1),jn.setSize(window.innerWidth,window.innerHeight),document.getElementById("container").appendChild(jn.domElement),uo=new wm,Lr=new Sr(45,window.innerWidth/window.innerHeight,.1,500),Lr.position.set(-.032749,-.04540059,-.063753303559),Lr.rotation.set(2.5227725,-.39629804,2.8733322898);const S=128,r=new Uint8Array(S*S*S);let o=0;const t=.05,x=new Am,b=new qe;for(let l=0;l<S;l++)for(let c=0;c<S;c++)for(let a=0;a<S;a++){const u=1-b.set(a,c,l).subScalar(S/2).divideScalar(S).length();r[o]=(128+128*x.noise(a*t/1.5,c*t,l*t/1.5))*u*u,o++}const h=new Pl(r,S,S,S);h.format=wl,h.minFilter=pr,h.magFilter=pr,h.unpackAlignment=1,h.needsUpdate=!0;const d=`
        in vec3 position;

        uniform mat4 modelMatrix;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform vec3 cameraPos;

        out vec3 vOrigin;
        out vec3 vDirection;

        void main() {
            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

            vOrigin = vec3( inverse( modelMatrix ) * vec4( cameraPos, 1.0 ) ).xyz;
            vDirection = position - vOrigin;

            gl_Position = projectionMatrix * mvPosition;
        }
    `,i=`
        precision highp float;
        precision highp sampler3D;

        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;

        in vec3 vOrigin;
        in vec3 vDirection;

        out vec4 color;

        uniform vec3 base;
        uniform sampler3D map;

        uniform float threshold;
        uniform float range;
        uniform float opacity;
        uniform float steps;
        uniform float frame;

        uint wang_hash(uint seed)
        {
                seed = (seed ^ 61u) ^ (seed >> 16u);
                seed *= 9u;
                seed = seed ^ (seed >> 4u);
                seed *= 0x27d4eb2du;
                seed = seed ^ (seed >> 15u);
                return seed;
        }

        float randomFloat(inout uint seed)
        {
                return float(wang_hash(seed)) / 4294967296.;
        }

        vec2 hitBox( vec3 orig, vec3 dir ) {
            const vec3 box_min = vec3( - 0.5 );
            const vec3 box_max = vec3( 0.5 );
            vec3 inv_dir = 1.0 / dir;
            vec3 tmin_tmp = ( box_min - orig ) * inv_dir;
            vec3 tmax_tmp = ( box_max - orig ) * inv_dir;
            vec3 tmin = min( tmin_tmp, tmax_tmp );
            vec3 tmax = max( tmin_tmp, tmax_tmp );
            float t0 = max( tmin.x, max( tmin.y, tmin.z ) );
            float t1 = min( tmax.x, min( tmax.y, tmax.z ) );
            return vec2( t0, t1 );
        }

        float sample1( vec3 p ) {
            return texture( map, p ).r;
        }

        float shading( vec3 coord ) {
            float step = 0.01;
            return sample1( coord + vec3( - step ) ) - sample1( coord + vec3( step ) );
        }

        vec4 linearToSRGB( in vec4 value ) {
            return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
        }

        void main(){
            vec3 rayDir = normalize( vDirection );
            vec2 bounds = hitBox( vOrigin, rayDir );

            if ( bounds.x > bounds.y ) discard;

            bounds.x = max( bounds.x, 0.0 );

            vec3 p = vOrigin + bounds.x * rayDir;
            vec3 inc = 1.0 / abs( rayDir );
            float delta = min( inc.x, min( inc.y, inc.z ) );
            delta /= steps;

            // Jitter

            // Nice little seed from
            // https://blog.demofox.org/2020/05/25/casual-shadertoy-path-tracing-1-basic-camera-diffuse-emissive/
            uint seed = uint( gl_FragCoord.x ) * uint( 1973 ) + uint( gl_FragCoord.y ) * uint( 9277 ) + uint( frame ) * uint( 26699 );
            vec3 size = vec3( textureSize( map, 0 ) );
            float randNum = randomFloat( seed ) * 2.0 - 1.0;
            p += rayDir * randNum * ( 1.0 / size );

            //

            vec4 ac = vec4( base, 0.0 );

            for ( float t = bounds.x; t < bounds.y; t += delta ) {

                float d = sample1( p + 0.5 );

                d = smoothstep( threshold - range, threshold + range, d ) * opacity;

                float col = shading( p + 0.5 ) * 3.0 + ( ( p.x + p.y ) * 0.25 ) + 0.2;

                ac.rgb += ( 1.0 - ac.a ) * d * col;

                ac.a += ( 1.0 - ac.a ) * d;

                if ( ac.a >= 0.95 ) break;

                p += rayDir * delta;

            }

            color = linearToSRGB( ac );

            if ( color.a == 0.0 ) discard;

        }
    `,f=new fi(1,1,1),g=new Sm({glslVersion:io,uniforms:{base:{value:new Ut(7965344)},map:{value:h},cameraPos:{value:new qe},threshold:{value:.35},opacity:{value:.04},range:{value:.09},steps:{value:200},frame:{value:0}},vertexShader:d,fragmentShader:i,side:dr,transparent:!0});Ti=new Qr(f,g),uo.add(Ti);const m={threshold:.35,opacity:.04,range:.09,steps:200};function n(){g.uniforms.threshold.value=m.threshold,g.uniforms.opacity.value=m.opacity,g.uniforms.range.value=m.range,g.uniforms.steps.value=m.steps}const s=new yo;s.add(m,"threshold",0,1,.01).onChange(n),s.add(m,"opacity",0,1,.01).onChange(n),s.add(m,"range",0,1,.01).onChange(n),s.add(m,"steps",0,200,1).onChange(n),window.addEventListener("resize",Bm)}function Bm(){Lr.aspect=window.innerWidth/window.innerHeight,Lr.updateProjectionMatrix(),jn.setSize(window.innerWidth,window.innerHeight)}var Zl=0,Kl=0,dl=0,hl=0,fl=window.innerWidth/2;function Gm(S){Zl=S.clientX-fl,Kl=S.clientY-fl}new qe;window.addEventListener("mousemove",Gm);Nm();Jl();function Jl(){Ti.material.uniforms.cameraPos.value.copy(Lr.position),Ti.rotation.y=-performance.now()/2e3,dl=(1-Zl)*.002,hl=(1-Kl)*.002,Lr.rotation.x+=.005*(hl-Lr.rotation.x),Lr.rotation.y+=.005*(dl-Lr.rotation.y),Ti.material.uniforms.frame.value++,jn.render(uo,Lr),requestAnimationFrame(Jl)}
//# sourceMappingURL=index-91a5f81c.js.map
